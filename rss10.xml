<?xml version="1.0"?>
<rdf:RDF
	xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:foaf="http://xmlns.com/foaf/0.1/"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns="http://purl.org/rss/1.0/"
>
<channel rdf:about="http://planet.sympy.org/">
	<title>Planet SymPy</title>
	<link>http://planet.sympy.org/</link>
	<description>Planet SymPy - http://planet.sympy.org/</description>

	<items>
		<rdf:Seq>
			<rdf:li rdf:resource="http://asmeurersympy.wordpress.com/?p=1204" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2013/01/25/Commutative-Unification" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2013/01/17/LogPy-Facts-Relations" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2013/01/14/LogPy-Introduction" />
			<rdf:li rdf:resource="http://brianegranger.com/?p=261" />
			<rdf:li rdf:resource="http://brianegranger.com/?p=249" />
			<rdf:li rdf:resource="tag:fseoane.net/blog,2013-01-04:2013/memory-plots-with-memory_profiler/" />
			<rdf:li rdf:resource="http://asmeurersympy.wordpress.com/?p=1168" />
			<rdf:li rdf:resource="http://asmeurersympy.wordpress.com/?p=1165" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/12/11/Statistical-Simplification" />
			<rdf:li rdf:resource="tag:fseoane.net/blog,2012-12-08:2012/singular-value-decomposition-in-scipy/" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/12/03/Characteristic-Functions" />
			<rdf:li rdf:resource="http://brianegranger.com/?p=235" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/11/24/Kalman-Filter" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/11/23/BuildingComputations" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/11/21/Computations" />
			<rdf:li rdf:resource="http://rhoforsympy.wordpress.com/?p=286" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/11/10/GeneratingBLAS-PreliminaryResults" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/11/09/BranchingStrategies" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/11/07/Strategies" />
			<rdf:li rdf:resource="http://rhoforsympy.wordpress.com/?p=277" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/11/01/Unification" />
			<rdf:li rdf:resource="http://gilbertgede.wordpress.com/2012/10/29/google-summer-of-code-mentor-summit-2012/" />
			<rdf:li rdf:resource="http://matthewrocklin.com/blog//work/2012/10/29/Matrix-Computations" />
			<rdf:li rdf:resource="http://blog.krastanov.org/?p=561" />
			<rdf:li rdf:resource="tag:fseoane.net/blog,2012-10-23:2012/learning-to-rank-with-scikit-learn-the-pairwise-transform/" />
			<rdf:li rdf:resource="http://sympystats.wordpress.com/?p=273" />
			<rdf:li rdf:resource="tag:blogger.com,1999:blog-2520472460430880330.post-1520965087387896738" />
			<rdf:li rdf:resource="http://brianegranger.com/?p=215" />
			<rdf:li rdf:resource="http://asmeurersympy.wordpress.com/?p=1160" />
			<rdf:li rdf:resource="http://rhoforsympy.wordpress.com/?p=266" />
			<rdf:li rdf:resource="http://asmeurersympy.wordpress.com/?p=1154" />
			<rdf:li rdf:resource="http://asmeurersympy.wordpress.com/?p=1122" />
			<rdf:li rdf:resource="http://amakelov.wordpress.com/?p=512" />
			<rdf:li rdf:resource="http://www.catchmrbharath.in/programming/2012/08/19/gsoc-last-week" />
			<rdf:li rdf:resource="http://blog.catchmrbharath.in/programming/2012/08/19/gsoc-last-week" />
			<rdf:li rdf:resource="http://amakelov.wordpress.com/?p=484" />
			<rdf:li rdf:resource="http://rhoforsympy.wordpress.com/?p=251" />
			<rdf:li rdf:resource="http://scolobb.wordpress.com/?p=384" />
			<rdf:li rdf:resource="http://angadhsympy.wordpress.com/?p=420" />
			<rdf:li rdf:resource="http://krastanov.wordpress.com/?p=555" />
			<rdf:li rdf:resource="http://amakelov.wordpress.com/?p=445" />
			<rdf:li rdf:resource="http://scolobb.wordpress.com/?p=357" />
			<rdf:li rdf:resource="http://www.catchmrbharath.in/programming/2012/08/05/gsoc-week-11" />
			<rdf:li rdf:resource="http://catchmrbharath.github.com/programming/2012/08/05/gsoc-week-11" />
			<rdf:li rdf:resource="http://blog.catchmrbharath.in/programming/2012/08/05/gsoc-week-11" />
			<rdf:li rdf:resource="http://angadhsympy.wordpress.com/2012/08/04/gsoc-blog-post-58/" />
			<rdf:li rdf:resource="http://rhoforsympy.wordpress.com/?p=235" />
			<rdf:li rdf:resource="http://krastanov.wordpress.com/?p=551" />
			<rdf:li rdf:resource="http://amakelov.wordpress.com/?p=429" />
			<rdf:li rdf:resource="http://rhoforsympy.wordpress.com/?p=222" />
			<rdf:li rdf:resource="http://scolobb.wordpress.com/?p=308" />
			<rdf:li rdf:resource="http://angadhsympy.wordpress.com/?p=305" />
			<rdf:li rdf:resource="http://www.catchmrbharath.in/programming/2012/07/23/gsoc-week-9" />
			<rdf:li rdf:resource="http://catchmrbharath.github.com/programming/2012/07/23/gsoc-week-9" />
			<rdf:li rdf:resource="http://blog.catchmrbharath.in/programming/2012/07/23/gsoc-week-9" />
			<rdf:li rdf:resource="http://amakelov.wordpress.com/?p=391" />
			<rdf:li rdf:resource="http://krastanov.wordpress.com/?p=464" />
			<rdf:li rdf:resource="http://krastanov.wordpress.com/?p=475" />
			<rdf:li rdf:resource="http://krastanov.wordpress.com/?p=524" />
		</rdf:Seq>
	</items>
</channel>

<item rdf:about="http://asmeurersympy.wordpress.com/?p=1204">
	<title>Aaron Meurer: Tip for debugging SymPy with PuDB</title>
	<link>https://asmeurersympy.wordpress.com/2013/01/28/tip-for-debugging-sympy-with-pudb/</link>
	<content:encoded>&lt;p&gt;Usually, when I debug SymPy code with &lt;a href=&quot;http://asmeurersympy.wordpress.com/2010/06/04/pudb-a-better-python-debugger/&quot;&gt;PuDB&lt;/a&gt;, I create a script that calls the code, then I put a &lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;import pudb; pudb.set_trace()
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;in the SymPy library code where I want to start debugging. But this is annoying, first because I have to create the script, and second, because I have to modify the library code, and there’s always the risk of accidentally commiting that.  Also, if I want to start debugging somewhere else, I have to edit the files and change it.&lt;/p&gt;
&lt;p&gt;Well, I just figured out a better way.  &lt;del datetime=&quot;2013-01-30T02:32:19+00:00&quot;&gt;First, if you haven’t already, add an alias like this in your bash config file (&lt;code&gt;~/.profile&lt;/code&gt; or &lt;code&gt;~/.bashrc&lt;/code&gt;):&lt;code&gt;alias pudb='python -m pudb.run&lt;/code&gt;&lt;/del&gt; &lt;i&gt;As of &lt;a href=&quot;https://github.com/inducer/pudb/pull/54&quot;&gt;this pull request&lt;/a&gt;, this is no longer necessary.  A &lt;code&gt;pudb&lt;/code&gt; script is installed automatically with PuDB.&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;This will let you run &lt;code&gt;pudb script.py&lt;/code&gt; to debug &lt;code&gt;script.py&lt;/code&gt;.  Next, start PuDB. It doesn’t matter with what. You can just run &lt;code&gt;touch test.py&lt;/code&gt;, and then &lt;code&gt;pudb test.py&lt;/code&gt;.  &lt;/p&gt;
&lt;p&gt;Now, press &lt;code&gt;m&lt;/code&gt;, and navigate to where in the library code you want to start debugging.  It also helps to use &lt;code&gt;/&lt;/code&gt; to search the current file and &lt;code&gt;L&lt;/code&gt; to jump to a specific line.  When you get to the line where you want to start debugging, press &lt;code&gt;b&lt;/code&gt; to set a breakpoint. You can do this in multiple places if you want.&lt;/p&gt;
&lt;p&gt;Now, you just have to start &lt;code&gt;isympy&lt;/code&gt; from within PuDB.  Just run &lt;code&gt;pudb bin/isympy&lt;/code&gt;, and immediately press &lt;code&gt;c&lt;/code&gt; to jump to the interactive prompt.  Now, run whatever code you want to debug.  When it gets to the breakpoint, PuDB will open, and you can start debugging.  If you type &lt;code&gt;c&lt;/code&gt; to continue, it will go back to isympy. But the next time you run something that hits the breakpoint, it will open PuDB again. &lt;/p&gt;
&lt;p&gt;This trick works because breakpoints are saved to file (at &lt;code&gt;~/.config/pudb/saved-breakpoints&lt;/code&gt;). In fact, if you want, you can just modify that file in the first step.  You can edit your saved breakpoints in the bottom right pane of PuDB. &lt;/p&gt;
&lt;p&gt;When you are done and you type &lt;code&gt;Ctrl-D&lt;/code&gt; PuDB will pop-up again, asking if you want to quit.  That’s because it was running the whole time, underneath isympy.  Just press &lt;code&gt;q&lt;/code&gt;.  Note that you should avoid pressing &lt;code&gt;q&lt;/code&gt; while debugging, or else PuDB will quit, and you will be left with just normal isympy (it won’t break at your breakpoints any more).  Actually, if you do this, but doing &lt;code&gt;Ctrl-D&lt;/code&gt; still opens the PuDB prompt, you can just press “Restart”, and it should start working again.  Note that “Restart” will not actually reset isympy:  all your saved variables will still be the same, and any changes to the library code will not be reloaded.  To do that, you have to completely exit and start over again.&lt;/p&gt;
&lt;p&gt;Of course, there is nothing SymPy specific about this trick. As long as you have a script that acts as an entry point to an interactive console for your application, you can use it.  If you just use IPython, you can use something like &lt;code&gt;pudb /bin/ipython&lt;/code&gt; (replace &lt;code&gt;/bin/ipython&lt;/code&gt; with the output of &lt;code&gt;which ipython&lt;/code&gt;).  &lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1204/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1204/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;https://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1204&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2013-01-28T00:43:49+00:00</dc:date>
	<dc:creator>Aaron Meurer</dc:creator>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2013/01/25/Commutative-Unification">
	<title>MRocklin: Commutative Unification</title>
	<link>http://matthewrocklin.com/blog//work/2013/01/25/Commutative-Unification</link>
	<content:encoded>&lt;p&gt;LogPy now supports commutative and associative pattern matching on expression trees. This is a standard requirement for computer algebra systems like SymPy but not a traditional feature of logic programming systems.&lt;/p&gt;

&lt;p&gt;Pattern-matching in LogPy is expressed by the &lt;code&gt;eq&lt;/code&gt; goal. This goal relies on unification to match trees of tuples. Unification is a computational cornerstone of LogPy. Traditionally &lt;code&gt;eq&lt;/code&gt; performs exact structural pattern matching. For example&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;(1, x, (5, y, 7))  matches  (1, (2, 3, 4), (5, 6, 7))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;with the following substitution&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{x: (2, 3, 4), y: 6}&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;expression_trees&quot;&gt;Expression Trees&lt;/h2&gt;

&lt;p&gt;We traditionally represent both mathematical expressions and computer programs with expression trees. For example \(y * (1 + x)\) can be visualized as follows&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/arith-expr.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We represent this expression in LogPy with tuples. The head/first element of each tuple is an operation like &lt;code&gt;add&lt;/code&gt; or &lt;code&gt;mul&lt;/code&gt;. All subsequent elements (the tail) are the arguments/children of that expression.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;y * (x + 1) -&amp;gt; (mul, y, (add, x, 1))&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;matching_expression_trees&quot;&gt;Matching Expression Trees&lt;/h2&gt;

&lt;p&gt;This form is exactly what we use for unification. We could match this pattern against the following expression, treating &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; as wildcard logic variables&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;(mul, y, (add, x, 1))  matches  (mul, (pow, 2, 10), (add, 3, 1))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;with the following substitution&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{x: 3, y: (pow, 2, 10)}&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;But what about the following?&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;(add, x, 1)  matches?  (add, 1, 3)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This doesn’t unify. While the first (&lt;code&gt;add&lt;/code&gt;, &lt;code&gt;add&lt;/code&gt;) and second (&lt;code&gt;x&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;) elements can match (if &lt;code&gt;{x: 1}&lt;/code&gt;) the third elements (&lt;code&gt;1&lt;/code&gt;, &lt;code&gt;3&lt;/code&gt;) will not.&lt;/p&gt;

&lt;p&gt;As mathematicians however we know that because &lt;code&gt;add&lt;/code&gt; is commutative these expressions should match if we are allowed to rearrange the terms in the tail and match &lt;code&gt;1&lt;/code&gt; to &lt;code&gt;1&lt;/code&gt; and &lt;code&gt;x&lt;/code&gt; to &lt;code&gt;3&lt;/code&gt;. LogPy doesn’t know this by default. LogPy is not a math library.&lt;/p&gt;

&lt;h2 id=&quot;building_commutative_equality&quot;&gt;Building Commutative Equality&lt;/h2&gt;

&lt;p&gt;Given the goal &lt;code&gt;seteq&lt;/code&gt; for set unification and a goal &lt;code&gt;conso&lt;/code&gt; for head-tail pattern matching we build &lt;code&gt;eq_commutative&lt;/code&gt; for commutative matching.&lt;/p&gt;

&lt;p&gt;Example of &lt;code&gt;seteq&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;run(0, x, seteq((1, 2, x), (3, 1, 2)))  # seteq matches within sets
(3,)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Example of &lt;code&gt;conso&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;run(0, head,  conso(head, tail, (1, 2, 3, 4)))
(1,)
run(0, tail,  conso(head, tail, (1, 2, 3, 4)))
((2, 3, 4),)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Given these two it is easy to build &lt;code&gt;eq_commutative&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eq_commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vtail&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;conso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vtail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;seteq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vtail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That is we require all of the following (&lt;code&gt;lall&lt;/code&gt; is logical all).&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;u&lt;/code&gt; must be of the form &lt;code&gt;(operation, utail....)&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;&lt;code&gt;v&lt;/code&gt; must be of the form &lt;code&gt;(operation, vtail....)&lt;/code&gt;. Note that the same variable &lt;code&gt;operation&lt;/code&gt; must be the same in both expressions.&lt;/li&gt;

&lt;li&gt;The operation must be commutative (operations register themselves beforehand, see example below)&lt;/li&gt;

&lt;li&gt;&lt;code&gt;utail&lt;/code&gt; and &lt;code&gt;vtail&lt;/code&gt; must unify under set equality.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I am glossing over some details here, like “what about associative matching” and “how does &lt;code&gt;seteq&lt;/code&gt; work?” but this should give a high-level view of how logic programs are made. Lets see an example of associative/commutative matching&lt;/p&gt;

&lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt;

&lt;p&gt;This is the &lt;a href=&quot;https://github.com/logpy/logpy/blob/master/examples/commutative.py&quot;&gt;standard example&lt;/a&gt; for commutative matching found in the &lt;a href=&quot;https://github.com/logpy/logpy&quot;&gt;repository&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy.assoccomm&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq_assoccomm&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy.assoccomm&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;associative&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Define some dummy Operationss&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'add'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'mul'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Register that these ops are commutative using the facts system&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;associative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;associative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Define some wild variables&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'x'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'y'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Two expressions to match&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# (1 + x) * y&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# 2 * (3 + 1)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;         
&lt;span class=&quot;c&quot;&gt;# ((3, 2),) #  meaning one result with x matches to 3 and y matches to 2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;With this LogPy contains all of the functionality of SymPy’s old &lt;code&gt;unify&lt;/code&gt; module but in a cleaner and much more extensible form.&lt;/p&gt;</content:encoded>
	<dc:date>2013-01-25T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2013/01/17/LogPy-Facts-Relations">
	<title>MRocklin: LogPy - Facts and Relations</title>
	<link>http://matthewrocklin.com/blog//work/2013/01/17/LogPy-Facts-Relations</link>
	<content:encoded>&lt;p&gt;In &lt;a href=&quot;http://mrocklin.github.com/blog/work/2013/01/14/LogPy-Introduction/&quot;&gt;my last post&lt;/a&gt; I introduced &lt;a href=&quot;http://github.com/logpy/logpy&quot;&gt;LogPy&lt;/a&gt;, a library for logic and relational programming in Python. In this post I show how LogPy can be used as a quick and dirty in-memory database.&lt;/p&gt;

&lt;h2 id=&quot;data&quot;&gt;Data&lt;/h2&gt;

&lt;p&gt;As an example we’ll look at the 50 states in the US. We know two things about each state.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Is it coastal? For example California (CA) is coastal because it is next to the Pacific Ocean, Arizona (AZ) is not.&lt;/li&gt;

&lt;li&gt;To which other states is it adjacent? For example California (CA) is adjacent to Oregon (OR), Arizona (AZ) and Nevada (NV).&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;We express data in LogPy using relations and facts&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;here we have asserted the fact that &lt;code&gt;'CA'&lt;/code&gt; is coastal. Lets quickly do this for all of the coastal states&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coastal_states&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'WA,OR,CA,TX,LA,MS,AL,GA,FL,SC,NC,VA,MD,DE,NJ,NY,CT,RI,MA,ME,NH,AK,HI'&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coastal_states&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Adjacency is only slightly more complex to express. The following code asserts that California (CA) is adjacent to Arizona (AZ) and that California (CA) is adjacent to Oregon (OR).&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'AZ'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'OR'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we need a list of all adjacent pairs of states. Fortunately &lt;a href=&quot;http://writeonly.wordpress.com/2009/03/20/adjacency-list-of-states-of-the-united-states-us/&quot;&gt;someone else&lt;/a&gt; has already compiled such a list. His data looks like this&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;AK
AL,MS,TN,GA,FL
AR,MO,TN,MS,LA,TX,OK
AZ,CA,NV,UT,CO,NM
CA,OR,NV,AZ
CO,WY,NE,KS,OK,NM,AZ,UT
...&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Each line says that the first element is adjacent to the following ones. So for example Alaska (AK) is adjacent to no states and California (CA) is adjacent to Oregon (OR), Nevada (NV) and Arizona (AZ). We can parse this file and assert the relevant facts with fairly standard Python code&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'examples/data/adjacent-states.txt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# lines like 'CA,OR,NV,AZ'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;adjlist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjlist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;                   &lt;span class=&quot;c&quot;&gt;# ['CA', 'OR', 'NV', 'AZ']&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:]&lt;/span&gt;        &lt;span class=&quot;c&quot;&gt;# 'CA', ['OR', 'NV', 'AZ']&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# e.g. 'CA' is adjacent to 'OR',&lt;/span&gt;
                                    &lt;span class=&quot;c&quot;&gt;#      'CA' is adjacent to 'NV', etc...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;queries&quot;&gt;Queries&lt;/h2&gt;

&lt;p&gt;Once have asserted the relevant facts we can run queries with the logical expressions of LogPy. Recall from the &lt;a href=&quot;http://mrocklin.github.com/blog/work/2013/01/14/LogPy-Introduction/&quot;&gt;last post&lt;/a&gt; that we can use relations to express logical goals and use &lt;code&gt;run&lt;/code&gt; to search for cases that satisfy those goals. Here are two simple queries&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'NY'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# is California adjacent to New York?&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# all states next to California&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'OR'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'NV'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'AZ'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can construct more complex queries with multiple goals. In SQL the following queries would require a &lt;code&gt;JOIN&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# create second variable for complex queries&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'TX'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# all coastal states next to Texas&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;                 &lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'LA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;           &lt;span class=&quot;c&quot;&gt;# five states that border a coastal state&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;                 &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'VT'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'AL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'WV'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'DE'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'MA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'TN'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# all states adjacent to Tennessee&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;                 &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'FL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#        and adjacent to Florida&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'GA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'AL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Facts and relations are currently indexed by default, yielding relatively fast query times.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;LogPy provides a declarative interface to query complex data. Data is stored as facts/tuples and queries are expressed as logical goals. This system is expressive and can match SQL in many respects. The use of Logic programming languages for database queries has roots in &lt;a href=&quot;http://en.wikipedia.org/wiki/Datalog&quot;&gt;Datalog&lt;/a&gt; a subset of Prolog designed for databases.&lt;/p&gt;</content:encoded>
	<dc:date>2013-01-17T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2013/01/14/LogPy-Introduction">
	<title>MRocklin: Introducing LogPy</title>
	<link>http://matthewrocklin.com/blog//work/2013/01/14/LogPy-Introduction</link>
	<content:encoded>&lt;p&gt;&lt;a href=&quot;http://github.com/logpy/logpy&quot;&gt;LogPy&lt;/a&gt; is a library for logic and relational programming in Python. This post contains some introductory examples.&lt;/p&gt;

&lt;h2 id=&quot;informative_examples&quot;&gt;Informative Examples&lt;/h2&gt;

&lt;p&gt;LogPy enables the expression of relations and the search for values which satisfy them. The following code is the “Hello, world!” of logic programming. It asks for &lt;code&gt;1&lt;/code&gt; number, &lt;code&gt;x&lt;/code&gt;, such that &lt;code&gt;x == 5&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;membero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conde&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Multiple variables and multiple goals can be used simultaneously. The following code asks for a number x such that &lt;code&gt;x == z&lt;/code&gt; and &lt;code&gt;z == 3&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;LogPy uses &lt;a href=&quot;http://en.wikipedia.org/wiki/Unification_%28computer_science%29&quot;&gt;unification&lt;/a&gt;, an advanced form of pattern matching, to match within expression trees. The following code asks for a number, x, such that &lt;code&gt;(1, 2) == (1, x)&lt;/code&gt; holds.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The above examples use &lt;code&gt;eq&lt;/code&gt;, a &lt;em&gt;goal&lt;/em&gt; to state that two expressions are equal. Other goals exist. &lt;code&gt;membero(item, coll)&lt;/code&gt;, a goal, states that &lt;code&gt;item&lt;/code&gt; is a member of &lt;code&gt;coll&lt;/code&gt;, a collection.&lt;/p&gt;

&lt;p&gt;The following example uses &lt;code&gt;membero&lt;/code&gt; twice to ask for 2 values of x, such that x is a member of &lt;code&gt;(1, 2, 3)&lt;/code&gt; &lt;em&gt;and&lt;/em&gt; that x is a member of &lt;code&gt;(2, 3, 4)&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;membero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# x is a member of (1, 2, 3)&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;membero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# x is a member of (2, 3, 4)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can write other fancier goals too. Here is a list of all prime numbers within &lt;code&gt;1..10&lt;/code&gt;. &lt;code&gt;primo&lt;/code&gt; depends on the traditional &lt;code&gt;prime&lt;/code&gt; and &lt;code&gt;isprime&lt;/code&gt; functions found in &lt;code&gt;sympy&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy.math&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;primo&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;membero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;primo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Want just a few primes? Here are five numbers that satisfy the &lt;code&gt;primo&lt;/code&gt; goal&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;primo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;relations&quot;&gt;Relations&lt;/h2&gt;

&lt;p&gt;We often want to state and then query data. Logic programming represents data a set of facts and represents queries with logical goals. In the following examples we assert some facts about the Simpsons family, construct queries through logical goals and then run the queries to obtain results.&lt;/p&gt;

&lt;p&gt;The following code defines a &lt;code&gt;parent&lt;/code&gt; relation and uses it to state who fathered whom.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Lisa'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Abe'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We ask some questions using the &lt;code&gt;parent&lt;/code&gt; relation as a goal constructor. Who is Bart’s father?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# one x such that x is a parent of Bart&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# two xs such that Homer is a parent of x&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Lisa'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can use intermediate variables for more complex queries. Who is Bart’s grandfather?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
              &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Abe'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can express the grandfather relationship separately. In this example we use &lt;code&gt;conde&lt;/code&gt;, a goal constructor for logical &lt;em&gt;and&lt;/em&gt; and &lt;em&gt;or&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;grandparent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conde&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grandparent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Abe,'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;grandparent&lt;/code&gt; demonstrates that we can construct complex relations programmatically. How would you define sibling? How about uncle or aunt? How about descendant?&lt;/p&gt;

&lt;p&gt;If you’d like to play with LogPy you can install it with pip or easy_install using&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;pip install logic&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or clone it directly from github&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;git clone git@github.com:logpy/logpy.git&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Source is available at &lt;a href=&quot;http://github.com/logpy/logpy/&quot;&gt;http://github.com/logpy/logpy/&lt;/a&gt;, design input and contributions are much appreciated.&lt;/p&gt;

&lt;h2 id=&quot;logic_programming_in_general&quot;&gt;Logic Programming in General&lt;/h2&gt;

&lt;p&gt;Logic and relational programming are making a comeback. They were popular in the 80s, died during the AI dark ages, and have recently begun a resurgence in the functional programming community. Logic programs write music, search databases, write numeric algorithms, and build testing frameworks. It is expressive for a wide class of problems.&lt;/p&gt;

&lt;p&gt;The design of LogPy is based off of &lt;code&gt;miniKanren&lt;/code&gt;, a simple and powerful implementation in Scheme popularized through the &lt;code&gt;core.logic&lt;/code&gt; Clojure library.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://kanren.sourceforge.net/&quot;&gt;miniKanren&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;https://github.com/clojure/core.logic&quot;&gt;core.logic&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Logic_programming&quot;&gt;Wikipedia article on Logic Programming&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;https://github.com/clojure/core.logic/wiki/A-Core.logic-Primer&quot;&gt;core.logic primer&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content:encoded>
	<dc:date>2013-01-14T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://brianegranger.com/?p=261">
	<title>Brian Granger: Personal Reflections on Features and Scope</title>
	<link>http://brianegranger.com/?p=261</link>
	<content:encoded>&lt;p&gt;In a previous &lt;a href=&quot;http://brianegranger.com/?p=249&quot; target=&quot;_blank&quot; title=&quot;previous blog post&quot;&gt;blog post&lt;/a&gt;, I talked about the problem of ever expanding feature sets in open source software projects.  I discussed the hidden  costs and liabilities of adding new features and proposed practical ways of tackling these problems.  However, I think that story is incomplete.  Of course open source projects will want to add features, even some with massive costs and liabilities, but how should that happen?  How should projects decide which features to add?  What criteria should be used?  To answer these questions, I want to describe a few of my own experiences in dealing with features and scope in IPython and PyZMQ.&lt;/p&gt;
&lt;p&gt;First, &lt;a href=&quot;http://ipython.org/&quot; target=&quot;_blank&quot; title=&quot;IPython&quot;&gt;IPython&lt;/a&gt;.  Anyone who is familiar with IPython will probably read my previous blog post and say, “wait, hasn’t IPython experienced a massive amount of feature creep over the last few years.  It started out as a simple terminal based interactive shell, but has grown to include parallel computing, a web application and a GUI application.  The IPython developers, including yourself, have shown little, if any restraint in adding features.”&lt;/p&gt;
&lt;p&gt;Back in 2004, IPython was the 3 year old child of Fernando Perez.  At that point, it was already a popular, enhanced interactive Python shell.  I had started to work on parallel computing libraries for Python, when Fernando visited me at Santa Clara University (we had been classmates in graduate school starting in 1996).  We stayed up until 3 am talking about Python’s rapidly evolving ecosystem of scientific computing libraries, interactive computing environments and the future of IPython and my parallel computing libraries.  IPython was a fantastic tool, but both of us wanted more.  We wanted a web based IPython Notebook.  We wanted integrated parallel computing tools.  We began to see that all of these things required the same architecture: a stateful computational engine, the IPython Kernel, that could run user code and send back results over a network.  Once that existed, everything else could be layered on top, even the terminal based IPython.  The vision that emerged that night was specific and, while ambitious, was ultimately finite.  As Fernando describes, in this &lt;a href=&quot;http://blog.fperez.org/2012/01/ipython-notebook-historical.html&quot; target=&quot;_blank&quot; title=&quot;History of the IPython Notebook&quot;&gt;blog post&lt;/a&gt;, it took us ~6 years and multiple attempts to build this architecture.  Now, we have a terminal, QtConsole, web-based notebook and parallel computing library all built on top of a common IPython Kernel and message specification.  While these things may look like feature creep from the outside, they have been part of a deliberate and calculated plan.&lt;/p&gt;
&lt;p&gt;What I have learned from this experience is that it is absolutely critical for the core developers of an open source project to consciously and deliberately set the scope and vision for the project.  This vision can even be ambitious.  Once that scope is set, choosing which features to add becomes easy: to first order, you add features within that scope.  That doesn’t mean you don’t count the cost of those features or that you add all possible features within the scope.  The scope provides an upper bound on the feature set.  So why does IPython have parallel computing tools?  Because we set the scope early on to include that.&lt;/p&gt;
&lt;p&gt;Second, &lt;a href=&quot;https://github.com/zeromq/pyzmq&quot; target=&quot;_blank&quot; title=&quot;PyZMQ&quot;&gt;PyZMQ&lt;/a&gt;.  As we developed IPython’s architecture, we realized that we needed better networking/messaging libraries.  This led to the creation of PyZMQ in 2010, which is a set of Python bindings for &lt;a href=&quot;http://www.zeromq.org/&quot; target=&quot;_blank&quot; title=&quot;ZeroMQ&quot;&gt;ZeroMQ&lt;/a&gt;.  Notice the scope of PyZMQ: Python bindings for ZeroMQ.  Fast forward to Spring of 2012.  In the course of working on the IPython Notebook, I had written some additional code for building PyZMQ based web applications: a module for simple, PyZMQ-based RPC and a module for running Tornado event handlers in a scalable and distributed manner using PyZMQ.  I submitted two &lt;a href=&quot;https://github.com/zeromq/pyzmq/pull/177&quot; target=&quot;_blank&quot; title=&quot;pull request 1&quot;&gt;pull&lt;/a&gt; &lt;a href=&quot;https://github.com/zeromq/pyzmq/pull/174&quot; target=&quot;_blank&quot; title=&quot;pull request 2&quot;&gt;requests&lt;/a&gt; to include these modules in PyZMQ.  One of them was quickly merged and the other languished in code review for almost a year.  Min began to sense that these modules, while useful, were not a good match for inclusion in PyZMQ.  Their API was very unstable and they hadn’t been well tested.  They would require a much faster release cycle compared to the rest of PyZMQ, which was very stable and well tested.  This Christmas break, I finally woke up to the real problem.  These modules were outside the scope of PyZMQ.  They involved an implicit and undiscussed increase in scope from “Python bindings for ZeroMQ” to “A general place for ZeroMQ based tools in Python.”  Once I realized this, Min and I pulled them out of PyZMQ and created separate projects for them.  Again, the important thing is to set the scope of a project.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;</content:encoded>
	<dc:date>2013-01-09T18:44:01+00:00</dc:date>
	<dc:creator>Brian Granger</dc:creator>
</item>
<item rdf:about="http://brianegranger.com/?p=249">
	<title>Brian Granger: Features and Scope in Open Source Software</title>
	<link>http://brianegranger.com/?p=249</link>
	<content:encoded>&lt;p&gt;Follow up: I have created another blog post to clarify some of these issues &lt;a href=&quot;http://brianegranger.com/?p=261&quot; target=&quot;_blank&quot; title=&quot;Follow up post.&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The IPython project, through UC Berkeley and Cal Poly San Luis Obispo, just received a $1.15 million dollar grant from the Alfred P. Sloan Foundation to develop the IPython Notebook over a two year period.  More details about this grant can be found on the &lt;a href=&quot;http://ipython.org/sloan-grant.html&quot; target=&quot;_blank&quot; title=&quot;IPython website&quot;&gt;IPython website&lt;/a&gt;.  This is really exciting for us because, so far, we have mostly developed IPython in our spare time.  But I think there is also a potential danger here.  &lt;strong&gt;The danger is that we will add lots of new features.&lt;/strong&gt;  What, you say, lots of features will endanger IPython?  What else are you going to do with a million dollars if you are not going to add lots of new features?  The answer is simple: we are going to add as few features as possible and knock each of them out of the park.  The future of the project depends on this.&lt;/p&gt;
&lt;p&gt;This is a topic that I have been thinking about a lot lately: how do open source projects decide which features to implement.  Most active open source projects I am involved in see a continual stream of new features.  Just hop onto the GitHub pages for &lt;a href=&quot;https://github.com/sympy/sympy/pulls&quot; target=&quot;_blank&quot; title=&quot;SymPy GitHub&quot;&gt;SymPy&lt;/a&gt; or &lt;a href=&quot;https://github.com/ipython/ipython/pulls&quot; target=&quot;_blank&quot; title=&quot;IPython GitHub&quot;&gt;IPython&lt;/a&gt; and watch the activity.  Anyone with the right skill set can fork a project on GitHub and submit a pull request within a few hours.  Amazingly, this is happening all the time; apparently people love to code.  While each new feature is an asset for the project, it also brings a cost, or liability, with it.  If a project ignores those costs, it can have long term, detrimental effects on the project.  What are these liabilities and costs associated with new features?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Each new feature adds complexity to the code base.  Complexity makes a code base less hackable, maintainable, extensible.&lt;/li&gt;
&lt;li&gt;Each new feature increases the “bug surface” of the project.  When a feature also adds complexity, those bugs become harder to find and fix.&lt;/li&gt;
&lt;li&gt;Each new feature requires documentation to be written and maintained.&lt;/li&gt;
&lt;li&gt;Each new feature requires support over email or IRC.&lt;/li&gt;
&lt;li&gt;Endless feature expansion, or feature creep, requires developers to specialize.  They can’t follow the entire project, so they have to focus on a subset that can fit into their brain and schedule.&lt;/li&gt;
&lt;li&gt;Each new feature has to be tested on a wide variety on platforms (Linux, Mac, Windows) and environments (PyPy, Python 2, Python 3).&lt;/li&gt;
&lt;li&gt;Each new feature adds complexity to the user experience.  Sometimes it’s the documentation, other times the UI or configuration options.&lt;/li&gt;
&lt;li&gt;When you spend on one feature, another feature or bug fix didn’t get worked on.  If you didn’t prioritize things beforehand, you just spent time on something less important to your users.  Either that or you did shoddy work while trying to do it all.&lt;/li&gt;
&lt;li&gt;Features multiply like bunnies.  How many times have you heard, “wow, that new feature is really cool, could you make it do X as well?”&lt;/li&gt;
&lt;li&gt;Features are easy to add, difficult to remove.  Once you add a feature, you are stuck with the costs and liabilities.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For a typical open source project, what percentage of features get used regularly by most users?  15%? 40%?.  Let’s be really optimistic and say that number is 60%.  That means that developers are spending 40% of their time and effort on features that don’t really get used.  Ouch.  Then why do open source projects keep adding features without counting the cost?  I think there are a number of factors that lead to this, but one in particular comes to my mind.  &lt;strong&gt;It is hard to say no.&lt;/strong&gt;  When an end user submits a feature request over email or on GitHub issues, it is hard to tell them, “great idea, but we are not doing that.”  It is even more difficult to say no after someone submits a pull request that implements a new feature.  It is difficult to build a vibrant project community if you are always saying no in these contexts.&lt;/p&gt;
&lt;p&gt;Clearly, we need a better way of limiting feature expansion in open source projects.  What can we do to better evaluate the hidden costs of adding new features so we can make informed, strategic decisions about which features to add?  Here are some ideas that have emerged out of my recent reading and conversations.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create a wiki page for your project, where you list all of the features you are &lt;strong&gt;not&lt;/strong&gt; going to implement.  Publicize this list, discuss it and make it an important part of the development workflow.  Another way of phrasing this is to decide on a finite scope for the project.  When you are going through this exercise, come up with an initial scope and then force yourself to reduce it.&lt;/li&gt;
&lt;li&gt;Make features fight hard to be accepted and implemented.  Communicate to the community and developers that the default answer to feature requests is no (it’s not personal!) and don’t even consider implementation until the much of the community is crying “we absolutely must have this.” Even then, you don’t have to say yes.&lt;/li&gt;
&lt;li&gt;Create a workflow that separates feature requests from other tickets/issues.  When people submit new feature requests, encourage discussion, but don’t automatically promote the feature to the project’s todo list.  Then you can promote them, as needed, to the project’s todo list in an informed and prioritized manner.&lt;/li&gt;
&lt;li&gt;When new feature requests appear, discuss the specific costs and liabilities associated with the feature.  Build this thinking into your development DNA.&lt;/li&gt;
&lt;li&gt;Communicate to the community and its developers why it is important to fight against feature expansion.  Focus on the benefits of waging this war: smaller, simpler code base, fewer bugs, more time to focus on important features, easier to support, etc.&lt;/li&gt;
&lt;li&gt;Remove features that have too great a cost or that few users actually use.  Maybe even create a special exception you can raise (FeatureReductionWarning?) to help people transition away from them.&lt;/li&gt;
&lt;li&gt;Refactor the codebase to reduce complexity.  While this doesn’t directly reduce the number of features, it can mitigate the cost of existing and future features.  Extra bonus points if you can implement a new feature while dramatically reducing the complexity of the code base.&lt;/li&gt;
&lt;li&gt;Improve testing.  Again, this is mitigation.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you discuss and evaluate features, here are some questions you can ask yourself and the community:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What fraction of your user base will use the feature?  How often will they use it?  If it won’t be used by most of your users, just say no.&lt;/li&gt;
&lt;li&gt;Can the feature be added as a third party plugin or library?  This is especially useful if the new feature would increase the overall scope of the project, but make a great standalone project.&lt;/li&gt;
&lt;li&gt;How difficult will it be to test, debug, document, and maintain the feature?  What fraction of your development team is capable or interested in doing this work?  If the maintanence is huge and only one person is willing to do it, it is time to rethink it.&lt;/li&gt;
&lt;li&gt;Can you implement the functionality in a more limited, but much simpler manner?  Developers absolutely love to implement features in the most general way possible.  It requires developer discipline and focus to resist this temptation.&lt;/li&gt;
&lt;li&gt;One way that developers over engineer things is by making every conceivable thing configurable.  Can you simplify the feature by removing configurability and just choosing great defaults?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One thoughtful discussion of these issues is in the book &lt;a href=&quot;http://gettingreal.37signals.com/&quot; target=&quot;_blank&quot; title=&quot;Getting Real&quot;&gt;Getting Real&lt;/a&gt;, by some of the folks at &lt;a href=&quot;http://37signals.com/&quot; target=&quot;_blank&quot; title=&quot;37signals&quot;&gt;37signals&lt;/a&gt;.  They propose something quite radical for handling feature requests in commercial web applications.  Here is what they say: “How do you manage them?  You don’t.  Just read them and then throw them away.”  Their experience is that the important features will keep coming up.  When this happens, you know they are important and you don’t have to write them down to keep track of them.  This is definitely my experience in developing the IPython Notebook.  The most important features, the ones that I am going to spend time on this year, are probably not written down anywhere, but everyone in the community is discussing them and couldn’t possibly forget them.  So why on earth do we currently have &lt;a href=&quot;https://github.com/ipython/ipython/issues?direction=desc&amp;amp;labels=type-enhancement&amp;amp;page=1&amp;amp;sort=updated&amp;amp;state=open&quot; target=&quot;_blank&quot; title=&quot;177 open enhancement issues for IPython&quot;&gt;177 open new feature issues&lt;/a&gt; (we call them “enhancements”) on IPython’s GitHub site?&lt;/p&gt;
&lt;p&gt;In an open source project, I don’t think it makes sense to literally throw away feature requests; sometimes the ensuing discussion is valuable and worth preserving.  But what about allowing the discussion to occur, for example in the context of a GitHub issue, but then closing the issue.  If someone wants to re-open the feature request at a later time to voice their support, they should be encouraged to do that.  But again, once discussion stops, the issue should be re-closed.  As this process repeats itself, the community is essentially voting for the features they want.  This would also dramatically reduce the number of open issues, which helps developers to better manage the active work on the project.&lt;/p&gt;
&lt;p&gt;I don’t think this is the only way to manage feature requests intelligently in an open source project.  I would love to hear other ideas.  How are you managing these things in your own projects?  I realize that I am far from the first person to write about these things.  What other resources do you know of that address these problems?&lt;/p&gt;</content:encoded>
	<dc:date>2013-01-09T03:49:20+00:00</dc:date>
	<dc:creator>Brian Granger</dc:creator>
</item>
<item rdf:about="tag:fseoane.net/blog,2013-01-04:2013/memory-plots-with-memory_profiler/">
	<title>Fabian Pedregosa: Memory plots with memory_profiler</title>
	<link>http://fseoane.net/blog/2013/memory-plots-with-memory_profiler/</link>
	<content:encoded>&lt;p&gt;Besides performing a line-by-line analysis of memory consumption,
&lt;a href=&quot;http://pypi.python.org/pypi/memory_profiler&quot;&gt;&lt;code&gt;memory_profiler&lt;/code&gt;&lt;/a&gt;
exposes some functions that allow to retrieve the memory consumption
of a function in real-time, allowing e.g. to visualize the memory
consumption of a given function over time.&lt;/p&gt;
&lt;p&gt;The function to be used is &lt;code&gt;memory_usage&lt;/code&gt;. The first argument
specifies what code is to be monitored. This can represent either an
external process or a Python function. In the case of an external
process the first argument is an integer representing its process
identifier (PID). In the case of a Python function, we need pass the
function and its arguments to memory_usage. We do this by passing the
tuple &lt;code&gt;(f, args, kw)&lt;/code&gt; that specifies the function, its position
arguments as a tuple and its keyword arguments as a dictionary,
respectively. This will be then executed by &lt;code&gt;memory_usage&lt;/code&gt; as
&lt;code&gt;f(*args, **kw)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let's see this with an example. Take as function NumPy's
&lt;a href=&quot;http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.pinv.html&quot;&gt;pseudo-inverse function&lt;/a&gt;. Thus
&lt;code&gt;f = numpy.linalg.pinv&lt;/code&gt; and &lt;code&gt;f&lt;/code&gt; takes one positional argument (the
matrix to be inverted) so &lt;code&gt;args = (a,)&lt;/code&gt; where &lt;code&gt;a&lt;/code&gt; is the matrix to be
inverted. Note that args must be a tuple consisting of the different
arguments, thus the parenthesis around &lt;code&gt;a&lt;/code&gt;. The third item is a
dictionary &lt;code&gt;kw&lt;/code&gt; specifying the keyword arguments. Here kw is optional
and is omitted.&lt;/p&gt;
&lt;div class=&quot;codehilite&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;memory_profiler&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# create a random matrix&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pinv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;57.02734375&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;55.0234375&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;57.078125&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This has given me a list specifying at different time intervals &lt;code&gt;(t0,
t0 + .01, t0 + .02, ...)&lt;/code&gt; at which the measurements where taken. Now I can
use that to for example plot the memory consumption as a function of
time:&lt;/p&gt;
&lt;div class=&quot;codehilite&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pylab&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pl&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'linalg.pinv'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Time (in seconds)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Memory consumption (in MB)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;http://fseoane.net/blog/static/images/2013/plot_memory_pinv.png&quot; alt=&quot;Memory plot&quot; /&gt;&lt;/p&gt;
&lt;p&gt;This will give the memory usage of a single function across time, which 
might be interesting for example to detect temporaries that would be
created during the execution. &lt;/p&gt;
&lt;p&gt;Another use case for &lt;code&gt;memory_usage&lt;/code&gt; would be to see how memory behaves
as input data gets bigger. In this case we are interested in memory as
a function of the input data. One obvious way we can do this is by
calling the same function each time with a different input and take as
memory consumption the maximum consumption over time. This way we will
have a memory usage for each input.&lt;/p&gt;
&lt;div class=&quot;codehilite&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pinv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;mf&quot;&gt;29.22&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;30.10&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;40.66&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;53.96&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is now possible to plot these results as a function of the
dimensions.&lt;/p&gt;
&lt;div class=&quot;codehilite&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pylab&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pl&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;memory_profiler&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dims&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linspace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pinv_mem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dims&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i_dim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pinv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pinv_mem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i_dim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pinv_mem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'np.linalg.pinv'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Memory (in MB)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Dimension of the square matrix'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'upper left'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'tight'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;http://fseoane.net/blog/static/images/2013/plot_memory_pinv_2.png&quot; alt=&quot;Memory plot&quot; /&gt;&lt;/p&gt;</content:encoded>
	<dc:date>2013-01-03T23:00:00+00:00</dc:date>
	<dc:creator>Fabian Pedregosa</dc:creator>
</item>
<item rdf:about="http://asmeurersympy.wordpress.com/?p=1168">
	<title>Aaron Meurer: Emacs: One year later</title>
	<link>https://asmeurersympy.wordpress.com/2013/01/01/emacs-one-year-later/</link>
	<content:encoded>&lt;p&gt;As readers of this blog may remember, back in 2011, I decided to move to a command-line based editor. For roughly two weeks in December, 2011, I exclusively used Vim, and for the same amount of time in January, 2012, I used exclusively Emacs. I had used a little of each editor in the past, but this was my first time using them to do true editing work. My experiences are chronicled in my blog posts (parts &lt;a href=&quot;http://asmeurersympy.wordpress.com/2011/12/20/vim-vs-emacs-part-1/&quot; title=&quot;1&quot;&gt;1&lt;/a&gt;, &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/01/03/vim-vs-emacs-part-2/&quot; title=&quot;2&quot;&gt;2&lt;/a&gt;, &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/01/13/vim-vs-emacs-part-3/&quot; title=&quot;3&quot;&gt;3&lt;/a&gt;, and &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/07/09/emacs-7-months-later/&quot; title=&quot;7 months later follow up&quot;&gt;7 months later follow up&lt;/a&gt;).  &lt;/p&gt;
&lt;p&gt;To summarize, I decided to use Emacs, as I found it to be much more intuitive, and much more user-friendly.  Today, January 1, marks the one-year point of my using Emacs as my sole text editor, with some exceptions (notably, I’m currently writing this blog post in the browser).  So I’d like to make some observations:&lt;/p&gt;
&lt;li&gt;Either one of these editors (Vim or Emacs) is going to really suck unless you are willing to make a serious investment in customizing them and installing nice addons. For the second point, Emacs has an advantage, because the philosophy of Vim is to be barebones whereas the philosophy of Emacs is to be featureful, so that in particular many things that were once addons of Emacs are now included in the standard installation.  For customization, on the one hand, Emacs is easier, because it has a nice interface (&lt;code&gt;M-x customize&lt;/code&gt;), but on the other hand, Vim’s scripting language is much easier to hack on than Emacs lisp (I still can’t code in Lisp to save my life; it’s a very challenging programming language).
&lt;p&gt;But my point here is that neither has really great defaults. For example, in Emacs, &lt;code&gt;M-space&lt;/code&gt; is bound to &lt;code&gt;just-one-space&lt;/code&gt;, which is great for programming.  What it does is remove all spaces around the cursor, except for one.  But to be really useful, it also should include newlines.  It doesn’t do this by default.  Rather, you have to call it with a negative argument.  So to be really useful, you have to add&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: plain;&quot;&gt;(defun just-one-space-with-newline ()
  &quot;Call just-one-space with a negative argument&quot;
  (interactive)
  (just-one-space -1))

(global-set-key (kbd &quot;M-SPC&quot;) 'just-one-space-with-newline)
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;to your &lt;code&gt;.emacs&lt;/code&gt; file.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Emacs has great features, but I always have to look them up.  Or rather, I have to look up the keyboard shortcuts for them.  I only have the keyboard shortcuts memorized for the things I do every day.  I even ended up forgetting really important ones, like &lt;code&gt;M-w&lt;/code&gt; (Emacs version of copy).  And if a feature involves several keystrokes to access, forget about it (for example, rectangular selection, or any features of special modes).  If I use a new mode, e.g., for some file type that I rarely edit (like HTML), I might as well not have any of the features, other than the syntax highlighting, because I either don’t know what they are, or even if I know that they should exist (like automatic tag completion for html), I have no idea how to access them.
&lt;p&gt;There’s really something to be said about GUI editors, which give these things to users in a way that they don’t have to memorize anything.  Perhaps I should try to use the menu more.  Or maybe authors of addons should aim to make features require as little cognitive user interaction as possible (such as the excellent &lt;a href=&quot;http://cx4a.org/software/auto-complete/manual.html&quot;&gt;&lt;code&gt;auto-complete-mode&lt;/code&gt;&lt;/a&gt; I mentioned in &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/01/13/vim-vs-emacs-part-3/&quot;&gt;part 3&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt; I mention this because it is one of the things I complained about with Vim, that the keybindings were too hard to memorize.  Of course, the difference with Vim is that one has to memorize keybindings to do even the most basic of editing tasks, whereas with Emacs one can always fall back to more natural things like &lt;code&gt;Shift-Arrow Key&lt;/code&gt; to select text or &lt;code&gt;Delete&lt;/code&gt; to delete the character under the cursor (and yes, I know you can rebind this stuff in Vim; I refer you to the previous bullet point). &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;I mentioned at the end of part 3 that Vim might still be useful to learn, as vi is available literally anywhere that you have POSIX.  I honestly don’t think I would be able to use vi or vim if I had to, customization or no, unless I had my keyboard cheat sheet and a decent amount of time.  If I’m stuck on a barebones system and I can’t do anything about it, I’ll use nano/pico before I use vi.  It’s not that I hate vi. I just can’t do anything with it. It is the same to me now as it was before I used it in-depth.  I have forgotten all the keyboard shortcuts, except for &lt;code&gt;ESC&lt;/code&gt; and &lt;code&gt;i&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;I don’t use &lt;code&gt;emacsclient&lt;/code&gt; any more.  Ever since I got my new retina MacBook Pro, I don’t need it any more, because with the solid state drive starting Emacs from scratch is instantaneous.  I’m glad to get rid of it, because it had some seriously annoying glitches.&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;alias e=emacs&lt;/code&gt; to your Bash config file (&lt;code&gt;.profile&lt;/code&gt; or &lt;code&gt;.bashrc&lt;/code&gt;). It makes life much easier. “emacs” is not an easy word to type, at least on QWERTY keyboards.&lt;/li&gt;
&lt;li&gt;I still feel like I am not nearly as efficient in Emacs as I could be. On the one hand, I know there are built-in features (like rectangular selection) that I do not take advantage of enough.  I have been a bit lazy with customization: there are a handful of things that I do often that require several keystrokes, but I still haven’t created custom keyboard shortcuts for (off the top of my head: copying and pasting to/from the Mac OS X clipboard and rigidly indenting/dedenting a block of text (&lt;code&gt;C-u 4 C-x TAB&lt;/code&gt;, actually &lt;code&gt;C-c u 4 C-x TAB&lt;/code&gt;, since I did the sensible thing and rebound &lt;code&gt;C-u&lt;/code&gt; to clear to the previous newline, and bound &lt;code&gt;universal-argument&lt;/code&gt; to &lt;code&gt;C-c u&lt;/code&gt;) come to mind).
&lt;p&gt;I feel as if I were to watch someone who has used Emacs for a long time that I would learn a lot of tricks.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;I really should learn Emacs lisp. There are a lot of little customizations that I would like to make, but they are really niche, and can only be done programmatically.  But who has the time to learn a completely new programming language (plus a whole library, as just knowing Lisp is useless if you don’t know the proper Emacs funtions and variables and coding styles)?&lt;/li&gt;
&lt;li&gt;I’ve still not found a good visual browser for jumping to function definitions in a file (mostly Python function definitions, but also other kinds of headers for other kinds of files).  The best I’ve found is &lt;code&gt;imenu&lt;/code&gt;. If you know of anything, please let me know.  One thing I really liked about Vim was the &lt;a href=&quot;http://www.vim.org/scripts/script.php?script_id=273&quot;&gt;tag list&lt;/a&gt; extension, which did this perfectly (thanks to commenter &lt;a href=&quot;http://asmeurersympy.wordpress.com/2011/12/20/vim-vs-emacs-part-1/#comment-424&quot;&gt;Scott&lt;/a&gt; for pointing it out to me).  I’ve been told that Cedet has something like this, but every time I try to install it, I run into some issues that just seem like way too much work (I don’t remember what they are, it won’t compile or something, or maybe it just wants to do just way too much and I can’t figure out how to disable everything except for the parts I want).  &lt;/li&gt;
&lt;li&gt;If you ever code in C, add the following to your Makefile
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: plain;&quot;&gt;check-syntax:
	$(CC) -o nul $(FLAGS) -S $(CHK_SOURCES)
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;(and if you don’t use a Makefile, start using one now).  This is assuming you have &lt;code&gt;CC&lt;/code&gt; and &lt;code&gt;FLAGS&lt;/code&gt; defined at the top (generally to something like &lt;code&gt;cc&lt;/code&gt; and &lt;code&gt;-Wall&lt;/code&gt;, respectively). Also, add the following to your &lt;code&gt;.emacs&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: plain;&quot;&gt;;; ===== Turn on flymake-mode ====

(add-hook 'c-mode-common-hook 'turn-on-flymake)
(defun turn-on-flymake ()
  &quot;Force flymake-mode on. For use in hooks.&quot;
  (interactive)
  (flymake-mode 1))

(add-hook 'c-mode-common-hook 'flymake-keyboard-shortcuts)
(defun flymake-keyboard-shortcuts ()
  &quot;Add keyboard shortcuts for flymake goto next/prev error.&quot;
  (interactive)
  (local-set-key &quot;\M-n&quot; 'flymake-goto-next-error)
  (local-set-key &quot;\M-p&quot; 'flymake-goto-prev-error))
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;The last part adds the useful keyboard shortcuts &lt;code&gt;M-n&lt;/code&gt; and &lt;code&gt;M-p&lt;/code&gt; to move between errors.  Now, errors in your C code will show up automatically as you type.  If you use the command line version of emacs like I do, and not the GUI version, you’ll also need to install the &lt;a href=&quot;http://www.emacswiki.org/emacs/flymake-cursor.el&quot;&gt;flymake-cursor&lt;/a&gt; module, which makes the errors show up in the mode line, since otherwise it tries to use mouse popups.  You can change the colors using &lt;code&gt;M-x customize-face&lt;/code&gt; (search for “flymake”). &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;I never got flymake to work with LaTeX.  Does anyone know how to do it? It seems it is hardcoded to use MikTeX, the Windows version of LaTeX. I found some stuff, but none of it worked.
&lt;p&gt;Actually, what I really would like is not syntax checking (I rarely make syntax mistakes in LaTeX any more), but rather something that automatically builds the PDF constantly as I type.  That way, I can just look over at the PDF as I am writing (I use an external monitor for this. I highly recommend it if you use LaTeX, especially one of those monitors that swivels to portrait mode).  &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;If you use Mac OS X, you can use the very excellent &lt;a href=&quot;http://pqrs.org/macosx/keyremap4macbook/&quot;&gt;KeyRemap4MacBook&lt;/a&gt; program to make regular Mac OS X programs act more like Emacs.  Mac OS X already has many Emacs shortcuts built in (like &lt;code&gt;C-a&lt;/code&gt;, &lt;code&gt;C-e&lt;/code&gt;, etc.), but that only works in Cocoa apps, and it doesn’t include any meta key shortcuts.  This lets you use additional shortcuts literally everywhere (don’t worry, it automatically doesn’t use them in the Terminal), including an emulator for &lt;code&gt;C-space&lt;/code&gt; and some &lt;code&gt;C-x&lt;/code&gt; commands (like &lt;code&gt;C-x C-s&lt;/code&gt; to &lt;code&gt;Command-s&lt;/code&gt;).  It doesn’t work on context sensitive shortcuts, unfortunately, unless the operating system already supports it with another keyboard shortcut (e.g., it can map &lt;code&gt;M-f&lt;/code&gt; to &lt;code&gt;Option-right arrow&lt;/code&gt;).  For example, it can’t enable moving between paragraphs with &lt;code&gt;C-S-{&lt;/code&gt; and &lt;code&gt;C-S-}&lt;/code&gt;.  If anyone knows how to do that, let me know. &lt;/li&gt;
&lt;li&gt;For about a month this summer, I had to use a Linux laptop, because my Mac broke and my new Mac took a month to arrive (the downside to ordering a new computer immediately after it is announced by Apple).  At this point, my saving of all my customizations to &lt;a href=&quot;http://pqrs.org/macosx/keyremap4macbook/&quot;&gt;GitHub&lt;/a&gt; really helped a lot.  I created a new branch for the Linux computer (because several things in my customizations were Mac specific), and just symlinked the files I wanted.  A hint I can give to people using Linux is to use Konsole.  The Gnome terminal sucks.  One thing I never figured out is how to make Konsole (or any other Terminal for that matter) to send Control-Shift shortcuts to Emacs (see &lt;a href=&quot;http://superuser.com/q/439961/39697&quot; rel=&quot;nofollow&quot;&gt;http://superuser.com/q/439961/39697&lt;/a&gt;).   I don’t use Linux any more at the moment, but if anyone knows what was going on there, add an answer to that question. &lt;/li&gt;
&lt;li&gt;In &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/01/13/vim-vs-emacs-part-3/&quot;&gt;part 3&lt;/a&gt; mentioned that &lt;a href=&quot;http://www.dr-qubit.org/predictive/predictive-user-manual/html/index.php&quot;&gt;predictive mode&lt;/a&gt; was cool, but not very useful.  What it does is basically add tab completion for every word in the English language.  Actually, I’ve found using auto-complete-mode even when editing text (or LaTeX) to be very useful.  Unlike predictive mode, it only guesses words that you’ve already typed  (it turns out that you tend to type the same words over and over, and doubly so if those words are LaTeX math commands).  Also, predictive mode has a set order of words, which supposedly helps to use it with muscle memory, whereas auto-complete-mode tries to learn what words you are more likely to use based on some basic statistical machine-learning.  Also, auto-complete-mode has a much better visual UI and smarter defaults than predictive mode. The result is that it’s actually quite useful and makes typing plain text, as well as LaTeX (actually, pretty much anything, as long as you tend to use the same words repeatedly) much faster.  I recommend enabling auto-complete-mode almost everywhere using hooks, like
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: plain;&quot;&gt;(add-hook 'latex-mode-hook 'auto-complete-mode)
(add-hook 'LaTeX-mode-hook 'auto-complete-mode)
(add-hook 'prog-mode-hook 'auto-complete-mode)
;; etc.
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;At the end of the day, I’m pretty happy with Emacs.  I’ve managed to fix most of the things that make it annoying, and it is orders of magnitude more powerful than any GUI editor or IDE I’ve ever seen, especially at just basic text editing, which is the most important thing (I can always use another program for other things, like debugging or whatever).  The editor uses the basic shortcuts that I am used to, and is quite efficient to write in.  Extensions like auto-complete-mode make using it much faster, though I could use some more extensions to make it even better (namely, a better isearch and a better imenu). Regarding Vim vs. Emacs, I’d like to quote something I said back in my &lt;a href=&quot;http://asmeurersympy.wordpress.com/2011/12/20/vim-vs-emacs-part-1&quot;&gt;first blog post&lt;/a&gt; about Vim over a year ago:&lt;br /&gt;
&lt;blockquote&gt;&lt;p&gt;Vim is great for text &lt;em&gt;editing&lt;/em&gt;, but not so hot for text &lt;em&gt;writing&lt;/em&gt; (unless you always write text perfectly, so that you never need to leave insert mode until you are done typing). Just the simple act of deleting a mistyped word (yes, word, that happens a lot when you are decently fast touch typist) takes several keystrokes, when it should in my opinion only take one (two if you count the meta-key).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Needless to say, I find Emacs to be great for both text editing and text writing. &lt;/p&gt;&lt;/li&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1168/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1168/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;https://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1168&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2013-01-01T09:51:21+00:00</dc:date>
	<dc:creator>Aaron Meurer</dc:creator>
</item>
<item rdf:about="http://asmeurersympy.wordpress.com/?p=1165">
	<title>Aaron Meurer: 2012 in review</title>
	<link>https://asmeurersympy.wordpress.com/2012/12/30/2012-in-review/</link>
	<content:encoded>&lt;p&gt;The WordPress.com stats helper monkeys prepared a 2012 annual report for this blog.&lt;/p&gt;
&lt;p&gt;	&lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/annual-report/&quot;&gt;&lt;img src=&quot;http://www.wordpress.com/wp-content/mu-plugins/annual-reports/img/2012-emailteaser.png&quot; alt=&quot;&quot; width=&quot;100%&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Here’s an excerpt:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;4,329 films were submitted to the 2012 Cannes Film Festival. This blog had &lt;strong&gt;20,000&lt;/strong&gt; views in 2012. If each view were a film, this blog would power 5 Film Festivals&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/annual-report/&quot;&gt;Click here to see the complete report.&lt;/a&gt;&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1165/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1165/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;https://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1165&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-12-30T23:07:19+00:00</dc:date>
	<dc:creator>Aaron Meurer</dc:creator>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/12/11/Statistical-Simplification">
	<title>MRocklin: Statistical Simplification</title>
	<link>http://matthewrocklin.com/blog//work/2012/12/11/Statistical-Simplification</link>
	<content:encoded>&lt;p&gt;&lt;a href=&quot;http://matthewrocklin.com/blog/feed.sympy.xml&quot;&gt;Lawrence Leemis&lt;/a&gt;, a statistician at Williams and Mary, recently published &lt;a href=&quot;http://www.math.wm.edu/~leemis/chart/UDR/UDR.html&quot;&gt;a wonderful interactive visualization&lt;/a&gt; on the reduction relationships of statistical distributions. (found via &lt;a href=&quot;http://www.johndcook.com/blog/2012/12/10/extended-distribution-chart/&quot;&gt;John Cook’s blog&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.math.wm.edu/~leemis/chart/UDR/UDR.html&quot;&gt;&lt;img src=&quot;http://www.johndcook.com/leemis.png&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This excites me because it touches on one of my favorite topics&lt;/p&gt;

&lt;p&gt;&lt;em&gt;How do we reusably encode expert knowledge into computational systems?&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;the_big_challenge&quot;&gt;The Big Challenge&lt;/h2&gt;

&lt;p&gt;Correct use of mathematical information can accelerate important computations by several orders of magnitude. Unfortunately the people who know the mathematics are not always the ones doing the computation. This results in substantial waste.&lt;/p&gt;

&lt;p&gt;How do we integrate expert mathematical knowledge everywhere? One solution is to collaborate more. While collaboration is generally good it doesn’t scale well. As problems become more complex it is more difficult to find all of the necessary experts, especially for smaller relatively unimportant projects. Also, collaboration rarely results in reusable infrastructure. Statistical chemistry projects are rarely applicable to statistical biology problems despite their shared interest in statistics.&lt;/p&gt;

&lt;h2 id=&quot;one_solution__multistage_compilation&quot;&gt;One Solution - Multi-Stage Compilation&lt;/h2&gt;

&lt;p&gt;We could write each expert’s knowledge into a single project and then connect many such projects into a multi-stage compiler. At each each stage we simplify the expression with the knowledge relevant at that stage. We must create a transformation between each pair of connecting stages. Ideally the conceptual distance between connected stages is small and so these transformations are easy.&lt;/p&gt;

&lt;p&gt;This isn’t clearly the right solution. It is difficult to chain many small projects together and end up with efficient code. You need to find the right sequence of intermediate layers that are able to communicate mathematical information down to the lowest-level of computational code.&lt;/p&gt;

&lt;h2 id=&quot;relevance_to_sympystats&quot;&gt;Relevance to SymPy.stats&lt;/h2&gt;

&lt;p&gt;SymPy.stats endeavors to be a transformation in such a toolchain. It converts stochastic expressions into integral expressions.&lt;/p&gt;

&lt;p&gt;The surrounding infrastructure looks like this&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/stats-simp.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;When SymPy expressions are imbued with random variables they form stochastic expressions. Sympy.stats transforms these into integral expressions which are then again converted through a variety of methods, either numeric (like Monte Carlo) or again symbolic.&lt;/p&gt;

&lt;p&gt;Each stage within this pipeline presents us with the opportunity to simplify the expression with knowledge relevant to that stage. For example at the input and output SymPy Expr layers we make algebraic and trigonometric simplifications like the following&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;X + X -&amp;gt; 2*X
sin(x)**2 + cos(x)**2 -&amp;gt; 1 &lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;At the integration stage we might separate multivariate integrals if possible or use integration by parts.&lt;/p&gt;

&lt;p&gt;Notice that there is no such simplification self-loop at the &lt;code&gt;Stochastic Expr&lt;/code&gt; node. This is where the information in Leemis’ chart would fit.&lt;/p&gt;

&lt;h3 id=&quot;a_failing_of_sympystats&quot;&gt;A Failing of sympy.stats&lt;/h3&gt;

&lt;p&gt;Currently sympy.stats does not simplify stochastic expressions with expert knowledge; it converts directly from stochastic expressions to integral expressions without first applying known simplifications like what is encoded in Leemis’ chart. This causes some fairly embarassing failures&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.stats&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Normal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# A standard normal random variable&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;density&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unevaluated&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;integral&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Any statistician could tell you that the expression &lt;code&gt;X**2&lt;/code&gt; has a Chi Squared distribution which has a simple and well understood density. This relation is commonly known and commonly occurs in practice.&lt;/p&gt;

&lt;p&gt;Because sympy.stats doesn’t know this it blindly takes the expression &lt;code&gt;density(X**2)&lt;/code&gt; and converts it directly into an integral. The resulting integral is difficult and stumps the integration routines.* In this case knowing basic statistics would have turned an impossible problem into a trivial one.&lt;/p&gt;

&lt;h3 id=&quot;future_work&quot;&gt;Future work&lt;/h3&gt;

&lt;p&gt;We should encode relations on distributions into SymPy. The knowledge in Leemis’s chart could be written down as a knowledgebase of known transformations. Transformations like the following could solve our immediate problem.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Normal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;StandardNormal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;StandardNormal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ChiSquared&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;StandardNormal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ChiSquared&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ChiSquared&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Each stage in the compilation pipeline presents us with an opportunity to apply expert knowledge. The &lt;code&gt;Stochastic Expr&lt;/code&gt; stage is such an opportunity of which we are not currently taking advantage.&lt;/p&gt;

&lt;p&gt;Leemis’s chart is written declaratively, highlighting which logical transformations are possible under which conditions. The new modules on &lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/01/Unification/&quot;&gt;unification&lt;/a&gt; and &lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/07/Strategies/&quot;&gt;strategies&lt;/a&gt; should provide all of the necessary infrastructure to translate Leemis’ chart to functioning code. Writing a minimal simpliication scheme for the above problem might be as simple as&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;#    rewriterule(from-pattern, to-pattern, wilds)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Normal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;StandardNormal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wilds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StandardNormal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ChiSquared&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wilds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;p3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StandardNormal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ChiSquared&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
                 &lt;span class=&quot;n&quot;&gt;ChiSquared&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wilds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;statsimp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bottom_up&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;multiplex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If anyone is interested in this I’d be happy to help out. This is the sort of project that really excites me but that I can’t currently justify time-wise.&lt;/p&gt;</content:encoded>
	<dc:date>2012-12-11T08:00:00+00:00</dc:date>
</item>
<item rdf:about="tag:fseoane.net/blog,2012-12-08:2012/singular-value-decomposition-in-scipy/">
	<title>Fabian Pedregosa: Singular Value Decomposition in SciPy</title>
	<link>http://fseoane.net/blog/2012/singular-value-decomposition-in-scipy/</link>
	<content:encoded>&lt;p&gt;SciPy contains two methods to compute the singular value decomposition (SVD) of a matrix: &lt;code&gt;scipy.linalg.svd&lt;/code&gt; and &lt;code&gt;scipy.sparse.linalg.svds&lt;/code&gt;. In this post I'll compare both methods for the task of computing the full SVD of a large dense matrix.&lt;/p&gt;
&lt;p&gt;The first method, &lt;code&gt;scipy.linalg.svd&lt;/code&gt;, is perhaps the best known and uses the linear algebra library &lt;a href=&quot;http://www.netlib.org/lapack/&quot;&gt;LAPACK&lt;/a&gt; to handle the computations. This implements the Golub-Kahan-Reisch algorithm &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;http://fseoane.net/blog/feed/#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, which is accurate and highly efficient with a cost of O(n^3) floating-point operations &lt;sup id=&quot;fnref:2&quot;&gt;&lt;a href=&quot;http://fseoane.net/blog/feed/#fn:2&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;The second method is &lt;code&gt;scipy.sparse.linalg.svds&lt;/code&gt; and despite it's name it works fine also for dense arrays. This implementation is based on the &lt;a href=&quot;http://www.caam.rice.edu/software/ARPACK/&quot;&gt;ARPACK&lt;/a&gt; library and consists of an iterative procedure that finds the SVD decomposition by reducing the problem to an eigendecomposition on the array X -&amp;gt; dot(X.T, X). This method is usually very effective when the input matrix X is sparse or only the largest singular values are required. There are other SVD solvers that I did not consider, such as &lt;a href=&quot;http://pypi.python.org/pypi/sparsesvd/&quot;&gt;sparsesvd&lt;/a&gt; or &lt;a href=&quot;http://pysparse.sourceforge.net/introduction.html#jdsym&quot;&gt;pysparse.jdsym&lt;/a&gt;, but my points for the sparse solve probably hold for those packages too since they both implement iterative algorithms based on the same principles.&lt;/p&gt;
&lt;p&gt;When the input matrix is dense and all the singular values are required, the first method is usually more efficient. To support this statement I've created a little benchmark: timings for both methods as a function of the size of the matrices. Notice that we are in a case that is clearly favorable to the &lt;code&gt;linalg.svd&lt;/code&gt;: after all &lt;code&gt;sparse.linalg.svds&lt;/code&gt; was not created with this setting in mind, it was created for sparse matrices or dense matrices with some special structure. We will see however that even in this setting it has interesting advantages.&lt;/p&gt;
&lt;p&gt;I'll create random square matrices with different sizes and plot the timings for both methods. For the benchmarks I used SciPy v0.12 linked against Intel Math Kernel Library v11. Both methods are single-threaded (I had to set OMP_NUM_THREADS=1 so that MKL does not try to parallelize the computations). &lt;a href=&quot;https://gist.github.com/4250756#file-svd_timing-py&quot;&gt;[code]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fseoane.net/blog/static/uploads/2012/svd_timing.png&quot; alt=&quot;svd timings&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Lower timings are better, so this gives &lt;code&gt;scipy.linalg.svd&lt;/code&gt; as clear winner. However, this is just part of the story. What this graph doesn't show is that this method is winning at the price of allocating a huge amount of memory for temporary computations. If we now plot the memory consumption for both methods under the same settings, the story is completely different. &lt;a href=&quot;https://gist.github.com/4250756#file-svd_memory-py&quot;&gt;[code]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fseoane.net/blog/static/uploads/2012/svd_memory.png&quot; alt=&quot;svd memory&quot; /&gt;&lt;/p&gt;
&lt;p&gt;The memory requirements of &lt;code&gt;scipy.linalg.svd&lt;/code&gt; scale with the number of dimensions, while for the sparse version the amount of allocated memory is constant. Notice that we are measuring the amount of total memory used, it is thus natural to see a slight increase in memory consumption since the input matrix is bigger on each iteration.&lt;/p&gt;
&lt;p&gt;For example, in my applications, I need to compute the SVD of a matrix for whom the needed workspace does not fit in memory. In cases like this, the sparse algorithm (&lt;code&gt;sparse.linalg.svds&lt;/code&gt;) can come in handy: the timing is just a factor worse (but I can easily parallelize jobs) and the memory requirements for this method is peanuts compared to the dense version.&lt;/p&gt;
&lt;div class=&quot;footnote&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn:1&quot;&gt;
&lt;p&gt;Calculating the singular values and pseudo-inverse of a matrix, &lt;em&gt;Golub, Gene H., Kahan, William&lt;/em&gt;, 1965, &lt;a href=&quot;http://www.jstor.org/stable/2949777&quot;&gt;JSTOR&lt;/a&gt; &lt;a href=&quot;http://fseoane.net/blog/feed/#fnref:1&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 1 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:2&quot;&gt;
&lt;p&gt;A Survey of Singular Value Decomposition Methods and Performance Comparison of Some Available Serial Codes, &lt;em&gt;Plassman, Gerald E.&lt;/em&gt; 2005 &lt;a href=&quot;http://research.microsoft.com/en-us/um/people/zhoulin/2005-a%20survey%20of%20singular%20value%20decomposition_plassman.pdf&quot;&gt;PDF&lt;/a&gt; &lt;a href=&quot;http://fseoane.net/blog/feed/#fnref:2&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 2 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content:encoded>
	<dc:date>2012-12-07T23:00:00+00:00</dc:date>
	<dc:creator>Fabian Pedregosa</dc:creator>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/12/03/Characteristic-Functions">
	<title>MRocklin: Characteristic Functions</title>
	<link>http://matthewrocklin.com/blog//work/2012/12/03/Characteristic-Functions</link>
	<content:encoded>&lt;p&gt;In a recent post, &lt;a href=&quot;http://jpktd.blogspot.com/2012/12/characteristic-functions-and-scipystats.html&quot;&gt;Characteristic Functions and scipy.stats&lt;/a&gt;, &lt;a href=&quot;https://github.com/josef-pkt&quot;&gt;Josef Perktold&lt;/a&gt; created functions for the &lt;a href=&quot;http://en.wikipedia.org/wiki/Characteristic_function&quot;&gt;characteristic functions&lt;/a&gt; of the &lt;a href=&quot;http://en.wikipedia.org/wiki/Normal_distribution&quot;&gt;Normal&lt;/a&gt; (easy) and &lt;a href=&quot;http://en.wikipedia.org/wiki/Student%27s_t-distribution&quot;&gt;t&lt;/a&gt; (hard) distributions. The t-distribution is challenging because the solution involves special functions and has numerically challenging behavior around 0 for high degrees of freedom. Some quotes&lt;/p&gt;

&lt;p&gt;&lt;em&gt;The characteristic function for the normal distribution is easy, but looking at the characteristic function of the t-distribution, I wish someone had translated it into code already&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Since I haven’t seen it yet, I sat down and tried it myself. I managed to code the characteristic function of the t-distribution, but it returns NaNs when it is evaluated close to zero for large df. I didn’t find a Bessel “k” function that works in this case&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;He then includes his code and discusses a particular application of the characteristic function which I won’t discuss here.&lt;/p&gt;

&lt;h2 id=&quot;symbolic_solution&quot;&gt;Symbolic Solution&lt;/h2&gt;

&lt;p&gt;Josef wished that this code had been written already. Characteristic functions aren’t built into SymPy but we may be able to derive them automatically.&lt;/p&gt;

&lt;p&gt;Wikipedia says that the characteristic function \(\phi(t)\) of a random variable &lt;code&gt;X&lt;/code&gt; is defined as follows&lt;/p&gt;

&lt;p&gt;$$ \phi_X(t) = E(e^{itX}) $$&lt;/p&gt;

&lt;p&gt;It equal to the expectation of &lt;code&gt;exp(i*t*X)&lt;/code&gt;. Lets do this in SymPy&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.stats import *
&amp;gt;&amp;gt;&amp;gt; mu = Symbol('mu', bounded=True)
&amp;gt;&amp;gt;&amp;gt; sigma = Symbol('sigma', positive=True, bounded=True)
&amp;gt;&amp;gt;&amp;gt; t = Symbol('t', positive=True)

&amp;gt;&amp;gt;&amp;gt; X = Normal('X', mu, sigma)  # Normal random variable
&amp;gt;&amp;gt;&amp;gt; simplify(E(exp(I*t*X)))     # Expectation of exp(I*t*X)
              2  2
             σ ⋅t 
     ⅈ⋅μ⋅t - ─────
               2  
   ℯ             &lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I was actually pretty surprised that this worked as smoothly as it did. SymPy stats wasn’t designed for this.&lt;/p&gt;

&lt;p&gt;Here are some gists for the &lt;a href=&quot;https://gist.github.com/4186685&quot;&gt;Cauchy&lt;/a&gt; and &lt;a href=&quot;https://gist.github.com/4186709&quot;&gt;Student-T&lt;/a&gt; distributions. Cauchy simplifies down pretty well but the Student-T characteristic function has a few special functions included.&lt;/p&gt;

&lt;h2 id=&quot;behavior_near_zero&quot;&gt;Behavior near zero&lt;/h2&gt;

&lt;p&gt;Josef says that the behavior of the characteristic function of the t distribution near zero for high degrees of freedom (the nu parameter) is challenging to compute numerically. Can SymPy handle this symbolically?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'nu'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'t'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;StudentT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;simplify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://goo.gl/a6xcw&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The bold scripted I’s are besseli functions. We restrict this expression to a specific number of degrees of freedom, setting &lt;code&gt;nu = 50&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; simplify(E(exp(I*t*X))).subs(nu, 50)  # replace nu with 50
         ⎛         ___  ⎞            ⎛        ___  ⎞
∞⋅besseli⎝-25, 5⋅╲╱ 2 ⋅t⎠ - ∞⋅besseli⎝25, 5⋅╲╱ 2 ⋅t⎠&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Whoops, simple substitution at that number of degrees of freedom fails, giving us infinities. What if we build the expression with &lt;code&gt;50&lt;/code&gt; from the beginning? This gives the integration routines more information when they compute the expectation.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; X = StudentT('X', 50)
&amp;gt;&amp;gt;&amp;gt; simplify(E(exp(I*t*X)))
        ⎛              │     2  -ⅈ⋅π⎞           ⎛              │     2  ⅈ⋅π⎞
╭─╮3, 1 ⎜   1/2        │ 25⋅t ⋅ℯ    ⎟   ╭─╮3, 1 ⎜   1/2        │ 25⋅t ⋅ℯ   ⎟
│╶┐     ⎜              │ ───────────⎟ + │╶┐     ⎜              │ ──────────⎟
╰─╯1, 3 ⎝25, 0, 1/2    │      2     ⎠   ╰─╯1, 3 ⎝25, 0, 1/2    │     2     ⎠
────────────────────────────────────────────────────────────────────────────
                        1240896803466478878720000⋅π                         &lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The solution is in terms of &lt;a href=&quot;http://en.wikipedia.org/wiki/Meijer-G&quot;&gt;Meijer-G&lt;/a&gt; functions. Can we evaluate this close to &lt;code&gt;t = 0&lt;/code&gt;?&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; simplify(E(exp(I*t*X))).subs(t, 1e-6).evalf()
0.999999999999479 + 1.56564942264937e-29⋅ⅈ

&amp;gt;&amp;gt;&amp;gt; simplify(E(exp(I*t*X))).subs(t, 1e-30).evalf()  
1.0 - 1.2950748484704e-53⋅ⅈ&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is where scipy’s special functions failed in Josef’s post, yielding infinity instead of 1.&lt;/p&gt;

&lt;p&gt;And finally we plot the behavior around 0.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; plot(re(simplify(E(exp(I*t*X)))), (t, 1e-7, 1e-1))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/student-t-characteristic-near-zero.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;closing_notes&quot;&gt;Closing Notes&lt;/h2&gt;

&lt;p&gt;The &lt;code&gt;sympy.stats&lt;/code&gt; module was not designed with characteristic functions in mind. I was pleasantly surprised when I entered code almost identical to the mathematical definition&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;X = Normal('X', mu, sigma)
E(exp(I*t*X))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and received the correct answer. I am always happy when projects work on problems for which they were not originally designed. The fact that this works is largely due to SymPy’s excellent handling of integrals of special functions, due largely to &lt;a href=&quot;https://github.com/ness01&quot;&gt;Tom Bachmann&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If you do complex work on statistical functions I recommend you take a look at &lt;code&gt;sympy.stats&lt;/code&gt;. It’s able to perform some interesting high level transformations. Thanks to recent work by &lt;a href=&quot;https://github.com/raoulb&quot;&gt;Raoul Bourquin&lt;/a&gt; many of the common distributions found in &lt;code&gt;scipy.stats&lt;/code&gt; are now available (with even more in a &lt;a href=&quot;https://github.com/sympy/sympy/pull/1413&quot;&gt;pull request&lt;/a&gt;).&lt;/p&gt;</content:encoded>
	<dc:date>2012-12-03T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://brianegranger.com/?p=235">
	<title>Brian Granger: PyData NY</title>
	<link>http://brianegranger.com/?p=235</link>
	<content:encoded>&lt;p&gt;This past month, I attended &lt;a href=&quot;http://nyc2012.pydata.org/&quot; target=&quot;_blank&quot; title=&quot;PyData NY&quot;&gt;PyData NY&lt;/a&gt; in midtown Manhattan. This is the second PyData conference and the folks at &lt;a href=&quot;http://continuum.io/&quot; target=&quot;_blank&quot; title=&quot;Continuum Analytics&quot;&gt;Continuum Analytics&lt;/a&gt; have done a spectacular job in promoting and running this conference. In less than a year PyData has grown to over 200 attendees.  The timing (right after &lt;a href=&quot;http://strataconf.com/&quot; target=&quot;_blank&quot; title=&quot;Strata&quot;&gt;Strata&lt;/a&gt;) and location (NY and Bay Area) of the PyData conferences are definitely a strong part of the success.&lt;/p&gt;
&lt;p&gt;The conference had a wide range of talks from a fantastic set of speakers. It is very clear that the community is growing in leaps and bounds and that there are a lot of bright people writing great code.  It is always fun to think back on where the community and various projects were in the past.  Just think, it wasn’t that long ago, that &lt;a href=&quot;http://pandas.pydata.org/&quot; target=&quot;_blank&quot; title=&quot;Pandas&quot;&gt;Pandas&lt;/a&gt; didn’t exist!  Where will we be in another 3 years?&lt;/p&gt;
&lt;p&gt;The representation of IPython at the conference was amazing.  Not only did I present two talks on the IPython Notebook and IPython.parallel, but many of the other presenters used the IPython Notebook in their talks.  Ultimately, in developing the IPython Notebook we are scratching our own itch.  We are working scientists who need better tools for our research.  But it is seriously gratifying to see that how useful other people find it.  That makes developing it one of the most enjoyable things I have ever done.&lt;/p&gt;
&lt;p&gt;Continuum has put all of the talks on Vimeo &lt;a href=&quot;http://vimeo.com/continuumanalytics&quot; target=&quot;_blank&quot; title=&quot;here&quot;&gt;here&lt;/a&gt;, but I wanted to point out a few related to IPython:&lt;/p&gt;
&lt;p&gt;First, I gave a talk about the &lt;a href=&quot;http://vimeo.com/53051817&quot; target=&quot;_blank&quot; title=&quot;IPython Notebook&quot;&gt;IPython Notebook&lt;/a&gt;.  With 45 minutes, I was able to give a talk that was almost tutorial in nature.  In preparing this talk, I went through the IPython example Notebooks and organized/updated all of them.  This should provide a much nicer set of materials for people wanting to learn about the Notebook.  We are currently in the process of reviewing the pull request for these updates.&lt;/p&gt;
&lt;p&gt;Second, I gave a talk about &lt;a href=&quot;http://vimeo.com/53056634&quot; target=&quot;_blank&quot; title=&quot;IPython parallel&quot;&gt;IPython.parallel&lt;/a&gt;.  For this talk, I mostly followed a set of materials that Min Ragan-Kelley prepared for previous SciPy/PyCon tutorials.  Min has done a fantastic job with IPython.parallel and this set of materials really goes into great depth on all of the details.  This material is hosted &lt;a href=&quot;https://github.com/ipython/talks&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Third, Michael Selik gave a nice talk entitled &lt;a href=&quot;http://vimeo.com/53105125&quot; target=&quot;_blank&quot; title=&quot;IPython as a teaching tool&quot;&gt;IPython as a teaching tool&lt;/a&gt;, which explores using the IPython Notebook in a teaching context.  It is becoming clear that the Notebook is particularly useful in this context and it was very helpful to have someone reflect on how that was going for them.&lt;/p&gt;
&lt;p&gt;Finally, Massimo di Stefano is doing some &lt;a href=&quot;http://vimeo.com/53094837&quot; target=&quot;_blank&quot; title=&quot;amazing things&quot;&gt;amazing things&lt;/a&gt; with the Notebook and GIS.  He is really leveraging the ability of the Notebook to embed arbitrary HTML.  He even has a “gearth” function that embeds Google Earth in an output cell!  Here is one of his &lt;a href=&quot;http://nbviewer.ipython.org/url/epi.whoi.edu/esr/GIS_GRASS-R_Example.ipynb&quot; target=&quot;_blank&quot; title=&quot;GIS Notebook&quot;&gt;Notebooks&lt;/a&gt; on nbviewer.ipython.org.&lt;/p&gt;
&lt;p&gt;Unfortunately, many people left early because of hurricane Sandy, so the sprints were sparsely attended.  I was glad to catch my flight back to the west coast only hours before JFK closed.  Can’t wait for &lt;a href=&quot;http://sv2013.eventbrite.com/&quot; target=&quot;_blank&quot; title=&quot;PyData Silicon Valley&quot;&gt;PyData in Silicon Valley&lt;/a&gt; after PyCon.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;</content:encoded>
	<dc:date>2012-11-29T05:36:31+00:00</dc:date>
	<dc:creator>Brian Granger</dc:creator>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/11/24/Kalman-Filter">
	<title>MRocklin: Computing the Kalman Filter</title>
	<link>http://matthewrocklin.com/blog//work/2012/11/24/Kalman-Filter</link>
	<content:encoded>&lt;p&gt;The &lt;a href=&quot;http://en.wikipedia.org/wiki/Kalman_filter&quot;&gt;Kalman Filter&lt;/a&gt; is an algorithm to update probability distributions with new observations made under noisy conditions. It is used in everything from smartphone GPS navigation systems to large scale climate simulations. It is implemented in hardware ranging from embedded devices to super-computers. It is important and widely used.&lt;/p&gt;

&lt;p&gt;In this post I will&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Show how to compute the Kalman Filter with BLAS/LAPACK&lt;/li&gt;

&lt;li&gt;Relate this to old work on &lt;code&gt;sympy.stats&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Analyze the computation graph for some flaws and features&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;results&quot;&gt;Results&lt;/h2&gt;

&lt;p&gt;The Kalman filter can be defined as a pair of matrix expressions&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# kalman.py&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.matrices.expressions&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'n'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'k'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'mu'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Sigma'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'H'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'R'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;new_mu&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;new_Sigma&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We convert these matrix expressions into a computation&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# kalman_computation.py&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;kalman&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_mu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_Sigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.computations.matrices.compile&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make_rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patterns&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.computations.core&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ident&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_mu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_Sigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make_rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;patterns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mathcomp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ident&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mathcomp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/images/kalman-math-1.pdf&quot;&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/kalman-math-1.png&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is a useful result.&lt;/p&gt;

&lt;h2 id=&quot;history_with_stats&quot;&gt;History with stats&lt;/h2&gt;

&lt;p&gt;Two years ago I wrote two blogposts about the Kalman filter, one on &lt;a href=&quot;http://sympystats.wordpress.com/2011/07/02/a-lesson-in-data-assimilation-using-sympy/&quot;&gt;the univariate case&lt;/a&gt; and one on &lt;a href=&quot;http://sympystats.wordpress.com/2011/07/19/multivariate-normal-random-variables/&quot;&gt;the multivariate case&lt;/a&gt;. At the time I was working on &lt;code&gt;sympy.stats&lt;/code&gt;, a module that enabled uncertainty modeling through the introduction of a random variables into the SymPy language.&lt;/p&gt;

&lt;p&gt;SymPy stats was designed with atomicity in mind. It tried to be as small and thin a layer as possible.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;It turned queries on continuous random expressions into integral expressions.&lt;/li&gt;

&lt;li&gt;It turned queries on discrete random expressions into iterators and sums.&lt;/li&gt;

&lt;li&gt;It also turned queries on multivariate normal random expressions into matrix expressions.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The goal was to turn a specialized problem (uncertainty quantification) into a general one (integrals, sums, matrix expressions) under the assumption that tools are much richer to solve general problems than specific ones.&lt;/p&gt;

&lt;p&gt;The first blogpost on the univariate kalman filter produced integral expressions that were then solved by SymPy’s integration routines. The &lt;a href=&quot;http://sympystats.wordpress.com/2011/07/19/multivariate-normal-random-variables/&quot;&gt;second blogpost&lt;/a&gt; on the multivariate Kalman filter generated the following matrix expressions&lt;/p&gt;

&lt;p&gt;$$\mu’ = \mu + \Sigma H^T \left( R + H \Sigma H^T \right )^{-1} \left(H\mu - \textrm{data} \right) $$ $$\Sigma’ = \left( \mathbb{I} - \Sigma H^T \left(R + H \Sigma H^T \right)^{-1} H \right) \Sigma $$&lt;/p&gt;

&lt;p&gt;That blogpost finished with this result, claiming that the job of &lt;code&gt;sympy.stats&lt;/code&gt; was finished and that any of the popular numerical linear algebra packages could pick up from that point.&lt;/p&gt;

&lt;p&gt;These two equations are the Kalman filter and were our starting point for today. Matrix Expressions are an intermediate representation layer between &lt;code&gt;sympy.stats&lt;/code&gt; and &lt;code&gt;sympy.computations.matrices&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;By composing these projects we compile high level statistical expressions of &lt;code&gt;sympy.stats&lt;/code&gt; to intermediate level matrix expressions to the DAGs of &lt;code&gt;sympy.computations&lt;/code&gt; and even down to low level Fortran code. If we add a traditional Fortran compiler we can build working binaries directly from &lt;code&gt;sympy.stats&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;features_and_flaws_in_the_kalman_graph&quot;&gt;Features and Flaws in the Kalman graph&lt;/h2&gt;

&lt;p&gt;Lets investigate the Kalman computation. It contains a few notable features.&lt;/p&gt;

&lt;p&gt;First, unlike previous examples it has two outputs, &lt;code&gt;new_mu&lt;/code&gt; and &lt;code&gt;new_Sigma&lt;/code&gt;. These two have large common subexpressions like &lt;code&gt;H*Sigma*H' + R&lt;/code&gt;. You can see that these were computed once and shared.&lt;/p&gt;

&lt;p&gt;Second, lets appreciate that &lt;code&gt;H*Sigma*H + R&lt;/code&gt; is identified as symmetric positive definite allowing the more efficient &lt;code&gt;POSV&lt;/code&gt; routine. I’ve brought this up before in artificial examples. It’s nice to see that this occurs in practice.&lt;/p&gt;

&lt;p&gt;Third, there is an unfortunately common motif. This instance was taken from the upper right of the image but the &lt;code&gt;GE/SYMM -&amp;gt; AXPY&lt;/code&gt; motif occurs four times in this graph.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/kalman-math-gemm-axpy-motif.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;GEMM/SYMM&lt;/code&gt; are matrix multiply operations used to break down expressions like &lt;code&gt;alpha*A*B&lt;/code&gt;. &lt;code&gt;AXPY&lt;/code&gt; is a matrix addition used to break down expressions like &lt;code&gt;alpha*A + B&lt;/code&gt;. They are both used properly here.&lt;/p&gt;

&lt;p&gt;This motif is unforunate because &lt;code&gt;GEMM&lt;/code&gt; is also capable of breaking down a larger expression like &lt;code&gt;alpha*A*B + beta*C&lt;/code&gt;, doing a fused matrix multiply and add all in one pass. The &lt;code&gt;AXPY&lt;/code&gt; would be unnecessary if the larger &lt;code&gt;GE/SYMM&lt;/code&gt; patterns had matched correctly.&lt;/p&gt;

&lt;h2 id=&quot;canonicalization&quot;&gt;Canonicalization&lt;/h2&gt;

&lt;p&gt;The &lt;code&gt;alpha*A*B + beta*C&lt;/code&gt; patterns did not match here for a silly reason, there wasn’t anything to match for the scalars &lt;code&gt;alpha&lt;/code&gt; and &lt;code&gt;beta&lt;/code&gt;. Instead the patterns were like &lt;code&gt;A*B - C&lt;/code&gt;. One solution to this problem is to make more patterns with all possibilities. Alternatively we could change how we canonicalize &lt;code&gt;MatMul&lt;/code&gt; objects so that they always have a scalar coefficient, even if it defaults to 1.&lt;/p&gt;

&lt;p&gt;We don’t want to change &lt;code&gt;MatMul&lt;/code&gt; to behave like this throughout all of SymPy though; the extra 1 is usually unwanted. This is a case where there are multiple correct definitions of canonical. Fortunately &lt;code&gt;MatMul&lt;/code&gt; is written with this eventuality in mind.&lt;/p&gt;

&lt;h2 id=&quot;links&quot;&gt;Links&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://sympystats.wordpress.com/2011/07/02/a-lesson-in-data-assimilation-using-sympy/&quot;&gt;A Lesson in Data Assimilation using SymPy&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://sympystats.wordpress.com/2011/07/19/multivariate-normal-random-variables/&quot;&gt;Multivariate Normal Random Variables&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;Source for this post: &lt;a href=&quot;http://mrocklin.github.com/blog/scripts/kalman.py&quot;&gt;kalman.py&lt;/a&gt;, &lt;a href=&quot;http://mrocklin.github.com/blog/scripts/kalman_comp.py&quot;&gt;kalman_comp.py&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content:encoded>
	<dc:date>2012-11-24T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/11/23/BuildingComputations">
	<title>MRocklin: Building Computations</title>
	<link>http://matthewrocklin.com/blog//work/2012/11/23/BuildingComputations</link>
	<content:encoded>&lt;p&gt;In my &lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/21/Computations/&quot;&gt;last post&lt;/a&gt; I described a base type that represented a computation as a directed acyclic graph. In my post on &lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/10/GeneratingBLAS-PreliminaryResults/&quot;&gt;preliminary results&lt;/a&gt; I showed how we could write Fortran code for a simple matrix expression. In this post I want to show how unificaiton, rewrite rules, and manipulations on computations can compile computations from fairly complex matrix expressions.&lt;/p&gt;

&lt;h2 id=&quot;inputs&quot;&gt;Inputs&lt;/h2&gt;

&lt;p&gt;Lets begin with a complex expression and a set of assumptions&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;W&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;W&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;W&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We also specify a list of conditional rewrite patterns. A pattern has the following form&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;Source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;SYMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Zero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Wilds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Condition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This means that we convert the expression &lt;code&gt;alpha*A*B&lt;/code&gt; into the computation &lt;code&gt;SYMM(alpha, A, B, S.Zero, B)&lt;/code&gt; (a SYmmetric Matrix Multiply) for any &lt;code&gt;(alpha, A, B)&lt;/code&gt; when either &lt;code&gt;A&lt;/code&gt; is symmetric or &lt;code&gt;B&lt;/code&gt; is symmetric.&lt;/p&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/01/Unification/&quot;&gt;unification&lt;/a&gt; rewrite patterns are easy to write. Someone who is familiar with BLAS/LAPACK but unfamiliar with compilers would be able to make these easily.&lt;/p&gt;

&lt;h2 id=&quot;expressions_to_computations&quot;&gt;Expressions to Computations&lt;/h2&gt;

&lt;p&gt;Each pattern is turned into a function/rule that transforms an expression into a computation. We start with an identity computation&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;W&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;W&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;W&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;identcomp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;identcomp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Computations are able to print themselves in the &lt;a href=&quot;http://en.wikipedia.org/wiki/DOT_language&quot;&gt;DOT Language&lt;/a&gt; enabling simple visualization. Here we see a computation that produces the expression we want but its input is the same. We’d prefer one that had more atomic inputs like &lt;code&gt;a, b, c, W, X, Y, Z&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/complex-matrix-computation-identity.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Our patterns know how to break down big expressions into smaller ones by adding the right computation (e.g &lt;code&gt;alpha*A*B&lt;/code&gt; -&amp;gt; &lt;code&gt;alpha, A, B&lt;/code&gt; via &lt;code&gt;SYMM&lt;/code&gt;.) We convert each of our patterns into a rule. This rule looks at the inputs and, if it finds a matching expression adds on a new computation to break down that expression. We use &lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/09/BranchingStrategies/&quot;&gt;branching strategies&lt;/a&gt; to orchestrate &lt;em&gt;how&lt;/em&gt; all of these rules are applied. This is accomplished in the last line of the &lt;code&gt;make_matrix_rule&lt;/code&gt; function&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;make_matrix_rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;patterns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr_to_comp_rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wilds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cond&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                 &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wilds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cond&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patterns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;multiplex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_crunch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This function combines logic (&lt;code&gt;patterns/assumptions&lt;/code&gt;) with control (&lt;code&gt;exhaust/multiplex/input_crunch&lt;/code&gt;) to create a &lt;a href=&quot;http://www.icsd.aegean.gr/lecturers/stamatatos/courses/Logic/Prolog/Ch1/Ch1_files/algorithm%3Dlogic%2Bcontrol.pdf&quot;&gt;complete algorithm&lt;/a&gt;. We apply this algorithm to our identity computation and pull off a compiled result&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make_matrix_rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;patterns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;comp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;identcomp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;comp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/complex-matrix-computation.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We still have same output but now the input is broken down into smaller pieces by a set of computations. These computations are arranged in a graph based on their dependencies. We had to use a &lt;code&gt;GESV&lt;/code&gt;, a &lt;code&gt;POSV&lt;/code&gt;, two &lt;code&gt;GEMM&lt;/code&gt;s a &lt;code&gt;SYMM&lt;/code&gt; and two &lt;code&gt;AXPY&lt;/code&gt;s to break down this computation. Our inputs are now &lt;code&gt;a,b,c,W,X,Y,Z&lt;/code&gt; as desired.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;rule(identcomp)&lt;/code&gt; iterates over all possible computations to compute this expression. If you are not satisfied with the computation above you may ask for another.&lt;/p&gt;

&lt;h2 id=&quot;inplace_computations&quot;&gt;Inplace Computations&lt;/h2&gt;

&lt;p&gt;The BLAS/LAPACK routines are &lt;em&gt;inplace&lt;/em&gt;; they write their results to the memory locations of some of their inputs. The above &lt;em&gt;matheamtical&lt;/em&gt; graph doesn’t have the necessary information to think about this &lt;em&gt;computational&lt;/em&gt; concern. We have a separate system to compile and optimize inplace computations.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.computations.inplace&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inplace_compile&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;icomp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inplace_compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;comp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;icomp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/complex-matrix-computation-inplace.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Each variable is now of the form&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Mathematical Expression @ memory location&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We have introduced &lt;code&gt;Copy&lt;/code&gt; operations into the graph where necessary to prevent dangerous overwrites. If you track the memory locations you can see which BLAS/LAPACK operations overwrite which variables. For example &lt;code&gt;Z&lt;/code&gt; is never overwritten and so is never copied. On the other hand &lt;code&gt;W&lt;/code&gt; is used in two overwrite operations and so it is copied to two new variables, &lt;code&gt;W_2&lt;/code&gt; and &lt;code&gt;W_3&lt;/code&gt;. Copies are not added if obviously unnecessary.&lt;/p&gt;

&lt;h2 id=&quot;future_work&quot;&gt;Future Work&lt;/h2&gt;

&lt;p&gt;There are a couple of small items and one large one.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;An expert in BLAS/LAPACK will note that there are some issues with my graphs; they are not yet ideal. I don’t handle &lt;code&gt;IPIV&lt;/code&gt; permutation operations well (I need to add some new patterns), I am overwrie the &lt;code&gt;INFO&lt;/code&gt; out parameter, and there are a few cases where a copy could be avoided by operation reordering.&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;I need to refactor my old Fortran generation code to work with the new inplace system.&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;The largest challenge is to build strategies for intelligent application of rewrite rules. Expressions are now large enough and the list of patterns is now long enough so that checking all possiblities is definitely infeasible. I need to think hard about traversals. Fortunately this problem is purely algorithmic and has no connection to BLAS, inplace computations, etc…. I should be able to think about it in isolation.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;closing_note&quot;&gt;Closing Note&lt;/h2&gt;

&lt;p&gt;Except for the mathematical definition of BLAS none of this code is specific to generating matrix computations. The majority of this technology isn’t even specific to building computations. The computaitonal core of most of the technologies isn’t even dependent on SymPy. My final &lt;code&gt;sympy.computations.matrices&lt;/code&gt; directory is small.&lt;/p&gt;

&lt;p&gt;Throughout this project I’ve tried to keep all of the technology as general as possible in hopes that others will make use of it. Only a small fraction of my work has been specific to my application. I hope that others find this work interesting. I hope that this technology enables a variety of other unrelated projects.&lt;/p&gt;

&lt;h2 id=&quot;links&quot;&gt;Links&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mrocklin/sympy/tree/compblas&quot;&gt;Development Branch&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/scripts/2012-11-23-BuildingComputations.py&quot;&gt;Script to generate images within this post&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content:encoded>
	<dc:date>2012-11-23T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/11/21/Computations">
	<title>MRocklin: Computations</title>
	<link>http://matthewrocklin.com/blog//work/2012/11/21/Computations</link>
	<content:encoded>&lt;p&gt;How can we symbolically represent computations? In SymPy we normally represent expressions as trees. Each node in the graph is an expression; it depends on some operation like &lt;code&gt;Add&lt;/code&gt; or &lt;code&gt;Mul&lt;/code&gt; and a sequence of arguments/children.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/add-mul-tree.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;While trees are a convenient data structure they are also very restrictive. Consider the following operation&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/min-max-dag.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This &lt;code&gt;MinMax&lt;/code&gt; operation takes two inputs variables, &lt;code&gt;x&lt;/code&gt;, and &lt;code&gt;y&lt;/code&gt;, and produces two outputs &lt;code&gt;Min(x, y)&lt;/code&gt;, &lt;code&gt;Max(x, y)&lt;/code&gt;. Computationally you might prefer this over two separate trees because both outputs can be produced at once with a single comparison. This also supports natural grouping of common sub-expressions. If &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; were large trees we would not want two have copies of each in separate &lt;code&gt;Min&lt;/code&gt; and &lt;code&gt;Max&lt;/code&gt; trees.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/min-tree.png&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;http://mrocklin.github.com/blog/images/max-tree.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Because the &lt;code&gt;MinMax&lt;/code&gt; operation has two outputs we can no longer represent its graph with a single tree, we need a more general data structure. This graph can be described as a bipartite directed acyclic graph (BiDAG). It is bipartite because there are two types of nodes, variables (circles) and operations [boxes]. It is directed and acyclic by the dependence of data (e.g. if &lt;code&gt;Min(x, y)&lt;/code&gt; depends on &lt;code&gt;x&lt;/code&gt; then &lt;code&gt;x&lt;/code&gt; can not depend on &lt;code&gt;Min(x, y)&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;A DAG is the next most restrictive graph subtype. In some sense this is the smallest generalization we can make.&lt;/p&gt;

&lt;h2 id=&quot;computation_type&quot;&gt;Computation Type&lt;/h2&gt;

&lt;p&gt;Enter the &lt;code&gt;Computation&lt;/code&gt; base type. This is an interface that must provide tuples of &lt;code&gt;inputs&lt;/code&gt; and &lt;code&gt;outputs&lt;/code&gt; instead of the standard &lt;code&gt;args&lt;/code&gt; we use for trees.&lt;/p&gt;

&lt;p&gt;We also add a &lt;code&gt;CompositeComputation&lt;/code&gt; type which collects many computations together. Consider the collection of the following computations.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/min-max-dag.png&quot; alt=&quot;&quot; /&gt; &lt;img src=&quot;http://mrocklin.github.com/blog/images/op.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Note that &lt;code&gt;A&lt;/code&gt; produces &lt;code&gt;x&lt;/code&gt; which is used by &lt;code&gt;MinMax&lt;/code&gt;. This computation has inputs (&lt;code&gt;w&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt;) and outputs (&lt;code&gt;Min(x, y)&lt;/code&gt;, &lt;code&gt;Max(x, y)&lt;/code&gt;). The data dependencies infer an ordering; the &lt;code&gt;A&lt;/code&gt; computation must occur before the &lt;code&gt;MinMax&lt;/code&gt; computation.&lt;/p&gt;

&lt;h2 id=&quot;internal_representation&quot;&gt;Internal Representation&lt;/h2&gt;

&lt;p&gt;My current implementation of &lt;code&gt;CompositeComputation&lt;/code&gt; is represented internally as an immutable set of computations. Inter-computation interactions are inferred as needed by their variables. We provide methods to form an alternative dict-based data structure with fast access and traversal should performance become necessary.&lt;/p&gt;

&lt;p&gt;All variables are assumed immutable and unique. The intention is that variables should be entirely defined by their mathematical meaning. The expectation is that the variables are SymPy expressions.&lt;/p&gt;

&lt;p&gt;This approach has a focus on immutability and mathematical attributes rather than performance and computational attributes. For example it is impossible to represent a &lt;code&gt;Copy&lt;/code&gt; operation within this framework because mathematical meanings of the input and output variable would be identical. Similarily inplace operations are not checkable in this framework.&lt;/p&gt;

&lt;h2 id=&quot;inplace&quot;&gt;Inplace&lt;/h2&gt;

&lt;p&gt;And yet copies and inplace operations are important parts of real computation. We make an explicit separation between mathematics-based optimizations and infrastructure-based optimizations (like inplace). We perform this transition by replacing each variable with a pair that contains a purely mathematical expression (left) and a purely computational variable (right).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/min-max-dag-pure.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In the example above we see the &lt;code&gt;MinMax&lt;/code&gt; computation where the &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; expressions are stored in variables &lt;code&gt;&quot;x&quot;&lt;/code&gt; and &lt;code&gt;&quot;y&quot;&lt;/code&gt; and the outputs are stored in dummy variables &lt;code&gt;&quot;_1&quot;&lt;/code&gt; and &lt;code&gt;&quot;_2&quot;&lt;/code&gt;. For performance reasons a computation may write the outputs back into the memory for the inputs as follows (note that the two outputs are stored in the same variables as the inputs.)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/min-max-dag-inplace.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Inplace computations provide higher performance at the cost of memory safety. We must avoid situations like the following where the &lt;code&gt;x&lt;/code&gt; variable may be overwritten (for example by &lt;code&gt;B&lt;/code&gt;) before it is read (by &lt;code&gt;C&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/dangerous-inplace.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;motivation&quot;&gt;Motivation&lt;/h2&gt;

&lt;p&gt;I am working to translate matrix expressions (tree) into a computation (DAG) of BLAS/LAPACK operations. I do this through setting up and matching mathematical patterns like the following&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;alpha*X*Y + beta*Z -&amp;gt; GEMM(alpha, X, Y, beta, Z)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;However the available operations (like &lt;code&gt;GEMM&lt;/code&gt;) are inplace by default. These two goals of mathematical pattern matching and inplace computations are challenging to solve simultaneously for non-trivial expressions. My solution has been to consider the mathematical pattern matching problem first and then switch to ‘inplace mode’ and resolve the inplace issues separately.&lt;/p&gt;

&lt;h2 id=&quot;question&quot;&gt;Question&lt;/h2&gt;

&lt;p&gt;Should this be a part of SymPy?&lt;/p&gt;</content:encoded>
	<dc:date>2012-11-21T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://rhoforsympy.wordpress.com/?p=286">
	<title>Guru Devanla: My GSoC Experience</title>
	<link>http://rhoforsympy.wordpress.com/2012/11/17/my-gsoc-experience/</link>
	<content:encoded>&lt;p&gt;Recently, I gave a talk at UIC Friendly Friday session!  &lt;/p&gt;
&lt;p&gt;The slides give an overview about Google Summer of Code, some relevant links and what is in it for students.&lt;/p&gt;
&lt;p&gt;Take a peek.&lt;/p&gt;
&lt;p&gt;
&lt;a href=&quot;https://docs.google.com/open?id=0B9GZJ0kXSmnRSzJCejVVWkk4Rk0&quot; target=&quot;_blank&quot; title=&quot;pdf slides&quot;&gt;slide/pdf&lt;/a&gt;&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/rhoforsympy.wordpress.com/286/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/rhoforsympy.wordpress.com/286/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=rhoforsympy.wordpress.com&amp;amp;blog=34650270&amp;amp;post=286&amp;amp;subd=rhoforsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-11-17T16:59:36+00:00</dc:date>
	<dc:creator>grdvnl</dc:creator>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/11/10/GeneratingBLAS-PreliminaryResults">
	<title>MRocklin: Preliminary BLAS Results</title>
	<link>http://matthewrocklin.com/blog//work/2012/11/10/GeneratingBLAS-PreliminaryResults</link>
	<content:encoded>&lt;p&gt;In the last few posts I’ve built up some independent technology.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/10/29/Matrix-Computations/&quot;&gt;BLAS and code generation&lt;/a&gt; - a logical description&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/01/Unification/&quot;&gt;Unification&lt;/a&gt; - advanced pattern matching&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/07/Strategies/&quot;&gt;Strategies&lt;/a&gt; - programmatic control&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/work/2012/11/09/BranchingStrategies/&quot;&gt;Branching Strategies&lt;/a&gt; - control with multiple possibilities&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;In this post I’ll pull them all together for my first substantial results generating Fortran code to call BLAS/LAPACK. Lets go through a working example&lt;/p&gt;

&lt;p&gt;We set up a problem that we’d like to solve. We want to compute \((4 X X^{T} + 2 Z)^{-1} X\) where \( X \) is invertible and and \(Z\) is symmetric positive definite.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Set up a mathematical problem to solve&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Z'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;invertible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We have described a set of BLAS/LAPACK operations to perform certain transformations when the right conditions are met. Each BLAS operation is a single rewrite rule.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.matrices.expressions.gen&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rr_from_blas&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.matrices.expressions.blas&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;GEMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SYMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TRMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TRSV&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.matrices.expressions.lapack&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;POSV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GESV&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;routines&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TRSV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;POSV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GESV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TRMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SYMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GEMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rr_from_blas&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;routines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Each of these rules can convert one kind of expression into a computation given certain conditions. For example&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SYMM:  alpha*A*B + beta*C -&amp;gt; SYMM(alpha, A, B, beta, C) if A or B is symmetric&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We need to combine them to turn the large target expression into a set of atomic inputs. Some of the BLAS routines overlap so there are potentially many possibilities.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.matrices.expressions.gen&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top_down&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.rules.branch&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multiplex&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top_down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;multiplex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;computations&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;computations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We generate Fortran code from the first computation&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;computations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print_Fortran&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;fortran&quot;&gt;&lt;span class=&quot;k&quot;&gt;subroutine &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;INFO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;INFO&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;call &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dgemm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'N'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'T'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;call &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dposv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;U&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;INFO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;RETURN&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;END&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This solution first uses &lt;code&gt;GEMM&lt;/code&gt; to multiply \(4X X^{T} + 2 Z\). It then uses &lt;code&gt;POSV&lt;/code&gt; to perform the solve \((4X X^{T} + 2Z)^{-1} X\). The &lt;code&gt;POSV&lt;/code&gt; routine solves systems of the form \(A^{-1}B\) where \(A\) is symmetric positive definite. Internally we used a logical programming framework to infer that \(4X X^{T} + 2Z\) is symmetric positive definite given the original mathematical assumptions.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;invertible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This computation is in-place. &lt;code&gt;GEMM&lt;/code&gt; stores its result in the argument &lt;code&gt;Z&lt;/code&gt;. &lt;code&gt;POSV&lt;/code&gt; uses &lt;code&gt;Z&lt;/code&gt; and stores the output in &lt;code&gt;X&lt;/code&gt;. Note that both &lt;code&gt;X&lt;/code&gt; and &lt;code&gt;Z&lt;/code&gt; have been declared with &lt;code&gt;inout&lt;/code&gt; intents in the Fortran code.&lt;/p&gt;

&lt;p&gt;This Fortran code is independent of Python or SymPy and can be used in any project. However, if we prefer the Python environment we can bring it back into the Python session with F2PY.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; f = computations[0].build(str, assumptions) 
&amp;gt;&amp;gt;&amp;gt; f?
f - Function signature:
  info = f(x,z,[n])
Required arguments:
  x : in/output rank-2 array('d') with bounds (n,n)
  z : in/output rank-2 array('d') with bounds (n,n)
Optional arguments:
  n := shape(x,0) input int
Return objects:
  info : int&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This function accepts numpy arrays and so integrates well into the Python scientific computing stack.&lt;/p&gt;

&lt;h2 id=&quot;multiple_matches&quot;&gt;Multiple Matches&lt;/h2&gt;

&lt;p&gt;There were two computations. What was the other?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;computations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;computations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print_Fortran&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assumptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;fortran&quot;&gt;&lt;span class=&quot;k&quot;&gt;subroutine &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;INFO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;IPIV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;INFO&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;IPIV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;call &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dgemm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'N'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'T'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;call &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dgesv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;IPIV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;INFO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;RETURN&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;END&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This solution uses the &lt;code&gt;GESV&lt;/code&gt; routine for general matrices in place of the specialized &lt;code&gt;POSV&lt;/code&gt; for symmetric positive definite matrices. Which is best? In this case &lt;code&gt;POSV&lt;/code&gt; is likely faster because it is able to use faster algorithms due to the symmetric positive definite assumption. After looking at both possibilities we choose it.&lt;/p&gt;

&lt;p&gt;For large matrix expressions the number of possible computations may stop us from inspecting all possible solutions. How can we ensure that the best solution is in the first few?&lt;/p&gt;

&lt;h2 id=&quot;code_separation&quot;&gt;Code Separation&lt;/h2&gt;

&lt;p&gt;The definition of BLAS/LAPACK is separated from the pattern matching code and the branching control code. This allows me (or other people) to develop one without thinking about the other. It also allows for a declarative definition of BLAS and LAPACK routines. If anyone is interested I could use more routines than just the six used in this example.&lt;/p&gt;

&lt;p&gt;This project requires the technology from the previous four posts. While all of that technology (strategies, unification, code generation) is necessary to this project none of it is specific to this project. All of the pieces are general, composable, and applicable to other ends. I hope that others are able to find some use for them.&lt;/p&gt;

&lt;h2 id=&quot;caveats&quot;&gt;Caveats&lt;/h2&gt;

&lt;p&gt;This code is still experimental. It is not yet merged into the SymPy master branch. The interface may change. Results are promising but there are stil big pieces missing before its ready for public use.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://cens.ioc.ee/projects/f2py2e/&quot;&gt;F2PY&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;D. Fabregat-Traver, P. Bientinesi, &lt;a href=&quot;http://www.aices.rwth-aachen.de:8080/aices/preprint/documents/AICES-2012-01-02.pdf&quot;&gt;&lt;em&gt;A Domain-Specific Comiler for Linear Algebra Operations&lt;/em&gt;&lt;/a&gt;, arXiv preprint arXiv:1205.5975 (2012).&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/scripts/2012-11-10-GeneratingBLAS-PreliminaryResults.py&quot;&gt;Example code&lt;/a&gt; from this post&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;https://github.com/mrocklin/sympy/tree/blas&quot;&gt;My development branch of SymPy&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content:encoded>
	<dc:date>2012-11-10T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/11/09/BranchingStrategies">
	<title>MRocklin: Branching Strategies</title>
	<link>http://matthewrocklin.com/blog//work/2012/11/09/BranchingStrategies</link>
	<content:encoded>&lt;p&gt;In my last post on &lt;a href=&quot;http://matthewrocklin.com/blog/work/2012/11/07/Strategies/&quot;&gt;strategies&lt;/a&gt; I introduced a set of higher order functions to represent common control patterns (like &lt;code&gt;top_down&lt;/code&gt;). We combined these with transformation rules (like &lt;code&gt;flatten&lt;/code&gt;) to create complex functions for tree manipulation (like &lt;code&gt;flatten_tree&lt;/code&gt;)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;rule     :: expr -&amp;gt; expr
strategy :: parameters, rule -&amp;gt; rule&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In my post on &lt;a href=&quot;http://matthewrocklin.com/blog/work/2012/11/01/Unification/&quot;&gt;unification&lt;/a&gt; we showed how to easily create rules from patterns. At the end of this post I described that because patterns might match in multiple ways one rule might produce many different results. To avoid combinatorial blowup in the number of possible matches we solved this by yielding matches lazily.&lt;/p&gt;

&lt;p&gt;Transformation rules produced by unify don’t return values, they yield possible solutions lazily. How do we reconcile this with our previous notion of rules and strategies? We make a new set of strategies for branching rules.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;branching-rule      :: expr -&amp;gt; {expr} 
branching-strategy  :: parameters, branching-rule -&amp;gt; branching-rule&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In &lt;code&gt;sympy.rules.branch&lt;/code&gt; we have implemented lazy analogs for the strategies found in &lt;code&gt;sympy.rules&lt;/code&gt;. This allows us to apply strategies to transformations like the &lt;code&gt;sincos_to_one&lt;/code&gt; rule created in the unification post.&lt;/p&gt;

&lt;h2 id=&quot;toy_problem&quot;&gt;Toy Problem&lt;/h2&gt;

&lt;p&gt;Lets see branching strategies with a toy problem. Consider the following “function”&lt;/p&gt;

&lt;p&gt;$$ f(x) = \cases{ x+1 &amp;amp; \text{if } 5 &amp;lt; x &amp;lt; 10 \\ x-1 &amp;amp; \text{if } 0 &amp;lt; x &amp;lt; 5 \\ x+1 \text{ or } x-1 &amp;amp; \text{if } x = 5 \\ x &amp;amp; \text{otherwise} \\ } $$&lt;/p&gt;

&lt;p&gt;And it’s equivalent in Python&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;      &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that in the case where &lt;code&gt;x = 5&lt;/code&gt; there are two possible outcomes. Each of these is preserved by the application of branching strategies. We use the branching version of the &lt;code&gt;exhaust&lt;/code&gt; strategy to make a new exhaustive version of this function&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.rules.branch&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr /&gt;
&lt;h2 id=&quot;practical_problem&quot;&gt;Practical Problem&lt;/h2&gt;

&lt;p&gt;We have all the machinery necessary. Lets make a &lt;code&gt;sin(x)**2 + cos(x)**2 -&amp;gt; 1&lt;/code&gt; tree-wise simplification function.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.rules.branch.traverse&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top_down&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.unify.rewrite&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.abc&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;One&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wilds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sincos_tree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top_down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sincos_tree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# see footnote&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lets make a rule to simplify expressions like &lt;code&gt;c**1&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pow_simp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Pow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;evaluate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wilds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# footnote 2&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.rules.branch.strat_pure&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multiplex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;simplify&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top_down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;multiplex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pow_simp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;simplify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We see how we can easiy build up powerful simplification functions through the separate description of logic&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sin(x)**2 + cos(x)**2 -&amp;gt; 1
x ** 1 -&amp;gt; x&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and control&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;simplify = exhaust(top_down(multiplex( ... )))&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;Footnote 1&lt;/em&gt;: At the time of this writing this line should actually be&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;map(rebuild, sincos_tree( ... )&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;rebuild&lt;/code&gt; function is necessary because rules don’t play well with &lt;code&gt;Expr&lt;/code&gt;s. Expr’s need to be constructed normally in order to function properly. In particular all expressions built by rules lack the &lt;code&gt;is_commutative&lt;/code&gt; flag which is attached onto the object at construction time. I neglected to mention this above to simplify the discussion.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Footnote 2&lt;/em&gt;: This also requires a slight modification due to the Expr/rules mismatch. In particular the pattern &lt;code&gt;Pow(x, 1, evaluate=False)&lt;/code&gt; unfortunately matches to just &lt;code&gt;x&lt;/code&gt; because &lt;code&gt;x == x**1&lt;/code&gt; in SymPy.&lt;/p&gt;</content:encoded>
	<dc:date>2012-11-09T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/11/07/Strategies">
	<title>MRocklin: Strategies</title>
	<link>http://matthewrocklin.com/blog//work/2012/11/07/Strategies</link>
	<content:encoded>&lt;p&gt;In &lt;a href=&quot;http://matthewrocklin.com/blog/work/2012/11/01/Unification/&quot;&gt;my last post&lt;/a&gt; I showed how unification and rewrite rules allow us to express &lt;em&gt;what&lt;/em&gt; we want without specifying &lt;em&gt;how&lt;/em&gt; to compute it. As an example we were able to turn the mathematical identity &lt;code&gt;sin(x)**2 + cos(x)**2 -&amp;gt; 1&lt;/code&gt; into a function with relatively simple code&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# Transformation : sin(x)**2 + cos(x)**2 -&amp;gt; 1&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wilds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However we found that this function did not work deep within an expression tree&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# no matches&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;sincos_to_one&lt;/code&gt; does not know &lt;em&gt;how&lt;/em&gt; to traverse a tree. It is pure logic and has no knowledge of control. We define traverals separately using strategies.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Short version&lt;/em&gt;: we give you a higher order function, &lt;code&gt;top_down&lt;/code&gt; which turns a expression-wise function into a tree-wise function. We provide a set of similar functions which can be composed to various effects.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&quot;a_toy_example&quot;&gt;A Toy Example&lt;/h2&gt;

&lt;p&gt;How do we express control programmatically?&lt;/p&gt;

&lt;p&gt;Traditional control flow is represented with constructs like &lt;code&gt;if&lt;/code&gt;, &lt;code&gt;for&lt;/code&gt;, &lt;code&gt;while&lt;/code&gt;, &lt;code&gt;def&lt;/code&gt;, &lt;code&gt;return&lt;/code&gt;, &lt;code&gt;try&lt;/code&gt;, etc…. These terms direct the flow of what computation occurs when. Traditionally we mix control and logic. Consider the following toy problem that reduces a number until it reaches a multiple of ten&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce_to_ten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Reduce a number to the next lowest multiple of ten &lt;/span&gt;

&lt;span class=&quot;sd&quot;&gt;    &amp;gt;&amp;gt;&amp;gt; reduce_ten(26)&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    20&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;old&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While the logic in this function is somewhat trivial&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;the control pattern is quite common in serious code&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;old&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is the “Exhaustively apply this function until there is no effect” control pattern. It occurs often in general programming and very often in the SymPy sourcecode. We separate this control pattern into a higher order function named &lt;code&gt;exhaust&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Apply a rule repeatedly until it has no effect &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;exhaustive_rl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;old&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;old&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaustive_rl&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We show how to use this function to achieve the previous result.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dec_10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;                          &lt;span class=&quot;c&quot;&gt;# Close to pure logic&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;               &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;reduce_to_ten&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dec_10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By factoring out the control strategy we achieve several benefits&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Code reuse of the &lt;code&gt;while(old != new)&lt;/code&gt; control pattern&lt;/li&gt;

&lt;li&gt;Exposure of logic - we can use the &lt;code&gt;dec_10&lt;/code&gt; function in other contexts more easily. This version is more extensible.&lt;/li&gt;

&lt;li&gt;Programmability of control - the control pattern is now first class. We can manipulate and compose it as we would manipulate or compose a variable or function.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;example__debug&quot;&gt;Example - Debug&lt;/h2&gt;

&lt;p&gt;When debugging code we often want to see the before and after effects of running a function. We often do something like the following&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;old&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Before: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;old&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;After:  &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This common structure is encapsulated in the debug strategy&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Print out before and after expressions each time rule is used &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;debug_rl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Rule: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;func_name&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;In:   &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Out:  &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;debug_rl&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Because control is separated we can inject this easily into our function&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduce_to_ten&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dec_10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduce_to_ten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;dec_10&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;dec_10&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;dec_10&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;traversals&quot;&gt;Traversals&lt;/h2&gt;

&lt;p&gt;Finally we show off the use of a tree traversal strategy which applies a function at each node in an expression tree. Here we use the &lt;code&gt;Basic&lt;/code&gt; type to denote a tree of generic nodes.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;top_down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Apply a rule down a tree running it on the top nodes first &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;top_down_rl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;newexpr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_leaf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newexpr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newexpr&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newexpr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top_down_rl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newexpr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top_down_rl&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduce_to_ten_tree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top_down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tryit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dec_10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduce_to_ten_tree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Basic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;use_in_practice&quot;&gt;Use in Practice&lt;/h2&gt;

&lt;p&gt;We have rewritten the canonicalization code in the Matrix Expression module to use these strategies. There are a number of small functions to represent atomic logical transformations of expressions. We call these rules. Rules are functions from expressions to expressions&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;rule :: expr -&amp;gt; expr&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And there are a number of strategies like &lt;code&gt;exhaust&lt;/code&gt; and &lt;code&gt;top_down&lt;/code&gt; which transform rules and parameters into larger rules&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;strategy :: parameters, rule -&amp;gt; rule&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For example there are general rules like &lt;code&gt;flatten&lt;/code&gt; that simplify nested expressions like&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Add(1, 2, Add(3, 4)) -&amp;gt; Add(1, 2, 3, 4)&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Flatten T(a, b, T(c, d), T2(e)) to T(a, b, c, d, T2(e)) &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cls&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__class__&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__class__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__class__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We compose these general rules (e.g. ‘flatten’, ‘unpack’, ‘sort’, ‘glom’) with strategies to create large canonicalization functions&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rm_identity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ZeroMatrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;glom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matrix_of&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factor_of&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;combine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;canonicalize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top_down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MatAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;do_one&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)})))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;going_farther&quot;&gt;Going Farther&lt;/h2&gt;

&lt;p&gt;We use strategies to build large rules out of small rules. Can we build large strategies out of small strategies? The &lt;code&gt;canonicalize&lt;/code&gt; function above follows a common pattern “Apply a set of rules down a tree, repeat until they have no effect.” This is built into the &lt;code&gt;canon&lt;/code&gt; strategy.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;canon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Strategy for canonicalization &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exhaust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top_down&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;do_one&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;previous_work&quot;&gt;Previous Work&lt;/h2&gt;

&lt;p&gt;This implementation of strategies was inspired by the work in the language StrategoXT. Stratego is a language for control that takes these ideas much farther and implements them more cleanly. It is a language where control structure are the primitives that can be built up, composed, and compiled down. It is a language in which ideas like “breadth first search” and “dynamic programming” are natural expressions.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;Ralf Lämmel , Eelco Visser , Joost Visser, &lt;a href=&quot;http://www.google.com/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=1&amp;amp;cad=rja&amp;amp;ved=0CDMQFjAA&amp;amp;url=http%3A%2F%2Fhomepages.cwi.nl%2F~ralf%2Feosp%2Fpaper.pdf&amp;amp;ei=bJuaUNWwNuOc2AWQtICYCA&amp;amp;usg=AFQjCNHG1lJTjP05tO1aElYQkXMYSmgNuw&amp;amp;sig2=EwanltC52lXaC4gU4OtVvA&quot;&gt;&lt;em&gt;The Essence of Strategic Programming&lt;/em&gt;&lt;/a&gt;, 2002&lt;/li&gt;

&lt;li&gt;Eelco Visser, &lt;a href=&quot;http://www.springerlink.com/content/my9we5tj86u2f59n/&quot;&gt;&lt;em&gt;Program Transformation with Stratego/XT&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content:encoded>
	<dc:date>2012-11-07T08:00:00+00:00</dc:date>
</item>
<item rdf:about="http://rhoforsympy.wordpress.com/?p=277">
	<title>Guru Devanla: Emacs script to add function headers in python mode</title>
	<link>http://rhoforsympy.wordpress.com/2012/11/07/emacs-script-to-add-function-headers-in-python-mode/</link>
	<content:encoded>&lt;p&gt;I have an usual python-mode setup with python-mode.el and all packages that help set up a good IDE environment for Python in Emacs. But, I did not find any scripts/functions that would help me generate a doc string for methods. The script I have shared below should do the trick. This is the initial script and I hope to add to this script as I use it. The script tries to follows the markup syntax that is supported by &lt;a href=&quot;http://docutils.sourceforge.net/rst.html&quot; title=&quot;reStructuredText&quot;&gt;reStructuredText&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Please feel free comment on the git repo if you find any issues or have any improvements&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;br /&gt;
;; add the following lines to .emacs file.&lt;br /&gt;
;; When a function header needs to be generated, place the cursor&lt;br /&gt;
;; on the same line as function definition and call the function&lt;br /&gt;
;; generate-header. Alternatively, a key-binding can be added&lt;br /&gt;
;; using (global-set-key) or adding this function to the python-mode-hook&lt;/code&gt;&lt;/p&gt;&lt;code&gt;
&lt;p&gt;(defun get-function-definition(sentence)&lt;br /&gt;
  (if (string-match &quot;def.*(.*):&quot; sentence)&lt;br /&gt;
      (match-string 0 sentence))&lt;br /&gt;
  )&lt;/p&gt;
&lt;p&gt;(defun get-parameters(sentence)&lt;br /&gt;
        (setq y (get-function-definition sentence))&lt;br /&gt;
        (if y&lt;br /&gt;
            (if (string-match &quot;(.*)&quot;  y)&lt;br /&gt;
             (match-string 0 y)))&lt;br /&gt;
        )&lt;/p&gt;
&lt;/code&gt;&lt;p&gt;&lt;code&gt;(require 'thingatpt)&lt;br /&gt;
(defun generate-header()&lt;br /&gt;
    (interactive)&lt;br /&gt;
    (setq p (get-parameters (thing-at-point 'sentence)))&lt;br /&gt;
    (forward-line 1)&lt;br /&gt;
    (insert &quot;\t\&quot;\&quot;\&quot;\n\n\n&quot;)&lt;br /&gt;
    (setq params (split-string p &quot;[?\,?\(?\)?\ ]&quot;))&lt;br /&gt;
    (while params&lt;br /&gt;
        (if (/= (length (chomp (car params))) 0)&lt;br /&gt;
        (progn&lt;br /&gt;
            (insert &quot;\t:param &quot;)&lt;br /&gt;
            (insert (chomp (car params)))&lt;br /&gt;
            (insert &quot;: \n&quot;)))&lt;br /&gt;
        (setq params (cdr params)))&lt;br /&gt;
        (insert &quot;\n\t\&quot;\&quot;\&quot;\n\n&quot;)&lt;br /&gt;
    )&lt;br /&gt;
&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/gdevanla/emacs_scripts/blob/master/emacs/generate-header.el&quot; target=&quot;_blank&quot; title=&quot;Git&quot;&gt;Git&lt;/a&gt;&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/rhoforsympy.wordpress.com/277/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/rhoforsympy.wordpress.com/277/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=rhoforsympy.wordpress.com&amp;amp;blog=34650270&amp;amp;post=277&amp;amp;subd=rhoforsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-11-07T05:14:50+00:00</dc:date>
	<dc:creator>grdvnl</dc:creator>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/11/01/Unification">
	<title>MRocklin: Unification in SymPy</title>
	<link>http://matthewrocklin.com/blog//work/2012/11/01/Unification</link>
	<content:encoded>&lt;p&gt;Unification is a way to ask questions by matching expressions against patterns. It is a powerful form of pattern matching found in logical programming languages like Prolog, Maude, and Datalog. It is the computational backbone behind the logical programming paradigm and is now a part of SymPy (in a pull request).&lt;/p&gt;

&lt;p&gt;Consider the following example. Imagine that you want to find the name of the MatrixSymbol within the Transpose in the following expression (i.e. we’re looking for the string &lt;code&gt;'X'&lt;/code&gt;)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Y'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Transpose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Traditionally we could solve this toy problem with a simple function&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;name_of_symbol_in_transpose_in_add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matadd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;matadd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Transpose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We solve this task with unification by setting up a pattern and then unifying that pattern against a target expression&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Look for an expression tree like A.T + B&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Treat the leaves 'name', n, m, B as Wilds&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patternify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Transpose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We get back a matching for each of the wildcards (name, n, m, B) and see that &lt;code&gt;'name'&lt;/code&gt; was matched to the string &lt;code&gt;'X'&lt;/code&gt;. Is this better or worse than the straight Python solution? Given the relative number of users between Python and Prolog it’s a safe bet that the style of Python programs have some significant advantages over the logical programming paradigm. Why would we program in this strange way?&lt;/p&gt;

&lt;p&gt;Unification allows a clean separation between &lt;em&gt;what we’re looking for&lt;/em&gt; and &lt;em&gt;how we find it&lt;/em&gt;. In the Python solution the mathematical definition of what we want is spread among a few lines and is buried inside of control flow.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;matadd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Transpose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the unification solution the line&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patternify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Transpose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;expresses exactly &lt;em&gt;what&lt;/em&gt; we’re looking for and gives no information on &lt;em&gt;how&lt;/em&gt; it should be found. The how is wrapped up in the call to &lt;code&gt;unify&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;unify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This separation of the &lt;em&gt;what&lt;/em&gt; and &lt;em&gt;how&lt;/em&gt; is what excites me about declarative programming. I think that this separation is useful when mathematical and algorithmic programmers need to work together to solve a large problem. This is often the case in scientific computing. Mathematical programmers think about &lt;em&gt;what&lt;/em&gt; should be done while algorithmic programmers think about &lt;em&gt;how&lt;/em&gt; it can be efficiently computed. Declarative techniques like unification enables these two groups to work independently.&lt;/p&gt;

&lt;h2 id=&quot;multiple_matches&quot;&gt;Multiple Matches&lt;/h2&gt;

&lt;p&gt;Lets see how unify works on a slightly more interesting expression&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Transpose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Transpose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;generator&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unify&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x548cb90&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this situation because both matrices &lt;code&gt;X&lt;/code&gt; and &lt;code&gt;Y&lt;/code&gt; are inside transposes our pattern to match “the name of a symbol in a transpose” could equally well return the strings &lt;code&gt;'X'&lt;/code&gt; or &lt;code&gt;'Y'&lt;/code&gt;. The unification algorithm will give us both of these options&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;match&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; 
    &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;match&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Y'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Because expr is commutative we can match &lt;code&gt;{A: Transpose(X), B: Transpose(Y)}&lt;/code&gt; or &lt;code&gt;{A: Transpose(Y), B: Transpose(X)}&lt;/code&gt; with equal validity. Instead of choosing one &lt;code&gt;unify&lt;/code&gt;, returns an iterable of all possible matches.&lt;/p&gt;

&lt;h2 id=&quot;combinatorial_blowup&quot;&gt;Combinatorial Blowup&lt;/h2&gt;

&lt;p&gt;In how many ways can we match the following pattern&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;w + x + y + z&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;to the following expression?&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;a + b + c + d + e + f&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is a variant on the standard “N balls in K bins” problem often given in a discrete math course. The answer is “quite a few.” How can we avoid this combinatorial blowup?&lt;/p&gt;

&lt;p&gt;&lt;code&gt;unify&lt;/code&gt; produces matches lazily. It returns a Python generator which yields results only as you ask for them. You can ask for just one match (a common case) very quickly.&lt;/p&gt;

&lt;p&gt;The bigger answer is that if you aren’t satisfied with this and want a better/stronger/faster way to find your desired match you could always &lt;em&gt;rewrite unify&lt;/em&gt;. The &lt;code&gt;unify&lt;/code&gt; function is all about the &lt;em&gt;how&lt;/em&gt; and is disconnected from the &lt;em&gt;what&lt;/em&gt;. Algorithmic programmers can tweak unify without disrupting the mathematical code.&lt;/p&gt;

&lt;h2 id=&quot;rewrites&quot;&gt;Rewrites&lt;/h2&gt;

&lt;p&gt;Unification is commonly used in term rewriting systems. Here is an example&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pattern_source&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patternify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pattern_target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern_source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pattern_target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We were able to turn a mathematical identity &lt;code&gt;sin(x)**2 + cos(x)**2 =&amp;gt; 1&lt;/code&gt; into a function very simply using unification. However unification only does exact pattern matching so we can only find the &lt;code&gt;sin(x)**2 + cos(x)**2&lt;/code&gt; pattern if that pattern is at the top node in the tree. As a result we’re not able to apply this simplification within a larger expression tree&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sincos_to_one&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# no matches&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I will leave the solution of this problem to a future post. Instead, I want to describe why I’m working on all of this.&lt;/p&gt;

&lt;h2 id=&quot;matrix_computations&quot;&gt;Matrix Computations&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://matthewrocklin.com/blog/work/2012/10/29/Matrix-Computations/&quot;&gt;My last post&lt;/a&gt; was about translating Matrix Expressions into high-performance Fortran Code. I ended this post with the following problem:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;So how can we transform a matrix expression like&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;…&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Into a graph of &lt;code&gt;BLAS&lt;/code&gt; calls like one of the following?&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;DGEMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DTRSV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;DTRMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DTRSV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr /&gt;
&lt;p&gt;This problem can be partially solved by unification and rewrite rules. Each &lt;code&gt;BLAS&lt;/code&gt; operation is described by a class&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BLAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Matrix Multiply &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_inputs&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_outputs&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beta&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;_outputs&lt;/code&gt; and &lt;code&gt;_inputs&lt;/code&gt; fields mathematically define when &lt;code&gt;MM&lt;/code&gt; is appropriate. This is all we need to make a transformation&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;pattern_source&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patternify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MM&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_outputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MM&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pattern_target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MM&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rewriterule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern_source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pattern_target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Unification allows us to describe &lt;code&gt;BLAS&lt;/code&gt; mathematically without thinking about how each individual operation will be detected in an expression. The control flow and the math are completely separated allowing us to think hard about each problem in isolation.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;p&gt;I learned a great deal from the following sources&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://aima.cs.berkeley.edu/&quot;&gt;Artificial Intelligence: A Modern Approach&lt;/a&gt; by Stuart Russel and Peter Norvig (Particularly section 9.2 in the second edition)&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/13092092/algorithms-for-unification-of-list-based-trees&quot;&gt;StackOverflow - Algorithms for Unification of list-based trees&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/13131491/partition-n-items-into-k-bins-in-python-lazily&quot;&gt;StackOverflow - Partition N items into K bins in Python lazily&lt;/a&gt; (Special thanks to &lt;a href=&quot;https://github.com/smichr&quot;&gt;Chris Smith&lt;/a&gt; who provided the best answer)&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Logic_programming&quot;&gt;Logic Programming&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Term_rewriting&quot;&gt;Term Rewriting&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://www.learnprolognow.org/&quot;&gt;My favorite Prolog tutorial&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://goo.gl/ZqVHJ&quot;&gt;SymPy E-mail thread on this topic&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;https://github.com/sympy/sympy/pull/1633&quot;&gt;Pull Request&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded>
	<dc:date>2012-11-01T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://gilbertgede.wordpress.com/2012/10/29/google-summer-of-code-mentor-summit-2012/">
	<title>Gilbert Gede: Google Summer of Code, Mentor Summit 2012</title>
	<link>http://gilbertgede.wordpress.com/2012/10/29/google-summer-of-code-mentor-summit-2012/</link>
	<content:encoded>&lt;p&gt;I probably should have written a blog post during the summer, displaying &lt;a href=&quot;http://angadhsympy.wordpress.com/&quot; target=&quot;_blank&quot; title=&quot;Angadh's work&quot;&gt;Angadh’s work&lt;/a&gt; . . . oh well.&lt;/p&gt;
&lt;p&gt;SymPy sent me as one of 3 mentors to the GSoC Mentor Summit this year, at the Googleplex. I was very excited to go, meet some of the other SymPy developers (Matthew and Stefan), and meet others in the open source community. My overall experience was a little mixed though.&lt;/p&gt;
&lt;p&gt;Matthew covered some feelings/conclusions I also share in his &lt;a href=&quot;http://sympystats.wordpress.com/2012/10/22/gsoc-mentor-summit/&quot; target=&quot;_blank&quot; title=&quot;Matthew's Mentor Summit Write-Up&quot;&gt;write-up&lt;/a&gt; on the event, but I have some others.&lt;/p&gt;
&lt;p&gt;Meeting and interacting with people in the open source community was probably the highlight of the trip for me. It was interesting to talk to a few people who had taken projects that were originally academic/research code and translated them into more successful (open source) products. I’m not sure if it will be relevant to SymPy’s future, but it might be to mine. A common thread seemed to be: jumpstart a project with grants, keep improving it for long enough with that money, and then put it in a position where it can join an umbrella organization or can be used by professionals who will pay for support. I certainly don’t speak for any other SymPy developers, but I’ve never got the feeling that this was the intended trajectory of the project (at least the selling support part).&lt;/p&gt;
&lt;p&gt;There was a talk on how to structure student/mentor/organization interactions for future GSoC projects. Some of the organizations have a much more defined structure than SymPy though, and benefit from things like daily group meetings. SymPy seems to have a more distributed organizational structure though – there are a lot of different modules, that all have some independence from each other. Despite this, SymPy’s code base is of very high quality, with credit going to the review-process/reviewers and the high standards that are enforced.&lt;/p&gt;
&lt;p&gt;The talk on forming non-profit organizations was also interesting. One major takeaway was that the IRS would rather you put your project under an existing umbrella, rather than grant you 501(c) status, due to the potential for abuse. Also, a lot of work is involved in managing money properly once a certain amount of cash flowing through. Although there are hurdles, getting to form a board of directors sounded interesting. Scheduling board meetings could also be fun (with the money being spent responsibly, of course…).&lt;/p&gt;
&lt;p&gt;On the less positive side of things: the unconference format. I think that it could have worked a lot better. Again, Matthew touched on this in his post, but all of the sessions (that were not just presentations) were very unfocused, with some more productive than others. The lack of moderation was a serious impediment to keeping the discussions on track. There were definitely a few times were people would hijack a session to try and talk about or show off their project. While I don’t have a problem with people showing off their work, there was limited time for each session.&lt;/p&gt;
&lt;p&gt;The time limitations on the sessions was another issue. Each one was ~45 minutes, and almost always there was another session waiting for you to leave the room so they could start. I think in a few of the talks I went to, people would have been happy to stay in the room and continue to discuss the subject. Perhaps the expectations, of the session initiators (and myself), on what we would accomplish were too high. Perhaps the 45 minutes should have been spent networking with other people thinking about that topic, and then spawning a more detailed discussion in the future? Again, I think moderation would have helped this.&lt;/p&gt;
&lt;p&gt;There were also some talks, with interesting sounding titles, that were just unproductive. There was too much recounting of what one organization did, with little generalization to what others could use. There was also little consideration of what decisions were made which led to important decisions; e.g. the fact that a project was split into parts A and B which were developed separately was recounted, but not what went into making that decision. Perhaps another example of expectations being too high…&lt;/p&gt;
&lt;p&gt;I’m certainly not going to write off the unconference format – I think it could have led to some really cool things. But I don’t think I will attend another one that has sessions which are so short and under-moderated.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/gilbertgede.wordpress.com/93/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/gilbertgede.wordpress.com/93/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=gilbertgede.wordpress.com&amp;amp;blog=22677911&amp;amp;post=93&amp;amp;subd=gilbertgede&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-10-29T22:50:11+00:00</dc:date>
	<dc:creator>gilbertgede</dc:creator>
</item>
<item rdf:about="http://matthewrocklin.com/blog//work/2012/10/29/Matrix-Computations">
	<title>MRocklin: Matrix Computations in SymPy</title>
	<link>http://matthewrocklin.com/blog//work/2012/10/29/Matrix-Computations</link>
	<content:encoded>&lt;p&gt;I want to translate matrix expressions like this&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Into Fortran code that call BLAS and LAPACK code like this&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;fortran&quot;&gt;    &lt;span class=&quot;k&quot;&gt;subroutine &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;     &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;     &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;alpha&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;     &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;inout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;kd&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;call &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dgemm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'N'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'N'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;call &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;dtrsv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'L'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'N'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'N'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;RETURN&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;    END&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;And then call it in Python like this&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;nA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;....&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Get numpy arrays&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nalpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&quot;what_is_blas&quot;&gt;What is BLAS?&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/BLAS&quot;&gt;BLAS&lt;/a&gt; stands for Basic Linear Algebra Subroutines. It is a library of Fortran functions for dense linear algebra first published in 1979.&lt;/p&gt;

&lt;p&gt;The most famous BLAS routine is &lt;a href=&quot;http://www.netlib.org/blas/dgemm.f&quot;&gt;DGEMM&lt;/a&gt; a routine for &lt;strong&gt;D&lt;/strong&gt;ouble precision &lt;strong&gt;GE&lt;/strong&gt;nerally structured &lt;strong&gt;M&lt;/strong&gt;atrix &lt;strong&gt;M&lt;/strong&gt;ultiplication. &lt;code&gt;DGEMM&lt;/code&gt; is very well implemented. &lt;code&gt;DGEMM&lt;/code&gt; traditionally handles blocking for fewer cache misses, autotuning for each individual architecture, and even assembly level code optimization. You should never code up your own matrix multiply, you should always use &lt;code&gt;DGEMM&lt;/code&gt;. Unfortunately, you may not know Fortran, and, even if you did, you might find the function header to be daunting.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SUBROUTINE DGEMM(TRANSA,TRANSB,M,N,K,ALPHA,A,LDA,B,LDB,BETA,C,LDC)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Even if you’re capable of working at this low-level most scientific users are not. &lt;code&gt;DGEMM&lt;/code&gt; is fast but inaccessible. To solve this problem we usually build layers on top of &lt;code&gt;BLAS&lt;/code&gt;. For example &lt;code&gt;numpy.dot&lt;/code&gt; calls &lt;code&gt;DGEMM&lt;/code&gt; if the BLAS library is available on your system.&lt;/p&gt;

&lt;h2 id=&quot;why_not_just_use_numpy&quot;&gt;Why not just use NumPy?&lt;/h2&gt;

&lt;p&gt;If you’re reading this then you’re probably comfortable with NumPy and you’re very happy that it gives you access to highly optimized low-level code like &lt;code&gt;DGEMM&lt;/code&gt;. What else could we desire? NumPy has two flaws&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Each operation occurs at the Python level. This causes sub-optimal operation ordering and lots of unnecessary copies. For example the following code is executed as follows&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;D&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# store A*B  -&amp;gt; _1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;D&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# store _1*C -&amp;gt; _2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;D&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_2&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# store _2   -&amp;gt;  D&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;It might have been cleaner to multiply &lt;code&gt;A*B*C&lt;/code&gt; as &lt;code&gt;(A*B)*C&lt;/code&gt; or &lt;code&gt;A*(B*C)&lt;/code&gt; depending on the shapes of the matrices. Additionally the temporary matrices &lt;code&gt;_1&lt;/code&gt;, and &lt;code&gt;_2&lt;/code&gt; did not need to be created. If we’re allowed to &lt;em&gt;reason about the computation&lt;/em&gt; before execution then we can make some substantial optimizaitons.&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;BLAS contains many special functions for special cases. For example you can use &lt;code&gt;DSYMM&lt;/code&gt; when one of your matrices is &lt;strong&gt;SY&lt;/strong&gt;metric or &lt;code&gt;DTRMM&lt;/code&gt; when one of your matrices is &lt;strong&gt;TR&lt;/strong&gt;iangular. These allow for faster execution time if we are able to reason about our matrices.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;previous_work&quot;&gt;Previous Work&lt;/h2&gt;

&lt;p&gt;In the cases above we argue that we can make substantial gains if we are allowed to reason about the computation before it is executed. This is the job of a compiler. Computation usually happens as follows:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Write down code&lt;/li&gt;

&lt;li&gt;Reason about and transform code&lt;/li&gt;

&lt;li&gt;Execute code&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Step (2) is often removed in scripting languages for programmer simplicity. There has been a lot of activity recently in putting it back in for array computations. The following projects compile array expressions prior to execution&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;NumExpr&lt;/li&gt;

&lt;li&gt;Theano&lt;/li&gt;

&lt;li&gt;Numba&lt;/li&gt;

&lt;li&gt;… I’m undoubtedly forgetting many excellent projects. Here is &lt;a href=&quot;https://github.com/Theano/Theano/wiki/Lazy-Matrix-Algebra-Ecosystem&quot;&gt;a more complete list&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;where_does_sympy_fit_in&quot;&gt;Where does SymPy fit in?&lt;/h2&gt;

&lt;p&gt;The projects above are all numerical in nature. They are generally good at solving problems of the first kind (operation ordering, inplace operations, …) but none of them think very clearly about the &lt;em&gt;mathematical&lt;/em&gt; properties of the matrices. This is where SymPy can be useful. Using the assumptions logical programming framework SymPy is able to reason about the properties of matrix expressions. Consider the following situation&lt;/p&gt;

&lt;p&gt;We know that &lt;code&gt;A&lt;/code&gt; is symmetric and positive definite. We know that &lt;code&gt;B&lt;/code&gt; is orthogonal.&lt;/p&gt;

&lt;p&gt;Question: is &lt;code&gt;BAB'&lt;/code&gt; symmetric and positive definite?&lt;/p&gt;

&lt;p&gt;Lets see how we can pose this question in SymPy.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orthogonal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Positive-Definiteness is a very important property of matrix expressions. It strongly influences our choice of numerical algorithm. For example the fast &lt;a href=&quot;http://en.wikipedia.org/wiki/Cholesky&quot;&gt;Cholesky algorithm&lt;/a&gt; for LU decomposition may only be used if a matrix is symmetric and positive definite. Expert numerical analysts know this but most scientific programmers do not. NumPy does not know this but SymPy does.&lt;/p&gt;

&lt;h2 id=&quot;describing_blas&quot;&gt;Describing BLAS&lt;/h2&gt;

&lt;p&gt;We describe a new matrix operation in SymPy with code like the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'S'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BLAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; LU Decomposition &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_inputs&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_outputs&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Uof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;view_map&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Both outputs are stored in first input&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;         &lt;span class=&quot;c&quot;&gt;# Always valid&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cholesky&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Cholesky LU Decomposition &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symmetric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive_definite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;This description allows us to consisely describe the expert knowledge used by numerical analysts. It allows us to describe the mathematical properties of linear algebraic operations.&lt;/p&gt;

&lt;h2 id=&quot;matrix_computation_graphs&quot;&gt;Matrix Computation Graphs&lt;/h2&gt;

&lt;p&gt;We usually write code in a linear top-down text file. This representation does not allow the full generality of a program. Instead we need to use a graph.&lt;/p&gt;

&lt;p&gt;A computation can be described as a directed acyclic graph (DAG) where each node in the graph is an atomic computation (a function call like &lt;code&gt;DGEMM&lt;/code&gt; or &lt;code&gt;Cholesky&lt;/code&gt;) and each directed edge represents a data dependency between function calls (an edge from &lt;code&gt;DGEMM&lt;/code&gt; to &lt;code&gt;Cholesky&lt;/code&gt; implies that the &lt;code&gt;Cholesky&lt;/code&gt; requires an output of the &lt;code&gt;DGEMM&lt;/code&gt; call in order to run). This graph may not contain cycles - they would imply that some set of jobs all depend on each other; they could never start.&lt;/p&gt;

&lt;p&gt;Graphs must be eventually linearized and turned into code. Before that happens we can think about optimal ordering and, if we feel adventurous, parallel scheduling onto different machines.&lt;/p&gt;

&lt;p&gt;SymPy contains a very simple Computation graph object. Here we localize all of the logic about inplace operations, ordering, and (eventually) parallel scheduling.&lt;/p&gt;

&lt;h2 id=&quot;translating_matrix_expressions_into_matrix_computations&quot;&gt;Translating Matrix Expressions into Matrix Computations&lt;/h2&gt;

&lt;p&gt;So how can we transform a matrix expression like&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;And a set of predicates like&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lower_triangular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lower_triangular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;invertible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Into a graph of &lt;code&gt;BLAS&lt;/code&gt; calls like one of the following?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;    &lt;span class=&quot;n&quot;&gt;DGEMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DTRSV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;DTRMM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DTRSV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;And, once we have this set of valid computations how do we choose the right one? This is the question that this project faces right now. These are both challenging problems.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.netlib.org/blas/&quot;&gt;BLAS&lt;/a&gt; and &lt;a href=&quot;http://www.netlib.org/lapack/&quot;&gt;LAPACK&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;J. Bergstra, O. Breuleux, F. Bastien, P. Lamblin, R. Pascanu, G. Desjardins, J. Turian, D. Warde-Farley and Y. Bengio. &lt;a href=&quot;http://www.iro.umontreal.ca/~lisa/pointeurs/theano_scipy2010.pdf&quot;&gt;&lt;em&gt;Theano: A CPU and GPU Math Expression Compiler&lt;/em&gt;&lt;/a&gt;. Proceedings of the Python for Scientific Computing Conference (SciPy) 2010. June 30 - July 3, Austin, TX]&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://www.continuum.io/&quot;&gt;Numba at Continuum&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://code.google.com/p/numexpr/&quot;&gt;NumExpr&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;https://github.com/Theano/Theano/wiki/Lazy-Matrix-Algebra-Ecosystem&quot;&gt;A list of matrix projects in Python&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://matthewrocklin.com/pub/ordering/partial-orders.pdf&quot;&gt;M. Rocklin, &lt;em&gt;Partial Ordering in Theano&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded>
	<dc:date>2012-10-29T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://blog.krastanov.org/?p=561">
	<title>Stefan Krastanov: Sage vs SymPy – integration</title>
	<link>http://blog.krastanov.org/2012/10/25/sage-vs-sympy-integration/</link>
	<content:encoded>&lt;p&gt;During the recent GSoC summit I had the chance to participate in many fascinating discussions. One such occasion was while meeting the Sage representative.&lt;/p&gt;
&lt;p&gt;A detail he mentioned, was that during his tests SymPy frequently failed to solve integrals that Sage (using Maxima) was able to solve. An explanation, in which I like to believe, would be that he was testing an old version of SymPy lacking the new integration routines implemented during the last few GSoC projects. Hence my decision the compare the most recent versions of both projects.&lt;/p&gt;
&lt;p&gt;The tested versions are SymPy 0.7.2 and Sage 5.3.&lt;/p&gt;
&lt;p&gt;Depending on screen size and wordpress theme the table might be badly formatted so here is a link to the &lt;a href=&quot;https://raw.github.com/wiki/sympy/sympy/sympy_sage_integration.html&quot; target=&quot;_blank&quot;&gt;wiki html page&lt;/a&gt; and a &lt;a href=&quot;http://krastanov.files.wordpress.com/2012/10/sympy_sage.pdf&quot;&gt;pdf&lt;/a&gt; version.&lt;/p&gt;
&lt;p&gt;It should be noted that Sage is more rigorous about the assumptions on its symbols and so it fails to integrate something like &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x%5En&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;x^n&quot; class=&quot;latex&quot; title=&quot;x^n&quot; /&gt; if &lt;img src=&quot;http://s0.wp.com/latex.php?latex=n&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;n&quot; class=&quot;latex&quot; title=&quot;n&quot; /&gt; is not explicitly different than -1. I personally think that this is a feature and not a bug. Due to this difference however the script used to test Sage differs from the one used for SymPy.&lt;/p&gt;
&lt;p&gt;Another minor methodological difference in the tests is the fact that the timeout pattern that I used failed to work for the Sage interpreter. Hence, SymPy integration timeouts at about 120 seconds while Sage integration is manually interrupted when it takes too much time.&lt;/p&gt;
&lt;p&gt;Final methodological difference is that I purge the SymPy cache between each integral as otherwise the RAM usage becomes too great.&lt;/p&gt;
&lt;p&gt;The results show that SymPy is slightly better in using special functions to solve integrals, but there are also a few integrals that Sage solves while SymPy fails to do so. On few occasions Sage fails disgracefully, meaning  that it returns an error instead of unevaluated integral. When both packages fail to evaluate the integral SymPy is much slower to say so (timeout for SymPy compared to 1 or 2 seconds for Sage to return an unevaluated integral). Finally, on some occasions the results by Sage seem better simplified.&lt;/p&gt;
&lt;p&gt;Integrals solved better by SymPy (if you consider special functions “better”):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7Ba+x%5En+%2B+1%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\frac{1}{a x^n + 1}&quot; class=&quot;latex&quot; title=&quot;\frac{1}{a x^n + 1}&quot; /&gt; with the use of a special function while Sage returns unevaluated integrals&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Ba+x%5En%7D%7Bb+x%5Em+%2B+1%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\frac{a x^n}{b x^m + 1}&quot; class=&quot;latex&quot; title=&quot;\frac{a x^n}{b x^m + 1}&quot; /&gt; with the use of a special function while Sage returns unevaluated integrals&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Ba+x%5En+%2B+1%7D%7Bb+x%5Em+%2B+1%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\frac{a x^n + 1}{b x^m + 1}&quot; class=&quot;latex&quot; title=&quot;\frac{a x^n + 1}{b x^m + 1}&quot; /&gt; with the use of a special function while Sage returns unevaluated integrals&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Ba+x%5E5+%2B+x%5E3+%2B+1%7D%7Bb+x%5E5+%2B+x%5E3+%2B+1%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\frac{a x^5 + x^3 + 1}{b x^5 + x^3 + 1}&quot; class=&quot;latex&quot; title=&quot;\frac{a x^5 + x^3 + 1}{b x^5 + x^3 + 1}&quot; /&gt; with the use of a special function while Sage returns unevaluated integrals&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Integrals solved better by Sage:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Ba+x%5E2%7D%7Bb+x%5E2+%2B+1%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\frac{a x^2}{b x^2 + 1}&quot; class=&quot;latex&quot; title=&quot;\frac{a x^2}{b x^2 + 1}&quot; /&gt; solved by both but Sage’s result is simpler (it uses arctan instead of log)&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B%5Csqrt%7Bx%5E2+%2B+1%7D%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\frac{1}{\sqrt{x^2 + 1}}&quot; class=&quot;latex&quot; title=&quot;\frac{1}{\sqrt{x^2 + 1}}&quot; /&gt; SymPy fails this simple integral&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%5Cleft%28%5Cfrac%7Ba+x%5E3%7D%7Bb+x%5E3+%2B+1%7D%5Cright%29&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\log\left(\frac{a x^3}{b x^3 + 1}\right)&quot; class=&quot;latex&quot; title=&quot;\log\left(\frac{a x^3}{b x^3 + 1}\right)&quot; /&gt; solved by both but Sage’s result is much simpler&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%5Cleft%28%5Cfrac%7Ba+x%5E2+%2B+1%7D%7Bb+x%5E2+%2B+1%7D%5Cright%29&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\log\left(\frac{a x^2 + 1}{b x^2 + 1}\right)&quot; class=&quot;latex&quot; title=&quot;\log\left(\frac{a x^2 + 1}{b x^2 + 1}\right)&quot; /&gt; SymPy fails&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%5Cleft%28%5Cfrac%7Ba+x%5E3+%2B+1%7D%7Bb+x%5E3+%2B+1%7D%5Cright%29&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\log\left(\frac{a x^3 + 1}{b x^3 + 1}\right)&quot; class=&quot;latex&quot; title=&quot;\log\left(\frac{a x^3 + 1}{b x^3 + 1}\right)&quot; /&gt; SymPy fails&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B%5Csin+x+%2B+1%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\frac{1}{\sin x + 1}&quot; class=&quot;latex&quot; title=&quot;\frac{1}{\sin x + 1}&quot; /&gt; SymPy fails&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Ba+%5Csin%5E2+x+%2B+1%7D%7Bb+%5Csin%5E2+x+%2B+1%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\frac{a \sin^2 x + 1}{b \sin^2 x + 1}&quot; class=&quot;latex&quot; title=&quot;\frac{a \sin^2 x + 1}{b \sin^2 x + 1}&quot; /&gt; SymPy fails&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The code for the SymPy tests:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;import signal
from time import clock
from sympy import *
from sympy.core.cache import clear_cache

class TimeoutException(Exception):
pass

def timeout_handler(signum, frame):
raise TimeoutException()

a, b, x = symbols('a b x')
n, m = symbols('n m', integer=True)

integrants = [
x,
a*x**n,
a*x**n + 1,
a*x**b + 1,

1/x,
1/(x + 1),
1/(x**2 + 1),
1/(x**3 + 1),
1/(a*x**n),
1/(a*x**n + 1),
1/(a*x**b + 1),

a*x**2/(b*x**2 + 1),
a*x**3/(b*x**3 + 1),
a*x**n/(b*x**m + 1),
(a*x**2 + 1)/(b*x**2 + 1),
(a*x**3 + 1)/(b*x**3 + 1),
(a*x**n + 1)/(b*x**m + 1),
(a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1),

sqrt(1/x),
sqrt(1/(x + 1)),
sqrt(1/(x**2 + 1)),
sqrt(1/(x**3 + 1)),
sqrt(1/(a*x**n)),
sqrt(1/(a*x**n + 1)),
sqrt(1/(a*x**b + 1)),
sqrt(a*x**2/(b*x**2 + 1)),
sqrt(a*x**3/(b*x**3 + 1)),
sqrt(a*x**n/(b*x**m + 1)),
sqrt((a*x**2 + 1)/(b*x**2 + 1)),
sqrt((a*x**3 + 1)/(b*x**3 + 1)),
sqrt((a*x**n + 1)/(b*x**m + 1)),
sqrt((a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1)),

log(x),
log(1/x),
log(1/(x + 1)),
log(1/(x**2 + 1)),
log(1/(x**3 + 1)),
log(1/(a*x**n)),
log(1/(a*x**n + 1)),
log(1/(a*x**b + 1)),
log(a*x**2/(b*x**2 + 1)),
log(a*x**3/(b*x**3 + 1)),
log(a*x**n/(b*x**m + 1)),
log((a*x**2 + 1)/(b*x**2 + 1)),
log((a*x**3 + 1)/(b*x**3 + 1)),
log((a*x**n + 1)/(b*x**m + 1)),
log((a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1)),

sin(x),
sin(x)**n*cos(x)**m,
sin(a*x)**n*cos(b*x)**m,
1/sin(x),
1/(sin(x) + 1),
1/(sin(x)**2 + 1),
1/(sin(x)**3 + 1),
1/(a*sin(x)**n),
1/(a*sin(x)**n + 1),
1/(a*sin(x)**b + 1),
a*sin(x)**2/(b*sin(x)**2 + 1),
a*sin(x)**3/(b*sin(x)**3 + 1),
a*sin(x)**n/(b*sin(x)**m + 1),
(a*sin(x)**2 + 1)/(b*sin(x)**2 + 1),
(a*sin(x)**3 + 1)/(b*sin(x)**3 + 1),
(a*sin(x)**n + 1)/(b*sin(x)**m + 1),
(a*sin(x)**5 + sin(x)**3 + 1)/(b*sin(x)**5 + sin(x)**3 + 1),
]

integrated = []
durations = []

f_integrants = open('dump_integrants', 'w')
f_integrated = open('dump_integrated', 'w')
f_durations = open('dump_duration', 'w')

for index, integrant in enumerate(integrants):
clear_cache()
print '====================================='
print index, ' of ', len(integrants)
print '###', integrant
start = clock()
try:
old_handler = signal.signal(signal.SIGALRM, timeout_handler)
signal.alarm(120)
integrated.append(integrate(integrant, x))
signal.alarm(0)
except TimeoutException:
integrated.append(TimeoutException)
finally:
signal.signal(signal.SIGALRM, old_handler)
durations.append(clock() - start)
print '###', integrated[-1]
print 'in %f seconds'%durations[-1]

f_integrants.write(str(integrant))
f_integrated.write(str(integrated[-1]))
f_durations.write(str(durations[-1]))
f_integrants.write('\n')
f_integrated.write('\n')
f_durations.write('\n')
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;And for Sage:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;import signal
from time import clock
from sage.all import *
from sage.symbolic.integration.integral import indefinite_integral

class TimeoutException(Exception):
pass

def timeout_handler(signum, frame):
raise TimeoutException()

a, b, x = var('a b x')
n, m = var('n m')
assume(n, 'integer')
assume(m, 'integer')

assume(n != 1)
assume(n != -1)
assume(n != 2)
assume(n&amp;gt;0)
assume(b != 1)
assume(b != -1)
assume(b&amp;gt;0)
assume(a&amp;gt;0)

integrants = [
x,
a*x**n,
a*x**n + 1,
a*x**b + 1,

1/x,
1/(x + 1),
1/(x**2 + 1),
1/(x**3 + 1),
1/(a*x**n),
1/(a*x**n + 1),
1/(a*x**b + 1),

a*x**2/(b*x**2 + 1),
a*x**3/(b*x**3 + 1),
a*x**n/(b*x**m + 1),
(a*x**2 + 1)/(b*x**2 + 1),
(a*x**3 + 1)/(b*x**3 + 1),
(a*x**n + 1)/(b*x**m + 1),
(a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1),

sqrt(1/x),
sqrt(1/(x + 1)),
sqrt(1/(x**2 + 1)),
sqrt(1/(x**3 + 1)),
sqrt(1/(a*x**n)),
sqrt(1/(a*x**n + 1)),
sqrt(1/(a*x**b + 1)),
sqrt(a*x**2/(b*x**2 + 1)),
sqrt(a*x**3/(b*x**3 + 1)),
sqrt(a*x**n/(b*x**m + 1)),
sqrt((a*x**2 + 1)/(b*x**2 + 1)),
sqrt((a*x**3 + 1)/(b*x**3 + 1)),
sqrt((a*x**n + 1)/(b*x**m + 1)),
sqrt((a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1)),

log(x),
log(1/x),
log(1/(x + 1)),
log(1/(x**2 + 1)),
log(1/(x**3 + 1)),
log(1/(a*x**n)),
log(1/(a*x**n + 1)),
log(1/(a*x**b + 1)),
log(a*x**2/(b*x**2 + 1)),
log(a*x**3/(b*x**3 + 1)),
log(a*x**n/(b*x**m + 1)),
log((a*x**2 + 1)/(b*x**2 + 1)),
log((a*x**3 + 1)/(b*x**3 + 1)),
log((a*x**n + 1)/(b*x**m + 1)),
log((a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1)),

sin(x),
sin(x)**n*cos(x)**m,
sin(a*x)**n*cos(b*x)**m,
1/sin(x),
1/(sin(x) + 1),
1/(sin(x)**2 + 1),
1/(sin(x)**3 + 1),
1/(a*sin(x)**n),
1/(a*sin(x)**n + 1),
1/(a*sin(x)**b + 1),
a*sin(x)**2/(b*sin(x)**2 + 1),
a*sin(x)**3/(b*sin(x)**3 + 1),
a*sin(x)**n/(b*sin(x)**m + 1),
(a*sin(x)**2 + 1)/(b*sin(x)**2 + 1),
(a*sin(x)**3 + 1)/(b*sin(x)**3 + 1),
(a*sin(x)**n + 1)/(b*sin(x)**m + 1),
(a*sin(x)**5 + sin(x)**3 + 1)/(b*sin(x)**5 + sin(x)**3 + 1),
]

integrated = []
durations = []

f_integrants = open('dump_integrants', 'w')
f_integrated = open('dump_integrated', 'w')
f_durations = open('dump_duration', 'w')

for index, integrant in enumerate(integrants):
print '====================================='
print index, ' of ', len(integrants)
print '###', integrant
start = clock()
try:
old_handler = signal.signal(signal.SIGALRM, timeout_handler)
signal.alarm(120)
integrated.append(indefinite_integral(integrant, x))
signal.alarm(0)
except Exception, e:
integrated.append(e)
finally:
signal.signal(signal.SIGALRM, old_handler)
durations.append(clock() - start)
print '###', integrated[-1]
print 'in %f seconds'%durations[-1]

f_integrants.write(str(integrant))
f_integrated.write(str(integrated[-1]))
f_durations.write(str(durations[-1]))
f_integrants.write('\n')
f_integrated.write('\n')
f_durations.write('\n')
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Below is the complete table (available as a &lt;a href=&quot;https://raw.github.com/wiki/sympy/sympy/sympy_sage_integration.html&quot; target=&quot;_blank&quot;&gt;wiki html page&lt;/a&gt; and a &lt;a href=&quot;http://krastanov.files.wordpress.com/2012/10/sympy_sage.pdf&quot;&gt;pdf&lt;/a&gt;).&lt;/p&gt;
&lt;table&gt;
&lt;caption&gt;Sympy vs Sage integration routines&lt;/caption&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Legend:&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout or manual interupt&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Return an unevalued integral&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Asking for assumptions&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Solution with fancy special functions&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td colspan=&quot;1&quot; style=&quot;font-size: 10pt;&quot; rowspan=&quot;2&quot;&gt;Integrant&lt;/td&gt;
&lt;td colspan=&quot;2&quot; style=&quot;font-size: 10pt;&quot; rowspan=&quot;1&quot;&gt;Sympy `integrate`&lt;/td&gt;
&lt;td colspan=&quot;2&quot; style=&quot;font-size: 10pt;&quot; rowspan=&quot;1&quot;&gt;Sage `indefinite_integral`&lt;/td&gt;
&lt;td colspan=&quot;1&quot; style=&quot;font-size: 10pt;&quot; rowspan=&quot;2&quot;&gt;Comments&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Result&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;cpu time&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Result&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;cpu time&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x**2/2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/2*x^2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**n&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**(n + 1)/(n + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x^(n + 1)/(n + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage asks whether the denominator is zero before solving.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**n + 1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**(n + 1)/(n + 1) + x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x^(n + 1)/(n + 1) + x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage asks whether the denominator is zero before solving.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**b + 1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**(b + 1)/(b + 1) + x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x^(b + 1)/(b + 1) + x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage asks whether the denominator is zero before solving.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(x + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(x + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(x + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(x**2 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;atan(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;arctan(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(x**3 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(x + 1)/3 – log(x**2 – x + 1)/6 + sqrt(3)*atan(2*sqrt(3)*x/3 – sqrt(3)/3)/3&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/3*sqrt(3)*arctan(1/3*(2*x – 1)*sqrt(3)) + 1/3*log(x + 1) – 1/6*log(x^2 – x + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x**(-n)/a&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x**(-n + 1)/(a*(-n + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x^(-n + 1)/((n – 1)*a)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage asks whether the denominator is zero before solving.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(a*x**n + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*gamma(1/n)*lerchphi(a*x**n*exp_polar(I*pi), 1, 1/n)/(n**2*gamma(1 + 1/n))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(1/(x^n*a + 1), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sympy solves with special functions an integral that Sage cannot solve.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(a*x**b + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*gamma(1/b)*lerchphi(a*x**b*exp_polar(I*pi), 1, 1/b)/(b**2*gamma(1 + 1/b))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(1/(x^b*a + 1), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sympy solves with special functions an integral that Sage cannot solve.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**2/(b*x**2 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*(sqrt(-1/b**3)*log(-b*sqrt(-1/b**3) + x)/2 – sqrt(-1/b**3)*log(b*sqrt(-1/b**3) + x)/2 + x/b)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(x/b – arctan(sqrt(b)*x)/b^(3/2))*a&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**3/(b*x**3 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*(RootSum(_t**3 + 1/(27*b**4), Lambda(_t, _t*log(-3*_t*b + x))) + x/b)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-1/6*(2*sqrt(3)*arctan(1/3*(2*b^(2/3)*x – b^(1/3))*sqrt(3)/b^(1/3))/b^(4/3) – 6*x/b – log(b^(2/3)*x^2 – b^(1/3)*x + 1)/b^(4/3) + 2*log((b^(1/3)*x + 1)/b^(1/3))/b^(4/3))*a&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Interesting examples deserving more study as Sympy uses the sum of the roots of a high order polynomial while Sage uses elementary special functions.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x**n/(b*x**m + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*(n*x*x**n*gamma(n/m + 1/m)*lerchphi(b*x**m*exp_polar(I*pi), 1, n/m + 1/m)/(m**2*gamma(1 + n/m + 1/m)) + x*x**n*gamma(n/m + 1/m)*lerchphi(b*x**m*exp_polar(I*pi), 1, n/m + 1/m)/(m**2*gamma(1 + n/m + 1/m)))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;3&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(m*integrate(x^n/((m – n – 1)*b^2*x^(2*m) + 2*(m – n – 1)*x^m*b + m – n – 1), x) – x^(n + 1)/((m – n – 1)*x^m*b + m – n – 1))*a&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sympy solves with special functions an integral that Sage cannot solve.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(a*x**2 + 1)/(b*x**2 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x/b + sqrt((-a**2 + 2*a*b – b**2)/b**3)*log(-b*sqrt((-a**2 + 2*a*b – b**2)/b**3)/(a – b) + x)/2 – sqrt((-a**2 + 2*a*b – b**2)/b**3)*log(b*sqrt((-a**2 + 2*a*b – b**2)/b**3)/(a – b) + x)/2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x/b – (a – b)*arctan(sqrt(b)*x)/b^(3/2)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage symplifies better (log-to-trig formulas).&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(a*x**3 + 1)/(b*x**3 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x/b + RootSum(_t**3 + (a**3 – 3*a**2*b + 3*a*b**2 – b**3)/(27*b**4), Lambda(_t, _t*log(-3*_t*b/(a – b) + x)))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x/b – 1/3*(a*b – b^2)*sqrt(3)*arctan(1/3*(2*b^(2/3)*x – b^(1/3))*sqrt(3)/b^(1/3))/b^(7/3) + 1/6*(a*b^(2/3) – b^(5/3))*log(b^(2/3)*x^2 – b^(1/3)*x + 1)/b^2 – 1/3*(a*b^(2/3) – b^(5/3))*log((b^(1/3)*x + 1)/b^(1/3))/b^2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Interesting examples deserving more study as Sympy uses the sum of the roots of a high order polynomial while Sage uses elementary special functions.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(a*x**n + 1)/(b*x**m + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*(n*x*x**n*gamma(n/m + 1/m)*lerchphi(b*x**m*exp_polar(I*pi), 1, n/m + 1/m)/(m**2*gamma(1 + n/m + 1/m)) + x*x**n*gamma(n/m + 1/m)*lerchphi(b*x**m*exp_polar(I*pi), 1, n/m + 1/m)/(m**2*gamma(1 + n/m + 1/m))) + x*gamma(1/m)*lerchphi(b*x**m*exp_polar(I*pi), 1, 1/m)/(m**2*gamma(1 + 1/m))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;5&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*m*integrate(x^n/((m – n – 1)*b^2*x^(2*m) + 2*(m – n – 1)*x^m*b + m – n – 1), x) – a*x^(n + 1)/((m – n – 1)*x^m*b + m – n – 1) + integrate(1/(x^m*b + 1), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sympy solves with special functions an integral that Sage cannot solve.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x/b + RootSum(_t**5 + _t**3*(500*a**2*b**3 + 27*a**2 – 1000*a*b**4 – 54*a*b + 500*b**5 + 27*b**2)/(3125*b**6 + 108*b**3) + _t**2*(27*a**3 – 81*a**2*b + 81*a*b**2 – 27*b**3)/(3125*b**6 + 108*b**3) + _t*(9*a**4 – 36*a**3*b + 54*a**2*b**2 – 36*a*b**3 + 9*b**4)/(3125*b**6 + 108*b**3) + (a**5 – 5*a**4*b + 10*a**3*b**2 – 10*a**2*b**3 + 5*a*b**4 – b**5)/(3125*b**6 + 108*b**3), Lambda(_t, _t*log(x + (3662109375*_t**4*b**12 + 3986718750*_t**4*b**9 + 242757000*_t**4*b**6 + 3779136*_t**4*b**3 – 1054687500*_t**3*a*b**9 – 72900000*_t**3*a*b**6 – 1259712*_t**3*a*b**3 + 1054687500*_t**3*b**10 + 72900000*_t**3*b**7 + 1259712*_t**3*b**4 + 410156250*_t**2*a**2*b**9 + 655340625*_t**2*a**2*b**6 + 51267654*_t**2*a**2*b**3 + 944784*_t**2*a**2 – 820312500*_t**2*a*b**10 – 1310681250*_t**2*a*b**7 – 102535308*_t**2*a*b**4 – 1889568*_t**2*a*b + 410156250*_t**2*b**11 + 655340625*_t**2*b**8 + 51267654*_t**2*b**5 + 944784*_t**2*b**2 – 48828125*_t*a**3*b**9 – 186046875*_t*a**3*b**6 + 16774290*_t*a**3*b**3 + 629856*_t*a**3 + 146484375*_t*a**2*b**10 + 558140625*_t*a**2*b**7 – 50322870*_t*a**2*b**4 – 1889568*_t*a**2*b – 146484375*_t*a*b**11 – 558140625*_t*a*b**8 + 50322870*_t*a*b**5 + 1889568*_t*a*b**2 + 48828125*_t*b**12 + 186046875*_t*b**9 – 16774290*_t*b**6 – 629856*_t*b**3 – 2812500*a**4*b**6 + 3596400*a**4*b**3 + 104976*a**4 + 11250000*a**3*b**7 – 14385600*a**3*b**4 – 419904*a**3*b – 16875000*a**2*b**8 + 21578400*a**2*b**5 + 629856*a**2*b**2 + 11250000*a*b**9 – 14385600*a*b**6 – 419904*a*b**3 – 2812500*b**10 + 3596400*b**7 + 104976*b**4)/(9765625*a**4*b**8 + 26493750*a**4*b**5 + 746496*a**4*b**2 – 39062500*a**3*b**9 – 105975000*a**3*b**6 – 2985984*a**3*b**3 + 58593750*a**2*b**10 + 158962500*a**2*b**7 + 4478976*a**2*b**4 – 39062500*a*b**11 – 105975000*a*b**8 – 2985984*a*b**5 + 9765625*b**12 + 26493750*b**9 + 746496*b**6))))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;106&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-(a – b)*integrate((x^3 + 1)/(b*x^5 + x^3 + 1), x)/b + a*x/b&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sympy solves with special functions an integral that Sage cannot solve.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(1/x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2*x*sqrt(1/x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2*x*sqrt(1/x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(1/(x + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2*x*sqrt(1/(x + 1)) + 2*sqrt(1/(x + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2/sqrt(1/(x + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(1/(x**2 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(sqrt(1/(x**2 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;arcsinh(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sympy cannot solve this simple integral while Sage can.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(1/(x**3 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(sqrt(1/(x**3 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;3&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt(1/(x^3 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(x**(-n)/a)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-2*x*sqrt(1/a)*sqrt(x**(-n))/(n – 2)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-2*x*sqrt(x^(-n)/a)/(n-2)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage asks whether the denominator is zero before solving.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(1/(a*x**n + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(sqrt(1/(a*x**n + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;29&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt(1/(x^n*a + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(1/(a*x**b + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(sqrt(1/(a*x**b + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;35&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt(1/(x^b*a + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(a*x**2/(b*x**2 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(a)*x*sqrt(x**2)*sqrt(1/(b*x**2 + 1)) + sqrt(a)*sqrt(x**2)*sqrt(1/(b*x**2 + 1))/(b*x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(sqrt(a)*b*x^2 + sqrt(a))/(sqrt(b*x^2 + 1)*b)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(a*x**3/(b*x**3 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(sqrt(a*x**3/(b*x**3 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;7&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt(a*x^3/(b*x^3 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt(a*x**n/(b*x**m + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;115&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt(x^n*a/(x^m*b + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt((a*x**2 + 1)/(b*x**2 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;110&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt((a*x^2 + 1)/(b*x^2 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt((a*x**3 + 1)/(b*x**3 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;109&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt((a*x^3 + 1)/(b*x^3 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt((a*x**n + 1)/(b*x**m + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;114&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt((x^n*a + 1)/(x^m*b + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sqrt((a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;104&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;integrate(sqrt((a*x^5 + x^3 + 1)/(b*x^5 + x^3 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*log(x) – x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*log(x) – x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(1/x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x*log(x) + x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x*log(x) + x&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(1/(x + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x*log(x + 1) + x – log(x + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-(x + 1)*log(x + 1) + x + 1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(1/(x**2 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x*log(x**2 + 1) + 2*x – 2*I*log(x + I) + I*log(x**2 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x*log(x^2 + 1) + 2*x – 2*arctan(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(1/(x**3 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x*log(x**3 + 1) + 3*x – 3*log(x + 1)/2 + sqrt(3)*I*log(x + 1)/2 + log(x**3 + 1)/2 – sqrt(3)*I*log(x**3 + 1)/2 + sqrt(3)*I*log(x – 1/2 – sqrt(3)*I/2)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;6&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x*log(x^3 + 1) – sqrt(3)*arctan(1/3*(2*x – 1)*sqrt(3)) + 3*x – log(x + 1) + 1/2*log(x^2 – x + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(x**(-n)/a)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-n*x*log(x) + n*x – x*log(a)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;n*x + x*log(x^(-n)/a)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(1/(a*x**n + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(log(1/(a*x**n + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;68&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;n*x – n*integrate(1/(a*e^(n*log(x)) + 1), x) – x*log(x^n*a + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(1/(a*x**b + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;91&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;b*x – b*integrate(1/(a*e^(b*log(x)) + 1), x) – x*log(a*e^(b*log(x)) + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(a*x**2/(b*x**2 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*log(a) + 2*x*log(x) – x*log(b*x**2 + 1) + 2*I*log(x – I*sqrt(1/b))/(b*sqrt(1/b)) – I*log(b*x**2 + 1)/(b*sqrt(1/b))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;10&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*log(a*x^2/(b*x^2 + 1)) – 2*arctan(sqrt(b)*x)/sqrt(b)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(a*x**3/(b*x**3 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-216*b**4*x**6*(1/b)**(7/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 216*(-1)**(2/3)*b**4*x**6*(1/b)**(7/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 72*(-1)**(1/6)*sqrt(3)*b**4*x**6*(1/b)**(7/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 72*sqrt(3)*I*b**4*x**6*(1/b)**(7/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 588*b**2*x**5*(1/b)**(2/3)*log(a)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 1764*b**2*x**5*(1/b)**(2/3)*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 588*b**2*x**5*(1/b)**(2/3)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 630*b**2*x**5*(1/b)**(2/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 420*(-1)**(5/6)*sqrt(3)*b**2*x**5*(1/b)**(2/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 210*sqrt(3)*I*b**2*x**5*(1/b)**(2/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 981*b**2*x**3*(1/b)**(4/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 981*(-1)**(2/3)*b**2*x**3*(1/b)**(4/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 327*(-1)**(1/6)*sqrt(3)*b**2*x**3*(1/b)**(4/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 327*sqrt(3)*I*b**2*x**3*(1/b)**(4/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 135*b**2*(1/b)**(7/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 135*(-1)**(2/3)*b**2*(1/b)**(7/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 45*(-1)**(1/6)*sqrt(3)*b**2*(1/b)**(7/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 45*sqrt(3)*I*b**2*(1/b)**(7/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 147*(-1)**(2/3)*b*x**4*log(a)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 49*(-1)**(1/6)*sqrt(3)*b*x**4*log(a)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 49*(-1)**(5/6)*sqrt(3)*b*x**4*log(a)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 147*(-1)**(1/3)*b*x**4*log(a)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 882*(-1)**(2/3)*b*x**4*log(a)*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(1/6)*sqrt(3)*b*x**4*log(a)*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(5/6)*sqrt(3)*b*x**4*log(a)*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 882*(-1)**(1/3)*b*x**4*log(a)*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(1/3)*b*x**4*log(a)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 98*(-1)**(5/6)*sqrt(3)*b*x**4*log(a)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 98*(-1)**(1/6)*sqrt(3)*b*x**4*log(a)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(2/3)*b*x**4*log(a)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 588*(-1)**(2/3)*b*x**4*log(a)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 1323*(-1)**(2/3)*b*x**4*log(x)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 441*(-1)**(1/6)*sqrt(3)*b*x**4*log(x)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 441*(-1)**(5/6)*sqrt(3)*b*x**4*log(x)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 1323*(-1)**(1/3)*b*x**4*log(x)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 882*(-1)**(1/3)*b*x**4*log(x)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(5/6)*sqrt(3)*b*x**4*log(x)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(1/6)*sqrt(3)*b*x**4*log(x)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 882*(-1)**(2/3)*b*x**4*log(x)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 882*(-1)**(1/3)*b*x**4*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(5/6)*sqrt(3)*b*x**4*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(1/6)*sqrt(3)*b*x**4*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 882*(-1)**(2/3)*b*x**4*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(5/6)*sqrt(3)*b*x**4*log(x – (-1)**(1/3)*(1/b)**(1/3))/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 882*(-1)**(1/3)*b*x**4*log(x – (-1)**(1/3)*(1/b)**(1/3))/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 147*(-1)**(2/3)*b*x**4*log(b*x**3 + 1)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 49*(-1)**(1/6)*sqrt(3)*b*x**4*log(b*x**3 + 1)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 49*(-1)**(5/6)*sqrt(3)*b*x**4*log(b*x**3 + 1)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 147*(-1)**(1/3)*b*x**4*log(b*x**3 + 1)**2/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 588*(-1)**(2/3)*b*x**4*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(1/6)*sqrt(3)*b*x**4*log(x – (-1)**(1/3)*sqrt(3)*I*(1/b)**(1/3)/2 + (-1)**(1/3)*(1/b)**(1/3)/2)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 882*(-1)**(2/3)*b*x**4*log(x – (-1)**(1/3)*sqrt(3)*I*(1/b)**(1/3)/2 + (-1)**(1/3)*(1/b)**(1/3)/2)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(2/3)*b*x**4/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 98*(-1)**(1/6)*sqrt(3)*b*x**4/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 98*(-1)**(5/6)*sqrt(3)*b*x**4/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(1/3)*b*x**4/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 588*b*x**2*(1/b)**(2/3)*log(a)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 1764*b*x**2*(1/b)**(2/3)*log(x)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 588*b*x**2*(1/b)**(2/3)*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 945*b*x**2*(1/b)**(2/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 630*(-1)**(5/6)*sqrt(3)*b*x**2*(1/b)**(2/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 315*sqrt(3)*I*b*x**2*(1/b)**(2/3)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 98*(-1)**(1/6)*sqrt(3)*x*log(a)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 98*(-1)**(5/6)*sqrt(3)*x*log(a)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(2/3)*x*log(a)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(1/3)*x*log(a)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 294*(-1)**(5/6)*sqrt(3)*x*log(x – (-1)**(1/3)*(1/b)**(1/3))/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 882*(-1)**(1/3)*x*log(x – (-1)**(1/3)*(1/b)**(1/3))/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(1/3)*x*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(2/3)*x*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 98*(-1)**(5/6)*sqrt(3)*x*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 98*(-1)**(1/6)*sqrt(3)*x*log(b*x**3 + 1)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) – 294*(-1)**(1/6)*sqrt(3)*x*log(x – (-1)**(1/3)*sqrt(3)*I*(1/b)**(1/3)/2 + (-1)**(1/3)*(1/b)**(1/3)/2)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3)) + 882*(-1)**(2/3)*x*log(x – (-1)**(1/3)*sqrt(3)*I*(1/b)**(1/3)/2 + (-1)**(1/3)*(1/b)**(1/3)/2)/(588*b**2*x**4*(1/b)**(2/3) + 588*b*x*(1/b)**(2/3))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;26&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*log(a*x^3/(b*x^3 + 1)) – 1/2*(2*sqrt(3)*a*arctan(1/3*(2*b^(2/3)*x – b^(1/3))*sqrt(3)/b^(1/3))/b^(1/3) – a*log(b^(2/3)*x^2 – b^(1/3)*x + 1)/b^(1/3) + 2*a*log((b^(1/3)*x + 1)/b^(1/3))/b^(1/3))/a&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage simplifies better.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(a*x**n/(b*x**m + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;96&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(m – n + log(a))*x – m*integrate(1/(b*e^(m*log(x)) + 1), x) – x*log(x^m*b + 1) + x*log(x^n)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log((a*x**2 + 1)/(b*x**2 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(log((a*x**2 + 1)/(b*x**2 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;72&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*log((a*x^2 + 1)/(b*x^2 + 1)) + 2*arctan(sqrt(a)*x)/sqrt(a) – 2*arctan(sqrt(b)*x)/sqrt(b)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage asks whether `a` and `b` are positive and then returns an answer. Sympy fails irrespective of the assumptions.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log((a*x**3 + 1)/(b*x**3 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;89&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;x*log((a*x^3 + 1)/(b*x^3 + 1)) + sqrt(3)*arctan(1/3*(2*a^(2/3)*x – a^(1/3))*sqrt(3)/a^(1/3))/a^(1/3) – sqrt(3)*arctan(1/3*(2*b^(2/3)*x – b^(1/3))*sqrt(3)/b^(1/3))/b^(1/3) – 1/2*log(a^(2/3)*x^2 – a^(1/3)*x + 1)/a^(1/3) + log((a^(1/3)*x + 1)/a^(1/3))/a^(1/3) + 1/2*log(b^(2/3)*x^2 – b^(1/3)*x + 1)/b^(1/3) – log((b^(1/3)*x + 1)/b^(1/3))/b^(1/3)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage asks whether `a` and `b` are positive and then returns an answer. Sympy fails irrespective of the assumptions.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log((a*x**n + 1)/(b*x**m + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;89&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(m – n)*x – m*integrate(1/(b*e^(m*log(x)) + 1), x) + n*integrate(1/(x^n*a + 1), x) – x*log(x^m*b + 1) + x*log(x^n*a + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;4&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log((a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(log((a*x**5 + x**3 + 1)/(b*x**5 + x**3 + 1)), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;42&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-x*log(b*x^5 + x^3 + 1) + x*log(a*x^5 + x^3 + 1) – integrate((2*x^3 + 5)/(b*x^5 + x^3 + 1), x) + integrate((2*x^3 + 5)/(a*x^5 + x^3 + 1), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;When both Sage and Sympy fail, Sage is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sin(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-cos(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-cos(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sin(x)**n*cos(x)**m&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;102&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;No result&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;110&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure by Sage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sin(a*x)**n*cos(b*x)**m&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;81&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;No result&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;112&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure by Sage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/sin(x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;log(cos(x) – 1)/2 – log(cos(x) + 1)/2&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/2*log(cos(x) – 1) – 1/2*log(cos(x) + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(sin(x) + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-2/(tan(x/2) + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;-2/(sin(x)/(cos(x) + 1) + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(sin(x)**2 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;96&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/2*sqrt(2)*arctan(sqrt(2)*tan(x))&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage simply beats Sympy.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(sin(x)**3 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;87&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Maxima: `quotient’ by `zero’&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;78&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure by Sage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;sin(x)**(-n)/a&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(sin(x)**(-n)/a, x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;36&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;No result&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;227&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure by Sage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(a*sin(x)**n + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;98&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Maxima: expt: undefined: 0 to a negative exponent.&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure by Sage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1/(a*sin(x)**b + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;83&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;No result&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;140&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure by Sage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*sin(x)**2/(b*sin(x)**2 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;93&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(x/b – arctan(sqrt(b + 1)*tan(x))/(sqrt(b + 1)*b))*a&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage simply beats Sympy.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*sin(x)**3/(b*sin(x)**3 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;82&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;No result&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;568&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure by Sage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*sin(x)**n/(b*sin(x)**m + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Integral(a*sin(x)**n/(b*sin(x)**m + 1), x)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;24&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Manual Interupt&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1527&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Both Sage and Sympy fail, however Sympy is quicker.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(a*sin(x)**2 + 1)/(b*sin(x)**2 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;98&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;a*x/b – (a – b)*arctan(sqrt(b + 1)*tan(x))/(sqrt(b + 1)*b)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;0&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Sage simply beats Sympy.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(a*sin(x)**3 + 1)/(b*sin(x)**3 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;96&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Manual Interupt&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;203&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(a*sin(x)**n + 1)/(b*sin(x)**m + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;83&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Maxima: expt: undefined: 0 to a negative exponent.&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;1&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Disgraceful failure by Sage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;(a*sin(x)**5 + sin(x)**3 + 1)/(b*sin(x)**5 + sin(x)**3 + 1)&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Timeout&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;89&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;Manual Interupt&lt;/td&gt;
&lt;td style=&quot;font-size: 10pt;&quot;&gt;142&lt;/td&gt;
&lt;td style=&quot;&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;br /&gt;  &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=blog.krastanov.org&amp;amp;blog=15251174&amp;amp;post=561&amp;amp;subd=krastanov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-10-24T23:51:52+00:00</dc:date>
	<dc:creator>Stefan Krastanov</dc:creator>
</item>
<item rdf:about="tag:fseoane.net/blog,2012-10-23:2012/learning-to-rank-with-scikit-learn-the-pairwise-transform/">
	<title>Fabian Pedregosa: Learning to rank with scikit-learn: the pairwise transform</title>
	<link>http://fseoane.net/blog/2012/learning-to-rank-with-scikit-learn-the-pairwise-transform/</link>
	<content:encoded>&lt;p&gt;This tutorial introduces the concept of pairwise preference used in most &lt;a href=&quot;http://en.wikipedia.org/wiki/Learning_to_rank&quot;&gt;ranking problems&lt;/a&gt;. I'll use scikit-learn and for learning and matplotlib for visualization.&lt;/p&gt;
&lt;p&gt;In the ranking setting, training data consists of lists of items with some order specified between items in each list. This order is typically induced by giving a numerical or ordinal score or a binary judgment (e.g. &quot;relevant&quot; or &quot;not relevant&quot;) for each item, so that for any two samples &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt;, either &lt;code&gt;a &amp;lt; b&lt;/code&gt;, &lt;code&gt;b &amp;gt; a&lt;/code&gt; or &lt;code&gt;b&lt;/code&gt; and &lt;code&gt;a&lt;/code&gt; are not comparable.&lt;/p&gt;
&lt;p&gt;For example, in the case of a search engine, our dataset consists of results that belong to different queries and we would like to only compare the relevance for results coming from the same query.&lt;/p&gt;
&lt;p&gt;This order relation is usually domain-specific. For instance, in information retrieval the set of comparable samples is referred to as a &quot;query id&quot;. The goal behind this is to compare only documents that belong to the same query (&lt;a href=&quot;http://dx.doi.org/10.1145/775047.775067&quot;&gt;Joachims 2002&lt;/a&gt;). In medical imaging on the other hand, the order of the labels usually depend on the subject so the comparable samples is given by the different subjects in the study (&lt;a href=&quot;http://hal.inria.fr/hal-00717990/en&quot;&gt;Pedregosa et al 2012&lt;/a&gt;).&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;itertools&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;scipy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pylab&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pl&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sklearn&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;svm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;linear_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cross_validation&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To start with, we'll create a dataset in which the target values consists of three graded measurements Y = {0, 1, 2} and the input data is a collection of 30 samples, each one with two features.&lt;/p&gt;
&lt;p&gt;The set of comparable elements (queries in information retrieval) will consist of two equally sized blocks, $X = X_1 \cup X_2$, where each block is generated using a normal distribution with different mean and covariance. In the pictures, we represent $X_1$ with round markers and $X_2$ with triangular markers.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;seed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;theta&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deg2rad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;concatenate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;concatenate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# slightly displace data corresponding to our second partition&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[::&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;blocks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# split into train and test set&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cross_validation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StratifiedShuffleSplit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b_train&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blocks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;X_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b_test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blocks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# plot the result&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b_train&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'^'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Blues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'o'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Blues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;head_width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'$w$'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;head_width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'$w$'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'equal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;http://fseoane.net/blog/static/uploads/2012/pairwise_transform_files/pairwise_transform_fig_00.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;In the plot we clearly see that for both blocks there's a common vector w such that the projection onto w gives a list with the correct ordering.&lt;/p&gt;
&lt;p&gt;However, because linear considers that output labels live in a metric space it will consider that all pairs are comparable. Thus if we fit this model to the problem above it will fit both blocks at the same time, yielding a result that is clearly not optimal. In the following plot we estimate $\hat{w}$ using an l2-regularized linear model.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;ridge&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;linear_model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ridge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ridge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coef_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;norm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ridge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coef_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'^'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Blues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'o'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Blues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;head_width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'$\hat{w}$'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'equal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Estimation by Ridge regression'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;http://fseoane.net/blog/static/uploads/2012/pairwise_transform_files/pairwise_transform_fig_01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;To assess the quality of our model we need to define a ranking score. Since we are interesting in a model that &lt;em&gt;orders&lt;/em&gt; the data, it is natural to look for a metric that compares the ordering of our model to the given ordering. For this, we use &lt;a href=&quot;http://en.wikipedia.org/wiki/Kendall_tau_rank_correlation_coefficient&quot;&gt;Kendall's tau correlation coefficient&lt;/a&gt;, which is defined as (P - Q)/(P + Q), being P the number of concordant pairs and Q is the number of discordant pairs. This measure is used extensively in the ranking literature (e.g &lt;a href=&quot;http://www.cs.cornell.edu/people/tj/publications/joachims_02c.pdf&quot;&gt;Optimizing Search Engines using Clickthrough Data&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;We thus evaluate this metric on the test set for each block separately.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tau&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kendalltau&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ridge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b_test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b_test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Kendall correlation coefficient for block &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%.5f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tau&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;codehilite&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;Kendall&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;correlation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coefficient&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.71122&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Kendall&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;correlation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coefficient&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.84387&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;The pairwise transform&lt;/h2&gt;
&lt;p&gt;As proved in (&lt;a href=&quot;http://www.mendeley.com/research/support-vector-learning-ordinal-regression/&quot;&gt;Herbrich 1999&lt;/a&gt;), if we consider linear ranking functions, the ranking problem can be transformed into a two-class classification problem. For this, we form the difference of all comparable elements such that our data is transformed into $(x'_k, y'_k) = (x_i - x_j, sign(y_i - y_j))$ for all comparable pairs.&lt;/p&gt;
&lt;p&gt;This way we transformed our ranking problem into a two-class classification problem. The following plot shows this transformed dataset, and color reflects the difference in labels, and our task is to separate positive samples from negative ones. The hyperplane {x^T w = 0} separates these two classes.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# form all pairwise combinations&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;comb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itertools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;combinations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Xp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; \
        &lt;span class=&quot;ow&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blocks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blocks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# skip if same target or different group&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Xp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;yp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# output balanced classes&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;yp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Xp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Xp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asanyarray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Xp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Xp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Xp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'o'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Blues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_space&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linspace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_space&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_space&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'$\{x^T w = 0\}$'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'equal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;http://fseoane.net/blog/static/uploads/2012/pairwise_transform_files/pairwise_transform_fig_02.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;As we see in the previous plot, this classification is separable. This will not always be the case, however, in our training set  there are no order inversions, thus the respective classification problem is separable.&lt;/p&gt;
&lt;p&gt;We will now finally train an Support Vector Machine model on the transformed data. This model is known as RankSVM. We will then plot the training data together with the estimated coefficient $\hat{w}$ by RankSVM.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;clf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;svm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SVC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kernel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'linear'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;clf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Xp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;clf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coef_&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ravel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;norm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coef_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'^'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Blues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'o'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Blues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;head_width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gray'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;head_width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'$\hat{w}$'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'$\hat{w}$'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fontsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'equal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;http://fseoane.net/blog/static/uploads/2012/pairwise_transform_files/pairwise_transform_fig_03.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Finally we will check that as expected, the ranking score (Kendall tau) increases with the RankSVM model respect to linear regression.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tau&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kendalltau&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b_test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b_test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Kendall correlation coefficient for block &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%.5f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tau&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;codehilite&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;Kendall&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;correlation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coefficient&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.83627&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Kendall&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;correlation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coefficient&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.84387&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is indeed higher than the values (0.71122, 0.84387) obtained in the case of linear regression.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Original ipython notebook for this blog post can be found &lt;a href=&quot;https://github.com/fabianp/minirank/blob/master/notebooks/pairwise_transform.ipynb&quot;&gt;here&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;</content:encoded>
	<dc:date>2012-10-22T22:00:00+00:00</dc:date>
	<dc:creator>Fabian Pedregosa</dc:creator>
</item>
<item rdf:about="http://sympystats.wordpress.com/?p=273">
	<title>Matthew Rocklin: GSoC Mentor Summit</title>
	<link>http://sympystats.wordpress.com/2012/10/22/gsoc-mentor-summit/</link>
	<content:encoded>&lt;p&gt;I’m in the airport waiting for my flight after finishing the Google Summer of Code Mentor Summit. This event took place this weekend. Two or three mentors from many of the GSoC projects came out to the Google campus to participate in an un-conference about GSoC. Google and SymPy were kind enough to send me and two others (Stefan Krastanov and Gilbert Gede) so I thought I’d slightly repay the favor by reporting my experiences. I’ll list some generated ideas and thoughts below. They range from the application process, to SymPy and scientific Python in general to some meta-thoughts about the conference itself.&lt;/p&gt;
&lt;h3&gt;Application process&lt;/h3&gt;
&lt;p&gt;How should we improve our application process to attract good students, detect good students, and match good students to appropriate mentors?&lt;/p&gt;
&lt;p&gt;We should ask indirect questions to query for curiosity and passion.&lt;/p&gt;
&lt;p&gt;Negative examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Why do you want to work on SymPy?&lt;/li&gt;
&lt;li&gt;Why do you like Math?&lt;/li&gt;
&lt;li&gt;How long have you been programming?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Positive examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Copy the favorite snippet of SymPy code you’ve seen here and tell us why you like it.&lt;/li&gt;
&lt;li&gt;What aspects of SymPy do you like the most?&lt;/li&gt;
&lt;li&gt;What editor do you use and why?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Experience was that direct questions tend to have low information content (everyone says the same thing). Indirect questions will be ignored by the lazy but engage the engaged. You often want to test for curiosity and passion more than actual experience in the domain.&lt;/p&gt;
&lt;p&gt;We should match mathematically strong students with strong programmer mentors and strong programmer students with strong mathematical mentors. We often do the opposite due to shared interests but this might result in ideal contributions&lt;/p&gt;
&lt;h3&gt;Funding&lt;/h3&gt;
&lt;p&gt;Other people have funding. Should we? What would we do with it? How would we get it? It might not be as hard as we think. Who uses us? Can we get a grant? Are there companies who might be willing to fund directed work on SymPy?&lt;/p&gt;
&lt;h3&gt;Interactions with SymPians&lt;/h3&gt;
&lt;p&gt;This is my first time physically interacting with SymPy contributors other than my old mentor. It was a really positive experience. As a community we’re pretty distributed, both geographically and in applications/modules. Getting together and talking about SymPy was oddly fascinating. We should do it more. It made us think about SymPy at a bigger scale.&lt;/p&gt;
&lt;p&gt;Some thoughts&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Do we want to organize a SymPy meetup (perhaps collocated with some other conference like SciPy)? What would this accomplish?&lt;/li&gt;
&lt;li&gt;What is our big plan for SymPy? Do we have one or are we all just a bunch of hobbyists who work on our own projects? Are we actively pursuing a long term vision? I think that we could be more cohesive and generate more forward momentum. I think that this can be created by occasional collocation.&lt;/li&gt;
&lt;li&gt;This could also be accomplished by some sort of digital meetup that’s more intense than the e-mail/IRC list. An easy test version of this could be a monthly video conference.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Broader community&lt;/h3&gt;
&lt;p&gt;I’m accustomed to academic conferences. I recently had a different experience at the SciPy conference which mixed academic research with code. I really liked this mix of theory and application and had a great time at SciPy. GSoC amplified this change, replacing a lot of academics with attendees that were purely interested in code. This was personally very strange for me, I felt like an outsider.&lt;/p&gt;
&lt;p&gt;The scientific/numeric python community doesn’t care as intensely about many of the issues that are religion to a substantial fraction of the open source world. My disinterest in these topics and my interest in more esoteric/academic topics also made me feel foreign. There were still people like me though and they were very fun to find, just a bit rarer.&lt;/p&gt;
&lt;p&gt;This is the first conference I’ve been to where I was one of the better dressed attendees :)&lt;/p&gt;
&lt;h3&gt;Local Community&lt;/h3&gt;
&lt;p&gt;Other projects of our size exist under an umbrella organization like the Apache foundation. I see our local community as the numpy/scipy/matplotlib stack. How can we more tightly integrate ourselves with this community? NumFocus was started up recently. Should we engage/use NumFocus more? How can we make use of and how can we support our local community?&lt;/p&gt;
&lt;h3&gt;Meta-Mentor Summit&lt;/h3&gt;
&lt;p&gt;This section includes my thoughts about the summit itself. It’s distinctly structured. I’ll share my opinions about this structure.&lt;/p&gt;
&lt;p&gt;The informal meeting spaces were excellent. Far better than the average academic conference. I felt very comfortable introducing myself and my project to everyone. It was a very social and outgoing crowd.&lt;/p&gt;
&lt;p&gt;Some of the sessions were really productive and helpful. The unconference structure had a few strong successes.&lt;/p&gt;
&lt;p&gt;There were a lot of sessions that could have been better organized.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Frequently we didn’t have a goal in mind; this can be ok but I felt that in many cases a clear goal would have kept conversation on topic.&lt;/li&gt;
&lt;li&gt;People very often wanted to share their experiences from events in their organization. This is good, we need to share experiences, but often people wouldn’t filter out org-specific details. We need to be mindful about holding the floor. We have really diverse groups and I’m pretty sure that the KDE guys don’t want to hear the details of symbolic algebra algorithms.&lt;/li&gt;
&lt;li&gt;Sessions are sometimes dominated by one person&lt;/li&gt;
&lt;li&gt;In general I think that we should use neutral meeting facilitators within the larager sessions. I think that they could be much more productive with some light amount of control.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Specific Interactions with other Orgs&lt;/h3&gt;
&lt;p&gt;It was really cool to associate physical humans to all of the software projects I’ve benefitted from over the years. It’s awesome to realize that it’s all built by people, and not by some abstract force. I had a number of positive experiences with orgs like Sage and SciLab that are strongly related to SymPy as well as orgs that are completely unrelated like OpenIntents, Scala, and Tor.&lt;/p&gt;
&lt;h3&gt;Conclusions&lt;/h3&gt;
&lt;p&gt;I had a good time and came away with thoughts of the future. We have something pretty cool here and I think that we should think more aggressively about where we want to take it.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/sympystats.wordpress.com/273/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/sympystats.wordpress.com/273/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=sympystats.wordpress.com&amp;amp;blog=22550280&amp;amp;post=273&amp;amp;subd=sympystats&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-10-22T15:30:03+00:00</dc:date>
	<dc:creator>mrocklin</dc:creator>
</item>
<item rdf:about="tag:blogger.com,1999:blog-2520472460430880330.post-1520965087387896738">
	<title>Official SymPy blog: SymPy 0.7.2 is released</title>
	<link>http://sympy.blogspot.com/2012/10/sympy-072-is-released.html</link>
	<content:encoded>&lt;br /&gt;&lt;br /&gt;&lt;div style=&quot;background-color: white; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-width: 0px 0px 1px; color: #333333; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 10px; line-height: 14px; margin: 14px 0px 5px; overflow: hidden; padding: 5px 0px;&quot; id=&quot;head&quot;&gt;&lt;span style=&quot;font-size: 14px; line-height: 1.6;&quot;&gt;SymPy 0.7.2 was released on October 16, 2012.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;background-color: white; border: 0px; color: #333333; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 10px; line-height: 14px; margin: 0px; padding: 0px;&quot; id=&quot;wiki-content&quot;&gt;&lt;div style=&quot;border: 0px; margin: 0px; padding: 0px;&quot; class=&quot;wrap&quot;&gt;&lt;div style=&quot;border: 0px; margin: 0px; padding: 0px;&quot; class=&quot;gollum-markdown-content instapaper_body&quot; id=&quot;wiki-body&quot;&gt;&lt;div style=&quot;border: 0px; font-size: 14px; line-height: 1.6; margin: 0px; overflow: hidden; padding: 0px;&quot; class=&quot;markdown-body&quot;&gt;&lt;h2 style=&quot;&quot;&gt;Major Changes&lt;/h2&gt;&lt;h3 style=&quot;&quot;&gt;Python 3 support&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;SymPy now supports Python 3. The officially supported versions are 3.2 and 3.3, but 3.1 should also work in a pinch. The Python 3-compatible tarballs will be provided separately, but it is also possible to download Python 2 code and convert it manually, via the bin/use2to3 utility. See the README for more&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;PyPy support&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;All SymPy tests pass in recent nightlies of PyPy, and so it should have full support as of the next version after 1.9.&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Combinatorics&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A new module called Combinatorics was added which is the result of a successful GSoC project. It attempts to replicate the functionality of Combinatorica and currently has full featured support for Permutations, Subsets, Gray codes and Prufer codes.&lt;/div&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; margin-top: 15px; padding: 0px;&quot;&gt;In another GSoC project, facilities from computational group theory were added to the combinatorics module, mainly following the book &quot;Handbook of computational group theory&quot;. Currently only permutation groups are supported. The main functionalities are: basic properties (orbits, stabilizers, random elements...), the Schreier-Sims algorithm (three implementations, in increasing speed: with Jerrum's filter, incremental, and randomized (Monte Carlo)), backtrack searching for subgroups with certain properties.&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Definite Integration&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A new module called meijerint was added, which is also the result of a successful GSoC project. It implements a heuristic algorithm for (mainly) definite integration, similar to the one used in Mathematica. The code is automatically called by the standard integrate() function. This new algorithm allows computation of important integral transforms in many interesting cases, so helper functions for Laplace, Fourier and Mellin transforms were added as well.&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Random Variables&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A new module called stats was added. This introduces a RandomSymbol type which can be used to model uncertainty in expressions.&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Matrix Expressions&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A new matrix submodule named expressions was added. This introduces a MatrixSymbol type which can be used to describe a matrix without explicitly stating its entries. A new family of expression types were also added: Transpose, Inverse, Trace, and BlockMatrix. ImmutableMatrix was added so that explicitly defined matrices could interact with other SymPy expressions.&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Sets&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A number of new sets were added including atomic sets like FiniteSet, Reals, Naturals, Integers, UniversalSet as well as compound sets like ProductSet and TransformationSet. Using these building blocks it is possible to build up a great variety of interesting sets.&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Classical Mechanics&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A physics submodule named machanics was added which assists in formation of equations of motion for constrained multi-body systems. It is the result of 3 GSoC projects. Some nontrivial systems can be solved, and examples are provided.&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Quantum Mechanics&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;Density operator module has been added. The operator can be initialized with generic Kets or Qubits. The Density operator can also work with TensorProducts as arguments. Global methods are also added that compute entropy and fidelity of states. Trace and partial-trace operations can also be performed on these density operators.&lt;/div&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; margin-top: 15px; padding: 0px;&quot;&gt;To enable partial trace operations a Tr module has been added to the core library. While the functionality should remain same, this module is likely to be relocated to an alternate folder in the future. One can currently also use sympy.core.Tr to work on general trace operations, but this module is what is needed to work on trace and partial-trace operations on any sympy.physics.quantum objects.&lt;/div&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; margin-top: 15px; padding: 0px;&quot;&gt;The Density operators, Tr and Partial trace functionality was implemented as part of student participation in GSoC 2012&lt;/div&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; margin-top: 15px; padding: 0px;&quot;&gt;Expanded angular momentum to include coupled-basis states and product-basis states. Operators can also be treated as acting on the coupled basis (default behavior) or on one component of the tensor product states. The methods for coupling and uncoupling these states can work on an arbitrary number of states. Representing, rewriting and applying states and operators between bases has been improved.&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Commutative Algebra&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A new module &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;agca&lt;/code&gt; was started which seeks to support computations in commutative algebra (and eventually algebraic geometry) in the style of Macaulay2 and Singular. Currently there is support for computing Groebner bases of modules over a (generalized) polynomial ring over a field. Based on this, there are algorithms for various standard problems in commutative algebra, e.g., computing intersections of submodules, equality tests in quotient rings, etc....&lt;/div&gt;&lt;h3 style=&quot;&quot;&gt;Plotting Module&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A new plotting module has been added which uses Matplotlib as its back-end. The plotting module has functions to plot the following:&lt;/div&gt;&lt;ul style=&quot;border: 0px; margin: 15px 0px; padding: 0px 0px 0px 30px;&quot;&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;2D line plots&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;2D parametric plots.&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;2D implicit and region plots.&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;3D surface plots.&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;3D parametric surface plots.&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;3D parametric line plots.&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;&quot;&gt;Differential Geometry&lt;/h3&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;Thanks to a GSoC project the beginning of a new module covering the theory of differential geometry was started. It can be imported with&lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;sympy.diffgeom&lt;/code&gt;. It is based on &quot;Functional Differential Geometry&quot; by Sussman and Wisdom. Currently implemented are scalar, vector and form fields over manifolds as well as covariant and other derivatives.&lt;/div&gt;&lt;h2 style=&quot;&quot;&gt;Backwards compatibility breaks&lt;/h2&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;-The KroneckerDelta class was moved from sympy/physics/quantum/kronecker.py to sympy/functions/special/tensor_functions.py.&lt;/div&gt;&lt;ul style=&quot;border: 0px; margin: 15px 0px; padding: 0px 0px 0px 30px;&quot;&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;Merged the KroneckerDelta class in sympy/physics/secondquant.py with the class above.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The Dij class in sympy/functions/special/tensor_functions.py was replaced with KroneckerDelta.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The errors raised for invalid &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;float&lt;/code&gt; calls on SymPy objects were changed in order to emulate more closely the errors raised by the standard library. The &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;__float__&lt;/code&gt; and &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;__complex__&lt;/code&gt; methods of &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;Expr&lt;/code&gt; are concerned with that change.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;solve()&lt;/code&gt; function returns empty lists instead of &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;None&lt;/code&gt; objects if no solutions were found. Idiomatic code of the form&lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;sol = solve(...); if sol:...&lt;/code&gt; will not be affected by this change.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;Piecewise no longer accepts a Set or Interval as a condition. One should explicitly specify a variable using Set().contains(x) to obtain a valid conditional.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The statistics module has been deprecated in favor of the new stats module.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;sympy/galgebra/GA.py:&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;set_main() is no longer needed&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;make_symbols() is deprecated (use sympy.symbols() instead)&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;the symbols used in this package are no longer broadcast to the main program&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The classes for Infinity, NegativeInfinity, and NaN no longer subclass from Rational. Creating a Rational with 0 in the denominator will still return one of these classes, however.&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 style=&quot;&quot;&gt;Other Changes&lt;/h2&gt;&lt;ul style=&quot;border: 0px; margin: 15px 0px; padding: 0px 0px 0px 30px;&quot;&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A new module &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;gaussopt&lt;/code&gt; was added supporting the most basic constructions from Gaussian optics (ray tracing matrices, geometric rays and Gaussian beams).&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;New classes were added to represent the following special functions: classical and generalized exponential integrals (Ei, expint), trigonometric (Si, Ci) and hyperbolic integrals (Shi, Chi), the polylogarithm (polylog) and the Lerch transcendent (lerchphi). In addition to providing all the standard sympy functionality (differentiation, numerical evaluation, rewriting ...), they are supported by both the new meijerint module and the existing hypergeometric function simplification module.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;An ImmutableMatrix class was created. It has the same interface and functionality of the old Matrix but is immutable and inherits from Basic.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A new function in geometry.util named &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;centroid&lt;/code&gt; was added which will calculate the centroid of a collection of geometric entities. And the polygon module now allows triangles to be instantiated from combinations of side lengths and angles (using keywords sss, asa, sas) and defines utility functions to convert between degrees and radians.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;In ntheory.modular there is a function (&lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;solve_congruence&lt;/code&gt;) to solve congruences such as &quot;What number is 2 mod 3, 3 mod 5 and 2 mod 7?&quot;&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;A utility function named &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;find_unit&lt;/code&gt; has been added to physcis.units that allows one to find units that match a given pattern or contain a given unit.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;There have been some additions and modifications to Expr's methods:&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;Although the problem of proving that two expressions are equal is in general a difficult one (since whatever algorithm is used, there will always be an expression that will slip through the algorithm) the new method of Expr named &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;equals&lt;/code&gt; will do its best to answer whether A equals B: A.equals(B) might given True, False or None.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;coeff now supports a third argument &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;n&lt;/code&gt; (which comes 2nd now, instead of &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;right&lt;/code&gt;). This &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;n&lt;/code&gt; is used to indicate the exponent on x which one seeks: &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;(x**2 + 3*x + 4).coeff(x, 1)&lt;/code&gt; -&amp;gt; &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;3&lt;/code&gt;. This makes it possible to extract the constant term from a polynomial:&lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;(x**2 + 3*x + 4).coeff(x, 0)&lt;/code&gt; -&amp;gt; &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;4&lt;/code&gt;.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The method &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;round&lt;/code&gt; has been added to round a SymPy expression to a given a number of decimal places (to the left or right of the decimal point).&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;divmod is now supported for all SymPy numbers.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;In the simplify module, the algorithms for denesting of radicals (sqrtdenest) and simplifying gamma functions (in combsimp) has been significantly improved.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The mathematica-similar &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;TableForm&lt;/code&gt; function has been added to the printing.tableform module so one can easily generate tables with headings.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;In addition to the more noticeable changes listed above, there have been numerous smaller additions, improvements and bug fixes in the commits in this release. See the git log for a full list of all changes. The command &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;git log sympy-0.7.1..sympy-0.7.2&lt;/code&gt; will show all commits made between this release and the last. You can also see the issues closed since the last release &lt;a style=&quot;border: 0px; color: #4183c4; margin: 0px; padding: 0px; text-decoration: initial;&quot; href=&quot;http://code.google.com/p/sympy/issues/list?can=1&amp;amp;q=closed-after%3A2011%2F7%2F30+closed-before%3A2012%2F8%2F23&amp;amp;sort=-closed&amp;amp;colspec=ID+Type+Status+Priority+Milestone+Owner+Summary+Stars+Closed&amp;amp;cells=tiles&quot;&gt;here&lt;/a&gt;.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The expand API has been updated. &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;expand()&lt;/code&gt; now officially supports arbitrary &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;_eval_expand_hint()&lt;/code&gt; methods on custom objects.&lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;_eval_expand_hint()&lt;/code&gt; methods are now only responsible for expanding the top-level expression. All &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;deep=True&lt;/code&gt; related logic happens in&lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;expand()&lt;/code&gt; itself. See the &lt;a style=&quot;border: 0px; color: #4183c4; margin: 0px; padding: 0px; text-decoration: initial;&quot; href=&quot;http://docs.sympy.org/0.7.2/modules/core.html#sympy.core.function.expand&quot;&gt;docstring of &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;expand()&lt;/code&gt;&lt;/a&gt; for more information and an example.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;Two options were added to &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;isympy&lt;/code&gt; to aid in interactive usage. &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;isympy -a&lt;/code&gt; automatically creates symbols, so that typing something like&lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;a&lt;/code&gt; will give &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;Symbol('a')&lt;/code&gt;, even if you never typed &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;a = Symbol('a')&lt;/code&gt; or &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;var('a')&lt;/code&gt;. &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;isympy -i&lt;/code&gt; automatically wraps integer literals with Integer, so that &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;1/2&lt;/code&gt; will give &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;Rational(1, 2)&lt;/code&gt; instead of &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;0.5&lt;/code&gt;. &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;isympy -I&lt;/code&gt; is the same as &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;isympy -a -i&lt;/code&gt;. &lt;code style=&quot;background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(234, 234, 234); font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; margin: 0px 2px; padding: 0px 5px; white-space: nowrap;&quot;&gt;isympy -I&lt;/code&gt; makes isympy act much more like a traditional interactive computer algebra system. These both require IPython.&lt;/div&gt;&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The official documentation at &lt;a style=&quot;border: 0px; color: #4183c4; margin: 0px; padding: 0px; text-decoration: initial;&quot; href=&quot;http://docs.sympy.org/&quot;&gt;http://docs.sympy.org&lt;/a&gt; now includes an extension that automatically hooks the documentation examples in to&lt;a style=&quot;border: 0px; color: #4183c4; margin: 0px; padding: 0px; text-decoration: initial;&quot; href=&quot;http://live.sympy.org/&quot;&gt;SymPy Live&lt;/a&gt;.&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 style=&quot;&quot;&gt;Authors&lt;/h2&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; padding: 0px;&quot;&gt;The following people contributed at least one patch to this release (names are given in alphabetical order by last name). A total of 103 people contributed to this release. People with a * by their names contributed a patch for the first time for this release; 77 people contributed for the first time for this release.&lt;/div&gt;&lt;div style=&quot;border: 0px; margin-bottom: 15px; margin-top: 15px; padding: 0px;&quot;&gt;Thanks to everyone who contributed to this release!&lt;/div&gt;&lt;ul style=&quot;border: 0px; margin-bottom: 0px !important; margin-left: 0px; margin-right: 0px; margin-top: 15px; padding: 0px 0px 0px 30px;&quot;&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Sanket Agarwal*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Swapnil Agarwal*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Bilal Akhtar*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Nathan Alison*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Steve Anton*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Takafumi Arakaki*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Chancellor Arkantos*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Manoj Babu K.*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Tom Bachmann&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Oscar Benjamin&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Raoul Bourquin*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Christian Bühler*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Jorge E. Cardona*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Ondřej Čertík&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Puneeth Chaganti*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Roberto Colistete, Jr.*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Renato Coutinho&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Joan Creus*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Addison Cugini&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Guru Devanla*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Joseph Dougherty*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Comer Duncan*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Joachim Durchholz*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Tarun Gaba*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Luis Garcia*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Gilbert Gede&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Arpit Goyal*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Brian E. Granger&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Alexey U. Gudchenko&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Alexandr Gudulin*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Matt Habel*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Tristan Hume*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Kevin Hunter*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Gert-Ludwig Ingold*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Sachin Irukula*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Sergiu Ivanov*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Siddhant Jain*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Saurabh Jha*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Fredrik Johansson&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;David Ju*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Kendhia*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Andreas Kloeckner*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Carsten Knoll*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Piotr Korgul*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Marcin Kostrzewa*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Stefan Krastanov&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Priit Laes&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Tim Lahey*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Ronan Lamy&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Nikolay Lazarov*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Tomo Lazovich&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Tobias Lenz*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;David Li*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Bharath M R*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Sam Magura&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Aleksandar Makelov*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Saptarshi Mandal&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Imran Ahmed Manzoor*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Shruti Mangipudi*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Davy Mao*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Miha Marolt*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;marshall2389*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Michael Mayorov*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Aaron Meurer&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Raphael Michel*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Jason Moore*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Ljubiša Moćić*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Angadh Nanjangud*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Natalia Nawara*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Jens H. Nielsen*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Sai Nikhil*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Ashwini Oruganti*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Prateek Papriwal*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Mateusz Paprocki&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Vladimir Perić&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Mario Pernici&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Luke Peterson&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Alexandr Popov*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Nicolas Pourcelot&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Martin Povišer*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Matt Rajca*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Julien Rioux*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Matthew Rocklin&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Nikhil Sarda&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Siddhanathan Shanmugam*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Stepan Simsa*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Sam Sleight*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Chris Smith&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Geoffry Song*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Andrew Straw&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Alexey Subach*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Grzegorz Świrski*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Prafullkumar P. Tale&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Matthias Toews*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;tsmars15*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Nichita Utiu*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Srinivas Vasudevan*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Sean Vig&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;vishal*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;George Waksman*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Luca Weihs&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Raymond Wong&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Jeremias Yehdegho&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Jim Zhang*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Tiffany Zhu*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;jerryma1121*&lt;/li&gt;&lt;li style=&quot;border: 0px; margin: 0px; padding: 0px;&quot;&gt;Rom le Clair*&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;background-color: white; border: 0px; color: #333333; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 12px; line-height: 19px; margin: 0px; padding: 0px;&quot; id=&quot;gollum-footer&quot;&gt;&lt;/div&gt;&lt;br /&gt;</content:encoded>
	<dc:date>2012-10-20T04:26:11+00:00</dc:date>
	<dc:creator>Aaron Meurer</dc:creator>
</item>
<item rdf:about="http://brianegranger.com/?p=215">
	<title>Brian Granger: Blogging with the IPython Notebook</title>
	<link>http://brianegranger.com/?p=215</link>
	<content:encoded>&lt;p&gt;The IPython dev team gets a lot of questions about how IPython Notebooks can be used on various blogging platforms. There have been a number of different attempts to use nbconvert to export a notebook to HTML and then embedding that HTML in the blogging platform. With the introduction of &lt;a href=&quot;http://nbviewer.ipython.org&quot; target=&quot;_blank&quot; title=&quot;IPython Notebook Viewer&quot;&gt;nbviewer&lt;/a&gt; it is trivial to embed a Notebook in any web page using iframes.  Here is a simple example:&lt;/p&gt;
&lt;div style=&quot;overflow: auto; white-space: nowrap; width: 435px;&quot; class=&quot;codecolorer-container text default&quot;&gt;&lt;div style=&quot;&quot; class=&quot;text codecolorer&quot;&gt;&amp;lt;iframe src=&quot;http://nbviewer.ipython.org/3835181/&quot; width=&quot;800&quot; height=&quot;1500&quot;&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which produces the embedded Notebook shown below.  The only subtle part is that you have to set the width and height attributes manually to avoid having scroll bars on the iframe.&lt;/p&gt;
&lt;p&gt;&amp;lt;iframe height=&quot;1500&quot; src=&quot;http://nbviewer.ipython.org/3835181/&quot; width=&quot;800&quot;&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/p&gt;</content:encoded>
	<dc:date>2012-10-05T02:54:59+00:00</dc:date>
	<dc:creator>Brian Granger</dc:creator>
</item>
<item rdf:about="http://asmeurersympy.wordpress.com/?p=1160">
	<title>Aaron Meurer: Infinitely nested lists in Python</title>
	<link>https://asmeurersympy.wordpress.com/2012/09/19/infinitely-nested-lists-in-python/</link>
	<content:encoded>&lt;p&gt;Readers of this blog know that I sometimes like to write about some &lt;a href=&quot;http://asmeurersympy.wordpress.com/2009/07/20/modifying-a-list-while-looping-through-it-in-python/&quot;&gt;strange&lt;/a&gt;, &lt;a href=&quot;http://asmeurersympy.wordpress.com/2010/06/16/strange-python-behavior-can-someone-please-explain-to-me-what-is-going-on-here/&quot;&gt;unexpected&lt;/a&gt;, and &lt;a href=&quot;http://asmeurersympy.wordpress.com/2011/03/15/true-is-true-is-false-is-true-is-false/&quot;&gt;unusual&lt;/a&gt; things in Python that I stumble across.  This post is another one of those.&lt;/p&gt;
&lt;p&gt;First, look at this&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;&amp;gt;&amp;gt;&amp;gt; a = []
&amp;gt;&amp;gt;&amp;gt; a.append(a)
&amp;gt;&amp;gt;&amp;gt; a
[[...]]
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;What am I doing here?  I’m creating a list, &lt;code&gt;a&lt;/code&gt;, and I’m adding it to itself.  What you end up with is an infinitely nested list.  The first interesting thing about this is that Python is smart enough to not explode when printing this list.  The following should convince you that &lt;code&gt;a&lt;/code&gt; does indeed contain itself.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;&amp;gt;&amp;gt;&amp;gt; a[0] is a
True
&amp;gt;&amp;gt;&amp;gt; a[0] == a
True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Now, if you have programmed in C, or a similar language that uses pointers, this should not come as a surprise to you.  Lists in Python, like most things, do not actually contain the items inside them.  Rather, they contain references (in C terminology, “pointers”) to the items inside them.  From this perspective, there is no issue at all with &lt;code&gt;a&lt;/code&gt; containing a pointer to itself.&lt;/p&gt;
&lt;p&gt;The first thing I wondered when I saw this was just how clever the printer was at noticing that the list was infinitely nested.  What if we make the cycle a little more complex?&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;&amp;gt;&amp;gt;&amp;gt; a = []
&amp;gt;&amp;gt;&amp;gt; b = []
&amp;gt;&amp;gt;&amp;gt; a.append(b)
&amp;gt;&amp;gt;&amp;gt; b.append(a)
&amp;gt;&amp;gt;&amp;gt; a
[[[...]]]
&amp;gt;&amp;gt;&amp;gt; b
[[[...]]]
&amp;gt;&amp;gt;&amp;gt; a[0] is b
True
&amp;gt;&amp;gt;&amp;gt; b[0] is a
True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;So it still works.  I had thought that maybe repr just catches &lt;code&gt;RuntimeError&lt;/code&gt; and falls back to printing &lt;code&gt;...&lt;/code&gt; when the list is nested too deeply, but it turns out that is not true:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;&amp;gt;&amp;gt;&amp;gt; a = []
&amp;gt;&amp;gt;&amp;gt; for i in range(10000):
...     a = [a]
... 
&amp;gt;&amp;gt;&amp;gt; a
Traceback (most recent call last):
  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1, in &amp;lt;module&amp;gt;
RuntimeError: maximum recursion depth exceeded while getting the repr of a list
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;And by the way, in case you were wondering, it is possible to catch a &lt;code&gt;RuntimeError&lt;/code&gt; (using the same &lt;code&gt;a&lt;/code&gt; as the previous code block)&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;&amp;gt;&amp;gt;&amp;gt; try:
...     print(a)
... except RuntimeError:
...     print(&quot;no way&quot;)
... 
no way
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;(and you also may notice that this is Python 3. Things behave the same way in Python 2)&lt;/p&gt;
&lt;p&gt;Back to infinitely nested lists, we saw that printing works, but there are some things that don’t work.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;&amp;gt;&amp;gt;&amp;gt; a[0] == b
True
&amp;gt;&amp;gt;&amp;gt; a[0] == a
Traceback (most recent call last):
  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1, in &amp;lt;module&amp;gt;
RuntimeError: maximum recursion depth exceeded in comparison
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;a[0] is b&lt;/code&gt; holds (i.e., they are exactly the same object in memory), so &lt;code&gt;==&lt;/code&gt; is able to short-circuit on them.  But to test &lt;code&gt;a[0] == a&lt;/code&gt; it has to recursively compare the elements of &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;a[0]&lt;/code&gt;.  Since it is infinitely nested, this leads to a recursion error.  Now an interesting question: why does this happen?  Is it because &lt;code&gt;==&lt;/code&gt; on lists uses a depth first search?  If it were somehow possible to compare these two objects, would they be equal?&lt;/p&gt;
&lt;p&gt;One is reminded of &lt;a href=&quot;http://en.wikipedia.org/wiki/Russel%27s_paradox&quot;&gt;Russel’s paradox&lt;/a&gt;, and the reason why in &lt;a href=&quot;http://en.wikipedia.org/wiki/Zermelo%E2%80%93Fraenkel_set_theory&quot;&gt;axiomatic set theory&lt;/a&gt;, sets are not allowed to contain themselves. &lt;/p&gt;
&lt;p&gt;Thinking of this brought me to my final question.  Is it possible to make a Python &lt;code&gt;set&lt;/code&gt; that contains itself?  The answer is obviously no, because &lt;code&gt;set&lt;/code&gt; objects can only contain hashable objects, and &lt;code&gt;set&lt;/code&gt; is not hashable.  But &lt;code&gt;frozenset&lt;/code&gt;, &lt;code&gt;set&lt;/code&gt;‘s counterpart, is hashable.  So can you create a &lt;code&gt;frozenset&lt;/code&gt; that contains itself?  The same for &lt;code&gt;tuple&lt;/code&gt;.  The method I used for &lt;code&gt;a&lt;/code&gt; above won’t work, because &lt;code&gt;a&lt;/code&gt; must be mutable to append it to itself.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1160/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1160/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;https://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1160&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-09-19T04:21:08+00:00</dc:date>
	<dc:creator>Aaron Meurer</dc:creator>
</item>
<item rdf:about="http://rhoforsympy.wordpress.com/?p=266">
	<title>Guru Devanla: Ubuntu to Mac – My experience with the new setup</title>
	<link>http://rhoforsympy.wordpress.com/2012/09/09/ubuntu-to-mac-my-experience-with-the-new-setup/</link>
	<content:encoded>&lt;p&gt;Recently I had an opportunity to get my hands dirty on a Mac based development environment. I have done most of my development on Ubuntu and getting to work on Mac was a mixed experience.  As anyone would have guessed the overall UI experience has been great. &lt;/p&gt;
&lt;p&gt;Here are some of the tools I was introduced to during my first week:&lt;/p&gt;
&lt;p&gt;1. SQLPro : This is a nice GUI based MySQL client. I was never impressed with the command line MySql client. I hated it all the more once I started using Postgress and the accompanying client. If you have used Golden for Oracle it is on par with that tool.&lt;/p&gt;
&lt;p&gt;2. iTerm2: This is the tmux equivalent and tuned towards the Mac UI experience. The key bindings are easy to learn and worth spending time getting used to the keyboard shortcuts.&lt;/p&gt;
&lt;p&gt;3. Homebrew: This is the Ubuntu equivalent of apt-get. Other options include MacPorts and Fink. I am yet to familiarize myself with the differences between the options.&lt;/p&gt;
&lt;p&gt;4. Alfred: This is a quick launch app which helps you launch applications using Cmd-Space shortcut. This is equivalent to Alt-F2 on Ubuntu.&lt;/p&gt;
&lt;p&gt;5. PyCharm : This is not Mac specific, but this tool has been handy in helping me step through code and understand the implementation as I debug.&lt;/p&gt;
&lt;p&gt;6. Emacs on Mac : The biggest challenge I had was trying to set up Emacs to reflect my set up on Ubuntu. ‘Monaco’ is the usual font used in most of Mac applications. But, the GUI version of Emacs just does not render Monaco-11 or Monaco-12 in anti-aliased mode.Turning on/off anti-aliasing did not help either. Doing anything in a font bigger than that was very painful. Finally, I settled into to using the non gui-version of Emacs-24. I just had to create an alias called emacs24 and make it point to the Emacs app with the non-Gui option.  Here is the instruction you will need to follow, if you had the same experience.&lt;br /&gt;
a. Install the Emacs-24.x version.&lt;br /&gt;
b. Add this line to your bash_profile.&lt;/p&gt;
&lt;p&gt;alias emacs=”/Applications/Emacs.app/Contents/MacOS/Emacs -nw”&lt;/p&gt;
&lt;p&gt;c. And, happily run Emacs with the beautiful fonts rendered by iTerm2. &lt;/p&gt;
&lt;p&gt;This option also helps you open Emacs within one of the sessions in iTerm2. That way you can remain working on the terminals without the need to switch windows.&lt;/p&gt;
&lt;p&gt;There are some new Python tools I have started working in lately, and that will be the topic of my next post.&lt;/p&gt;
&lt;p&gt;Happy Coding!&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/rhoforsympy.wordpress.com/266/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/rhoforsympy.wordpress.com/266/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=rhoforsympy.wordpress.com&amp;amp;blog=34650270&amp;amp;post=266&amp;amp;subd=rhoforsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-09-09T11:29:19+00:00</dc:date>
	<dc:creator>grdvnl</dc:creator>
</item>
<item rdf:about="http://asmeurersympy.wordpress.com/?p=1154">
	<title>Aaron Meurer: isympy -I:  A saner interactive environment</title>
	<link>https://asmeurersympy.wordpress.com/2012/08/31/isympy-i-a-saner-interactive-environment/</link>
	<content:encoded>&lt;p&gt;As &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/08/21/sympy-live-sphinx-extension/&quot;&gt;promised&lt;/a&gt;, here is another post describing a new feature in the upcoming &lt;a href=&quot;https://github.com/sympy/sympy/wiki/Release-Notes-for-0.7.2&quot;&gt;SymPy 0.7.2&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Automatic Symbol Definition&lt;/h2&gt;
&lt;p&gt;While not as ground breaking as the feature I described in my &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/08/21/sympy-live-sphinx-extension/&quot;&gt;last post&lt;/a&gt;, this feature is still quite useful. As you may know, SymPy is inherently a Python library, meaning that it lives by the rules of Python. If you want to use any name, whether it be a Symbol or a function (like cos), you need to define it (in the case of Symbols), or import it (in the case of functions that come with SymPy). We provide the script &lt;code&gt;isympy&lt;/code&gt; with SymPy to assist with this. This script automatically runs IPython (if it’s installed), imports all names from sympy (&lt;code&gt;from sympy import *&lt;/code&gt;), and defines common symbol names (like &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt;, and &lt;code&gt;z&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;But if you want to use a Symbol that is not one of the ones predefined by &lt;code&gt;isympy&lt;/code&gt;, you will get something like&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [1]: r*x
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
 in ()
----&amp;gt; 1 r*x

NameError: name 'r' is not defined
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;The best solution for this has been either to type &lt;code&gt;var('r')&lt;/code&gt;, which will create the Symbol &lt;code&gt;r&lt;/code&gt; and inject it into the namespace, or to wrap your text in a string and pass it to &lt;code&gt;sympify()&lt;/code&gt;, like &lt;code&gt;sympify(&quot;r*x&quot;)&lt;/code&gt;. Neither of these are very friendly in interactive mode.&lt;/p&gt;
&lt;p&gt;In SymPy 0.7.2, &lt;code&gt;isympy&lt;/code&gt; has a new command line option, &lt;code&gt;isympy -a&lt;/code&gt;, which will enable a mechanism that will automatically define all undefined names as Symbols for you:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [1]: r*x
Out[1]: r⋅x
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;There are some caveats to be aware of when using this feature:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Names must be undefined for &lt;code&gt;isympy -a&lt;/code&gt; to work. If you type something like &lt;code&gt;S*x&lt;/code&gt;, you’ll get:&lt;pre class=&quot;brush: python;&quot;&gt;In [3]: S*x
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&amp;lt;ipython-input-3-6656a97ea7b0&amp;gt; in &amp;lt;module&amp;gt;()
----&amp;gt; 1 S*x

TypeError: unsupported operand type(s) for *: 'SingletonRegistry' and 'Symbol'
&lt;/pre&gt;
&lt;p&gt;That’s because &lt;code&gt;S&lt;/code&gt; is already defined (it’s the &lt;code&gt;SingletonRegistry&lt;/code&gt;, and also a shortcut to &lt;code&gt;sympify()&lt;/code&gt;). To use a name that’s already defined, either create it manually with &lt;code&gt;var()&lt;/code&gt; or delete it using &lt;code&gt;del&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;This only works on the top level namespace. If you define a function with an undefined name, it will not automatically define that symbol when run.&lt;/li&gt;
&lt;li&gt;This works by catching NameError, defining the name, and then re-running the expression. If you have a multiline statement, any lines before the undefined name will be run before the NameError will be caught. This usually won’t happen, but it’s a potential side-effect to be aware of. We plan to rewrite it using either ast or tokenize to avoid this issue.&lt;/li&gt;
&lt;li&gt;Obviously, this is intended for interactive use only. If you copy code and put it in a script, or in some other place where someone might be expected to run it, but not necessarily from &lt;code&gt;isympy -a&lt;/code&gt;, you should include symbol definitions.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Automatic int to Integer Conversion&lt;/h2&gt;
&lt;p&gt;A second thing that is annoying with Python and SymPy is that something like &lt;code&gt;1/2&lt;/code&gt; will be interpreted completely by Python, without any SymPy. This means that something like &lt;code&gt;1/2 + x&lt;/code&gt; will give either &lt;code&gt;0 + x&lt;/code&gt; or &lt;code&gt;0.5 + x&lt;/code&gt;, depending on whether or not &lt;code&gt;__future__.division&lt;/code&gt; has been imported. &lt;code&gt;isympy&lt;/code&gt; has always ran &lt;code&gt;from __future__ import division&lt;/code&gt;, so that you’ll get the latter, but we usually would prefer to get &lt;code&gt;Rational(1, 2)&lt;/code&gt;. Previously, the best way to do this was again to either run it through &lt;code&gt;sympify()&lt;/code&gt; as a string, or to sympify at least one of the numbers (here the &lt;code&gt;S()&lt;/code&gt; shortcut to &lt;code&gt;sympify()&lt;/code&gt; is useful, because you can type just &lt;code&gt;S(1)/2&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;With SymPy 0.7.2, you can run &lt;code&gt;isympy -i&lt;/code&gt;, and it will automatically wrap all integers literals with &lt;code&gt;Integer()&lt;/code&gt;. The result is that &lt;code&gt;1/2&lt;/code&gt; produces &lt;code&gt;Rational(1, 2)&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [1]: 1/2 + x
Out[1]: x + 1/2
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Again, there are a couple of caveats:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If you want to get Python style division, you just need to wrap both arguments in &lt;code&gt;int()&lt;/code&gt;:&lt;pre class=&quot;brush: python;&quot;&gt;In [2]: int(1)/int(2)
Out[2]: 0.5
&lt;/pre&gt;
&lt;p&gt;Of course, if you just want a floating point number, you can just use &lt;code&gt;N()&lt;/code&gt; or &lt;code&gt;.evalf()&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;This works by parsing the text and wrapping all integer literals with &lt;code&gt;Integer()&lt;/code&gt;. This means that if you have a variable set to a Python int, it will still act like a Python int:&lt;pre class=&quot;brush: python;&quot;&gt;In [6]: a = int(1)

In [7]: b = int(2)

In [8]: a/b
Out[8]: 0.5
&lt;/pre&gt;
&lt;p&gt;Note that to even do that example, I had to manually make &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; Python ints by wrapping them in &lt;code&gt;int()&lt;/code&gt;. If I had just done &lt;code&gt;a = 1&lt;/code&gt;, it would have been parsed as &lt;code&gt;a = Integer(1)&lt;/code&gt;, and I would have gotten a SymPy Integer. But this can be an issue if you use the result of some function that returns an int (again, note that most functions in SymPy that return integers return Integer, not int).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;The same as before: this will only work interactively. If you want to reuse your code outside of &lt;code&gt;isympy -i&lt;/code&gt;, you should take care of any int/int by rewriting it as S(int)/int.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since these are both useful features, we’ve added a way that you can get them both at once: by doing &lt;code&gt;isympy -I&lt;/code&gt; (the “I” stands for “Interactive”). If we add similar features in the future, we will also add them to the &lt;code&gt;-I&lt;/code&gt; shortcut (for example, we may add an option to allow &lt;code&gt;^&lt;/code&gt; to automatically be replaced with &lt;code&gt;**&lt;/code&gt;).&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1154/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1154/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;https://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1154&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-31T03:30:08+00:00</dc:date>
	<dc:creator>Aaron Meurer</dc:creator>
</item>
<item rdf:about="http://asmeurersympy.wordpress.com/?p=1122">
	<title>Aaron Meurer: SymPy Live Sphinx Extension</title>
	<link>https://asmeurersympy.wordpress.com/2012/08/21/sympy-live-sphinx-extension/</link>
	<content:encoded>&lt;p&gt;I didn’t blog about SymPy all summer, so I thought I would write a post about my favorite feature of the upcoming SymPy 0.7.2 release.  In fact, this feature has got me more excited than any other feature from any version of SymPy.  Yeah, it’s that good.&lt;/p&gt;
&lt;p&gt;The feature is the SymPy Live Sphinx extension.  To start, if you don’t know about it, check out &lt;a href=&quot;http://live.sympy.org/&quot; target=&quot;_blank&quot;&gt;SymPy Live&lt;/a&gt;.  This is a console that runs on the &lt;a href=&quot;https://developers.google.com/appengine/&quot;&gt;App Engine&lt;/a&gt;.  We’ve actually had this for quite some time, but this winter, it got a huge upgrade thanks to the contribution of some &lt;a href=&quot;http://www.google-melange.com/gci/homepage/google/gci2011&quot;&gt;GCI&lt;/a&gt; students.  Basically, SymPy Live lets you try out SymPy in your browser completely for free, because it runs all the code on the App Engine.  Actually, the console is a full Python console, so you can actually run any valid Python command on it.  This past winter, GCI students upgraded the look of the site, added a mobile version (visit live.sympy.org on your phone), and added other neat features like search history and autocompletion.&lt;/p&gt;
&lt;p&gt;Now, &lt;a href=&quot;http://sphinx.pocoo.org/&quot;&gt;Sphinx&lt;/a&gt; is the documentation system that we use to generate &lt;a href=&quot;http://docs.sympy.org/&quot;&gt;SymPy’s html documentation&lt;/a&gt;. Last year, when I was at the &lt;a href=&quot;http://asmeurersympy.wordpress.com/2011/07/17/the-scipy-2011-conference/&quot;&gt;SciPy Conference&lt;/a&gt;, Mateusz had an idea at the sprints to create an extension linking SymPy Live and Sphinx, so that the examples in Sphinx could be easily run in SymPy Live.  He didn’t finish the extension, but I’m happy to report that thanks to David Li, who was also one of the aforementioned GCI students, the extension is now complete, and is running live on our &lt;a href=&quot;http://docs.sympy.org/dev/&quot;&gt;development docs&lt;/a&gt;.  When SymPy 0.7.2 is released (soon I promise), it will be part of the oficial documentation.&lt;/p&gt;
&lt;p&gt;The best way to see how awesome this is is to visit the website and check it out.  You will need a modern browser (the latest version of Firefox, Safari, or Chrome will work, IE might work too).  Go to a page in the development docs with documentation examples, for example, &lt;a href=&quot;http://docs.sympy.org/dev/tutorial.html#algebra&quot;&gt;http://docs.sympy.org/dev/tutorial.html#algebra&lt;/a&gt;, and click on one of the examples (or click on one of the green “Run code block in SymPy Live” buttons). You should see a console pop up from the bottom-right of the screen, and run your code.  For example:&lt;/p&gt;
&lt;div style=&quot;width: 460px;&quot; class=&quot;wp-caption alignnone&quot; id=&quot;attachment_1149&quot;&gt;&lt;a href=&quot;http://asmeurersympy.files.wordpress.com/2012/08/sympy-live-sphinx.png&quot;&gt;&lt;img src=&quot;http://asmeurersympy.files.wordpress.com/2012/08/sympy-live-sphinx.png?w=450&amp;amp;h=317&quot; title=&quot;SymPy-Live-Sphinx&quot; height=&quot;317&quot; width=&quot;450&quot; alt=&quot;&quot; class=&quot;size-full wp-image-1149&quot; /&gt;&lt;/a&gt;&lt;p class=&quot;wp-caption-text&quot;&gt;Example of the SymPy Live Sphinx extension at &lt;a href=&quot;http://docs.sympy.org/dev/tutorial.html#algebra&quot;&gt;http://docs.sympy.org/dev/tutorial.html#algebra&lt;/a&gt;. Click for larger image.&lt;/p&gt;&lt;/div&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;You can access or hide the console at any time by clicking on the green box at the bottom-right of the page.  If you click on “Settings”, you will see that you can change all the same settings as the regular SymPy Live console, such as the printer type, and the keys for execution and autocompletion.  Additionally, there is a new setting, “Evaluation Mode”, which changes how the Sphinx examples are evaluated.  The default is “Evaluate”.  In this mode, if you click on an example, it is executed immediately.  The other option is “Copy”.  In this mode, if you click an example, it is copied to the console, but not executed right away. This way, you can edit the code to try something different.  Remember, this is a full fledged Python console running SymPy, so you can try literally anything&lt;/p&gt;
&lt;p&gt;So play with this and &lt;a href=&quot;http://groups.google.com/group/sympy&quot;&gt;let us know&lt;/a&gt; what you think.  We would love to hear ways that we can improve the experience even further.  In particular, I think we should think about ways to make the “Copy” mode more user-friendly.  Suggestions welcome!  Also, please &lt;a href=&quot;http://code.google.com/p/sympy/issues&quot;&gt;report any bugs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;And one word of warning:  even though these are the development docs, SymPy Live is still running SymPy 0.7.1.  So some examples may not work until 0.7.2 is released, at which point we will update SymPy Live.&lt;/p&gt;
&lt;p&gt;I believe that this extension represents the future of interactive documentation. I hope you enjoy.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1122/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1122/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;https://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1122&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-21T05:09:13+00:00</dc:date>
	<dc:creator>Aaron Meurer</dc:creator>
</item>
<item rdf:about="http://amakelov.wordpress.com/?p=512">
	<title>Aleksandar Makelov: Google Summer of Code 2012: Week 13</title>
	<link>http://amakelov.wordpress.com/2012/08/20/google-summer-of-code-2012-week-13/</link>
	<content:encoded>&lt;p&gt;Hi all, here’s a brief summary of my 13th (and last) week of GSoC.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I continued my work on centralizers, improving normal closure, derived in lower central series, etc. My most recent pull request containing these additions just got merged and can be found &lt;a href=&quot;https://github.com/sympy/sympy/pull/1495&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;. This week I spent a lot of time on writing better tests and developing some new test practices. The group-theoretical algorithms in the combinatorics module are getting more and more complicated, so better, cleverer and more thorough tests are needed. I came up with the following model for verification:&lt;br /&gt;
- since the results of the tests are very hard to compute by hand, some helper functions are needed that find the wanted object in a brute-force manner using only definitions. For example, we often look for a subgroup with certain properties. The most naive and robust approach to this is to:&lt;br /&gt;
- list all group elements, go over the list and check each element for the given property.&lt;br /&gt;
- Then, make a list of all the “good” elements and compare it (as a set) with the list of all elements of the group the function being tested returns.&lt;br /&gt;
Hence, a new file was created, sympy/combinatorics/testutil.py, that will host such functions. (Needless to say, they are exponential in complexity, and for example going over all the elements of SymmetricGroup(n) becomes infeasible for n larger than 10.)&lt;br /&gt;
- The presence of functions being used to test other functions gets us in a bit of a &lt;a href=&quot;http://en.wikipedia.org/wiki/Quis_custodiet_ipsos_custodes%3F&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;&lt;em&gt;Quis custodiet ipsos custodes?&lt;/em&gt;&lt;/strong&gt;&lt;/a&gt; situation, but this is not fatal: the functions in testutil.py are extremely straightforward compared to the functions in perm_groups.py that they test, and it’s really obvious what they’re doing, so it’ll take less tests to verify &lt;em&gt;them. &lt;/em&gt;&lt;br /&gt;
- In the tests for the new functions from perm_groups.py, I introduced some comments to indicate what (and why) I’m testing. Another practice that seems to be good is to verify the algorithms for small groups (degrees 1, 2, 3) since there are a lot of corner cases there that seem to break them.&lt;/li&gt;
&lt;li&gt;I started work on improving the disjoint cycle notation, namely excluding singleton cycles from the cyclic form; however, there are other changes to handling permutations that are waiting to be merged in the combinatorics module &lt;a href=&quot;https://github.com/sympy/sympy/pull/1498&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;, so I guess I’ll first discuss my changes with &lt;a href=&quot;https://github.com/smichr&quot; target=&quot;_blank&quot;&gt;Christopher&lt;/a&gt;. Currently, I see the following two possibilities for handling the singleton cycles:&lt;br /&gt;
- add a &lt;code&gt;_size&lt;/code&gt; attribute to the Permutation class, and then, when faced with something like &lt;code&gt;Permutation([[2, 3], [4, 5, 6], [8]])&lt;/code&gt;, find the maximum index appearing in the permutation (here it’s 8) and assign the size of the permutation to that + 1. Then it remains to adjust some of the other methods in the class (after I adjusted &lt;strong&gt;mul&lt;/strong&gt; so that it treats permutations of different sizes as if they leave all points outside their domain fixed, all the tests passed) so that they make sense with that new approach to cyclic forms.&lt;br /&gt;
- more ambitious: make a new class, &lt;code&gt;ExtendedArrayForm&lt;/code&gt; or something, with a field &lt;code&gt;_array_form&lt;/code&gt; that holds the usual array form of a permutation. Then we overload the &lt;code&gt;__getitem__&lt;/code&gt; method so that if the index is outside the bounds of &lt;code&gt;self._array_form&lt;/code&gt; we return the index unchanged. Of course, we’ll have to overload other things, like the &lt;code&gt;__len__&lt;/code&gt; and &lt;code&gt;__str__&lt;/code&gt; to make it behave like a list. Then instead of using a list to initialize the array form of a permutation, we use the corresponding &lt;code&gt;ExtendedArrayForm&lt;/code&gt;. This will make all permutations behave as if they are acting on a practically infinite domain, and if we do it that way, we won’t have to make any changes to the methods in &lt;code&gt;Permutation&lt;/code&gt; – everything is going to work as expected, no casework like &lt;code&gt;if len(a) &amp;gt; len(b),...&lt;/code&gt; will be needed. So this sounds like a rather elegant approach. On the other hand, I’m not entirely sure if it is possible to make it completely like a list, and also it doesn’t seem like a very performance-efficient decision since &lt;code&gt;ExtendedArrayForm&lt;/code&gt; instances will be created all the time. (&lt;strong&gt;see the discussion &lt;a href=&quot;https://github.com/sympy/sympy/pull/1498&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;).&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Still nothing on a database of groups. I looked around the web for a while but didn’t find any resources… the search continues. Perhaps I should ask someone more knowledgeable.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That’s it for now, and that’s the end of my series of blog posts for the GSoC, but I don’t really feel that something has ended since it seems that my contributions to the combinatorics module will continue (albeit not that regularly : ) ). After all, it’s a lot of fun, and there are a lot more things to be implemented/fixed there! So, a big “Thank you” to everyone who helped me get through (and to) GSoC, it’s been a pleasure and I learned a lot. Goodbye!&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/amakelov.wordpress.com/512/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/amakelov.wordpress.com/512/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=amakelov.wordpress.com&amp;amp;blog=35896871&amp;amp;post=512&amp;amp;subd=amakelov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-20T14:38:23+00:00</dc:date>
	<dc:creator>Александър Макелов</dc:creator>
</item>
<item rdf:about="http://www.catchmrbharath.in/programming/2012/08/19/gsoc-last-week">
	<title>Bharath M R: GSoC last week</title>
	<link>http://www.catchmrbharath.in/programming/2012/08/19/gsoc-last-week</link>
	<content:encoded>&lt;p&gt;This happens to be the last week of GSoC. The major things that I accomplished this week are&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Got pylab to work interactively.&lt;/li&gt;

&lt;li&gt;Made more changes to the documentation of plotting module.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I have a pull request for the restructured plotting module at &lt;a href=&quot;https://github.com/sympy/sympy/pull/1468&quot;&gt;here&lt;/a&gt;. There has been lots of discussions on how the new plot API should look like in the pull request. The API as of now has 5 functions:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;plot_line&lt;/code&gt; which plots 2D line plots, which I think I will change to &lt;code&gt;plot&lt;/code&gt;.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;plot_parametric&lt;/code&gt; which plots 2D parametric plots.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;plot3D&lt;/code&gt; which plots 3D plots.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;plot3D_parametric&lt;/code&gt; which plots 3D parametric line plots. I think I will have to change it into &lt;code&gt;plot_parametric3D&lt;/code&gt;.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;plot3D_surface&lt;/code&gt; which plots 3D parametric surfaces.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The names are slightly confusing, but the alternative to these names are big. If you have any good names for 3D plots, please leave it in the comments.&lt;/p&gt;

&lt;p&gt;I will have another post describing the things I learnt over this GSoC period.&lt;/p&gt;</content:encoded>
	<dc:date>2012-08-19T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://blog.catchmrbharath.in/programming/2012/08/19/gsoc-last-week">
	<title>Bharath M R: GSoC last week</title>
	<link>http://blog.catchmrbharath.in/programming/2012/08/19/gsoc-last-week</link>
	<content:encoded>&lt;p&gt;This happens to be the last week of GSoC. The major things that I accomplished this week are&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Got pylab to work interactively.&lt;/li&gt;

&lt;li&gt;Made more changes to the documentation of plotting module.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I have a pull request for the restructured plotting module at &lt;a href=&quot;https://github.com/sympy/sympy/pull/1468&quot;&gt;here&lt;/a&gt;. There has been lots of discussions on how the new plot API should look like in the pull request. The API as of now has 5 functions:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;plot_line&lt;/code&gt; which plots 2D line plots, which I think I will change to &lt;code&gt;plot&lt;/code&gt;.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;plot_parametric&lt;/code&gt; which plots 2D parametric plots.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;plot3D&lt;/code&gt; which plots 3D plots.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;plot3D_parametric&lt;/code&gt; which plots 3D parametric line plots. I think I will have to change it into &lt;code&gt;plot_parametric3D&lt;/code&gt;.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;plot3D_surface&lt;/code&gt; which plots 3D parametric surfaces.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The names are slightly confusing, but the alternative to these names are big. If you have any good names for 3D plots, please leave it in the comments.&lt;/p&gt;

&lt;p&gt;I will have another post describing the things I learnt over this GSoC period.&lt;/p&gt;</content:encoded>
	<dc:date>2012-08-19T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://amakelov.wordpress.com/?p=484">
	<title>Aleksandar Makelov: Google Summer of Code 2012: Week 12</title>
	<link>http://amakelov.wordpress.com/2012/08/13/google-summer-of-code-2012-week-12/</link>
	<content:encoded>&lt;p&gt;Hi all, here’s a brief summary of the 12th week of my GSoC:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Centralizers got some more attention since there were several bugs in the implementation from last week; this also exposed a bug in .subgroup_search() as it is on sympy/master right now. Fortunately, I located it and fixed it earlier today, so the fix for .subgroup_search() will be contained in my next pull request. In fact, it is just three more lines that should be added. Namely,&lt;pre class=&quot;brush: python; wrap-lines: false;&quot;&gt;# line 29: set the next element from the current branch and update
# accorndingly
c[l] += 1
element = ~(computed_words[l - 1])
&lt;/pre&gt;
&lt;p&gt;should be replaced with&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python; wrap-lines: false;&quot;&gt;# line 29: set the next element from the current branch and update
# accorndingly
c[l] += 1
if l == 0:
    element = identity
else:
    element = ~(computed_words[l - 1])
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;since we might be at the bottom level with &lt;img src=&quot;http://s0.wp.com/latex.php?latex=l%3D0&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;l=0&quot; class=&quot;latex&quot; title=&quot;l=0&quot; /&gt;. In this case, python doesn’t yell at you for looking up computed_words[-1] since negative indices wrap around the list in python. Yet another silly mistake that’s incredibly hard to track down! I hope that it will work properly from now on, and I’ll have to include some more tests to it.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;The description of the algorithm for finding the center in polynomial time given in [1] didn’t really make sense to me, so instead a straightforward one,&lt;br /&gt;
&lt;pre class=&quot;brush: python;&quot;&gt;def center(self):
    return self.centralizer(self)
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;was used. This can be updated later when I (or someone else) figures out the polynomial-time algorithm.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;A new, faster algorithm for finding normal closures: this one uses the incremental version of Schreier-Sims, and some randomization. It’s described in [1].&lt;/li&gt;
&lt;li&gt;Some applications of normal closure: the derived series, lower cenral series, the commutator of two subgroups of a group, nilpotency testing. Now we have things like this:&lt;br /&gt;
&lt;pre class=&quot;brush: python; wrap-lines: false;&quot;&gt;In [68]: from sympy.combinatorics.named_groups import *
In [69]: S = SymmetricGroup(4)
In [70]: ds = S.derived_series()
In [71]: len(ds)
Out[71]: 4
In [72]: ds[1] == AlternatingGroup(4)
Out[72]: True
In [73]: ds[2] == DihedralGroup(2)
Out[73]: True
In [74]: ds[3] == PermutationGroup([Permutation([0, 1, 2, 3])])
Out[74]: True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;demonstrating the well-known normal series of groups &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e+%3C+K_4+%3C+A_4+%3C+S_4&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;e &amp;lt; K_4 &amp;lt; A_4 &amp;lt; S_4&quot; class=&quot;latex&quot; title=&quot;e &amp;lt; K_4 &amp;lt; A_4 &amp;lt; S_4&quot; /&gt; that solves the symmetric group on 4 letters. Note that the normal closure algorithm was already there thanks to the work of &lt;a href=&quot;https://github.com/pernici&quot; target=&quot;_blank&quot;&gt;Mario&lt;/a&gt;, I just improved it a bit and added some applications.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Moved DirectProduct() to a new file, group_constructs.py, that is planned to hold functions that treat several groups equally (for one other example, the commutator of two groups in the full symmetric group) rather than treating them in some sort of subgroup-supergroup relationship (such as .centralizer()).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I wrote docstrings for the new stuff, and my current work can be found on &lt;a href=&quot;https://github.com/amakelov/sympy/tree/week10&quot; target=&quot;_blank&quot;&gt;my week10 branch&lt;/a&gt;. There will be some comprehensive test following the new additions (and I’ll need GAP to verify the results of some of them, probably). It seems that Todd-Coxeter won’t happen during GSoC since there’s just one more week; instead, I plan to focus on improving disjoint cycle notation and group databases.&lt;/p&gt;
&lt;p&gt;[1] Derek F. Holt, Bettina Eick, Bettina, Eamonn A. O’Brien, “Handbook of computational group theory”, Discrete Mathematics and its Applications (Boca Raton). Chapman &amp;amp; Hall/CRC, Boca Raton, FL, 2005. ISBN 1-58488-372-3&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/amakelov.wordpress.com/484/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/amakelov.wordpress.com/484/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=amakelov.wordpress.com&amp;amp;blog=35896871&amp;amp;post=484&amp;amp;subd=amakelov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-13T15:00:09+00:00</dc:date>
	<dc:creator>Александър Макелов</dc:creator>
</item>
<item rdf:about="http://rhoforsympy.wordpress.com/?p=251">
	<title>Guru Devanla: Week 12 :  Starting work on Shor’s algorithm</title>
	<link>http://rhoforsympy.wordpress.com/2012/08/13/week-12-starting-work-on-shors-algorithm/</link>
	<content:encoded>&lt;p&gt;This has been a great 12 week run filled with learning and valuable experience! I believe I have accomplished most of what I had set out to do.  The only other thing pending as far as proposed tasks goes is to relocate the Tr module. This would be based on decisions that needs to be taken by more experienced folks here! Once, the decision is made, I don’t think this would take too much of my time. (I am estimating this based on the current approaches that have been proposed).  Therefore, I am committed to getting this done even if this goes beyond GSoC pencils down deadline which is this week!&lt;/p&gt;
&lt;p&gt;So, that was all about the wrap up! So, what I am doing now?&lt;/p&gt;
&lt;p&gt;~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.&lt;/p&gt;
&lt;p&gt;Looking forward, I have taken up another interesting task I am excited to work on.  Past week I started working on implementing/completing Shor’s algorithm. The 2 major activities that consumed my time this week were&lt;/p&gt;
&lt;p&gt;a) Understand Shor’s algorithm in more detail to help me understand what is available in the current implementation.&lt;/p&gt;
&lt;p&gt;b) Review the current implementation and plan on next steps.&lt;/p&gt;
&lt;p&gt;After reviewing the current implementation, I have decided to approach this task with the following smaller tasks:&lt;/p&gt;
&lt;p&gt;a) Review and complete the implementation of &lt;strong&gt;&lt;em&gt;QFT gate&lt;/em&gt;&lt;/strong&gt; ( include tests, documentation), so that it can work independent of Shor’s algorithm.&lt;/p&gt;
&lt;p&gt;b) Review and complete the implementation of &lt;strong&gt;&lt;em&gt;CMOD gate&lt;/em&gt;&lt;/strong&gt;. Right now, the implementation is not complete, and needs more tests too. This is the set of gates that would do the  |a mod N&amp;gt; * |state&amp;gt; over 2^j times for j = { 0, 1, ….2^(n-1)}&lt;/p&gt;
&lt;p&gt;c) Put this all together and re-factor the current implementation (especially break down current &lt;strong&gt;&lt;em&gt;period_find&lt;/em&gt;()&lt;/strong&gt; ) to help more detail testing.&lt;/p&gt;
&lt;p&gt;d) Also, I plan to provide a argument to shor() method, to work as a &lt;em&gt;flag&lt;/em&gt; to turn on detail logging as the circuit progresses.&lt;/p&gt;
&lt;p&gt;All the code I am currenly reviewing and planning to work on are available on the master branch even though it is not complete.&lt;/p&gt;
&lt;p&gt;Happy coding!&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/rhoforsympy.wordpress.com/251/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/rhoforsympy.wordpress.com/251/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=rhoforsympy.wordpress.com&amp;amp;blog=34650270&amp;amp;post=251&amp;amp;subd=rhoforsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-13T06:00:17+00:00</dc:date>
	<dc:creator>grdvnl</dc:creator>
</item>
<item rdf:about="http://scolobb.wordpress.com/?p=384">
	<title>Sergiu Ivanov: The Revolution (The Preview)</title>
	<link>http://scolobb.wordpress.com/2012/08/12/the-revolution-the-preview/</link>
	<content:encoded>&lt;p&gt;This week I continued the work on diagram embeddings and, unfortunately, I have discovered that &lt;tt&gt;Diagram&lt;/tt&gt; did not actually work properly.  I have written a status report E-mail to Tom, in which I briefly outine the progess.  This E-mail (with some omissions) will serve as this week’s blog post, because writing a proper blog post would take me at least three hours, and I would rather code right now, given the limited timeframe.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;
Unfortunately, I’ve got some, well, ambiguous news.&lt;/p&gt;
&lt;p&gt;Remember I told you about hash-randomisation failures in computing&lt;br /&gt;
diagram embeddings?  Well, it turned out that diagram embeddings was&lt;br /&gt;
quite OK, and the problem went as far back as the Diagram class.&lt;br /&gt;
Essentially, I have done a really bad job implementing it at the&lt;br /&gt;
beginning of the summer: I wanted it to directly store all possible&lt;br /&gt;
morphism compositions.  However, in that implementation, I didn’t&lt;br /&gt;
really store all compositions, but just a part of them; which part I&lt;br /&gt;
stored depended on the order in which the morphisms were supplied&lt;br /&gt;
(severe facepalm &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_sad.gif&quot; alt=&quot;:-(&quot; class=&quot;wp-smiley&quot; /&gt;  )&lt;/p&gt;
&lt;p&gt;I tried thinking of some good fixes, but, as you can easily imagine,&lt;br /&gt;
the whole idea of storing all composites has suffered an epic&lt;br /&gt;
disintegration in the face of diagrams with cycles.  I am really&lt;br /&gt;
_really_ astonished at how this has managed to slip by me for such a&lt;br /&gt;
long time! &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_sad.gif&quot; alt=&quot;:-(&quot; class=&quot;wp-smiley&quot; /&gt; &lt;/p&gt;
&lt;p&gt;I have spent the first one third of Friday on trying to save the&lt;br /&gt;
existing design somehow, by carefully processing all possible edge&lt;br /&gt;
cases, but this has very quickly started to be abominable, and, of&lt;br /&gt;
course, it didn’t work.  So, I have spent the greater part of Friday&lt;br /&gt;
on thinking out a new Diagram.  I have spent all of yesterday, (all of&lt;br /&gt;
Saturday, that is), on implementing this new concept.  Basically, the&lt;br /&gt;
new Diagram only stores the relevant generator morphisms, but it is&lt;br /&gt;
still able to correctly determine and enumerate the morphisms that&lt;br /&gt;
belong to it.  It is also capable of determining whether it is finite&lt;br /&gt;
or not (i.e., whether there are cycles in the underlying directed&lt;br /&gt;
multigraph).  When asked for all morphisms, the new Diagram yields a&lt;br /&gt;
generator which acts correctly both in the finite and infinite cases.&lt;br /&gt;
In the finite case it produces all the morphisms of the Diagram.  This&lt;br /&gt;
is clearly impossible in the infinite case, but Diagram is&lt;br /&gt;
sufficiently clever in this case to produce the morphisms in a&lt;br /&gt;
BFS-like manner.  Intuitively, it will first yield all length one&lt;br /&gt;
morphisms, then all morphisms of length two, etc.&lt;/p&gt;
&lt;p&gt;I have made some changes to the interface of the Diagram to better&lt;br /&gt;
reflect the new internals.  Nevertheless, the behaviour in the finite&lt;br /&gt;
case is the same as that of the old Diagram (modulo some property&lt;br /&gt;
names and minor changes, of course).&lt;/p&gt;
&lt;p&gt;One bit of good news that deserves standing out in a separate&lt;br /&gt;
paragraph is that I only had to change _one_ line of code in&lt;br /&gt;
diagram_drawing.py to get it to work with the new Diagram.  (Well, I&lt;br /&gt;
did drop three other lines, because they were redundant), so this&lt;br /&gt;
radical swerve with the Diagram has left the larger part of my GSoC&lt;br /&gt;
work unaffected.&lt;/p&gt;
&lt;p&gt;Now, I have started cherry-picking the diagram embeddings code, and I&lt;br /&gt;
have arrived at a conclusion that Diagram has to be further extended.&lt;br /&gt;
(“Extending” means adding something new, not rewriting it again.)&lt;br /&gt;
Namely, it is insufficient to know whether the whole Diagram is finite&lt;br /&gt;
or not; I really need to know whether a certain hom-set is finite or&lt;br /&gt;
not.  It’s not that hard to implement, and I’ve got a cool book on&lt;br /&gt;
graphs; however, it’s going to require some extra time.&lt;/p&gt;
&lt;p&gt;Here comes the most important part of my message: I’m working at the&lt;br /&gt;
fullest possible cruising speed (not sprinting yet; that I’m saving&lt;br /&gt;
for the last 100m).  I won’t obviously have everything done tomorrow,&lt;br /&gt;
on Monday; however, I strongly believe that I only need another couple&lt;br /&gt;
days to finish the bulk of inferencing.  Provided that on Monday we&lt;br /&gt;
have what is referred to as _soft_ pencils-down date, I hope that I’m&lt;br /&gt;
still OK with the GSoC timeframe.  Further, I think I have already&lt;br /&gt;
mentioned a couple times that I’m going to have another couple free&lt;br /&gt;
weeks after GSoC, during which I will be easily able to finalise&lt;br /&gt;
whatever will be unfinished.  Do note, however, that I definitely&lt;br /&gt;
expect to have inferencing done _within_ the GSoC timeframe.&lt;/p&gt;
&lt;p&gt;Conclusion: despite the rather radical direction things have taken in&lt;br /&gt;
the last two days, I’m _still_ more or less fine with the timing.&lt;/p&gt;
&lt;p&gt;At the moment, you will not be able to see the code I’m working on on&lt;br /&gt;
GitHub.  The reason is that I’m juggling branches rather ninja-ily&lt;br /&gt;
right now, so I don’t really have the most relevant one to push&lt;br /&gt;
online, and they are all relatively short-lived.  I do expect to get&lt;br /&gt;
back to working sequentially today, and once I’ve got there, I’ll push&lt;br /&gt;
to ct3-commutativity to reflect the updates.&lt;/p&gt;
&lt;p&gt;I’m documenting everything I do in as minute detail as possible.  I&lt;br /&gt;
think the Diagram class and the embeddings functionality has more&lt;br /&gt;
comments than actual code.  I expect this to make reviewing and later&lt;br /&gt;
maintenance considerably more agreeable.  Further, my commits are&lt;br /&gt;
almost all rather short, with acceptably long commit messages.  There&lt;br /&gt;
is one commit that breaks the rule, however: the commit which adds the&lt;br /&gt;
new Diagram.  It is one relatively large chunk of code, which replaces&lt;br /&gt;
the old Diagram with the new one and shows that the old tests still&lt;br /&gt;
pass modulo minor changes.  I have nevertheless reformatted the&lt;br /&gt;
history a bit to make this commit easier to review and, of course, the&lt;br /&gt;
code itself is just literally stuffed with comments.  All other&lt;br /&gt;
commits are much more like my usual ones.
&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Whenever I’m done with the core parts of inferencing, I will write a proper blogpost.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/scolobb.wordpress.com/384/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/scolobb.wordpress.com/384/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=scolobb.wordpress.com&amp;amp;blog=35433045&amp;amp;post=384&amp;amp;subd=scolobb&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-12T19:16:45+00:00</dc:date>
	<dc:creator>scolobb</dc:creator>
</item>
<item rdf:about="http://angadhsympy.wordpress.com/?p=420">
	<title>Angadh Nanjangud: GSoC blog post</title>
	<link>http://angadhsympy.wordpress.com/2012/08/12/penultimate-wee/</link>
	<content:encoded>&lt;p&gt;Penultimate week of the GSoC period and it has been busy busy busy.&lt;/p&gt;
&lt;p&gt;In my last post I had spoken about opening a PR for LagrangesMethod and about cleaning up the PR on energy functions. (links to both are in last week’s post and I won’t repeat them here.) Much of this week was spent cleaning up both those PRs and quite extensive testing on LagrangesMethod. The testing has been mostly successful. I shall explaing why ‘mostly’ in the a bit. The PR for the renergy functions has been merged and I’m just waiting for approval from ‘the boss’ so that LagrangesMethod can be merged too.&lt;/p&gt;
&lt;p&gt;I would like to direct the reader to my &lt;a href=&quot;https://github.com/sympy/sympy/wiki/GSoC-2012-Application-Angadh-Nanjangud%3A-sympy.physics.mechanics&quot;&gt;proposal&lt;/a&gt;. In it I had said that I would write this class only for unconstrained systems. The idea was to modify this to be a ‘complete’ class post the GSoC period. But as we got into the week to begin working on this class, Gilbert and I decided that we would make it a full fledged Lagrange class; that could handle any kind of constraint on mechanical systems. Constraints on mechanical systems are basically  of 2 types – configuration constraints (or holonomic constraints) and velocity constraints (or non-holonomic constraints). Depending on the methods used (Newton-Euler or Lagrange or Kane’s method and so on) these constraint equations are accounted for differently In the case of Lagrange’s method, there are additional terms due to these constraints that result in the introduction of the Lagrange multipliers. So, basically, repeating myself for the sake of clairty, one can now obtain the equations of motion in sympy.physics.mechanics using LagrangesMethod for any kind of system. I would even like to go out on a limb (quite literally under my current circumstances &lt;img src=&quot;http://s2.wp.com/wp-includes/images/smilies/icon_razz.gif&quot; alt=&quot;:P&quot; class=&quot;wp-smiley&quot; /&gt; ) and claim that it could be made use of for more generic applications involving ‘The Method of Lagrange Multipliers’ provided the user has the Lagrangian and constraint equations. (The documentation will however be limited to the domain of mechanical systems but shouldn’t be too hard to translate into something more generic for a user). The class also handles nonconservative forces thus making it a complete class.&lt;/p&gt;
&lt;p&gt;In terms of testing each of these functionalities, I feel the tests are pretty thorough. I have tested the nonconservative force handling of the class on a simple spring-mass-damper system. I have tested the handling of the constraint equations using the famous ‘disc on an inclined plane’ test problem. Tests on more complex 3d systems have been performed like the rolling disc (more on this later). And then tests on a multibody system have been verified for a double pendulum. All of these work correctly; results have been compared to solutions by ahnd.&lt;/p&gt;
&lt;p&gt;So with all of this down, why did I say it was “mostly successful”? Well, as it turns out, the tests work perfectly well when limited to problems involving planar motion. The results match up to those obtained by hand. But the results from the class get extremely nasty when dealing with more complex systems; I have implemented the rolling disc in two separate cases. In one test, I use the minimal set of generalized coordinates and the correct eoms are generated. But in another case I tried to use the non-minimal set of GCs and the equations generated are near impossible to comprehend (or I haven’t found the best way to deal with them yet). A big contribution of this messiness is due to the way in which Lagranges approach requires the definition of generalized speeds. In his approach, it is erquired for the generlized speeds to be ‘simple’ i.e. the gen. speeds are just derivatives of the gen coords. This is different in Kane’s approach where the generalized speeds can but needn’t necessarily be ‘simple’. From my experience, Kane’s generalized speeds are defined in a manner which make physical sense. This definitely validates why most dynamicists today (or so I have heard) prefer to choose Kane’s method on complex multi-body systems. The only way I can think of circumventing this situation in teh ‘LagrangesMethod’ class right now is using the minimal set of GCs for well known systems like the rolling disc and hope for the best.&lt;/p&gt;
&lt;p&gt;Having all the additional functionality in this class and also playing with the rolling disc in particular has definitely led to a lot of insight but also taken a good chunk of time away from a period I wanted to dedicate to the ‘code output section’ which I have been unable to get started on. It looks like I will be unable to meet that one goal by the ‘hard’ pencils down date as I complete and fine tune the documentation (pending final approval of the Lagrange PR, of course). But I do feel that the time spent on Lagrange has been for the good. The code, I personally feel, is easy to read and appears to be easy to use. With people’s comments I was able to weed out all the unnecessary stuff. It is also ‘complete’ like I previously highlighted. I will continue to work on ‘code output’ post the GSoC period though as it’s usefulness is undeniable and also because of a development of a general sense of interest in coding (surprise surprise!).&lt;/p&gt;
&lt;p&gt;Anyhow, apart from this, the other stuff I got done this week- I wrote up minor functions to compute a Lagrangian, changed how the potential energy function behaves. That’s it for this week. See you next week, one last time.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/angadhsympy.wordpress.com/420/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/angadhsympy.wordpress.com/420/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=angadhsympy.wordpress.com&amp;amp;blog=35620584&amp;amp;post=420&amp;amp;subd=angadhsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-12T01:01:57+00:00</dc:date>
	<dc:creator>angadhn</dc:creator>
</item>
<item rdf:about="http://krastanov.wordpress.com/?p=555">
	<title>Stefan Krastanov: Graph of the Relations between Objects in the diffgeom Module</title>
	<link>http://blog.krastanov.org/2012/08/08/graph-of-the-relations-between-objects-in-the-diffgeom-module/</link>
	<content:encoded>&lt;p&gt;&lt;a href=&quot;http://krastanov.files.wordpress.com/2012/08/painful_christoffel_symbols.png&quot;&gt;&lt;img src=&quot;http://krastanov.files.wordpress.com/2012/08/painful_christoffel_symbols.png?w=600&amp;amp;h=450&quot; title=&quot;painful_christoffel_symbols&quot; height=&quot;450&quot; width=&quot;600&quot; alt=&quot;&quot; class=&quot;aligncenter size-full wp-image-556&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This graph, besides showing naively in a rather simplistic way the structure of the theory of differential geometry (and most of what I have implemented in the diffgeom module), brings attention to the one non-trivial part of the module on which I have spent most of my time lately. Namely, implementing covariant derivatives.&lt;/p&gt;
&lt;p&gt;All directional derivatives are defined as a limiting procedure on a transport operator. Besides the Lie derivatives which use a certain transport operator that is easy to express in a coordinate free way, all other derivatives, called covariant derivatives have to be expressed using something called Christoffel symbols. And these are the ugly coordinate-dependent sources of pain, as the module structure becomes very cumbersome when such dependence must be accounted for. Thankfully, I think I have found a nice way to implement them in a new CovariantDerivativeOperator class on its own, that will contain all the logic in the same way in which the Base*Field classes do it. This will also require rewrite of the LieDerivative into a LieDerivativeOperator class.&lt;/p&gt;
&lt;br /&gt;  &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=blog.krastanov.org&amp;amp;blog=15251174&amp;amp;post=555&amp;amp;subd=krastanov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-08T11:21:46+00:00</dc:date>
	<dc:creator>Stefan Krastanov</dc:creator>
</item>
<item rdf:about="http://amakelov.wordpress.com/?p=445">
	<title>Aleksandar Makelov: Google Summer of Code 2012: Week 11</title>
	<link>http://amakelov.wordpress.com/2012/08/06/google-summer-of-code-2012-week-11/</link>
	<content:encoded>&lt;p&gt;Hi all, here’s a brief summary of the 11th week of my GSoC.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Yay! Subgroup searching now works with the use of .stabilizer(), as I discussed in &lt;a href=&quot;http://amakelov.wordpress.com/2012/07/30/google-summer-of-code-2012-week-10/&quot; target=&quot;_blank&quot;&gt;my previous blog post&lt;/a&gt;. Surprisingly, the running time is similar to that of the flawed version using .baseswap() (whenever the one using .baseswap() works), you can play around with the two versions on my &lt;a href=&quot;https://github.com/amakelov/sympy/tree/week6&quot; target=&quot;_blank&quot;&gt;week6&lt;/a&gt; (has a bug, using .baseswap()) and &lt;a href=&quot;https://github.com/amakelov/sympy/tree/week9&quot; target=&quot;_blank&quot;&gt;week9&lt;/a&gt; (seems to work, using .stabilizer()) branches.&lt;/li&gt;
&lt;li&gt;Consequently, I made a &lt;a href=&quot;https://github.com/sympy/sympy/pull/1454&quot; target=&quot;_blank&quot;&gt;new pull request&lt;/a&gt; containing the incremental version of Schreier-Sims, the remove_gens utility for getting rid of redundant generators in a strong generating set, and the new (working) subgroup_search algorithm. You’re most welcome to help with the review!&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;I worked on several applications of subgroup_search() and the incremental Schreier-Sims algorithm. Namely, the pointwise stabilizer of a set of points (via the incremental Schreier-Sims algorithm):&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python; wrap-lines: false;&quot;&gt;In [4]: from sympy.combinatorics.named_groups import *
In [5]: A = AlternatingGroup(9)
In [6]: G = A.pointwise_stabilizer([2, 3, 5])
In [7]: G == A.stabilizer(2).stabilizer(3).stabilizer(5)
Out[7]: True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;(this is much faster than the naive implementation using .stabilizer() repeatedly), and the centralizer of a group &lt;img src=&quot;http://s0.wp.com/latex.php?latex=H&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;H&quot; class=&quot;latex&quot; title=&quot;H&quot; /&gt; inside a group &lt;img src=&quot;http://s0.wp.com/latex.php?latex=G&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;G&quot; class=&quot;latex&quot; title=&quot;G&quot; /&gt;:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python; wrap-lines: false;&quot;&gt;In [11]: from sympy.combinatorics.named_groups import *
In [12]: S = SymmetricGroup(6)
In [13]: A = AlternatingGroup(6)
In [14]: C = CyclicGroup(6)
In [15]: S_els = list(S.generate())
In [16]: G = S.centralizer(A)
In [17]: G.order()
Out[17]: 1
In [18]: temp = [[el*gen for gen in A.generators] == [gen*el for gen in A.generators] for el in S_els]
In [19]: temp.count(False)
Out[19]: 719
In [20]: temp.count(True)
Out[20]: 1
In [21]: G = S.centralizer(C)
In [22]: G == C
Out[22]: True
In [23]: temp = [[el*gen for gen in C.generators] == [gen*el for gen in C.generators] for el in S_els]
In [24]: temp.count(True)
Out[24]: 6
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;(it takes some effort to see that these calculations indeed prove that .centralizer() returned the needed centralizer). The centralizer algorithm uses a pruning criterion described in [1], and even though it’s exponential in complexity, it’s fast for practical purposes. Both of the above functions are available (albeit not documented yet) on &lt;a href=&quot;https://github.com/amakelov/sympy/tree/week10&quot; target=&quot;_blank&quot;&gt;my week10 branch&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The next steps are an algorithm for the centre in polynomial time, and an algorithm to find the intersection of two subgroups! And after that, I hope to be able to implement the Todd-Coxeter algorithm…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That’s it for now!&lt;/p&gt;
&lt;p&gt;[1] Derek F. Holt, Bettina Eick, Bettina, Eamonn A. O’Brien, “Handbook of computational group theory”, Discrete Mathematics and its Applications (Boca Raton). Chapman &amp;amp; Hall/CRC, Boca Raton, FL, 2005. ISBN 1-58488-372-3&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/amakelov.wordpress.com/445/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/amakelov.wordpress.com/445/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=amakelov.wordpress.com&amp;amp;blog=35896871&amp;amp;post=445&amp;amp;subd=amakelov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-06T14:26:08+00:00</dc:date>
	<dc:creator>Александър Макелов</dc:creator>
</item>
<item rdf:about="http://scolobb.wordpress.com/?p=357">
	<title>Sergiu Ivanov: The Embedding</title>
	<link>http://scolobb.wordpress.com/2012/08/05/the-embedding/</link>
	<content:encoded>&lt;p&gt;This week I have started some actual code of the derivation of commutativity of diagrams and implications.  The first half of the week has gone to splitting &lt;tt&gt;Diagram&lt;/tt&gt; into &lt;tt&gt;Diagram&lt;/tt&gt; and &lt;tt&gt;Implication&lt;/tt&gt;, as outlined in the &lt;a href=&quot;http://scolobb.wordpress.com/2012/07/29/the-reflection-about-inference/&quot;&gt;previous post&lt;/a&gt;.  Nothing really unexpected happened during that part, so there isn’t much to say about it, save for the thing that the code has become clearer and better organised.  Furthermore, I have gained a better understanding of some corner cases, as well as implemented more robust handling for those corner cases.&lt;/p&gt;
&lt;p&gt;The second half of the week was considerably more exciting and thought intensive: it was related to finding diagram embeddings.  As it should be clear from the &lt;a href=&quot;http://scolobb.wordpress.com/2012/07/29/the-reflection-about-inference/&quot;&gt;last post&lt;/a&gt;, this functionality lies at the foundation of deciding the commutativity of diagrams and implications.  In what follows, I will refer to the diagram which we need to embed as to the &lt;em&gt;pattern&lt;/em&gt;, and  to the diagram into which we need to embed as to the &lt;em&gt;model&lt;/em&gt;.  This seems to be an almost universally accepted terminology and comes from the fact that finding subgraph isomorphisms often lies at the base of various pattern matching implementations.&lt;/p&gt;
&lt;p&gt;I have started by selecting and analysing the excellent paper by J. R. Ullman, [Ullm1976], which describes a very clear way of enumerating all possible graph embeddings.  This solution, however, was not exactly what I needed.  First of all, the algorithm described in details in [Ullm1976] is actually meant for &lt;em&gt;undirected&lt;/em&gt; graphs, whereas one can clearly see arrows in diagrams.  Furthermore (a thought that has occurred to me quite late), diagrams, are actually multigraphs, in the sense that there can be more than one morphism between two objects.  Yet further, a diagram embedding must preserve morphism properties, in the sense that the embedding must map a morphism in the pattern to a morphism in the model, which has exactly the same properties as the morphism in the pattern.&lt;/p&gt;
&lt;p&gt;I attempted to find whether someone has addressed the directed multigraph embedding problem before; however, I haven’t managed to find any references on the Internet, so I started thinking on adapting Ullman’s solution to my case.  The first thing I figured out was that I could reduce the directed multigraph embedding problem to a directed graph embedding problem.  Indeed, take a diagram and flatten down all multiple morphisms &lt;em&gt;going in the same direction&lt;/em&gt; between the same to objects to one &lt;em&gt;directed&lt;/em&gt; edge between these two objects.  Then construct directed graph embeddings and, for each such embeddings, for each directed edge &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;e&quot; class=&quot;latex&quot; title=&quot;e&quot; /&gt; of the flattened pattern, construct injective, property-preserving,  mappings from the set of morphisms of the pattern, which were flattened to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;e&quot; class=&quot;latex&quot; title=&quot;e&quot; /&gt;, into the set of morphisms associated with the edge in the flattened model, to which &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;e&quot; class=&quot;latex&quot; title=&quot;e&quot; /&gt; is mapped by the subgraph isomorphism.  (These mappings are actually property-preserving embeddings in their own right, but I won’t call them so, since I’m good and I understand that the blog post has just become a bit unclear, so to say &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_biggrin.gif&quot; alt=&quot;:-D&quot; class=&quot;wp-smiley&quot; /&gt;  )&lt;/p&gt;
&lt;p&gt;Let’s see an example.  Consider the diagram comprising two different morphisms: &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%3AA%5Crightarrow+B&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;f:A\rightarrow B&quot; class=&quot;latex&quot; title=&quot;f:A\rightarrow B&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=g%3AA%5Crightarrow+B&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;g:A\rightarrow B&quot; class=&quot;latex&quot; title=&quot;g:A\rightarrow B&quot; /&gt;, where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;f&quot; class=&quot;latex&quot; title=&quot;f&quot; /&gt; has the property &lt;tt&gt;golden&lt;/tt&gt;; this diagram is going to be out pattern.  Now, consider the model: a diagram comprising three morphisms &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Calpha%3AC%5Crightarrow+D&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\alpha:C\rightarrow D&quot; class=&quot;latex&quot; title=&quot;\alpha:C\rightarrow D&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cbeta%3AC%5Crightarrow+D&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\beta:C\rightarrow D&quot; class=&quot;latex&quot; title=&quot;\beta:C\rightarrow D&quot; /&gt;, and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cgamma%3AC%5Crightarrow+D&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\gamma:C\rightarrow D&quot; class=&quot;latex&quot; title=&quot;\gamma:C\rightarrow D&quot; /&gt;, in which &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cbeta&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\beta&quot; class=&quot;latex&quot; title=&quot;\beta&quot; /&gt; has the property &lt;tt&gt;golden&lt;/tt&gt;.  Quite obviously, all of our &lt;em&gt;property-preserving&lt;/em&gt; embeddings should map &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;f&quot; class=&quot;latex&quot; title=&quot;f&quot; /&gt; to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cbeta&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\beta&quot; class=&quot;latex&quot; title=&quot;\beta&quot; /&gt;, while $\latex g$ can be mapped to either &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Calpha&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\alpha&quot; class=&quot;latex&quot; title=&quot;\alpha&quot; /&gt; or &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cbeta&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\beta&quot; class=&quot;latex&quot; title=&quot;\beta&quot; /&gt;.  Also note that the flattened pattern in this case is the graph consisting of a single edge &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28A%2CB%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;(A,B)&quot; class=&quot;latex&quot; title=&quot;(A,B)&quot; /&gt;, while the flattened model is another one-edge graph, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28C%2CD%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;(C,D)&quot; class=&quot;latex&quot; title=&quot;(C,D)&quot; /&gt;.  More complex diagrams are treated in a similar fashion: flatten the pattern and the model to directed graphs, find directed graph embeddings, and then find the property-preserving morphism mappings.&lt;/p&gt;
&lt;p&gt;There was another slight surprise underway, however.  Ullman does describe some of the modifications which will make the original algorithm capable of constructing directed graph embeddings, however, he has apparently forgot to describe one of them.  I will give some definitions before going into more detail.  Ullman uses &lt;img src=&quot;http://s0.wp.com/latex.php?latex=A&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;A&quot; class=&quot;latex&quot; title=&quot;A&quot; /&gt; to refer to the adjacency matrix of the pattern, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=B&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;B&quot; class=&quot;latex&quot; title=&quot;B&quot; /&gt; to refer to the adjacency matrix of the model, and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=M&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;M&quot; class=&quot;latex&quot; title=&quot;M&quot; /&gt; to refer to the matrix representing a mapping of the vertices of the pattern into the vertices of the model; &lt;img src=&quot;http://s0.wp.com/latex.php?latex=M_%7Bij%7D+%3D+1&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;M_{ij} = 1&quot; class=&quot;latex&quot; title=&quot;M_{ij} = 1&quot; /&gt; means that vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=i&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;i&quot; class=&quot;latex&quot; title=&quot;i&quot; /&gt; in the pattern is mapped to vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=j&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;j&quot; class=&quot;latex&quot; title=&quot;j&quot; /&gt; in the model.&lt;/p&gt;
&lt;p&gt;Now, for given &lt;img src=&quot;http://s0.wp.com/latex.php?latex=A&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;A&quot; class=&quot;latex&quot; title=&quot;A&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=B&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;B&quot; class=&quot;latex&quot; title=&quot;B&quot; /&gt;, and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=M&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;M&quot; class=&quot;latex&quot; title=&quot;M&quot; /&gt;, compute &lt;img src=&quot;http://s0.wp.com/latex.php?latex=C+%3D+M+%28M+B%29%5ET&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;C = M (M B)^T&quot; class=&quot;latex&quot; title=&quot;C = M (M B)^T&quot; /&gt;.  Condition (1) in [Ullm1976] states that, if &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a_%7Bij%7D+%3D+1%5CRightarrow+c_%7Bij%7D+%3D+1&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;a_{ij} = 1\Rightarrow c_{ij} = 1&quot; class=&quot;latex&quot; title=&quot;a_{ij} = 1\Rightarrow c_{ij} = 1&quot; /&gt;, for any vertices &lt;img src=&quot;http://s0.wp.com/latex.php?latex=i&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;i&quot; class=&quot;latex&quot; title=&quot;i&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=j&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;j&quot; class=&quot;latex&quot; title=&quot;j&quot; /&gt; of the patern, then &lt;img src=&quot;http://s0.wp.com/latex.php?latex=M&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;M&quot; class=&quot;latex&quot; title=&quot;M&quot; /&gt; represents an embedding.  (As usual, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a_%7Bij%7D&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;a_{ij}&quot; class=&quot;latex&quot; title=&quot;a_{ij}&quot; /&gt; are elements of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=A&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;A&quot; class=&quot;latex&quot; title=&quot;A&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=c_%7Bij%7D&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;c_{ij}&quot; class=&quot;latex&quot; title=&quot;c_{ij}&quot; /&gt; are elements of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=C&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;C&quot; class=&quot;latex&quot; title=&quot;C&quot; /&gt;).  When I tried to actually use this criterion for a directed graph, I found that, apparently, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=C%5ET&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;C^T&quot; class=&quot;latex&quot; title=&quot;C^T&quot; /&gt; should be used, instead of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=C&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;C&quot; class=&quot;latex&quot; title=&quot;C&quot; /&gt;.  The formal explanation follows.  By abuse of terminology, I will use “pattern” and “model” to refer to the flattened pattern and flattened model as well.&lt;/p&gt;
&lt;p&gt;Let &lt;img src=&quot;http://s0.wp.com/latex.php?latex=D+%3D+M+B&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;D = M B&quot; class=&quot;latex&quot; title=&quot;D = M B&quot; /&gt;.  &lt;img src=&quot;http://s0.wp.com/latex.php?latex=d_%7Bij%7D+%3D+1&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;d_{ij} = 1&quot; class=&quot;latex&quot; title=&quot;d_{ij} = 1&quot; /&gt; means that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cexists%21+k+.+%28m_%7Bik%7D+%3D+1+%5Cmbox%7B+and+%7D+b_%7Bkj%7D+%3D+1%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\exists! k . (m_{ik} = 1 \mbox{ and } b_{kj} = 1)&quot; class=&quot;latex&quot; title=&quot;\exists! k . (m_{ik} = 1 \mbox{ and } b_{kj} = 1)&quot; /&gt;, where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=k&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;k&quot; class=&quot;latex&quot; title=&quot;k&quot; /&gt; is a vertex of the model.  In other words, this means that the vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=i&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;i&quot; class=&quot;latex&quot; title=&quot;i&quot; /&gt; of the pattern is mapped to a unique vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=k&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;k&quot; class=&quot;latex&quot; title=&quot;k&quot; /&gt; of the model, such that in the model there exists the (directed) edge &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28k%2C+j%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;(k, j)&quot; class=&quot;latex&quot; title=&quot;(k, j)&quot; /&gt;.  Obviously, if &lt;img src=&quot;http://s0.wp.com/latex.php?latex=d%5ET_%7Bij%7D&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;d^T_{ij}&quot; class=&quot;latex&quot; title=&quot;d^T_{ij}&quot; /&gt; is an element of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=D%5ET&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;D^T&quot; class=&quot;latex&quot; title=&quot;D^T&quot; /&gt;, the role of the indices is reversed, that is: the vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=j&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;j&quot; class=&quot;latex&quot; title=&quot;j&quot; /&gt; of the pattern is mapped to a unique vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=k&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;k&quot; class=&quot;latex&quot; title=&quot;k&quot; /&gt; of the model, such that in the model there exists the (directed) edge &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28k%2C+i%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;(k, i)&quot; class=&quot;latex&quot; title=&quot;(k, i)&quot; /&gt;.&lt;/p&gt;
&lt;p&gt;Now, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=c_%7Bij%7D+%3D+1&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;c_{ij} = 1&quot; class=&quot;latex&quot; title=&quot;c_{ij} = 1&quot; /&gt; means that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cexists%21+t+.+%28m_%7Bit%7D+%3D+1+%5Cmbox%7B+and+%7D+d%5ET_%7Btj%7D+%3D+1%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;\exists! t . (m_{it} = 1 \mbox{ and } d^T_{tj} = 1)&quot; class=&quot;latex&quot; title=&quot;\exists! t . (m_{it} = 1 \mbox{ and } d^T_{tj} = 1)&quot; /&gt;.  Deciphering the meanings of the values of the elements of these matrices, this means that the vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=i&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;i&quot; class=&quot;latex&quot; title=&quot;i&quot; /&gt; of the pattern is mapped to a vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=t&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;t&quot; class=&quot;latex&quot; title=&quot;t&quot; /&gt; of the model, vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=j&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;j&quot; class=&quot;latex&quot; title=&quot;j&quot; /&gt; of the pattern is mapped to a vertex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=k&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;k&quot; class=&quot;latex&quot; title=&quot;k&quot; /&gt; of the model, such that in the model there is the edge &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28k%2C+t%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;(k, t)&quot; class=&quot;latex&quot; title=&quot;(k, t)&quot; /&gt;.  Now, suppose there is an edge &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28i%2C+j%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;(i, j)&quot; class=&quot;latex&quot; title=&quot;(i, j)&quot; /&gt; in the pattern.  &lt;img src=&quot;http://s0.wp.com/latex.php?latex=c_%7Bij%7D+%3D+1&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;c_{ij} = 1&quot; class=&quot;latex&quot; title=&quot;c_{ij} = 1&quot; /&gt; means &lt;img src=&quot;http://s0.wp.com/latex.php?latex=M&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;M&quot; class=&quot;latex&quot; title=&quot;M&quot; /&gt; maps &lt;img src=&quot;http://s0.wp.com/latex.php?latex=i&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;i&quot; class=&quot;latex&quot; title=&quot;i&quot; /&gt; to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=t&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;t&quot; class=&quot;latex&quot; title=&quot;t&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=j&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;j&quot; class=&quot;latex&quot; title=&quot;j&quot; /&gt; to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=k&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;k&quot; class=&quot;latex&quot; title=&quot;k&quot; /&gt;, such that the model contains the edge &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28k%2C+t%29&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;(k, t)&quot; class=&quot;latex&quot; title=&quot;(k, t)&quot; /&gt;.  That is, the condition (1) as stated in [Ullm1976] and applied to directed graphs checks that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=M&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;M&quot; class=&quot;latex&quot; title=&quot;M&quot; /&gt; actually &lt;em&gt;reverses&lt;/em&gt; the direction of edges!  Therefore, one must actually use &lt;img src=&quot;http://s0.wp.com/latex.php?latex=C%5ET&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;C^T&quot; class=&quot;latex&quot; title=&quot;C^T&quot; /&gt; to check for embeddings.&lt;/p&gt;
&lt;p&gt;Now, since the original algorithm in [Ullm1976] was designed for &lt;em&gt;undirected&lt;/em&gt; graphs, this extra transposition did not matter, and I think this is the reason why Ullman does not mention it.&lt;/p&gt;
&lt;p&gt;I have implemented all the things I have described so far, so diagram embeddings kinda work &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif&quot; alt=&quot;:-)&quot; class=&quot;wp-smiley&quot; /&gt;  I have played with python generators a bit, so the code only produces embeddings on the as-needed basis.  I did that because I thought of the situation when any diagram embedding will suffice, but also because using generators has resulted in what I believe to be more elegant code.  The code abounds in comments, so I think it shouldn’t be a problem to comprehend for someone different from myself.  I don’t have a formal proof for this statement, however, so, I guess, Tom is going to be the test subject for this supposition ^_^&lt;/p&gt;
&lt;p&gt;There are still a couple things to do, though.  First of all Ullman shows a nice optimisation to his algorithm; it looks pretty simple, so I’ll add it.  I will then write a couple more tests, including some crash tests involving complete graphs.  I will also have to rename the function which does all this magic from &lt;tt&gt;subdiagram_embeddings&lt;/tt&gt; to &lt;tt&gt;diagram_embeddings&lt;/tt&gt;, for obvious (I hope &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif&quot; alt=&quot;:-)&quot; class=&quot;wp-smiley&quot; /&gt;  ) reasons.&lt;/p&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;p&gt;[Ullm1976] J. R. Ullman, An Algorithm for Subgraph Isomorphism, J. Association of Computing Machinery, March, 1976, 16, 31–42.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/scolobb.wordpress.com/357/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/scolobb.wordpress.com/357/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=scolobb.wordpress.com&amp;amp;blog=35433045&amp;amp;post=357&amp;amp;subd=scolobb&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-05T11:29:33+00:00</dc:date>
	<dc:creator>scolobb</dc:creator>
</item>
<item rdf:about="http://www.catchmrbharath.in/programming/2012/08/05/gsoc-week-11">
	<title>Bharath M R: GSOC week 11</title>
	<link>http://www.catchmrbharath.in/programming/2012/08/05/gsoc-week-11</link>
	<content:encoded>&lt;p&gt;I got my adaptive sampling branch merged last week. Now the plots are sampled adaptively and is more accurate. I also added a lot of tests to the implicit plotting branch and the coverage now is greater than 90%.&lt;/p&gt;

&lt;p&gt;One of the major things decided in the previous week was to restructure the plot function. Presently &lt;code&gt;plot&lt;/code&gt; is a single function, which depending on its input, renders an 2d or an 3d plot. Though it plots the right kind of plot, the &lt;code&gt;plot&lt;/code&gt; function is quite complex and it was decided to split the plot function into smaller functions that plots a particular type of plot. I tried an approach where all 2D plots are plotted by a &lt;code&gt;plot2d&lt;/code&gt; function, the 3D plots by &lt;code&gt;plot3D&lt;/code&gt; and the existing &lt;code&gt;plot_implicit&lt;/code&gt; plots to plot regions and implicit equations. Aaron mentioned that the API is still very complex as I was using tuples and lists to differentiate between a parametric plot and a 2d line plot and he was right. It is a bit complex and it was decided to have a functions for each kind of plot.&lt;/p&gt;

&lt;p&gt;I think i can have the new plot functions as an PR by next week and I would like to try getting a Mayavi backend ready by the end of my GSoC period.&lt;/p&gt;

&lt;p&gt;I forgot to mention why I deviated from my what I said I would do in my GSoC application. I tried getting a svgfig backend ready for almost one and a half week, and it was quite difficult. svgfig is not being updated and I had a hard time getting the axis ticks labelling to work most of the time. I wrote to the project maintainer many times and he helped me with a lot of things, but the library was not polished enough to use it with Sympy Live. So plotting for SymPy Live should be attempted with a javascript plotting library rather than a python backend. If we get matplotlib support on GAE, then it would be awesome.&lt;/p&gt;</content:encoded>
	<dc:date>2012-08-05T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://catchmrbharath.github.com/programming/2012/08/05/gsoc-week-11">
	<title>Bharath M R: GSOC week 11</title>
	<link>http://catchmrbharath.github.com/programming/2012/08/05/gsoc-week-11</link>
	<content:encoded>&lt;p&gt;I got my adaptive sampling branch merged last week. Now the plots are sampled adaptively and is more accurate. I also added a lot of tests to the implicit plotting branch and the coverage now is greater than 90%.&lt;/p&gt;

&lt;p&gt;One of the major things decided in the previous week was to restructure the plot function. Presently &lt;code&gt;plot&lt;/code&gt; is a single function, which depending on its input, renders an 2d or an 3d plot. Though it plots the right kind of plot, the &lt;code&gt;plot&lt;/code&gt; function is quite complex and it was decided to split the plot function into smaller functions that plots a particular type of plot. I tried an approach where all 2D plots are plotted by a &lt;code&gt;plot2d&lt;/code&gt; function, the 3D plots by &lt;code&gt;plot3D&lt;/code&gt; and the existing &lt;code&gt;plot_implicit&lt;/code&gt; plots to plot regions and implicit equations. Aaron mentioned that the API is still very complex as I was using tuples and lists to differentiate between a parametric plot and a 2d line plot and he was right. It is a bit complex and it was decided to have a functions for each kind of plot.&lt;/p&gt;

&lt;p&gt;I think i can have the new plot functions as an PR by next week and I would like to try getting a Mayavi backend ready by the end of my GSoC period.&lt;/p&gt;

&lt;p&gt;I forgot to mention why I deviated from my what I said I would do in my GSoC application. I tried getting a svgfig backend ready for almost one and a half week, and it was quite difficult. svgfig is not being updated and I had a hard time getting the axis ticks labelling to work most of the time. I wrote to the project maintainer many times and he helped me with a lot of things, but the library was not polished enough to use it with Sympy Live. So plotting for SymPy Live should be attempted with a javascript plotting library rather than a python backend. If we get matplotlib support on GAE, then it would be awesome.&lt;/p&gt;</content:encoded>
	<dc:date>2012-08-05T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://blog.catchmrbharath.in/programming/2012/08/05/gsoc-week-11">
	<title>Bharath M R: GSOC week 11</title>
	<link>http://blog.catchmrbharath.in/programming/2012/08/05/gsoc-week-11</link>
	<content:encoded>&lt;p&gt;I got my adaptive sampling branch merged last week. Now the plots are sampled adaptively and is more accurate. I also added a lot of tests to the implicit plotting branch and the coverage now is greater than 90%.&lt;/p&gt;

&lt;p&gt;One of the major things decided in the previous week was to restructure the plot function. Presently &lt;code&gt;plot&lt;/code&gt; is a single function, which depending on its input, renders an 2d or an 3d plot. Though it plots the right kind of plot, the &lt;code&gt;plot&lt;/code&gt; function is quite complex and it was decided to split the plot function into smaller functions that plots a particular type of plot. I tried an approach where all 2D plots are plotted by a &lt;code&gt;plot2d&lt;/code&gt; function, the 3D plots by &lt;code&gt;plot3D&lt;/code&gt; and the existing &lt;code&gt;plot_implicit&lt;/code&gt; plots to plot regions and implicit equations. Aaron mentioned that the API is still very complex as I was using tuples and lists to differentiate between a parametric plot and a 2d line plot and he was right. It is a bit complex and it was decided to have a functions for each kind of plot.&lt;/p&gt;

&lt;p&gt;I think i can have the new plot functions as an PR by next week and I would like to try getting a Mayavi backend ready by the end of my GSoC period.&lt;/p&gt;

&lt;p&gt;I forgot to mention why I deviated from my what I said I would do in my GSoC application. I tried getting a svgfig backend ready for almost one and a half week, and it was quite difficult. svgfig is not being updated and I had a hard time getting the axis ticks labelling to work most of the time. I wrote to the project maintainer many times and he helped me with a lot of things, but the library was not polished enough to use it with Sympy Live. So plotting for SymPy Live should be attempted with a javascript plotting library rather than a python backend. If we get matplotlib support on GAE, then it would be awesome.&lt;/p&gt;</content:encoded>
	<dc:date>2012-08-05T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://angadhsympy.wordpress.com/2012/08/04/gsoc-blog-post-58/">
	<title>Angadh Nanjangud: GSoC Blog Post</title>
	<link>http://angadhsympy.wordpress.com/2012/08/04/gsoc-blog-post-58/</link>
	<content:encoded>&lt;p&gt;So, in last week’s post I had said that the Lagrange class had neared completion. By mid-week I had it functional, so I opened a discussion on the &lt;a href=&quot;https://groups.google.com/forum/?fromgroups#!topic/sympy/LgSJPLgWmik&quot;&gt;mailing list&lt;/a&gt; asking for suggestions to improve the class. Several people in the group suggested that it’d be better to supply all the parameters on initialization. At first I was loath to make this change. This was for the following few reasons-&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;My primary concern was that I felt it was taking away from the clarity in generating the equations of motion. I have spoken about that in some detail in the conversation on the group page about how I feel dynamicists would probably prefer typing an extra couple lines as long as the procedure to obtain the equations of motion feel similar to the work done by hand. I’m a a fan of the (possibly false) sense of security that comes from bookkeeping even whilst on a computer. Of course, I had to accede that it made no sense to have so many methods when everything could be passed at initialization. The argument that users would essentially have to memorize a sequence or procedure was a good one.&lt;/li&gt;
&lt;li&gt;The other thing was that I felt was that this was making the structure of the ‘Lagrange’ class tremendously different from the ‘Kane’ class. But after discussions with Luke, Jason and Gilbert it became pretty apparent that even they felt that it might not have been the best way to implement that class. At one point I too felt like it was little weird that I was creating so many little methods which could’ve been merged into the initialization of the class itself. But I was just concentrating on staying true to the current structure of things in the mechanics package.&lt;/li&gt;
&lt;li&gt;And the final reason for my apprehension was that I would have to revamp the whole method after having spent quite some time on it.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;But it was very clear after a point that things had to change. So, I spent a good chunk of time making the required changes.&lt;/p&gt;
&lt;p&gt;Also, we decided on, what I feel is, a more appropriate name for the class changing it from ‘Lagrange’ to ‘LagrangesMethod’. Most of the equation derivation techniques in dynamics have the ‘Method’ attached to the founder’s name. It made even more sense for this class because Lagrange’s contributions are numerous so just calling a class ‘Lagrange’ could lead to some ambiguity.&lt;/p&gt;
&lt;p&gt;Rewriting the class also helped me hone my Python skills some more. I had come across the keyword arguments construct several times in my preparation for the summer of code but I was a little reluctant to use it. It was probably because it was something that felt so alien to me as I have never seen something like that in my fledgling programming career. But with great explanations on the groups message (linked above), things were made clearer as to how it should be done.&lt;/p&gt;
&lt;p&gt;So having rewritten the class, I added the docstrings for it. I’m not too pleased with that part right now, but I’m confident it will get better with more input on the &lt;a href=&quot;https://github.com/sympy/sympy/pull/1460#issuecomment-7499946&quot;&gt;PR&lt;/a&gt; discussion.&lt;/p&gt;
&lt;p&gt;So having opened that PR, I thought I would get back to working on the documentation as I had planned. But I ended up going off on a tangent with the discussion that was sparked on &lt;a href=&quot;https://github.com/sympy/sympy/pull/1407/files#r1307146&quot;&gt;PR 1407&lt;/a&gt; which is the stuff that I have added on the energy functions. I spent a good chunk of time going through that and almost completely changing the way the ‘kinetic_energy’ function works.&lt;/p&gt;
&lt;p&gt;On that same PR, there was a discussion about how a more readable error should be generated if a user calls the ‘potential_energy’ property for either a Particle or RigidBody without having first set the potential energy using the ‘set_potential_energy’ method. What at the time seemed an innocuous thing to repair became a little interesting challenge for me. Without going into too many more details, I was pleased to have found a relatively simple fix with the ‘callable’ function in Python with the help of the online forum ‘Stack Overflow’.&lt;/p&gt;
&lt;p&gt;Having handled most of the recommendations on PR1407, I decided to skip on the documentation for the time being and returned to “complete” what would be the most important part relatied to the “LagrangesMethod” class- the test! While writing the class, I had written a little dummytest to check for the little tihngs but I hadn’t subjected a real dynamical system to the ultimate test (pun intended). I decided to test the well known ‘disc rolling down an inclined plane’ problem. Not to generate any suspense, but I would like to point out that in my proposal I had said that I would only concentrate on unconstrained systems. But Gilbert and I spent a little more time to make the ‘LagrangesMethod’ class more useful and complete. The class should now be able to handle any system i.e. constrained or unconstrained. A lot of the credit goes to Gilbert for helping me through the numerous confusions I had with the implementation of the constrained systems. But back to the test. I picked that system because it has a configuration constraint and we handle configuration constraints a little unconventionally in this class. I was a little anxious about how the results for this would turn out but ti worked like a charm. With the one test that I have written, which I think is a pretty good system to test, it appears that the ‘LagrangesMethod’ class works like a charm.&lt;/p&gt;
&lt;p&gt;Anyhow, it’s now time to get some shuteye and more importantly rest the leg as I have been a little cavalier with it in the last couple of days. Until next week.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/angadhsympy.wordpress.com/419/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/angadhsympy.wordpress.com/419/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=angadhsympy.wordpress.com&amp;amp;blog=35620584&amp;amp;post=419&amp;amp;subd=angadhsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-04T15:24:03+00:00</dc:date>
	<dc:creator>angadhn</dc:creator>
</item>
<item rdf:about="http://rhoforsympy.wordpress.com/?p=235">
	<title>Guru Devanla: Week 11:  Fidelity of quantum states</title>
	<link>http://rhoforsympy.wordpress.com/2012/08/03/week-11-fidelity-of-quantum-states/</link>
	<content:encoded>&lt;p&gt;As discussed in my previous weeks report, this week I started addressing some of the issues in the pending PR’s and all the pending PRs were merged!&lt;/p&gt;
&lt;p&gt;In addition to getting the pending PRs accepted, I have stated working on 2 other tasks. One of them, that was completed is the feature to compute Fidelity (&lt;a href=&quot;https://github.com/sympy/sympy/pull/1459&quot;&gt;PR 1459&lt;/a&gt;) of quantum states.  Some screen-shots follow (taken from notebook examples available with code base). Information regarding fidelity can be found at these 2 wikis: &lt;a href=&quot;http://en.wikipedia.org/wiki/Fidelity_of_quantum_states&quot;&gt;1&lt;/a&gt;, &lt;a href=&quot;http://www.quantiki.org/wiki/Fidelity&quot;&gt;2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For the next week, my plan is to finish up work on the implementation of Shor’s algorithm available &lt;a href=&quot;https://github.com/addisonc/sympy/blob/addison-main/sympy/physics/quantum/shor.py&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here are some examples of using the fidelity function:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://rhoforsympy.files.wordpress.com/2012/08/fidelity_ket.png&quot;&gt;&lt;img src=&quot;http://rhoforsympy.files.wordpress.com/2012/08/fidelity_ket.png?w=500&amp;amp;h=382&quot; title=&quot;fidelity_ket&quot; height=&quot;382&quot; width=&quot;500&quot; alt=&quot;&quot; class=&quot;alignleft size-full wp-image-238&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://rhoforsympy.files.wordpress.com/2012/08/fidelity-qubit2.png&quot;&gt;&lt;img src=&quot;http://rhoforsympy.files.wordpress.com/2012/08/fidelity-qubit2.png?w=500&amp;amp;h=369&quot; title=&quot;fidelity-qubit&quot; height=&quot;369&quot; width=&quot;500&quot; alt=&quot;&quot; class=&quot;alignleft size-full wp-image-243&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/rhoforsympy.wordpress.com/235/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/rhoforsympy.wordpress.com/235/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=rhoforsympy.wordpress.com&amp;amp;blog=34650270&amp;amp;post=235&amp;amp;subd=rhoforsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-03T21:19:25+00:00</dc:date>
	<dc:creator>grdvnl</dc:creator>
</item>
<item rdf:about="http://krastanov.wordpress.com/?p=551">
	<title>Stefan Krastanov: The diffgeom Module – Status Report</title>
	<link>http://blog.krastanov.org/2012/08/02/the-diffgeom-module-status-report/</link>
	<content:encoded>&lt;p&gt;I have written already a few posts about the theory behind the module, the structure of the module, etc. However, besides some rare examples, I have not described in much details how the work progresses. So here is a short summary (check the git log for more details):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The basics about coordinate systems and fields are already in. There are numerous issues with all the simplify-like algorithms inside SymPy, however they are slowly ironed out.&lt;/li&gt;
&lt;li&gt;Some simplistic methods for work with integral curves are implemented.&lt;/li&gt;
&lt;li&gt;The basics of tensor/wedge products are in. Many simplification routines can be added. Contraction between tensor products and vectors is possible (special case of “lowering of an index”).&lt;/li&gt;
&lt;li&gt;Over-a-map, pushforwards and pullbacks are not implemented yet.&lt;/li&gt;
&lt;li&gt;Instead of them I have focused my work on derivatives and curvature tensors. For the moment work on these can be done in a limited coordinate-dependent way. A longer post explaining the theory is coming and with it an implementation slightly less dependent on coordinates (working with Christoffel symbols is a pain).&lt;/li&gt;
&lt;li&gt;Hodge star operator – still not implemented.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;An example that I want to implement is a theorem that in irrotational cosmology isotropy implies homogeneity. Doing this will be the first non-trivial example in this module.&lt;/p&gt;
&lt;p&gt;A serendipitous detour from the project was my work on the differential equations solver. Aaron had implemented a very thorough solver for single equations. I had tried to extend it in a few simple ways in order to work with systems of ODEs and initial conditions. However this led me to Jordan forms of matrices, generalized eigenvectors and a bunch of interesting details on which I work in my free time (especially this week).&lt;/p&gt;
&lt;br /&gt;  &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=blog.krastanov.org&amp;amp;blog=15251174&amp;amp;post=551&amp;amp;subd=krastanov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-08-01T22:59:47+00:00</dc:date>
	<dc:creator>Stefan Krastanov</dc:creator>
</item>
<item rdf:about="http://amakelov.wordpress.com/?p=429">
	<title>Aleksandar Makelov: Google Summer of Code 2012: Week 10</title>
	<link>http://amakelov.wordpress.com/2012/07/30/google-summer-of-code-2012-week-10/</link>
	<content:encoded>&lt;p&gt;Hi all,&lt;/p&gt;
&lt;p&gt;here’s a brief summary of what I’ve been doing during the 10th week of my GSoC.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Though I fixed a bug in the SUBGROUPSEARCH function during the week, I ran some more comprehensive tests as I had planned to, and some of them broke the function. If you’re particularly interested, something like that will work:&lt;br /&gt;
&lt;pre class=&quot;brush: python; wrap-lines: false;&quot;&gt;In [87]: S = SymmetricGroup(5)
In [88]: prop_fix_3 = lambda x: x(3) == 3
In [89]: %autoreload
In [90]: S.subgroup_search(prop_fix_3)
---------------------------------------------------------------------------
StopIteration                             Traceback (most recent call last)
&amp;lt;ipython-input-90-6b85aa1285b8&amp;gt; in &amp;lt;module&amp;gt;()
----&amp;gt; 1 S.subgroup_search(prop_fix_3)

/home/alexander/workspace/sympy/sympy/combinatorics/perm_groups.py in subgroup_search(self, prop, base, strong_gens, tests, init_subgroup)
2660
2661                 # this function maintains a partial BSGS structure up to position l
-&amp;gt; 2662                 _insert_point_in_base(res, res_base, res_strong_gens, l, new_point, distr_gens=res_distr_gens, basic_orbits=res_basic_orbits, transversals=res_transversals)
2663                 # find the l+1-th basic stabilizer
2664                 new_stab = PermutationGroup(res_distr_gens[l + 1])

/home/alexander/workspace/sympy/sympy/combinatorics/util.py in _insert_point_in_base(group, base, strong_gens, pos, point, distr_gens, basic_orbits, transversals)
423     # baseswap with the partial BSGS structures. Notice that we need only
424     # the orbit and transversal of the new point under the last stabilizer
--&amp;gt; 425     new_base, new_strong_gens = group.baseswap(partial_base, strong_gens, pos, randomized=False, transversals=partial_transversals, basic_orbits=partial_basic_orbits, distr_gens=partial_distr_gens)
426     # amend the basic orbits and transversals
427     stab_pos = PermutationGroup(distr_gens[pos])

/home/alexander/workspace/sympy/sympy/combinatorics/perm_groups.py in baseswap(self, base, strong_gens, pos, randomized, transversals, basic_orbits, distr_gens)
2472             # ruling out member of the basic orbit of base[pos] along the way
2473             while len(current_group.orbit(base[pos])) != size:
-&amp;gt; 2474                 gamma = iter(Gamma).next()
2475                 x = transversals[pos][gamma]
2476                 x_inverse = ~x

StopIteration:

&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;The reason is certainly the change of base performed on line 11 in the pseudocode (this is also indicated in my code on my local week6 branch &lt;a href=&quot;https://github.com/amakelov/sympy/tree/week6&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; ). The use of the function BASESWAP there is what gets us into trouble. It is meant to be applied to  base and a strong generating set relative to it, switch two consecutive base points and change the generating set accordinly.  However, in subgroup_search the goal is to change a base &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28b_1%2C+b_2%2C+%5Cldots%2C+b_l%2C+%5Cldots%2C+b_k%29&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;(b_1, b_2, \ldots, b_l, \ldots, b_k)&quot; class=&quot;latex&quot; title=&quot;(b_1, b_2, \ldots, b_l, \ldots, b_k)&quot; /&gt; to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28b_1%2C+b_2%2C+%5Cldots%2C+b_l%27%2C+%5Cldots%2C+b_k%29&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;(b_1, b_2, \ldots, b_l', \ldots, b_k)&quot; class=&quot;latex&quot; title=&quot;(b_1, b_2, \ldots, b_l', \ldots, b_k)&quot; /&gt; where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=b_l%27&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;b_l'&quot; class=&quot;latex&quot; title=&quot;b_l'&quot; /&gt; is a new point. The book ([1]) mentions that this is done by using BASESWAP but doesn’t provide any details. My strategy is the following: I cut the base so that it becomes &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28b_1%2C+b_2%2C%5Cldots%2C+b_l%29&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;(b_1, b_2,\ldots, b_l)&quot; class=&quot;latex&quot; title=&quot;(b_1, b_2,\ldots, b_l)&quot; /&gt; and cut the correponding data structures – the strong generators &lt;strong&gt;strong_gens&lt;/strong&gt;, the &lt;strong&gt;basic_orbits, &lt;/strong&gt; the &lt;strong&gt;transversals&lt;/strong&gt;, and the strong generators distributed according to membership in basic stabilizers &lt;strong&gt;distr_gens &lt;/strong&gt;(I know, I still have to rename this to strong_gens_distr). Then I append the point &lt;img src=&quot;http://s0.wp.com/latex.php?latex=b_l%27&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;b_l'&quot; class=&quot;latex&quot; title=&quot;b_l'&quot; /&gt; so that the base is &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28b_1%2C+b_2%2C+%5Cldots%2C+b_l%2C+b_l%27%29&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;(b_1, b_2, \ldots, b_l, b_l')&quot; class=&quot;latex&quot; title=&quot;(b_1, b_2, \ldots, b_l, b_l')&quot; /&gt; and calculate an orbit and transversal for $b_l’$ under the stabilzier of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=b_1%2C+b_2%2C+%5Cldots%2C+b_l&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;b_1, b_2, \ldots, b_l&quot; class=&quot;latex&quot; title=&quot;b_1, b_2, \ldots, b_l&quot; /&gt;. Finally I apply BASESWAP to this new base in order to switch the two rightmost points. Then I go back to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28b_1%2C+b_2%2C+%5Cldots%2C+b_l%27%2C+%5Cldots%2C+b_k%29&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;(b_1, b_2, \ldots, b_l', \ldots, b_k)&quot; class=&quot;latex&quot; title=&quot;(b_1, b_2, \ldots, b_l', \ldots, b_k)&quot; /&gt; by appending what I had cut in the start and calculating a transversal/orbit for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=b_%7Bl%2B1%7D&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;b_{l+1}&quot; class=&quot;latex&quot; title=&quot;b_{l+1}&quot; /&gt; under the stabilizer just found, that of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=b_1%2C+%5Cldots%2C+b_l%27&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;b_1, \ldots, b_l'&quot; class=&quot;latex&quot; title=&quot;b_1, \ldots, b_l'&quot; /&gt;. Obviously, the resulting BSGS structures are valid only up to position &lt;img src=&quot;http://s0.wp.com/latex.php?latex=l&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;l&quot; class=&quot;latex&quot; title=&quot;l&quot; /&gt;, and that’s all the information we can acquire without another application of baseswap or finding another stabilizer ( and in general, finding a stabilizer is a computationally hard task relative to calculating orbits/transversals). The entire purpose of this use of BASESWAP in SUBGROUPSEARCH is to obtain generators for the stabilizer of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=b_1%2C+b_2%2C+%5Cldots%2C+b_l%27&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;b_1, b_2, \ldots, b_l'&quot; class=&quot;latex&quot; title=&quot;b_1, b_2, \ldots, b_l'&quot; /&gt; and maintain a base/strong generating set that are valid up to a certain position. There are many such base changes performed on the same base throughout the course of the function and something goes wrong along the way. I still have to figure out why and where.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;The good news&lt;/strong&gt;: There is a straightforward alternative to using BASESWAP: maintain a list of generators for each of the basic stabilizers in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28b_1%2C+b_2%2C+%5Cldots%2C+b_k%29&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;(b_1, b_2, \ldots, b_k)&quot; class=&quot;latex&quot; title=&quot;(b_1, b_2, \ldots, b_k)&quot; /&gt; and change it accordingly as the base is changed, using the function stabilizer() in sympy/combinatorics/perm_groups.py. For each base change we have to calculate one more stabilizer, so that’s not terrible. It is also sort of suggested in &lt;a href=&quot;http://www.google.com/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=1&amp;amp;ved=0CFIQFjAA&amp;amp;url=http%3A%2F%2Fwww.math.colostate.edu%2F~hulpke%2FCGT%2Fcgtnotes.pdf&amp;amp;ei=u48WUN24M4jf4QS2q4GgBg&amp;amp;usg=AFQjCNHasgOmBkx2AetpE0_-92TFjSyU3A&quot; target=&quot;_blank&quot;&gt;“Notes on Computational Group Theory”&lt;/a&gt; by Alexander Hulpke (page 34). The problem with this approach is that stabilizer() tends to return a group with many generators, and repeated applications keep increasing this number. However, using this &lt;strong&gt;removed the bug from SUBGROUPSEARCH. &lt;/strong&gt;As before, more comprehensive tests are on the way : )&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Yet another alternative : &lt;/strong&gt;we can use the incremental Schreier-Sims algorithm with the new base &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28b_1%2C+%5Cldots%2C+b_l%27%2C+%5Cldots%2C+b_k%29&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;(b_1, \ldots, b_l', \ldots, b_k)&quot; class=&quot;latex&quot; title=&quot;(b_1, \ldots, b_l', \ldots, b_k)&quot; /&gt; and the strong generating set for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28b_1%2C+%5Cldots%2C+b_l%2C+%5Cldots%2C+b_k%29&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;(b_1, \ldots, b_l, \ldots, b_k)&quot; class=&quot;latex&quot; title=&quot;(b_1, \ldots, b_l, \ldots, b_k)&quot; /&gt;. There will likely be redundant generators after that, and it will probably involve more computation than finding a single stabilizer. However, in the long run (since there are many base changes performed) this might perform faster (due to the increasing number of generators that stabilizer() tends to create). I have not tried that approach yet.&lt;/li&gt;
&lt;li&gt;Other than that, I had &lt;a href=&quot;https://github.com/sympy/sympy/pull/1406&quot; target=&quot;_blank&quot;&gt;my latest major pull request&lt;/a&gt; merged! Thanks a lot to &lt;a href=&quot;https://github.com/Krastanov&quot; target=&quot;_blank&quot;&gt;Stefan&lt;/a&gt; and my mentor &lt;a href=&quot;https://github.com/wdjoyner&quot; target=&quot;_blank&quot;&gt;David&lt;/a&gt; for the review! That was the largest one so far…&lt;/li&gt;
&lt;li&gt;I started reading about some of the applications of subgroup search; subgroup intersection seems to be the easiest to implement, so I’ll probably go for it first.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That’s it for now : )&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/amakelov.wordpress.com/429/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/amakelov.wordpress.com/429/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=amakelov.wordpress.com&amp;amp;blog=35896871&amp;amp;post=429&amp;amp;subd=amakelov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-07-30T13:46:30+00:00</dc:date>
	<dc:creator>Александър Макелов</dc:creator>
</item>
<item rdf:about="http://rhoforsympy.wordpress.com/?p=222">
	<title>Guru Devanla: Week 10: Finishing up density matrices!</title>
	<link>http://rhoforsympy.wordpress.com/2012/07/30/week-10-finishing-up-density-matrices/</link>
	<content:encoded>&lt;p&gt;This week I largely wrapped up most of the items I had listed in the proposal. The current pending PR addresses and completes most of the major features I had proposed to implement. Some minor issues that are still pending should be addressed during the next week.&lt;/p&gt;
&lt;p&gt;1. Adjust qapply() to complete some density based operations more gracefully.&lt;/p&gt;
&lt;p&gt;2. Relocate the trace.py modules from core to another suggested folder. There have been some discussions on this on the mailing thread, which I plan to re-initiate and get a closure on this week.&lt;/p&gt;
&lt;p&gt;Apart from these 2 items, based on some IRC discussions I had with Brian during past week, I have started looking at following 2 items. My plan is to work on the following 2 items during this month.&lt;/p&gt;
&lt;p&gt;1. Finish up implementation of Shor’s algorithm currently available here: &lt;a href=&quot;https://github.com/addisonc/sympy/blob/addison-main/sympy/physics/quantum/shor.py&quot;&gt;git&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2.  Implement the fidelity and trace distances for density matrices: &lt;a href=&quot;http://en.wikipedia.org/wiki/Fidelity_of_quantum_states&quot;&gt;Ref&lt;/a&gt;&lt;/p&gt;
&lt;div&gt;Happy Coding!&lt;/div&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/rhoforsympy.wordpress.com/222/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/rhoforsympy.wordpress.com/222/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=rhoforsympy.wordpress.com&amp;amp;blog=34650270&amp;amp;post=222&amp;amp;subd=rhoforsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-07-30T04:03:39+00:00</dc:date>
	<dc:creator>grdvnl</dc:creator>
</item>
<item rdf:about="http://scolobb.wordpress.com/?p=308">
	<title>Sergiu Ivanov: The Reflection about Inference</title>
	<link>http://scolobb.wordpress.com/2012/07/29/the-reflection-about-inference/</link>
	<content:encoded>&lt;p&gt;This week I have been working both on fixing some existing code (including &lt;a href=&quot;https://github.com/sympy/sympy/pull/1429&quot;&gt;diagram layout&lt;/a&gt;) and on better understanding the code that I am going to write next.  As far as the fixes are concerned, I have further polished the diagram layout code, including the addition of some pretty printing for &lt;tt&gt;DiagramGrid&lt;/tt&gt;.  I didn’t initially expect pretty printing to be useful for this class; however, it turned out that being able to quickly glance at the grid itself was very helpful in certain situations.&lt;/p&gt;
&lt;p&gt;Something which makes me very content is that I have finally submitted a fix for the sort key problem for unordered collections.  The essence of the problem is as follows.  With hash randomisation enabled, the order of &lt;tt&gt;Basic.args&lt;/tt&gt; changes on every run.  On the other hand, &lt;tt&gt;Basic.sort_key&lt;/tt&gt; traverses the arguments in the order in which they are stored; therefore, sort keys are dependent on the actual order of the arguments.  This has given me trouble when working on laying out diagrams, specifically, in handling groups.  The thing is that the group handling code relies on &lt;tt&gt;FiniteSet&lt;/tt&gt; (this maybe isn’t the best idea, but that’s a different story, really &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif&quot; alt=&quot;:-)&quot; class=&quot;wp-smiley&quot; /&gt; ): groups are eventually converted to &lt;tt&gt;FiniteSet&lt;/tt&gt;‘s of &lt;tt&gt;FiniteSet&lt;/tt&gt;‘s.  To assure stable output, the collection of &lt;tt&gt;FiniteSet&lt;/tt&gt;‘s is &lt;em&gt;sorted&lt;/em&gt;.  However, due to the influence of hash randomisation on sort keys, this sorting would &lt;em&gt;not&lt;/em&gt; actually produce the desired consequences.  There was a similar problem in the same block of functionality which had to do with sorting &lt;tt&gt;Diagram&lt;/tt&gt;‘s; the issue there was that a &lt;tt&gt;Diagram&lt;/tt&gt; stores &lt;tt&gt;Dict&lt;/tt&gt;‘s which, being unordered collections, were subject to the same sort key trouble.  Pull request &lt;a href=&quot;https://github.com/sympy/sympy/pull/1446&quot;&gt;#1446&lt;/a&gt; fixes all of these issues and, finally, the diagram drawing code almost always passes all of its tests.&lt;/p&gt;
&lt;p&gt;It is worth mentioning that while the fix for the sort key problem was not included in the &lt;a href=&quot;https://github.com/sympy/sympy/pull/1429&quot;&gt;#1429&lt;/a&gt;, I was inclined to classify all problems as related to &lt;tt&gt;FiniteSet.sort_key&lt;/tt&gt;.  With the fix in the branch, it turned out that there were some other subtle sorting issues, which I am still fixing.&lt;/p&gt;
&lt;p&gt;I have also sent pull request &lt;a href=&quot;https://github.com/sympy/sympy/pull/1440&quot;&gt;#1440&lt;/a&gt; which fixes the pretty printing of morphisms and diagrams, introduced by myself in &lt;a href=&quot;https://github.com/sympy/sympy/pull/1338&quot;&gt;#1338&lt;/a&gt;.  Initially, I would use short Unicode arrows for pretty printing morphisms, but Tom and I have arrived at the conclusion that these arrows look too condensed.  I have then chosen to use long Unicode arrows; it turned out however that Unicode characters which span more than one symbol are not rendered consistently across different machines.  On my computer, the longer arrow would overlap with the next character in line; on Tom’s, it would not.  Aaron has suggested building up arrows out of em dashes and black right-pointing triangles, and this seems to work better, although it still looks ugly with some fonts (e.g., the default font in &lt;em&gt;rxvt-unicode&lt;/em&gt;, as reported by Tom).&lt;/p&gt;
&lt;p&gt;I have also promised to implement variable-length horizontal arrows.  I have decided to postpone this for now, however, in order to better focus on my GSoC project.  I will keep that task in mind, however, and will most probably return to it in a couple of days.&lt;/p&gt;
&lt;p&gt;As for deciding the commutativity of diagrams, I have run into an unexpected conceptual problem, arising from the fundamental difference between diagrams with conclusions and without conclusions.  Before explaining the problem, I will remind the description of these two types of constructions.  A commutative diagram is a collection of morphisms (which usually form a connected directed graph) with the property that composing all morphisms along any two paths between any two objects produces the same composite morphism.  While being quite general, in category theory it is customary to produce statements like “if there are such morphisms, there exist such morphisms, and the diagram is commutative”.  This statement is clearly an implication.  The class &lt;tt&gt;Diagram&lt;/tt&gt; is a representation of the second type of statement and contains sets of premise morphisms and conclusion morphisms.  &lt;tt&gt;Diagram&lt;/tt&gt; is also conventionally capable of representing simple commutativity if no conclusions are specified.&lt;/p&gt;
&lt;p&gt;While I was initially quite comfortable with using &lt;tt&gt;Diagram&lt;/tt&gt; for both types of statements, I am really inclined to considering the creation of two separate classes now.  Thus I plan to rename &lt;tt&gt;Diagram&lt;/tt&gt; to &lt;tt&gt;Implication&lt;/tt&gt; and add a different  &lt;tt&gt;Diagram&lt;/tt&gt; which will represent what I used to call “commutative diagram without conclusions”.  That is, &lt;tt&gt;Diagram&lt;/tt&gt; will hold only one collection of morphisms.&lt;/p&gt;
&lt;p&gt;With this separation, it is immediately clear that, in the context of my model, the question “Is this diagram commutative?” actually incorporates two totally different questions:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Is this &lt;tt&gt;Diagram&lt;/tt&gt; commutative?&lt;/li&gt;
&lt;li&gt;Is this &lt;tt&gt;Implication&lt;/tt&gt; true and commutative?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Fortunately for me ( &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif&quot; alt=&quot;:-)&quot; class=&quot;wp-smiley&quot; /&gt;  ), this newly-discovered separation does not remove the possibility of answering both questions with almost the same algorithm.  I will start with question (1) to further stress the difference between the semantics of diagrams and implications.&lt;/p&gt;
&lt;p&gt;Consider a collection of &lt;tt&gt;Diagram&lt;/tt&gt;‘s and &lt;tt&gt;Implication&lt;/tt&gt;‘s known to be commutative.  (By saying “an &lt;tt&gt;Implication&lt;/tt&gt; is commutative” I will abuse the terminology and mean “an &lt;tt&gt;Implication&lt;/tt&gt; is true and commutative.”)  We need to decide whether the target &lt;tt&gt;Diagram&lt;/tt&gt; is commutative.  The algorithm I will describe is based on &lt;a href=&quot;http://en.wikipedia.org/wiki/Backward_chaining&quot;&gt;backward chaining&lt;/a&gt; and is therefore recursive.  A recursive step consists of two stages: the &lt;em&gt;commutativity&lt;/em&gt; stage and the &lt;em&gt;inference&lt;/em&gt; stage.  The goal of the commutativity stage is to decide whether the current version of the target &lt;tt&gt;Diagram&lt;/tt&gt; is commutative; the goal of the inference stage is to see whether applying one of the &lt;tt&gt;Implication&lt;/tt&gt;‘s will make the target &lt;tt&gt;Diagram&lt;/tt&gt; commutative.&lt;/p&gt;
&lt;p&gt;The commutativity stage starts with taking every morphism of the target &lt;tt&gt;Diagram&lt;/tt&gt; and putting each of them into its own commutative subdiagram.  Now, for each commutative subdiagram, the algorithm will pick a subset of morphisms and will then put the subsets together to form another subdiagram.  This subdiagram will then be compared with each of the &lt;tt&gt;Diagram&lt;/tt&gt;‘s known to be commutative.  If a match is found, the subdiagram is added to the set of commutative subdiagrams.  Then, all possible “absorptions” among the diagrams are performed (i.e., if subdiagram &lt;img src=&quot;http://s0.wp.com/latex.php?latex=A&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;A&quot; class=&quot;latex&quot; title=&quot;A&quot; /&gt; is a subdiagram of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=B&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;B&quot; class=&quot;latex&quot; title=&quot;B&quot; /&gt;, the subdiagram &lt;img src=&quot;http://s0.wp.com/latex.php?latex=A&amp;amp;bg=000000&amp;amp;fg=b8babb&amp;amp;s=0&quot; alt=&quot;A&quot; class=&quot;latex&quot; title=&quot;A&quot; /&gt; is removed from the collection of subdiagrams (for obvious reasons)) and the iteration returns to its start, where it picks subsets of the new subdiagrams.  Since the number of morphisms in the diagram is finite, this process is finite.  If, in the end, the collection of commutative subdiagrams contains only the target diagram, it is deemed commutative.&lt;/p&gt;
&lt;p&gt;Note that this alrogithm is very similar to one of the methods of finding all prime implicants of a boolean function (we called that Blake-Poretski algorithm at the university, but I cannot find any references on my Internet).  I have considered the possibilities of directly converting the commutativity stage to a boolean function minimisation problem, but I haven’t found a sufficiently elegant way yet.&lt;/p&gt;
&lt;p&gt;The inference stage exactly follows the idea of backward chaining.  For each &lt;tt&gt;Implication&lt;/tt&gt; an attempt is made to find the embedding of the premises into the target &lt;tt&gt;Diagram&lt;/tt&gt;.  If such an embedding is found, the corresponding conclusions are added to a copy of the target &lt;tt&gt;Diagram&lt;/tt&gt; and a recursive examination of the modified &lt;tt&gt;Diagram&lt;/tt&gt; is made.  The found embedding of one of the &lt;tt&gt;Implication&lt;/tt&gt;‘s plus the added conclusions are propagated down the recursion tree as commutative subdiagrams.  The commutative stages of the following recursive calls will take their commutativity for granted.&lt;/p&gt;
&lt;p&gt;If one of these recursive calls returns a positive result, this positive result is propagated up the call stack.  If neither of the recursive calls returned a positive result, or if no embedding of an &lt;tt&gt;Implication&lt;/tt&gt; has been found in a certain recursive call, a negative result is returned from this recursive call.&lt;/p&gt;
&lt;p&gt;Note that it actually was the inference stage that I described in my original GSoC &lt;a href=&quot;https://github.com/sympy/sympy/wiki/GSoC-2012-Application-Sergiu-Ivanov:-Category-Theory-Module&quot;&gt;proposal&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Before showing how to answer question (2), I would like to analyse the algorithm idea I have just presented a little bit.  One can see that the commutativity and inference stages are &lt;em&gt;very&lt;/em&gt; different; so different, in fact, that they are almost independent.  Therefore, these two bits of functionality will live in separate pieces of code, and will be later combined to function together.  I will start by defining two internal classes, &lt;tt&gt;_CommutativityStage&lt;/tt&gt; and &lt;tt&gt;_InferenceStage&lt;/tt&gt; which will host the corresponding functions.  The code that will actually combine the two will either be a global function or a class; this will be clearer later and is not important at the moment.&lt;/p&gt;
&lt;p&gt;Question (2) now: “Is the given &lt;tt&gt;Implication&lt;/tt&gt; true (and commutative)?”.  In this case, one should start from the premises of the given &lt;tt&gt;Implication&lt;/tt&gt; and apply the same strategy as in answering question (1).  Here, however, the terminal criterion is that the target &lt;tt&gt;Diagram&lt;/tt&gt; (obtained from the premises of the original &lt;tt&gt;Implication&lt;/tt&gt;) is commutative &lt;em&gt;and&lt;/em&gt; contains the conclusions of the original &lt;tt&gt;Implication&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;A remark about comparing diagrams is due here: this is nothing but the &lt;a href=&quot;http://en.wikipedia.org/wiki/Subgraph_isomorphism_problem&quot;&gt;subgraph isomorphism problem&lt;/a&gt;.  I have already found &lt;a href=&quot;http://scolobb.wordpress.com/feed/software.nju.edu.cn/lingzong/papers/SGI.pdf&quot;&gt;this paper&lt;/a&gt; (haven’t read it yet), but I’m open to other paper suggestions in this regard &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif&quot; alt=&quot;:-)&quot; class=&quot;wp-smiley&quot; /&gt; &lt;/p&gt;
&lt;p&gt;EDIT: I have decided to not follow this article and instead focus on a more basic solution.  Should the need occur, I will implement this (apparently) more efficient version.&lt;/p&gt;
&lt;p&gt;It is necessary to keep in mind that, besides finding the subgraph isomporphism proper, the code will have to pay attention to morphism properties as well.&lt;/p&gt;
&lt;p&gt;Now, the most attentive readers might have already remarked that semantically splitting the class &lt;tt&gt;Diagram&lt;/tt&gt; into two will impact diagram drawing.  Yet, the impact will be rather modest, since the drawing code already knows how to deal with something similar to &lt;tt&gt;Implication&lt;/tt&gt;; adding explicit support for new &lt;tt&gt;Diagram&lt;/tt&gt; is going to require minimal effort.&lt;/p&gt;
&lt;p&gt;In this blog post, I recognize that my initial class model was flawed in yet another place.  I try to see this is as a sign of personal progress, though &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif&quot; alt=&quot;:-)&quot; class=&quot;wp-smiley&quot; /&gt; &lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/scolobb.wordpress.com/308/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/scolobb.wordpress.com/308/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=scolobb.wordpress.com&amp;amp;blog=35433045&amp;amp;post=308&amp;amp;subd=scolobb&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-07-29T19:20:53+00:00</dc:date>
	<dc:creator>scolobb</dc:creator>
</item>
<item rdf:about="http://angadhsympy.wordpress.com/?p=305">
	<title>Angadh Nanjangud: GSoC Blog post</title>
	<link>http://angadhsympy.wordpress.com/2012/07/28/gsoc-blog-post/</link>
	<content:encoded>&lt;p&gt;In the week accompanying and the weeks following the evaluation, I have been working on the implementation of &lt;a href=&quot;http://en.wikipedia.org/wiki/Lagrangian_mechanics&quot;&gt;Lagrange’s method&lt;/a&gt; to the ‘mechanics’ armory. A lot can be written on the method but  I will spare the details here for now. In terms of progress on the coding itself, I feel like I have made significant strides in completing it. I expect to open a pull request in the middle of the upcoming week on Lagrange’s method, once I have some more of the ‘kinks’ ironed out.&lt;/p&gt;
&lt;p&gt;I’m simultaneously working on the documentation aspect mentioned on my proposal. Currently, I’m working on adding to the theoretical or ‘text-book’ documentation that mechanics has on sympy docs. Specifically, I’m working on the theoretical material of the helper functions that I have added. Ideally, I will be opening a PR for this at the same time as the PR for Lagrange but that may not happen.&lt;/p&gt;
&lt;p&gt;I would also like to apologise for missing out on the blog post last week. There were certain extenuating circumstances with respect to my physical health that I had to deal with coupled with a failure of my internet connection (which my ISP finally resolved on Wednesday). With regards to my health- I have had a troublesome knee problem which needed surgery. I had put off the surgery until the end of August but unfortunately the situation took a turn for the worse in the week following the evaluation. Anyhow it ended with me requiring an ACL reconstruction and meniscus removal. Unexpected but I have tried hard to not let it hamper productivity as best as possible. Nonetheless I apologise for my tardiness.&lt;/p&gt;
&lt;p&gt;In terms of the bigger picture with respect to my GSoC goals, it may look like I’m a little behind schedule but since I’m  simultaneously working on two of my goals right now which will get knocked off, in the worst case scenario, in the next two weeks. I will still have a couple more weeks to work on my final goal which is the addition and improvement of the code output functionality of mechanics. At this time, it looks like I will meet my goals and in the worst case scenario, I will be mid way through my last goal.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/angadhsympy.wordpress.com/305/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/angadhsympy.wordpress.com/305/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=angadhsympy.wordpress.com&amp;amp;blog=35620584&amp;amp;post=305&amp;amp;subd=angadhsympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-07-28T10:54:09+00:00</dc:date>
	<dc:creator>angadhn</dc:creator>
</item>
<item rdf:about="http://www.catchmrbharath.in/programming/2012/07/23/gsoc-week-9">
	<title>Bharath M R: Gsoc week 9</title>
	<link>http://www.catchmrbharath.in/programming/2012/07/23/gsoc-week-9</link>
	<content:encoded>&lt;p&gt;This has been a really unproductive week. I was sick with fever for almost three days and could not spend my time on anything. I spent the next days getting the basic svgfig backend for 2d line plots. There are lots of issues with svgfig, and hence I am of the opinion svgfig should be used only for displaying images on the google app engine ie sympy live. First on the list is no support for 3-D graphs. I think this is ok, because there are not many libraries even in javascript which can do 3D plotting. Also, I am having problems with implementing contour plots and surface plots in svgfig. I am experimenting with a way, which would involve using marching squares algorithm to plot contour plots.&lt;/p&gt;

&lt;p&gt;I think I am a little behind my gsoc schedule, and I should speed up things a little in the next few weeks.&lt;/p&gt;

&lt;p&gt;So these are the things that I have to address&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Integration of svgfig with sympy live&lt;/li&gt;

&lt;li&gt;Fix the multiple spawning of windows in matplotlib issue.&lt;/li&gt;

&lt;li&gt;Fix the plot tests. As of now, the tests do nothing, as the process_series is not called if show is set to False.&lt;/li&gt;

&lt;li&gt;I have been toying around with ipython to get isympy notebook and qtconsole working. The problem I am facing is, there are 2 instances of qtconsole created, instead of one, when I run it. I will have to figure out the problem.&lt;/li&gt;

&lt;li&gt;Address the issues regarding the adaptive sampling of 2d plots.&lt;/li&gt;

&lt;li&gt;Clean up my branch of implicit plotting (This is almost done).&lt;/li&gt;

&lt;li&gt;Split the plot function into plot, plot3d, implicit_plot functions.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I don’t think I will be able to do all of these by the end of gsoc period. But my priority will be getting the implicit plotting and svgfig backend working and getting my pull requests merged.&lt;/p&gt;</content:encoded>
	<dc:date>2012-07-23T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://catchmrbharath.github.com/programming/2012/07/23/gsoc-week-9">
	<title>Bharath M R: Gsoc week 9</title>
	<link>http://catchmrbharath.github.com/programming/2012/07/23/gsoc-week-9</link>
	<content:encoded>&lt;p&gt;This has been a really unproductive week. I was sick with fever for almost three days and could not spend my time on anything. I spent the next days getting the basic svgfig backend for 2d line plots. There are lots of issues with svgfig, and hence I am of the opinion svgfig should be used only for displaying images on the google app engine ie sympy live. First on the list is no support for 3-D graphs. I think this is ok, because there are not many libraries even in javascript which can do 3D plotting. Also, I am having problems with implementing contour plots and surface plots in svgfig. I am experimenting with a way, which would involve using marching squares algorithm to plot contour plots.&lt;/p&gt;

&lt;p&gt;I think I am a little behind my gsoc schedule, and I should speed up things a little in the next few weeks.&lt;/p&gt;

&lt;p&gt;So these are the things that I have to address&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Integration of svgfig with sympy live&lt;/li&gt;

&lt;li&gt;Fix the multiple spawning of windows in matplotlib issue.&lt;/li&gt;

&lt;li&gt;Fix the plot tests. As of now, the tests do nothing, as the process_series is not called if show is set to False.&lt;/li&gt;

&lt;li&gt;I have been toying around with ipython to get isympy notebook and qtconsole working. The problem I am facing is, there are 2 instances of qtconsole created, instead of one, when I run it. I will have to figure out the problem.&lt;/li&gt;

&lt;li&gt;Address the issues regarding the adaptive sampling of 2d plots.&lt;/li&gt;

&lt;li&gt;Clean up my branch of implicit plotting (This is almost done).&lt;/li&gt;

&lt;li&gt;Split the plot function into plot, plot3d, implicit_plot functions.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I don’t think I will be able to do all of these by the end of gsoc period. But my priority will be getting the implicit plotting and svgfig backend working and getting my pull requests merged.&lt;/p&gt;</content:encoded>
	<dc:date>2012-07-23T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://blog.catchmrbharath.in/programming/2012/07/23/gsoc-week-9">
	<title>Bharath M R: Gsoc week 9</title>
	<link>http://blog.catchmrbharath.in/programming/2012/07/23/gsoc-week-9</link>
	<content:encoded>&lt;p&gt;This has been a really unproductive week. I was sick with fever for almost three days and could not spend my time on anything. I spent the next days getting the basic svgfig backend for 2d line plots. There are lots of issues with svgfig, and hence I am of the opinion svgfig should be used only for displaying images on the google app engine ie sympy live. First on the list is no support for 3-D graphs. I think this is ok, because there are not many libraries even in javascript which can do 3D plotting. Also, I am having problems with implementing contour plots and surface plots in svgfig. I am experimenting with a way, which would involve using marching squares algorithm to plot contour plots.&lt;/p&gt;

&lt;p&gt;I think I am a little behind my gsoc schedule, and I should speed up things a little in the next few weeks.&lt;/p&gt;

&lt;p&gt;So these are the things that I have to address&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Integration of svgfig with sympy live&lt;/li&gt;

&lt;li&gt;Fix the multiple spawning of windows in matplotlib issue.&lt;/li&gt;

&lt;li&gt;Fix the plot tests. As of now, the tests do nothing, as the process_series is not called if show is set to False.&lt;/li&gt;

&lt;li&gt;I have been toying around with ipython to get isympy notebook and qtconsole working. The problem I am facing is, there are 2 instances of qtconsole created, instead of one, when I run it. I will have to figure out the problem.&lt;/li&gt;

&lt;li&gt;Address the issues regarding the adaptive sampling of 2d plots.&lt;/li&gt;

&lt;li&gt;Clean up my branch of implicit plotting (This is almost done).&lt;/li&gt;

&lt;li&gt;Split the plot function into plot, plot3d, implicit_plot functions.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I don’t think I will be able to do all of these by the end of gsoc period. But my priority will be getting the implicit plotting and svgfig backend working and getting my pull requests merged.&lt;/p&gt;</content:encoded>
	<dc:date>2012-07-23T07:00:00+00:00</dc:date>
</item>
<item rdf:about="http://amakelov.wordpress.com/?p=391">
	<title>Aleksandar Makelov: Google Summer of Code 2012: Week 9</title>
	<link>http://amakelov.wordpress.com/2012/07/23/google-summer-of-code-2012-week-9/</link>
	<content:encoded>&lt;p&gt;Hi all, here’s a brief summary of what I’ve been doing for the 9th week of my GSoC.&lt;/p&gt;
&lt;p&gt;This week saw (and still has to see) some exciting new additions:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;font-size: large;&quot;&gt;I. The incremental Schreier-Sims algorithm.&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is a version of the Schreier-Sims algorithm that takes a sequence of points &lt;img src=&quot;http://s0.wp.com/latex.php?latex=B&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;B&quot; class=&quot;latex&quot; title=&quot;B&quot; /&gt; and a generating set &lt;img src=&quot;http://s0.wp.com/latex.php?latex=S&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;S&quot; class=&quot;latex&quot; title=&quot;S&quot; /&gt; for a group &lt;img src=&quot;http://s0.wp.com/latex.php?latex=G&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;G&quot; class=&quot;latex&quot; title=&quot;G&quot; /&gt; as input, and extends &lt;img src=&quot;http://s0.wp.com/latex.php?latex=B&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;B&quot; class=&quot;latex&quot; title=&quot;B&quot; /&gt; to a base and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=S&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;S&quot; class=&quot;latex&quot; title=&quot;S&quot; /&gt; to a strong generating set relative to it. It is described in [1], pp.87-93. The default value of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=B&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;B&quot; class=&quot;latex&quot; title=&quot;B&quot; /&gt; is &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5B%5D&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;[]&quot; class=&quot;latex&quot; title=&quot;[]&quot; /&gt;, and that of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=S&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;S&quot; class=&quot;latex&quot; title=&quot;S&quot; /&gt; is &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ctext%7BG.generators%7D&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;\text{G.generators}&quot; class=&quot;latex&quot; title=&quot;\text{G.generators}&quot; /&gt;. Here’s an example:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [41]: S = SymmetricGroup(5)
In [42]: base = [3, 4]
In [43]: gens = S.generators
In [44]: x = S.schreier_sims_incremental(base, gens)
In [45]: x
Out[45]:
([3, 4, 0, 1],
[Permutation([1, 2, 3, 4, 0]),
Permutation([1, 0, 2, 3, 4]),
Permutation([4, 0, 1, 3, 2]),
Permutation([0, 2, 1, 3, 4])])
In [46]: from sympy.combinatorics.util import _verify_bsgs
In [47]: _verify_bsgs(S, x[0], x[1])
Out[47]: True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;The current implementation stores the transversals for the basic orbits explicitly (the alternative is to use Schreier vectors to describe the orbits – this saves a lot of space, but requires more time in order to compute transversal elements whenever they are needed. This feature is still to be implemented, and this probably won’t happen in this GSoC). The current implementation of the Schreier-Sims algorithm on the master branch uses Jerrum’s filter (for more details and comparisons of the incremental version and the one using Jerrum’s filter, go &lt;a href=&quot;http://www.m8j.net/data/List/Files-118/Documentation.pdf&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;) as an optimization, and also stores the transversals explicitly. The incremental version seems to be asymptotically faster though. Here’s several comparisons of the current version on the master branch and the incremental one which can be found on a local branch of mine which is somewhat inadequately called &lt;a href=&quot;https://github.com/amakelov/sympy/tree/week6&quot; target=&quot;_blank&quot;&gt;week6&lt;/a&gt;):&lt;/p&gt;
&lt;p&gt;For symmetric groups:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [50]: groups = []
In [51]: for i in range(20, 30):
....:     groups.append(SymmetricGroup(i))
....:
In [52]: for group in groups:
....:     %timeit -r1 -n1 group.schreier_sims()
....:
1 loops, best of 1: 590 ms per loop
1 loops, best of 1: 719 ms per loop
1 loops, best of 1: 981 ms per loop
1 loops, best of 1: 1.35 s per loop
1 loops, best of 1: 1.66 s per loop
1 loops, best of 1: 2.19 s per loop
1 loops, best of 1: 2.74 s per loop
1 loops, best of 1: 3.37 s per loop
1 loops, best of 1: 4.28 s per loop
1 loops, best of 1: 5.37 s per loop
In [53]: for group in groups:
....:     %timeit -r1 -n1 group.schreier_sims_incremental()
....:
1 loops, best of 1: 612 ms per loop
1 loops, best of 1: 737 ms per loop
1 loops, best of 1: 927 ms per loop
1 loops, best of 1: 1.15 s per loop
1 loops, best of 1: 1.41 s per loop
1 loops, best of 1: 1.72 s per loop
1 loops, best of 1: 2.1 s per loop
1 loops, best of 1: 2.52 s per loop
1 loops, best of 1: 3.02 s per loop
1 loops, best of 1: 3.58 s per loop
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;For alternating groups:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [54]: groups = []
In [55]: for i in range(20, 40, 2):
....:     groups.append(AlternatingGroup(i))
....:
In [56]: for group in groups:
%timeit -r1 -n1 group.schreier_sims()
....:
1 loops, best of 1: 613 ms per loop
1 loops, best of 1: 1.03 s per loop
1 loops, best of 1: 1.77 s per loop
1 loops, best of 1: 2.65 s per loop
1 loops, best of 1: 3.51 s per loop
1 loops, best of 1: 5.31 s per loop
1 loops, best of 1: 7.71 s per loop
1 loops, best of 1: 11.1 s per loop
1 loops, best of 1: 15.3 s per loop
1 loops, best of 1: 19.1 s per loop
In [57]: for group in groups:
%timeit -r1 -n1 group.schreier_sims_incremental()
....:
1 loops, best of 1: 504 ms per loop
1 loops, best of 1: 787 ms per loop
1 loops, best of 1: 1.23 s per loop
1 loops, best of 1: 1.9 s per loop
1 loops, best of 1: 2.8 s per loop
1 loops, best of 1: 3.99 s per loop
1 loops, best of 1: 5.48 s per loop
1 loops, best of 1: 7.45 s per loop
1 loops, best of 1: 10 s per loop
1 loops, best of 1: 13.2 s per loop
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;And for some dihedral groups of large degree (to illustrate the case of small-base groups of large degrees):&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [58]: groups = []
In [59]: for i in range(100, 2000, 200):
....:     groups.append(DihedralGroup(i))
....:
In [60]: for group in groups:
%timeit -r1 -n1 group.schreier_sims()
....:
1 loops, best of 1: 29.6 ms per loop
1 loops, best of 1: 108 ms per loop
1 loops, best of 1: 278 ms per loop
1 loops, best of 1: 527 ms per loop
1 loops, best of 1: 861 ms per loop
1 loops, best of 1: 1.29 s per loop
1 loops, best of 1: 1.83 s per loop
1 loops, best of 1: 2.39 s per loop
1 loops, best of 1: 3.06 s per loop
1 loops, best of 1: 3.83 s per loop
In [61]: for group in groups:
%timeit -r1 -n1 group.schreier_sims_incremental()
....:
1 loops, best of 1: 20.8 ms per loop
1 loops, best of 1: 52.8 ms per loop
1 loops, best of 1: 121 ms per loop
1 loops, best of 1: 223 ms per loop
1 loops, best of 1: 365 ms per loop
1 loops, best of 1: 548 ms per loop
1 loops, best of 1: 766 ms per loop
1 loops, best of 1: 1 s per loop
1 loops, best of 1: 1.25 s per loop
1 loops, best of 1: 1.51 s per loop
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;In addition to this algorithm I implemented a related function _remove_gens in sympy.combinatorics.util which removes redundant generators from a strong generating set (since there tend to be some redundant ones after schreier_sims_incremental() is run):&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [68]: from sympy.combinatorics.util import _remove_gens
In [69]: S = SymmetricGroup(6)
In [70]: base, strong_gens = S.schreier_sims_incremental()
In [71]: strong_gens
Out[71]:
[Permutation([1, 2, 3, 4, 5, 0]),
Permutation([1, 0, 2, 3, 4, 5]),
Permutation([0, 5, 1, 2, 3, 4]),
Permutation([0, 1, 2, 3, 5, 4]),
Permutation([0, 1, 2, 4, 3, 5]),
Permutation([0, 1, 3, 2, 4, 5]),
Permutation([0, 1, 2, 5, 4, 3]),
Permutation([0, 1, 5, 3, 4, 2])]
In [72]: new_gens = _remove_gens(base, strong_gens)
In [73]: new_gens
Out[73]:
[Permutation([1, 0, 2, 3, 4, 5]),
Permutation([0, 5, 1, 2, 3, 4]),
Permutation([0, 1, 2, 4, 3, 5]),
Permutation([0, 1, 2, 5, 4, 3]),
Permutation([0, 1, 5, 3, 4, 2])]
In [74]: _verify_bsgs(S, base, new_gens)
Out[74]: True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;font-size: large;&quot;&gt;II. Subgroup search.&lt;/span&gt;&lt;/strong&gt;&lt;br /&gt;
This is an algorithm used to find the subgroup &lt;img src=&quot;http://s0.wp.com/latex.php?latex=K&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;K&quot; class=&quot;latex&quot; title=&quot;K&quot; /&gt; of a given group &lt;img src=&quot;http://s0.wp.com/latex.php?latex=G&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;G&quot; class=&quot;latex&quot; title=&quot;G&quot; /&gt; of all elements of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=G&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;G&quot; class=&quot;latex&quot; title=&quot;G&quot; /&gt; satisfying a given property &lt;img src=&quot;http://s0.wp.com/latex.php?latex=P&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;P&quot; class=&quot;latex&quot; title=&quot;P&quot; /&gt;. It is described in [1], pp.114-118 and is &lt;strong&gt;quite sophisticated &lt;/strong&gt;(the book is right when it says “The function SUBGROUPSEARCH is rather complicated and will require careful study by the reader.”). On the other hand, it is one of the most interesting additions to the groups module to date since it can do so much. The idea is to do a depth-first search over all group elements and prune large parts of the search tree based on several different criteria. It’s currently about 150 lines of code and works in many cases but still &lt;strong&gt;needs debugging&lt;/strong&gt;. It can currently do some wonderful stuff like this:&lt;br /&gt;
&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [77]: S = SymmetricGroup(6)
In [78]: prop = lambda g: g.is_even
In [79]: G = S.subgroup_search(prop)
In [80]: G == AlternatingGroup(6)
Out[80]: True

&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;to find the alternating group as a subgroup of the full symmetric group by the defining property that all its elements are the even permutations, or this:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [81]: D = DihedralGroup(10)
In [82]: prop_true = lambda g: True
In [83]: G = D.subgroup_search(prop_true)
In [84]: G == D
Out[84]: True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;to find the dihedral group &lt;img src=&quot;http://s0.wp.com/latex.php?latex=D_%7B10%7D&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;D_{10}&quot; class=&quot;latex&quot; title=&quot;D_{10}&quot; /&gt; as a subgroup of itself using the trivial property that always returns &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ctext%7BTrue%7D&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;\text{True}&quot; class=&quot;latex&quot; title=&quot;\text{True}&quot; /&gt;; or this:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [106]: A = AlternatingGroup(4)
In [107]: G = A.subgroup_search(prop_fix_23)
In [108]: G == A.stabilizer(2).stabilizer(3)
Out[108]: True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;to find the pointwise stabilizer of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5C%7B2%2C3%5C%7D&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;\{2,3\}&quot; class=&quot;latex&quot; title=&quot;\{2,3\}&quot; /&gt;. And so on and so on. What is more wonderful is that you can specify the base used for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=G&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;G&quot; class=&quot;latex&quot; title=&quot;G&quot; /&gt; in advance, and the generating set returned for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=K&amp;amp;bg=ffffff&amp;amp;fg=4b5d67&amp;amp;s=0&quot; alt=&quot;K&quot; class=&quot;latex&quot; title=&quot;K&quot; /&gt; will be a strong generating set with respect to that base!&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [119]: A = AlternatingGroup(5)
In [120]: base, strong_gens = A.schreier_sims_incremental()
In [121]: G = A.subgroup_search(prop_fix_1, base=base, strong_gens=strong_gens)
In [122]: G == A.stabilizer(1)
Out[122]: True
In [123]: _verify_bsgs(G, base, G.generators)
Out[123]: True
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;The bad news is that the function breaks somewhere. For example:&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;pre class=&quot;brush: python;&quot;&gt;In [125]: S = SymmetricGroup(7)
In [126]: prop_true = lambda g: True
In [127]: G = S.subgroup_search(prop_true)
In [128]: G == S
Out[128]: False
&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;This needs some really careful debugging, but overall it looks promising since it works in so many cases – so the bug is hopefully small : ).&lt;/p&gt;
&lt;p&gt;So, that’s it for now!&lt;/p&gt;
&lt;p&gt;[1] Derek F. Holt, Bettina Eick, Bettina, Eamonn A. O’Brien, “Handbook of computational group theory”, Discrete Mathematics and its Applications (Boca Raton). Chapman &amp;amp; Hall/CRC, Boca Raton, FL, 2005. ISBN 1-58488-372-3&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/amakelov.wordpress.com/391/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/amakelov.wordpress.com/391/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=amakelov.wordpress.com&amp;amp;blog=35896871&amp;amp;post=391&amp;amp;subd=amakelov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-07-23T00:21:19+00:00</dc:date>
	<dc:creator>Александър Макелов</dc:creator>
</item>
<item rdf:about="http://krastanov.wordpress.com/?p=464">
	<title>Stefan Krastanov: Form Fields and Vector Fields do not form a Vector Space</title>
	<link>http://blog.krastanov.org/2012/07/22/form-fields-and-vector-fields-do-not-form-a-vector-space/</link>
	<content:encoded>&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Tautological_one-form&quot; target=&quot;_blank&quot;&gt;Form fields&lt;/a&gt; or &lt;a href=&quot;http://en.wikipedia.org/wiki/Tangent_bundle#Canonical_vector_field_on_tangent_bundle&quot; target=&quot;_blank&quot;&gt;vector fields&lt;/a&gt; over a &lt;a href=&quot;http://en.wikipedia.org/wiki/Manifold&quot; target=&quot;_blank&quot;&gt;manifold&lt;/a&gt; (as opposed to forms and vectors) do not form a &lt;a href=&quot;http://en.wikipedia.org/wiki/Vector_space&quot; target=&quot;_blank&quot;&gt;vector space&lt;/a&gt;. They form a &lt;a href=&quot;http://en.wikipedia.org/wiki/Module_%28mathematics%29&quot; target=&quot;_blank&quot;&gt;module&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The difference is that the scalars of a vector space form an algebraic &lt;a href=&quot;http://en.wikipedia.org/wiki/Field_%28mathematics%29&quot; target=&quot;_blank&quot;&gt;field&lt;/a&gt; while the scalars of a module form a &lt;a href=&quot;http://en.wikipedia.org/wiki/Ring_%28mathematics%29&quot; target=&quot;_blank&quot;&gt;ring&lt;/a&gt;. For us humans (as opposed to “those higher beings that I do not understand (a.k.a. mathematicians)”) this means that the scalars in the vector field can divide each other while the scalars in the spaces spanned by fields (i.e. a module) can not.&lt;/p&gt;
&lt;p&gt;And just so we all can become even more confused: This has nothing to do with the fact that the “components” of each form field or vector field in certain basis are functions, i.e. themselves elements of a vector space with infinite number of dimensions.&lt;/p&gt;
&lt;p&gt;The first way to see this module-not-a-vector-space characteristic is by showing directly that the scalars that form the “coordinate components” of a vector field can not always be divided, even if they are &lt;strong&gt;not&lt;/strong&gt; identically zero. Take, for instance the, manifold &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cmathbb%7BR%7D%5E2&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\mathbb{R}^2&quot; class=&quot;latex&quot; title=&quot;\mathbb{R}^2&quot; /&gt; with the polar coordinate system and look at the vector &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cbegin%7Bbmatrix%7D+r+%5C%5C+r%5Ccos%28%5Ctheta%29+%5Cend%7Bbmatrix%7D&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\begin{bmatrix} r \\ r\cos(\theta) \end{bmatrix}&quot; class=&quot;latex&quot; title=&quot;\begin{bmatrix} r \\ r\cos(\theta) \end{bmatrix}&quot; /&gt;. The “scalars” are &lt;img src=&quot;http://s0.wp.com/latex.php?latex=r&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;r&quot; class=&quot;latex&quot; title=&quot;r&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=r%5Ccos%28%5Ctheta%29&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;r\cos(\theta)&quot; class=&quot;latex&quot; title=&quot;r\cos(\theta)&quot; /&gt;. Obviously we can not divide the former by the latter because it will be undefined at &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ctheta%3D%5Cfrac%7B%5Cpi%7D%7B2%7D%2Bn%5Cpi&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;\theta=\frac{\pi}{2}+n\pi&quot; class=&quot;latex&quot; title=&quot;\theta=\frac{\pi}{2}+n\pi&quot; /&gt;.&lt;/p&gt;
&lt;p&gt;Another, more amusing way to show that the space spanned by these fields is not a vector space is to explicitly show that a property expected from vector spaces is not fulfilled. Namely, that in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=n&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;n&quot; class=&quot;latex&quot; title=&quot;n&quot; /&gt; dimensions an &lt;img src=&quot;http://s0.wp.com/latex.php?latex=n&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;n&quot; class=&quot;latex&quot; title=&quot;n&quot; /&gt;-uple of linearly independent elements forms a basis. However, in the case of fields over a manifold we can easily have a number of fields that are linearly independent over the manifold as a whole, and are at the same time linearly dependent (or simply equal to zero) on a subdomain. Hence, we have an &lt;img src=&quot;http://s0.wp.com/latex.php?latex=n&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;n&quot; class=&quot;latex&quot; title=&quot;n&quot; /&gt;-uple of linearly independent fields that can not be linearly combined to represent another arbitrary field.&lt;/p&gt;
&lt;br /&gt;  &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=blog.krastanov.org&amp;amp;blog=15251174&amp;amp;post=464&amp;amp;subd=krastanov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-07-22T15:11:31+00:00</dc:date>
	<dc:creator>Stefan Krastanov</dc:creator>
</item>
<item rdf:about="http://krastanov.wordpress.com/?p=475">
	<title>Stefan Krastanov: Objects Implemented in the diffgeom Module</title>
	<link>http://blog.krastanov.org/2012/07/22/objects-implemented-in-the-diffgeom-module/</link>
	<content:encoded>&lt;p&gt;This post provides a summary of all mathematical types of expression implemented in the diffgeom module. I have chosen not to mention any python classes or other implementation details at all. This table shows how an object expected by the user to be of certain mathematical type operates on another object. If the expectations of a user familiar with differential geometry do not meet the actual implementation, this is a bug in the implementation.&lt;/p&gt;
&lt;table cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot; summary=&quot;&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;th colspan=&quot;2&quot; rowspan=&quot;2&quot;&gt;&lt;/th&gt;
&lt;th colspan=&quot;5&quot;&gt;The Argument&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;point&lt;/td&gt;
&lt;td&gt;scalar field&lt;/td&gt;
&lt;td&gt;vector field&lt;/td&gt;
&lt;td&gt;1-form field&lt;/td&gt;
&lt;td&gt;higher form field&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th rowspan=&quot;10&quot;&gt;The Operator&lt;/th&gt;
&lt;td&gt;scalar field&lt;/td&gt;
&lt;td&gt;scalar&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;vector field&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;scalar field&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1-form field (linear combination of differentials of scalar fields)&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;scalar field&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;higher form field (linear combination of tensor products of lower form fields)&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;it takes a tuple of vector fields and returns a scalar field&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;commutator of vector fields&lt;/td&gt;
&lt;td colspan=&quot;5&quot;&gt;Behaves as a regular vector field.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Lie derivative (the argument is “called” on construction time)&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;td colspan=&quot;4&quot;&gt;You specify the object to be derived on creation. The Lie derivative of any object is an object of the same type.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;br /&gt;  &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=blog.krastanov.org&amp;amp;blog=15251174&amp;amp;post=475&amp;amp;subd=krastanov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-07-22T15:05:08+00:00</dc:date>
	<dc:creator>Stefan Krastanov</dc:creator>
</item>
<item rdf:about="http://krastanov.wordpress.com/?p=524">
	<title>Stefan Krastanov: The Schwarzschild Solution</title>
	<link>http://blog.krastanov.org/2012/07/22/the-schwarzschild-solution/</link>
	<content:encoded>&lt;p&gt;An “easy” solution to the Einstein equation (in free space) is the spherically symmetric Schwarzschild solution. The pdf bellow shows how one can use the diffgeom module in order to get the equations describing this solution.&lt;/p&gt;
&lt;p&gt;One starts with the most general spherically symmetrical metric and by using Einstein equation &lt;img src=&quot;http://s0.wp.com/latex.php?latex=R_%7B%5Cmu+%5Cnu%7D%3D0&amp;amp;bg=f3f3f3&amp;amp;fg=888888&amp;amp;s=0&quot; alt=&quot;R_{\mu \nu}=0&quot; class=&quot;latex&quot; title=&quot;R_{\mu \nu}=0&quot; /&gt; deduces the equations that must be fulfilled by the components of the metric (in the chosen basis).&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://krastanov.files.wordpress.com/2012/07/schwarzschild.pdf&quot;&gt;schwarzschild.pdf&lt;/a&gt;&lt;/p&gt;
&lt;br /&gt;  &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=blog.krastanov.org&amp;amp;blog=15251174&amp;amp;post=524&amp;amp;subd=krastanov&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</content:encoded>
	<dc:date>2012-07-22T13:36:44+00:00</dc:date>
	<dc:creator>Stefan Krastanov</dc:creator>
</item>

</rdf:RDF>
