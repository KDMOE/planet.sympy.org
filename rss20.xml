<?xml version="1.0"?>
<rss version="2.0">

<channel>
	<title>Planet SymPy</title>
	<link>http://planet.sympy.org/</link>
	<language>en</language>
	<description>Planet SymPy - http://planet.sympy.org/</description>

<item>
	<title>Sachin Joglekar: GSoC: Week 2 : Reference Frames</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-5472769892551526876.post-8215975183868191855</guid>
	<link>http://codesachin.blogspot.com/2013/06/gsoc-week-2-reference-frames.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;This is an update for the second week of my GSoC coding period. Its been long and quite tedious (though very interesting at times), as far as the code was concerned. Got a lot of stuff done in the commits this week, and I guess the major components of the reference frame class are now in place. Well, I can't be sure whether its perfect till Gilbert reviews it, but all that we discussed is more or less there. The things that got done this week-&lt;br /&gt;&lt;br /&gt;&lt;ul style=&quot;text-align: left;&quot;&gt;&lt;li&gt;The initializer for the MovingRefFrame class. Its huge and dense as I had said earlier, but it gets the job done well, and prevents any 'special cases' from wreaking havoc while at the same time giving all the needed functionality. As mentioned in the last week, the functions for boundary conditions have now been implemented in a file of their own, and they get called in this class' 'init' function. There were some other issues as well, like allowing velocities to be defined in frames that don't 'exist' yet, etc. But thankfully, they got solved after some thinking(read: thinking hard).&lt;/li&gt;&lt;li&gt;I rewrote the tree algorithm for finding relative motion parameters, since the one I had implemented earlier went via the global frame everytime- something that made the whole process very inefficient(and computationally impractical) at times. To get an idea of what I am talking about, imagine a 100 reference frames, each defined at some orientation/position wrt its predecessor. Now I want to know the motion of the 98th frame wrt the 96th. Earlier, I would find the motion of the 98th wrt the first(global) frame, do the same for 96th, and then 'process' the info to get the required motion params. Some tests with the current framework made me realise how stupid that was. So now, it just goes this way - 98th-&amp;gt;97th-&amp;gt;96th, the way its supposed to be.&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;A small mock SymPy session with the use of this class is shown below-&lt;/div&gt;&lt;div&gt;The conditions are-&lt;/div&gt;&lt;div&gt;1) A frame R1&lt;/div&gt;&lt;div&gt;2) A frame R2 defined wrt R1, such that it initially coincides with R1, but has angular velocity of &lt;span style=&quot;background-color: white; font-family: arial, sans-serif; font-size: x-small; line-height: 16px;&quot;&gt;&lt;b&gt;k̂&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.1875px;&quot;&gt; &lt;/span&gt;wrt it&lt;/div&gt;&lt;div&gt;3) A frame R3 defined wrt R2, such that it has a constant position vector of &lt;span style=&quot;background-color: white; color: #444444; font-family: arial, sans-serif; font-size: x-small; line-height: 16px;&quot;&gt;&lt;b&gt; î&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;font-size: x-small;&quot;&gt;&lt;span style=&quot;background-color: #f9f9f9; font-family: sans-serif; line-height: 31px; text-align: center;&quot;&gt; &lt;/span&gt;&lt;/span&gt; wrt it.&lt;/div&gt;&lt;div&gt;Since R2 is rotating wrt R1, R3's position vector wrt R1 will be a function of time, as expected. Heres the working-&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;pre style=&quot;&quot;&gt;&lt;code style=&quot;color: black;&quot;&gt; &amp;gt;&amp;gt;&amp;gt; from sympy.physics.mechanics import MovingRefFrame  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; R1 = MovingRefFrame('R1', parentframe=None)  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; R2 = MovingRefFrame('R2', parentframe = R1, ang_vel = R1.basis(2))  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; R3 = MovingRefFrame('R3', parentframe = R2, pos_vector = R2.basis(0))&lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; R1.express(R3.pos_vector_in(R1))  &lt;br /&gt; - cos(t)*R1.basis(0) - sin(t)*R1.basis(1)  &lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div&gt;&lt;br /&gt;Thats all for now. You can have a look at the &lt;a href=&quot;https://github.com/sympy/sympy/pull/2187&quot;&gt;PR&lt;/a&gt; if you wish. The coming week will majorly be spent fine-tuning my current code and making it perfectly compatible with Prasoon's API, adding a few other helper functions if needed, and writing unit tests/example docs for all that's implemented so far.&lt;br /&gt;Have a great week :-)&lt;/div&gt;&lt;/div&gt;</description>
	<pubDate>Sat, 29 Jun 2013 19:36:40 +0000</pubDate>
	<author>noreply@blogger.com (Sachin Joglekar)</author>
</item>
<item>
	<title>Thilina Rathnayake: Quadratic Diophantine equation – I</title>
	<guid isPermaLink="false">http://theperceptiveway.wordpress.com/?p=61</guid>
	<link>http://theperceptiveway.wordpress.com/2013/06/29/quadratic-diophantine-equation-i/</link>
	<description>&lt;p&gt;Quadratic Diophantine equation is an equation of the form &lt;em&gt;Ax**2 + Bxy + Cy**2 + Dx + Ey + F = 0&lt;/em&gt; where&lt;em&gt; A, B, C, D, E,&lt;/em&gt; and &lt;em&gt;F&lt;/em&gt; are integer constants and x and y being integer variables. Study of this equation has always been an interesting area among number theorists. The famous pell equation is a special case of the above with&lt;em&gt; delta = B**2-4AC &amp;gt; 0&lt;/em&gt; and delta not being a perfect square. Normally, this equation is broken down into five cases for analytical purposes.&lt;/p&gt;
&lt;p&gt;1)&lt;em&gt; A = B = C = 0&lt;/em&gt; (Linear case): Reduces to a linear Diophantine equation of two variables.&lt;/p&gt;
&lt;p&gt;2) &lt;em&gt;A = B = 0&lt;/em&gt; and&lt;em&gt; C != 0 &lt;/em&gt; (Simple hyperbolic case): Equation reduces to &lt;em&gt;(Bx + E) (By + D) = DE – BF, &lt;/em&gt;which can be solved by considering the factors of &lt;em&gt;DE – BF&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;3) &lt;em&gt;B**2 – 4AC &amp;lt; 0 &lt;/em&gt;(Elliptical case): In this case, values of the x should lie between the roots of the equation &lt;em&gt;(B**2-4AC)x**2 + 2(BE – 2CD)x + E**2 – 4CF = 0. &lt;/em&gt;Values for x should be selected so that y is an integer.&lt;/p&gt;
&lt;p&gt;4) &lt;em&gt;B**2 – 4AC = 0 &lt;/em&gt;(Parabolic case): Solution procedure is rather complex in this case.&lt;/p&gt;
&lt;p&gt;I will describe these cases in detail in the future posts. I had almost completed the above cases at the start of Week 2.&lt;/p&gt;
&lt;p&gt;5) &lt;em&gt;delta = B**2 – 4AC &amp;gt; 0&lt;/em&gt;: This is split into several subcases.&lt;em&gt; &lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Case &lt;em&gt;delta = B**2 – 4AC &amp;gt; 0&lt;/em&gt;:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Subcase 1:&lt;em&gt; D = E = 0&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;This is the homogeneous case and again considered under two cases &lt;em&gt;F = 0&lt;/em&gt; and &lt;em&gt;F != 0&lt;/em&gt;. If&lt;em&gt; F = 0&lt;/em&gt;, then &lt;em&gt;x = 0&lt;/em&gt; and &lt;em&gt;y = 0&lt;/em&gt; are solutions. More solutions may exist if&lt;em&gt; B**2 – 4AC&lt;/em&gt; is a perfect square. Otherwise&lt;em&gt; x = 0&lt;/em&gt; and &lt;em&gt;y = 0&lt;/em&gt; is the only solution. I implemented this case in the module. If &lt;em&gt;F != 0&lt;/em&gt; the solution procedure is rather complex and involves continued fractions. I am currently working on this.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/theperceptiveway.wordpress.com/61/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/theperceptiveway.wordpress.com/61/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=theperceptiveway.wordpress.com&amp;amp;blog=52956410&amp;amp;post=61&amp;amp;subd=theperceptiveway&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Sat, 29 Jun 2013 19:17:39 +0000</pubDate>
</item>
<item>
	<title>Katja Sophie Hotz: Second week</title>
	<guid isPermaLink="false">http://sophiessympyblog.wordpress.com/?p=109</guid>
	<link>http://sophiessympyblog.wordpress.com/2013/06/29/second-week-2/</link>
	<description>&lt;p style=&quot;text-align: justify;&quot;&gt;I started this week with writing documentation and more tests for the univariate GCD. I originally planned to do this later right before making a pull request, but it felt more right to do it now.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;After that I made some progress on the multivariate GCD implementation. What is working at the moment is the bivariate case, i.e. for polynomials in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cmathbb+Z%5Bx%2Cy%5D&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\mathbb Z[x,y]&quot; class=&quot;latex&quot; title=&quot;\mathbb Z[x,y]&quot; /&gt;. This is what is described in the article by Monagan and Wittkopf [1]. Sadly, they do not talk about general multivariate polynomials. That is why I looked into Brown’s original article [2] on the modular GCD algorithm. My plan now is to create a mixture of the two algorithms to cover multivariate polynomials but also take advantage of the ideas in [1].&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;I am writing everything for the new &lt;code&gt;PolyElement&lt;/code&gt; module, which is both an advantage and a disadvantage at the same time. On the one hand, the design of the new module is very nice, but on the other hand there are still a lot of functions which are not yet ported. This means that for a lot of calculations I have to convert to the old representation and back. Therefore, speed comparisons with the heuristic GCD algorithm do not make much sense at this point.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;Next week I plan to finish a working version for multivariate polynomials and maybe try to reduce the number of needed conversions.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;[1] &lt;a href=&quot;http://www.cecm.sfu.ca/~monaganm/papers/BrownGCD.pdf&quot; rel=&quot;nofollow&quot;&gt;http://www.cecm.sfu.ca/~monaganm/papers/BrownGCD.pdf&lt;/a&gt;&lt;br /&gt;
[2] &lt;a href=&quot;http://dl.acm.org/citation.cfm?id=321664&quot; rel=&quot;nofollow&quot;&gt;http://dl.acm.org/citation.cfm?id=321664&lt;/a&gt;&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/sophiessympyblog.wordpress.com/109/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/sophiessympyblog.wordpress.com/109/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=sophiessympyblog.wordpress.com&amp;amp;blog=53034828&amp;amp;post=109&amp;amp;subd=sophiessympyblog&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Sat, 29 Jun 2013 16:34:54 +0000</pubDate>
</item>
<item>
	<title>Katja Sophie Hotz: The modular GCD algorithm for univariate integer polynomials</title>
	<guid isPermaLink="false">http://sophiessympyblog.wordpress.com/?p=113</guid>
	<link>http://sophiessympyblog.wordpress.com/2013/06/29/the-modular-gcd-algorithm-for-univariate-integer-polynomials/</link>
	<description>&lt;p style=&quot;text-align: justify;&quot;&gt;In this post I will briefly describe the algorithm from [1], which I implemented for computing the greatest common divisor of two univariate integer polynomials.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&lt;strong&gt;Input:&lt;/strong&gt; two polynomials &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%28x%29%2C+g%28x%29+%5Cin+%5Cmathbb+Z%5Bx%5D&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f(x), g(x) \in \mathbb Z[x]&quot; class=&quot;latex&quot; title=&quot;f(x), g(x) \in \mathbb Z[x]&quot; /&gt;&lt;br /&gt; &lt;strong&gt;Output:&lt;/strong&gt; their GCD &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;h(x)&quot; class=&quot;latex&quot; title=&quot;h(x)&quot; /&gt; and cofactors, i.e. &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%28x%29%2Fh%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f(x)/h(x)&quot; class=&quot;latex&quot; title=&quot;f(x)/h(x)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=g%28x%29%2Fh%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;g(x)/h(x)&quot; class=&quot;latex&quot; title=&quot;g(x)/h(x)&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;The main loop iterates over all primes &lt;img src=&quot;http://s0.wp.com/latex.php?latex=p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;p&quot; class=&quot;latex&quot; title=&quot;p&quot; /&gt; such that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;p&quot; class=&quot;latex&quot; title=&quot;p&quot; /&gt; does not divide the leading coefficients of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f(x)&quot; class=&quot;latex&quot; title=&quot;f(x)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=g%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;g(x)&quot; class=&quot;latex&quot; title=&quot;g(x)&quot; /&gt; at the same time. This has the effect that the degree of the GCD of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%28x%29+%5C%2C+%5Cmathrm%7Bmod%7D+%5C%2C+p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f(x) \, \mathrm{mod} \, p&quot; class=&quot;latex&quot; title=&quot;f(x) \, \mathrm{mod} \, p&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=g%28x%29+%5C%2C+%5Cmathrm%7Bmod%7D+%5C%2C+p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;g(x) \, \mathrm{mod} \, p&quot; class=&quot;latex&quot; title=&quot;g(x) \, \mathrm{mod} \, p&quot; /&gt; in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cmathbb+Z_p%5Bx%5D&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\mathbb Z_p[x]&quot; class=&quot;latex&quot; title=&quot;\mathbb Z_p[x]&quot; /&gt; is not smaller than the degree of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;h(x)&quot; class=&quot;latex&quot; title=&quot;h(x)&quot; /&gt;. If the degree is the same, we call the prime &lt;img src=&quot;http://s0.wp.com/latex.php?latex=p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;p&quot; class=&quot;latex&quot; title=&quot;p&quot; /&gt; &lt;em&gt;lucky,&lt;/em&gt; otherwise we call it &lt;em&gt;unlucky. &lt;/em&gt;The efficiency of the algorithm relies on the fact that unlucky primes are rare.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;For a lucky prime &lt;img src=&quot;http://s0.wp.com/latex.php?latex=p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;p&quot; class=&quot;latex&quot; title=&quot;p&quot; /&gt; the GCD of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%28x%29+%5C%2C+%5Cmathrm%7Bmod%7D+%5C%2C+p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f(x) \, \mathrm{mod} \, p&quot; class=&quot;latex&quot; title=&quot;f(x) \, \mathrm{mod} \, p&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=g%28x%29+%5C%2C+%5Cmathrm%7Bmod%7D+%5C%2C+p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;g(x) \, \mathrm{mod} \, p&quot; class=&quot;latex&quot; title=&quot;g(x) \, \mathrm{mod} \, p&quot; /&gt; in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cmathbb+Z_p%5Bx%5D&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\mathbb Z_p[x]&quot; class=&quot;latex&quot; title=&quot;\mathbb Z_p[x]&quot; /&gt; differs only by a constant factor from &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%29+%5C%2C+%5Cmathrm%7Bmod%7D+%5C%2C+p&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;h(x) \, \mathrm{mod} \, p&quot; class=&quot;latex&quot; title=&quot;h(x) \, \mathrm{mod} \, p&quot; /&gt;. Therefore the strategy is to calculate the former for enough lucky primes and then reconstruct &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;h(x)&quot; class=&quot;latex&quot; title=&quot;h(x)&quot; /&gt; with the Chinese Remainder Theorem. The tricky part is to decide which primes are lucky and how many primes are enough.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;The algorithm detects unlucky primes by comparing the degrees of the GCDs for different primes. It assumes that the first prime is lucky. If the GCD for the next prime has higher degree, we know that it is unlucky and skip it. If the degree is the same, we assume that it is also lucky. We continue in this way. If at some point we encounter a prime where the degree is lower, we know all previous primes were unlucky and have to start over. For each (presumably) lucky prime we reconstruct a polynomial in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cmathbb+Z%5Bx%5D&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\mathbb Z[x]&quot; class=&quot;latex&quot; title=&quot;\mathbb Z[x]&quot; /&gt; from the previously reconstructed polynomial and the GCD in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cmathbb+Z_p%5Bx%5D&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\mathbb Z_p[x]&quot; class=&quot;latex&quot; title=&quot;\mathbb Z_p[x]&quot; /&gt; using the Chinese Remainder Theorem. (For the first prime we just take the GCD itself.) When there is no change to the previous one it is very likely &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;h(x)&quot; class=&quot;latex&quot; title=&quot;h(x)&quot; /&gt; and we do a trial division to verify the result. If this is successful we have found &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%29&amp;amp;bg=f7f3ee&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;h(x)&quot; class=&quot;latex&quot; title=&quot;h(x)&quot; /&gt; (and the cofactors), otherwise we need more primes and have to continue.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;[1] &lt;a href=&quot;http://www.cecm.sfu.ca/~monaganm/papers/BrownGCD.pdf&quot; rel=&quot;nofollow&quot;&gt;http://www.cecm.sfu.ca/~monaganm/papers/BrownGCD.pdf&lt;/a&gt;&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/sophiessympyblog.wordpress.com/113/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/sophiessympyblog.wordpress.com/113/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=sophiessympyblog.wordpress.com&amp;amp;blog=53034828&amp;amp;post=113&amp;amp;subd=sophiessympyblog&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Sat, 29 Jun 2013 14:53:07 +0000</pubDate>
</item>
<item>
	<title>Prasoon Shukla: GSoC Week 2 : SymPy Development</title>
	<guid isPermaLink="false">http://musingsofafriend.wordpress.com/?p=177</guid>
	<link>http://musingsofafriend.wordpress.com/2013/06/29/gsoc-week-2-sympy-development/</link>
	<description>&lt;p&gt;This is the summary of the work done and problems faced by me during my second week of development.&lt;/p&gt;
&lt;p&gt;Okay, so this week, I had planned to add some code that would work more on the structural part of the project. So, first I added support for cylindrical coordinate systems as well as the spherical coordinate system (along with the already present Rectangular coordinates). That was added without any problems.&lt;/p&gt;
&lt;p&gt;The next thing to do was to begin with the classes that will handle the vectors. There are 3 such classes:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Vector&lt;/strong&gt; : This class is designed to hold just the base vectors. Initially, this class was supposed to hold the complete vector field but now we have changed that.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VectMul&lt;/strong&gt; : This class is made to hold product of type &lt;em&gt;scalar * Vector&lt;/em&gt;. Also, this can hold items of type &lt;em&gt;scalar * VectAdd (see point 3).&lt;/em&gt; This class is subclassed from &lt;strong&gt;Mul&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VectAdd &lt;/strong&gt;: This is a class subclassed from &lt;strong&gt;Add&lt;/strong&gt;. Just like Add, this will hold the sum of Vector and VectMul objects.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;All of these classes initialize a variable&lt;em&gt; is_Vector =True &lt;/em&gt;that is used for determining whether the an object is a vectors.&lt;/p&gt;
&lt;p&gt;I have implemented these class in their basic form. Once I had some structure to build on top of,  I started implementing basic functionality on these three classes. Here’s where the problem came. Let us take an example of VectAdd. A VectAdd stores many vector objects added together. Now, there is no requirement for the all the vector objects to be in the same frame. As an example, take this:&lt;i&gt;&lt;br /&gt;
&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cvec%7Bv%7D+%3D+%5Chat%7Bx%7D+%2B+%5Chat%7B%5Cvarphi%7D&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\vec{v} = \hat{x} + \hat{\varphi}&quot; class=&quot;latex&quot; title=&quot;\vec{v} = \hat{x} + \hat{\varphi}&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Then clearly, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cvec%7Bv%7D&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\vec{v}&quot; class=&quot;latex&quot; title=&quot;\vec{v}&quot; /&gt; has vectors in different coordinate systems. Therefore, implementing even the basic vector operations like the dot product becomes difficult because we need to have components of each vector in every coordinate system.&lt;/p&gt;
&lt;p&gt;Now for this problem, I have tried a couple of things. I still haven’t been able to successfully win over this problem but here’s an approach that I think will work. First, we need to have methods that will take a vector (VectAdd/VectMul/Vector) and output a list of vectors – only this time, each vector will be in different coordinate system. To implement such a method (which I’ll call &lt;em&gt;separate&lt;/em&gt;), we need to proceed as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Loop over the &lt;em&gt;args&lt;/em&gt; of the vector and for every different coordinate system you encounter, add that to a dictionary.&lt;/li&gt;
&lt;li&gt;Then, for that dictionary key, the value will be a list that contains the &lt;em&gt;args&lt;/em&gt; for which have been defined in that particular coordinate system.&lt;/li&gt;
&lt;li&gt;Now, just take the args and construct a vector from those args – if there’s just one arg, we return it as is; if there are more than one, we return a VectAdd constructed with those args.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Obviously, the problem doesn’t end there. The Vector/VectAdd/VectMul can each represent vectors. Now, we will need to have methods that do a certain operation (for example the dot product) defined for every such class. A better way would be to make a generic function for each such functionality and indeed, that is what I have tried out with the dot product. But this won’t work until we have completed the separate method.&lt;/p&gt;
&lt;p&gt;I’ll be working on finishing the ‘separate’ method next. Then, if it works as expected, we can move and implement various other vector operators. Also, finishing this method (separate) will give me the opportunity to finally finish the helper methods and have something working – right now, I ‘m just writing the code without knowing how it would work. Anyway, that’s the plan for the next few days.&lt;/p&gt;
&lt;p&gt;And by the way, I just switched to &lt;a href=&quot;http://musingsofafriend.wordpress.com/tag/sympy/feed/www.gnu.org/s/emacs/&quot; target=&quot;_blank&quot; title=&quot;Emacs!&quot;&gt;Emacs&lt;/a&gt; and it’s just great! ^__^ I can finally see what all the buzz was about &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif&quot; alt=&quot;:)&quot; class=&quot;wp-smiley&quot; /&gt; &lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/musingsofafriend.wordpress.com/177/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/musingsofafriend.wordpress.com/177/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=musingsofafriend.wordpress.com&amp;amp;blog=36409097&amp;amp;post=177&amp;amp;subd=musingsofafriend&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Sat, 29 Jun 2013 11:09:44 +0000</pubDate>
</item>
<item>
	<title>Saurabh Jha: Week 2.5 Profiling of different implementations of sparse</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-2736678015821545355.post-212141304695696653</guid>
	<link>http://sympymatrix.blogspot.com/2013/06/week-25-profiling-of-different.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;&lt;br /&gt;I spent the last couple of days experimenting with alternate implementation of various algorithms. Here are the results--&lt;br /&gt;&lt;br /&gt;for three implementations of sparse*sparse-- _mulspsp, _mulspsp2, _mulspsp3, on two matrices&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;a = SparseMatrix(3, 4, {(0, 0): 1, (0, 1): 2, (2, 2): 3})&lt;br /&gt;b = SparseMatrix(4, 3, {(0, 0): 2, (0, 2): 4, (1, 2): 5})&lt;br /&gt;&lt;br /&gt;The profile results are&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;cProfile.run(&quot;_mulspsp(a, b, ZZ)&quot;)&lt;br /&gt;         709 function calls (691 primitive calls) in 0.001 seconds&lt;br /&gt;&lt;br /&gt;   Ordered by: standard name&lt;br /&gt;&lt;br /&gt;   ncalls  tottime  percall  cumtime  percall filename:lineno(function)&lt;br /&gt;        1    0.000    0.000    0.001    0.001 &amp;lt;string&amp;gt;:1(&amp;lt;module&amp;gt;)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 compatibility.py:19(iterable)&lt;br /&gt;       38    0.000    0.000    0.000    0.000 compatibility.py:543(as_int)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 compatibility.py:64(is_sequence)&lt;br /&gt;        9    0.000    0.000    0.000    0.000 domain.py:64(new)&lt;br /&gt;        9    0.000    0.000    0.000    0.000 domain.py:67(__call__)&lt;br /&gt;       39    0.000    0.000    0.000    0.000 matrices.py:3571(a2idx)&lt;br /&gt;       18    0.000    0.000    0.000    0.000 matrices.py:383(__len__)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 matrices.py:390(shape)&lt;br /&gt;        9    0.000    0.000    0.000    0.000 matrices.py:947(key2bounds)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 matrices.py:977(key2ij)&lt;br /&gt;        8    0.000    0.000    0.000    0.000 numbers.py:1522(__new__)&lt;br /&gt;        3    0.000    0.000    0.000    0.000 numbers.py:1552(__int__)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 numbers.py:1595(__radd__)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 numbers.py:1619(__rmul__)&lt;br /&gt;       10    0.000    0.000    0.000    0.000 numbers.py:1873(__nonzero__)&lt;br /&gt;        9    0.000    0.000    0.000    0.000 sparse.py:1046(_new)&lt;br /&gt;        9    0.000    0.000    0.000    0.000 sparse.py:163(col)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 sparse.py:182(row_list)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 sparse.py:201(&amp;lt;lambda&amp;gt;)&lt;br /&gt;       19    0.000    0.000    0.000    0.000 sparse.py:34(__init__)&lt;br /&gt;        9    0.000    0.000    0.000    0.000 sparse.py:476(submatrix)&lt;br /&gt;       33    0.000    0.000    0.001    0.000 sparse.py:83(__getitem__)&lt;br /&gt;    33/15    0.000    0.000    0.000    0.000 sparsetools.py:116(_binsearch)&lt;br /&gt;        1    0.000    0.000    0.001    0.001 sparsetools.py:43(_mulspsp)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 sparsetools.py:5(_doktocsr)&lt;br /&gt;        9    0.000    0.000    0.000    0.000 sparsetools.py:95(_mulspvec)&lt;br /&gt;       19    0.000    0.000    0.000    0.000 {callable}&lt;br /&gt;       18    0.000    0.000    0.000    0.000 {divmod}&lt;br /&gt;        6    0.000    0.000    0.000    0.000 {hasattr}&lt;br /&gt;      158    0.000    0.000    0.000    0.000 {isinstance}&lt;br /&gt;        6    0.000    0.000    0.000    0.000 {iter}&lt;br /&gt;      103    0.000    0.000    0.000    0.000 {len}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}&lt;br /&gt;        8    0.000    0.000    0.000    0.000 {method 'extend' of 'list' objects}&lt;br /&gt;       24    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}&lt;br /&gt;        9    0.000    0.000    0.000    0.000 {method 'indices' of 'slice' objects}&lt;br /&gt;       21    0.000    0.000    0.000    0.000 {method 'keys' of 'dict' objects}&lt;br /&gt;        9    0.000    0.000    0.000    0.000 {range}&lt;br /&gt;        2    0.000    0.000    0.000    0.000 {sorted}&lt;br /&gt;       17    0.000    0.000    0.000    0.000 {zip}&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; cProfile.run(&quot;_mulspsp2(a, b, ZZ)&quot;)&lt;br /&gt;         585 function calls in 0.001 seconds&lt;br /&gt;&lt;br /&gt;   Ordered by: standard name&lt;br /&gt;&lt;br /&gt;   ncalls  tottime  percall  cumtime  percall filename:lineno(function)&lt;br /&gt;        1    0.000    0.000    0.001    0.001 &amp;lt;string&amp;gt;:1(&amp;lt;module&amp;gt;)&lt;br /&gt;        3    0.000    0.000    0.000    0.000 compatibility.py:19(iterable)&lt;br /&gt;       40    0.000    0.000    0.000    0.000 compatibility.py:543(as_int)&lt;br /&gt;        3    0.000    0.000    0.000    0.000 compatibility.py:64(is_sequence)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 domain.py:64(new)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 domain.py:67(__call__)&lt;br /&gt;       31    0.000    0.000    0.000    0.000 matrices.py:3571(a2idx)&lt;br /&gt;       10    0.000    0.000    0.000    0.000 matrices.py:383(__len__)&lt;br /&gt;        3    0.000    0.000    0.000    0.000 matrices.py:390(shape)&lt;br /&gt;       15    0.000    0.000    0.000    0.000 matrices.py:947(key2bounds)&lt;br /&gt;        3    0.000    0.000    0.000    0.000 matrices.py:977(key2ij)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 numbers.py:1522(__new__)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 numbers.py:1552(__int__)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 numbers.py:1595(__radd__)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 numbers.py:1619(__rmul__)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 numbers.py:1873(__nonzero__)&lt;br /&gt;       15    0.000    0.000    0.000    0.000 sparse.py:1046(_new)&lt;br /&gt;        5    0.000    0.000    0.000    0.000 sparse.py:145(row)&lt;br /&gt;       10    0.000    0.000    0.000    0.000 sparse.py:163(col)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 sparse.py:182(row_list)&lt;br /&gt;        3    0.000    0.000    0.000    0.000 sparse.py:201(&amp;lt;lambda&amp;gt;)&lt;br /&gt;       20    0.000    0.000    0.000    0.000 sparse.py:34(__init__)&lt;br /&gt;       15    0.000    0.000    0.000    0.000 sparse.py:476(submatrix)&lt;br /&gt;       28    0.000    0.000    0.001    0.000 sparse.py:83(__getitem__)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 sparsetools.py:5(_doktocsr)&lt;br /&gt;        1    0.000    0.000    0.001    0.001 sparsetools.py:62(_mulspsp2)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 sparsetools.py:95(_mulspvec)&lt;br /&gt;       20    0.000    0.000    0.000    0.000 {callable}&lt;br /&gt;       10    0.000    0.000    0.000    0.000 {divmod}&lt;br /&gt;        3    0.000    0.000    0.000    0.000 {hasattr}&lt;br /&gt;      154    0.000    0.000    0.000    0.000 {isinstance}&lt;br /&gt;        3    0.000    0.000    0.000    0.000 {iter}&lt;br /&gt;       85    0.000    0.000    0.000    0.000 {len}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}&lt;br /&gt;        5    0.000    0.000    0.000    0.000 {method 'extend' of 'list' objects}&lt;br /&gt;       13    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}&lt;br /&gt;       15    0.000    0.000    0.000    0.000 {method 'indices' of 'slice' objects}&lt;br /&gt;       22    0.000    0.000    0.000    0.000 {method 'keys' of 'dict' objects}&lt;br /&gt;        4    0.000    0.000    0.000    0.000 {range}&lt;br /&gt;        2    0.000    0.000    0.000    0.000 {sorted}&lt;br /&gt;        9    0.000    0.000    0.000    0.000 {zip}&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; cProfile.run(&quot;_mulspsp3(a, b, ZZ)&quot;)&lt;br /&gt;         159 function calls in 0.000 seconds&lt;br /&gt;&lt;br /&gt;   Ordered by: standard name&lt;br /&gt;&lt;br /&gt;   ncalls  tottime  percall  cumtime  percall filename:lineno(function)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 &amp;lt;string&amp;gt;:1(&amp;lt;module&amp;gt;)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 compatibility.py:19(iterable)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 compatibility.py:543(as_int)&lt;br /&gt;        7    0.000    0.000    0.000    0.000 compatibility.py:64(is_sequence)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 domain.py:64(new)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 domain.py:67(__call__)&lt;br /&gt;       12    0.000    0.000    0.000    0.000 matrices.py:3571(a2idx)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 matrices.py:390(shape)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 matrices.py:977(key2ij)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 sparse.py:1019(zeros)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 sparse.py:182(row_list)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 sparse.py:201(&amp;lt;lambda&amp;gt;)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 sparse.py:34(__init__)&lt;br /&gt;        6    0.000    0.000    0.000    0.000 sparse.py:83(__getitem__)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 sparsetools.py:78(_mulspsp3)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {callable}&lt;br /&gt;        7    0.000    0.000    0.000    0.000 {hasattr}&lt;br /&gt;       43    0.000    0.000    0.000    0.000 {isinstance}&lt;br /&gt;        6    0.000    0.000    0.000    0.000 {iter}&lt;br /&gt;        8    0.000    0.000    0.000    0.000 {len}&lt;br /&gt;        3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}&lt;br /&gt;        6    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {method 'iteritems' of 'dict' objects}&lt;br /&gt;        3    0.000    0.000    0.000    0.000 {method 'keys' of 'dict' objects}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {range}&lt;br /&gt;        2    0.000    0.000    0.000    0.000 {sorted}&lt;br /&gt;        6    0.000    0.000    0.000    0.000 {zip}&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;It turns out that the fastest implementation is _mulspsp3 (which is the same as the one used in sparse.py) is fastest.&lt;br /&gt;&lt;br /&gt;However, great improvement is shown in sparse*vec. I will just take a single example as I have earlier written that new algorithm is O(nnz) asymptotically in any case.&lt;br /&gt;&lt;br /&gt;m =                              &lt;br /&gt;&lt;br /&gt;[1, 2, 0, 0, 0, 0]&lt;br /&gt;[0, 3, 0, 4, 0, 0]&lt;br /&gt;[0, 0, 5, 6, 7, 0]&lt;br /&gt;[0, 0, 0, 0, 0, 8]&lt;br /&gt;&lt;br /&gt;and equivalent csr= [[ZZ(1), ZZ(2), ZZ(3), ZZ(4), ZZ(5), ZZ(6), ZZ(7), ZZ(8)], [0, 1, 1, 3, 2, 3, 4, 5], [0, 2, 4, 7, 8], [4, 6]]&lt;br /&gt;&lt;br /&gt;n = Matrix([[ZZ(4)], [ZZ(7)], [ZZ(12)], [ZZ(14)], [ZZ(17)], [ZZ(2)]]) (vector)&lt;br /&gt;&lt;br /&gt;Profile results are given below&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; cProfile.run(&quot;m*n&quot;)&lt;br /&gt;         545 function calls (540 primitive calls) in 0.001 seconds&lt;br /&gt;&lt;br /&gt;   Ordered by: standard name&lt;br /&gt;&lt;br /&gt;   ncalls  tottime  percall  cumtime  percall filename:lineno(function)&lt;br /&gt;        1    0.000    0.000    0.001    0.001 &amp;lt;string&amp;gt;:1(&amp;lt;module&amp;gt;)&lt;br /&gt;       22    0.000    0.000    0.000    0.000 compatibility.py:19(iterable)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 compatibility.py:543(as_int)&lt;br /&gt;       27    0.000    0.000    0.000    0.000 compatibility.py:64(is_sequence)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 dense.py:588(_new)&lt;br /&gt;      5/1    0.000    0.000    0.000    0.000 iterables.py:16(flatten)&lt;br /&gt;        8    0.000    0.000    0.000    0.000 iterables.py:62(&amp;lt;lambda&amp;gt;)&lt;br /&gt;       36    0.000    0.000    0.000    0.000 matrices.py:3571(a2idx)&lt;br /&gt;       19    0.000    0.000    0.000    0.000 matrices.py:390(shape)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 matrices.py:81(_handle_creation_inputs)&lt;br /&gt;       18    0.000    0.000    0.000    0.000 matrices.py:977(key2ij)&lt;br /&gt;       16    0.000    0.000    0.000    0.000 numbers.py:1522(__new__)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 numbers.py:1588(__add__)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 numbers.py:1595(__radd__)&lt;br /&gt;        8    0.000    0.000    0.000    0.000 numbers.py:1619(__rmul__)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 sparse.py:1019(zeros)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 sparse.py:1046(_new)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 sparse.py:120(tolist)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 sparse.py:182(row_list)&lt;br /&gt;       14    0.000    0.000    0.000    0.000 sparse.py:201(&amp;lt;lambda&amp;gt;)&lt;br /&gt;        1    0.000    0.000    0.001    0.001 sparse.py:295(multiply)&lt;br /&gt;      2/1    0.000    0.000    0.001    0.001 sparse.py:338(__mul__)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 sparse.py:34(__init__)&lt;br /&gt;       18    0.000    0.000    0.000    0.000 sparse.py:83(__getitem__)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {built-in method __new__ of type object at 0x10a127248}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {callable}&lt;br /&gt;       31    0.000    0.000    0.000    0.000 {hasattr}&lt;br /&gt;      178    0.000    0.000    0.000    0.000 {isinstance}&lt;br /&gt;       22    0.000    0.000    0.000    0.000 {iter}&lt;br /&gt;       25    0.000    0.000    0.000    0.000 {len}&lt;br /&gt;       10    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}&lt;br /&gt;        4    0.000    0.000    0.000    0.000 {method 'extend' of 'list' objects}&lt;br /&gt;       18    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {method 'iteritems' of 'dict' objects}&lt;br /&gt;        3    0.000    0.000    0.000    0.000 {method 'keys' of 'dict' objects}&lt;br /&gt;       13    0.000    0.000    0.000    0.000 {range}&lt;br /&gt;        2    0.000    0.000    0.000    0.000 {sorted}&lt;br /&gt;       18    0.000    0.000    0.000    0.000 {zip}&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; cProfile.run(&quot;_mulspvec(csr, n, ZZ)&quot;)&lt;br /&gt;         104 function calls in 0.000 seconds&lt;br /&gt;&lt;br /&gt;   Ordered by: standard name&lt;br /&gt;&lt;br /&gt;   ncalls  tottime  percall  cumtime  percall filename:lineno(function)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 &amp;lt;string&amp;gt;:1(&amp;lt;module&amp;gt;)&lt;br /&gt;        2    0.000    0.000    0.000    0.000 compatibility.py:543(as_int)&lt;br /&gt;        8    0.000    0.000    0.000    0.000 dense.py:33(__getitem__)&lt;br /&gt;       12    0.000    0.000    0.000    0.000 domain.py:64(new)&lt;br /&gt;       12    0.000    0.000    0.000    0.000 domain.py:67(__call__)&lt;br /&gt;        8    0.000    0.000    0.000    0.000 matrices.py:3571(a2idx)&lt;br /&gt;        8    0.000    0.000    0.000    0.000 numbers.py:1522(__new__)&lt;br /&gt;        7    0.000    0.000    0.000    0.000 numbers.py:1552(__int__)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 numbers.py:1595(__radd__)&lt;br /&gt;        4    0.000    0.000    0.000    0.000 numbers.py:1619(__rmul__)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 sparse.py:34(__init__)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 sparsetools.py:95(_mulspvec)&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {callable}&lt;br /&gt;       25    0.000    0.000    0.000    0.000 {isinstance}&lt;br /&gt;        3    0.000    0.000    0.000    0.000 {len}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {method 'keys' of 'dict' objects}&lt;br /&gt;        1    0.000    0.000    0.000    0.000 {range}&lt;br /&gt;        4    0.000    0.000    0.000    0.000 {zip}&lt;br /&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;The new implementations of _applyfunc and scaler*sparse give little improvements but the code is simpler and thus less chances for error.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;All the code can be found at the latest commit of https://github.com/sympy/sympy/pull/2206. Also written there is the rationale of using csr internally.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;</description>
	<pubDate>Thu, 27 Jun 2013 09:40:11 +0000</pubDate>
	<author>noreply@blogger.com (Saurabh Jha)</author>
</item>
<item>
	<title>Mary Clark: Week 2</title>
	<guid isPermaLink="false">http://meclark256.wordpress.com/?p=22</guid>
	<link>http://meclark256.wordpress.com/2013/06/26/week-2/</link>
	<description>&lt;p&gt;This week, I have more or less finished up the Type_B class.  The Lie algebra B_n corresponds to the Lie algebra so(2n + 1).  A fair amount of this work was more or less a copy/paste from the Type_A class, but there was additional work, since the root system is more complicated, and the Cartan matrix is different.&lt;/p&gt;
&lt;p&gt;I also decided that it would be good to add more functionality than I had talked about in my GSOC proposal.  I specifically wanted to add a function which tells a Sympy user the total number of roots a given Lie algebra has.  While only the simple roots of a Lie algebra are the most important/worked with, the total number of roots can be useful for calculations.  &lt;/p&gt;
&lt;p&gt;Having successfully (I hope) finished Type_A and Type_B, I think that I want to pause work in this direction for the moment, and begin properly building CartanType.  I want to make sure that I have this basic functionality working early, so that everything doesn’t go to hell in a handbasket later from not having a solid foundation.  I hope that I can have this working by the beginning of next week.&lt;/p&gt;
&lt;p&gt;After I finish that, I need to sit down and learn and concentrate and understand the algorithm for generating the commutation relations of a given Lie algebra.  From Cahn’s notes on semisimple Lie algebras (&lt;a href=&quot;http://phyweb.lbl.gov/~rncahn/www/liealgebras/texall.pdf&quot; rel=&quot;nofollow&quot;&gt;http://phyweb.lbl.gov/~rncahn/www/liealgebras/texall.pdf&lt;/a&gt;) all the commutations relations are determined by the Cartan matrix of a Lie algebra.   However, at this point I don’t really understand the mathematics behind this, since I’ve only looked at it somewhat cursorily.   I’m not sure how long this will take, in the end, but hopefully not too long.&lt;/p&gt;
&lt;p&gt;Later this week or this weekend I’m going to write a brief post on Lie algebras in general, so that anyone who isn’t familiar with them can get an introduction to root systems, Cartan matrices, etc.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/meclark256.wordpress.com/22/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/meclark256.wordpress.com/22/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=meclark256.wordpress.com&amp;amp;blog=52875864&amp;amp;post=22&amp;amp;subd=meclark256&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Wed, 26 Jun 2013 19:13:54 +0000</pubDate>
</item>
<item>
	<title>Manoj Kumar: The guessing game continues</title>
	<guid isPermaLink="false">http://manojbits.wordpress.com/?p=536</guid>
	<link>http://manojbits.wordpress.com/2013/06/26/the-guessing-game-continues/</link>
	<description>&lt;p&gt;So, I started my week trying my best to figure out how to implement the third heuristic, given the fact that the Maple paper gave me no clue, on how do to it. I had also posted these questions on Math Stack and Math Overflow.&lt;/p&gt;
&lt;p&gt;1.&lt;a href=&quot;http://mathoverflow.net/questions/134011/best-approach-to-solve-this-pde&quot; rel=&quot;nofollow&quot;&gt;http://mathoverflow.net/questions/134011/best-approach-to-solve-this-pde&lt;/a&gt;&lt;br /&gt;
2.&lt;a href=&quot;http://math.stackexchange.com/questions/423334/method-of-characteristics-a-general-doubt&quot; rel=&quot;nofollow&quot;&gt;http://math.stackexchange.com/questions/423334/method-of-characteristics-a-general-doubt&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The answer to the first question [1] was highly misleading, and I again wasted time trying to find the fallacy in the answer. (By the way, if anyone is able to find where the answer is supposedly wrong, please do add a comment) . Also to add fuel to the fire, the Math Overflow guys gave me a so called &lt;a href=&quot;http://math.stackexchange.com/help/badges/40/tumbleweed&quot;&gt;Tumbleweed&lt;/a&gt; badge, which is given to a person who asks a question with no votes, no answers, no comments, and low views for a week. Sigh.&lt;/p&gt;
&lt;p&gt;Then Sean, gave me a &lt;a href=&quot;http://www.google.co.in/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=3&amp;amp;ved=0CDsQFjAC&amp;amp;url=http%3A%2F%2Fwww.physics.drexel.edu%2F~bob%2FLieGroups%2FLG_16.pdf&amp;amp;ei=M-nKUcyRKMuqkgWyzYGgAg&amp;amp;usg=AFQjCNGkleRIkesil88wTDOlvErLjYBUMQ&amp;amp;sig2=iNN4uk09kOTV5CkB-1WCng&amp;amp;bvm=bv.48340889,d.dGI&amp;amp;cad=rja&quot;&gt;paper&lt;/a&gt; which had a heuristic, that follows a logic that I intelligently(?) used in my eleventh and twelfth entrance examinations, assume one of the four answers given in the options, substitute it back and see which one satisfies the question best (Umm. Did I mention this somewhere before?). Okay,now more seriously,let us once again examine the PDE in question,&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B%5Cpartial+%5Ceta%7D%7B%5Cpartial+x%7D+%2B+%28%5Cfrac%7B%5Cpartial+%5Ceta%7D%7B%5Cpartial+y%7D+-+%5Cfrac%7B%5Cpartial+%5Cxi%7D%7B%5Cpartial+x%7D%29+%2A+h%28x%2C+y%29+-+%5Cfrac%7B%5Cpartial+%5Cxi%7D%7B%5Cpartial+y%7D%2Ah%28x%2Cy%29%5E%7B2%7D+-+%5Cxi%2A%5Cfrac%7B%5Cpartial+h%7D%7B%5Cpartial+x%7D+-+%5Ceta%2A%5Cfrac%7B%5Cpartial+h%7D%7B%5Cpartial+y%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{\partial \eta}{\partial x} + (\frac{\partial \eta}{\partial y} - \frac{\partial \xi}{\partial x}) * h(x, y) - \frac{\partial \xi}{\partial y}*h(x,y)^{2} - \xi*\frac{\partial h}{\partial x} - \eta*\frac{\partial h}{\partial y}&quot; class=&quot;latex&quot; title=&quot;\frac{\partial \eta}{\partial x} + (\frac{\partial \eta}{\partial y} - \frac{\partial \xi}{\partial x}) * h(x, y) - \frac{\partial \xi}{\partial y}*h(x,y)^{2} - \xi*\frac{\partial h}{\partial x} - \eta*\frac{\partial h}{\partial y}&quot; /&gt;.&lt;/p&gt;
&lt;p&gt;The algorithm is as follows:&lt;/p&gt;
&lt;p&gt;1. Since &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x, y)&quot; class=&quot;latex&quot; title=&quot;\eta(x, y)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x, y)&quot; class=&quot;latex&quot; title=&quot;\xi(x, y)&quot; /&gt; ,  are assumed to be bi-variate polynomials in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt;, by intuition &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;h(x, y)&quot; class=&quot;latex&quot; title=&quot;h(x, y)&quot; /&gt; should be a rational function in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt;  and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt;. There could also be cases like when &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%2C+y%29+%3D+sin%28x%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;h(x, y) = sin(x)&quot; class=&quot;latex&quot; title=&quot;h(x, y) = sin(x)&quot; /&gt; and there could be a series expansion on both sides. But its best that things are kept simple and hence those cases are left alone.&lt;/p&gt;
&lt;p&gt;2. Then we substitute &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;h&quot; class=&quot;latex&quot; title=&quot;h&quot; /&gt; it in the equation,  reduce it into a (numerator / denominator) form, throw away the denominator,  and find the degree of the numerator. By intuition again, this is the maximum limit upto which &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x, y)&quot; class=&quot;latex&quot; title=&quot;\eta(x, y)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y)&quot; class=&quot;latex&quot; title=&quot;\xi(x,y)&quot; /&gt; can reach.&lt;/p&gt;
&lt;p&gt;3. First &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x, y)&quot; class=&quot;latex&quot; title=&quot;\eta(x, y)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y)&quot; class=&quot;latex&quot; title=&quot;\xi(x,y)&quot; /&gt; are assumed to be constants and substituted in the PDE. Terms that are monomials in y are grouped together, for example &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y%2C+1%2C+y%2Ax%2C+y%2Ax%7B2%7D%2C+y%5E%7B2%7D%2Ax&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;y, 1, y*x, y*x{2}, y^{2}*x&quot; class=&quot;latex&quot; title=&quot;y, 1, y*x, y*x{2}, y^{2}*x&quot; /&gt; and the coefficients are equated to zero, this gives us a set of linear equations in the coefficients which are tried to solve for using solve(). If it gives a non-trivial solution, those are the infinitesimals.  If it doesn’t&lt;/p&gt;
&lt;p&gt;4. Then keep iterating &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y)&quot; class=&quot;latex&quot; title=&quot;\eta(x,y)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y)&quot; class=&quot;latex&quot; title=&quot;\xi(x,y)&quot; /&gt; . The next step would be to assume the infinitesimals to be &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%2B+b%2Ax+%2B+c%2Ay&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;a + b*x + c*y&quot; class=&quot;latex&quot; title=&quot;a + b*x + c*y&quot; /&gt; , and follow step 3 again. If it doesn’t work out then, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%2B+b%2Ax+%2B+c%2Ay+%2B+d%2Ax%5E%7B2%7D+%2B+e%2Ax%2Ay+%2B+f%2Ay%7B2%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;a + b*x + c*y + d*x^{2} + e*x*y + f*y{2}&quot; class=&quot;latex&quot; title=&quot;a + b*x + c*y + d*x^{2} + e*x*y + f*y{2}&quot; /&gt; and step 3 and so on, till the max limit given by step 2 is reached.&lt;/p&gt;
&lt;p&gt;5. It should be understood that non-trivial solutions for a homogeneous set of equations always return a set of equations, with arbitrary constants. For now, I’ve assumed all these constants to be one. I still don’t know how effective this is.&lt;/p&gt;
&lt;p&gt;The source code can be seen here: &lt;a href=&quot;https://github.com/sympy/sympy/pull/2196&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sympy/sympy/pull/2196&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Towards the end of the week, my mentor Sean Vig went out for a bike race, so I took this to my advantage, and went for a movie marathon (race) as well, for four days and did not do any work. I also learnt not to be overly-dependent on your mentor, and you can do stuff like thinking about algos, even when your mentor is taking time to review your pull requests. But for now I’ve just started work on another heuristic, and have to respond to his comments on my previous Pull Request. Till then bye.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/manojbits.wordpress.com/536/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/manojbits.wordpress.com/536/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=manojbits.wordpress.com&amp;amp;blog=31971756&amp;amp;post=536&amp;amp;subd=manojbits&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Wed, 26 Jun 2013 14:10:01 +0000</pubDate>
</item>
<item>
	<title>Chetna Gupta: Week-1</title>
	<guid isPermaLink="false">http://geekiology.wordpress.com/?p=284</guid>
	<link>http://geekiology.wordpress.com/2013/06/26/outset-week-1/</link>
	<description>&lt;p&gt;This June 17th marked the beginning of my term as a GSoC intern at Sympy. Thanks Aaron for being the constant support while I was taking my tender first-steps towards the world of open source.&lt;/p&gt;
&lt;p&gt;Here I am to possibly discuss what I did in the first week but I would like to open this by not just rushing to the recent three PRs, I issued but to some of the most amazing things I have learned before and after the proposal phase.&lt;/p&gt;
&lt;p&gt;Firslty &lt;strong&gt;Indentation is God&lt;/strong&gt;!! I am serious, it is God. I am today aware of the number of spaces I put. (4 for a long lost tab) , a space after an if, no spaces before and after ‘=’.. and so on . I hate trailing space errors and my savior is (:%s/\s\+$//) , we all love vim dont we &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif&quot; alt=&quot;:)&quot; class=&quot;wp-smiley&quot; /&gt; &lt;/p&gt;
&lt;p&gt;Secondly &lt;strong&gt;Design is important&lt;/strong&gt;!! Last couple of weeks taught me how important it is to follow the mockups , respect the well thought of designs, each precision and detail.&lt;/p&gt;
&lt;p&gt;I realized it is completely “logit” to spend couple of hours nudging a few pixels here and there..Following are the hours I spent nudging pixels .. some reaped commits, while many still lie to be put in&lt;/p&gt;
&lt;p&gt;Thirdly &lt;strong&gt;Learn about your Rescue tools&lt;/strong&gt; .. Last but not the least, I learned that life is not so daunting &lt;img src=&quot;http://s2.wp.com/wp-includes/images/smilies/icon_razz.gif&quot; alt=&quot;:P&quot; class=&quot;wp-smiley&quot; /&gt;  , we have a lot of rescue tools which work only if we know about them. “./bin/test sympy/utilities” comes in most frequent use out of all. Apart from this I also realized that git can become your best friend, it just needs sometime to bond with new people&lt;/p&gt;
&lt;p&gt;All this wouldn’t have been possible without having amazing people, guiding me on the IRC channel of Sympy&lt;/p&gt;
&lt;p&gt;Reverting back to my 3 PRs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sympy/sympy/pull/2191&quot;&gt;2191&lt;/a&gt;:
&lt;p&gt;Determines if for a given function f in k(t) there exists u in k(t) such that Du = f. Returns q such that i = h + r – Dq; Output -&amp;gt; tuple (q, i ) if there exists a derivative for given function in k(t) else returns None &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sympy/sympy/pull/2185&quot;&gt;2185&lt;/a&gt;:
&lt;p&gt;This method is used for solving Coupled Differntial System.&lt;br /&gt;
Given a differntial field K of characterstic 0 and f1, f2, g1, g2&lt;br /&gt;
in K, it decides whether the system of equations&lt;br /&gt;
&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cbegin%7Bpmatrix%7D+Dy1+%5C%5C+Dy2+%5Cend%7Bpmatrix%7D+%2B+%5Cbegin%7Bpmatrix%7D+f1+%26%26+af2+%5C%5C+f2+%26%26+f1+%5Cend%7Bpmatrix%7D+%5Cbegin%7Bpmatrix%7D+y1+%5C%5C+y2+%5Cend%7Bpmatrix%7D+%3D+%5Cbegin%7Bpmatrix%7D+g1+%5C%5C+g2+%5Cend%7Bpmatrix%7D+&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\begin{pmatrix} Dy1 \\ Dy2 \end{pmatrix} + \begin{pmatrix} f1 &amp;amp;&amp;amp; af2 \\ f2 &amp;amp;&amp;amp; f1 \end{pmatrix} \begin{pmatrix} y1 \\ y2 \end{pmatrix} = \begin{pmatrix} g1 \\ g2 \end{pmatrix} &quot; class=&quot;latex&quot; title=&quot;\begin{pmatrix} Dy1 \\ Dy2 \end{pmatrix} + \begin{pmatrix} f1 &amp;amp;&amp;amp; af2 \\ f2 &amp;amp;&amp;amp; f1 \end{pmatrix} \begin{pmatrix} y1 \\ y2 \end{pmatrix} = \begin{pmatrix} g1 \\ g2 \end{pmatrix} &quot; /&gt;&lt;br /&gt;
has a solution. Hence returning (y1, y2) if a solution exist, None otherwise&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sympy/sympy/pull/2184&quot;&gt;2184&lt;/a&gt;:
&lt;p&gt;This is still in implementation phase, In this Pr i have tried adding simple trigonometric functions of the form tan(x), which would call integrate_hypertangent_reduce and integrate_hypertangent_polynomial under method risch_integrate&lt;/p&gt;
&lt;p&gt;To get this working i need coupledDifferntialSystem which still stands TODO&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Three PRs within a week, adding completely new code to the codebase, is a fairy tale in itself, still with a missing ending. So here I am to put down what has been achieved and what still needs to be done urgently to get things operational&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;&lt;code&gt;
&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; risch_integrate((tan(x)**5 + tan(x)**3 + x**2*tan(x) + 1)/(tan(x)**2 + 1)**3, x)&lt;/p&gt;
&lt;p&gt;raise NotImplementedError(&quot;Trigonometric extensions are not &quot;&lt;/p&gt;
&lt;p&gt;NotImplementedError: Trigonometric extensions are not supported (yet!)&lt;/p&gt;
&lt;/code&gt;&lt;p&gt;&lt;code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;So it all started with the aim to support structure theorem for trigonometric extensions, things did start working with addition of functions tan_part, atan_part added in the risch.py as can be seen in the PR 2184 referenced above. But this lead to an urgent call for a module to support coupled differential system as the integrate_hypertangent function which was supposed to work on the new expression &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28t_0%5E5+%2B+t_0%5E3+%2B+t_0%2Ax%5E2+%2B+1%29%2F%28t_0%5E2+%2B+1%29%5E3+&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;(t_0^5 + t_0^3 + t_0*x^2 + 1)/(t_0^2 + 1)^3 &quot; class=&quot;latex&quot; title=&quot;(t_0^5 + t_0^3 + t_0*x^2 + 1)/(t_0^2 + 1)^3 &quot; /&gt; , produced after run through tan_part, did not seem to work without CDS.&lt;/p&gt;
&lt;p&gt;On the other hand cases like risch_integrate(x*tan(x)**2 – tan(x)**3 + x, x) (even without the CDS) would now be able to see a clean &amp;amp; bug free screen with no error traces, once we have is_deriv repo pushed in. Wondering Why ? I was doing that too a couple of days back, before Aaron put forth the very fact that “ALL CASES don’t tread the same path, PATH in an algorithmic sense though”. The above case can be thought of as independent of CDS, not because it is actually independent but because CDS returns “No Solution” for the equation system referenced in the description of PR 2185 above.&lt;/p&gt;
&lt;p&gt;Though things may not look as smooth as a choco-pie for now, but pushing is_deriv repo (which includes functions to support hypertangent cases) would definitely act as feast for the brainstorming FIRST WEEK. Though not all the cases, but YES! we would have an optimistic outlook for some of the cases which could be hooked back to the risch_integrate function and could be added as initial cases which would support the risch_integrate calls for trigonometric extensions&lt;/p&gt;
&lt;p&gt;The is_deriv repo would also enable me to make CDS worth testing and pushing.&lt;/p&gt;
&lt;p&gt;Looking forward to work with things at a fast enough pace for now, I intend to put in all possible test cases for all the open pull requests as and when required for the next couple of days from now. Also apart from the above 3 PRS &lt;a href=&quot;https://github.com/sympy/sympy/pull/2049&quot;&gt;2049&lt;/a&gt; could be soon looked into as I am possibly done with the tasks allocated by Aaron for the same.&lt;/p&gt;
&lt;p&gt;There is another PR &lt;a href=&quot;https://github.com/sympy/sympy/pull/2034&quot;&gt;2034&lt;/a&gt;, which I am not very sure for now, interms of TODO, hope to get all the PRs merged quickly without bothering Aaron much.&lt;/p&gt;
&lt;p&gt;Signing off ~ Life is a roller-coaster (or well right now it is &lt;img src=&quot;http://s0.wp.com/wp-includes/images/smilies/icon_biggrin.gif&quot; alt=&quot;:D&quot; class=&quot;wp-smiley&quot; /&gt;  )&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/geekiology.wordpress.com/284/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/geekiology.wordpress.com/284/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=geekiology.wordpress.com&amp;amp;blog=36553244&amp;amp;post=284&amp;amp;subd=geekiology&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Wed, 26 Jun 2013 07:24:09 +0000</pubDate>
</item>
<item>
	<title>Tarun Gaba</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-7526836182390500993.post-434358419365808792</guid>
	<link>http://tarun-gaba.blogspot.com/2013/06/gsoc-report-week-1-finally-much-awaited.html</link>
	<description>&lt;h2&gt;&lt;b&gt;GSoC Report Week 1:&lt;/b&gt;&lt;/h2&gt;&lt;b&gt; &lt;/b&gt;Finally, the much awaited summer coding period has started. I am already feeling very enthusiastic about it.&lt;br /&gt;For the first week&lt;b&gt;&lt;/b&gt;&lt;b&gt;, &lt;/b&gt;I have been working on an detailed API, alongwith functions(their arguments and return values). Everything is being fleshed out.&lt;br /&gt;&lt;br /&gt;Also we(other PyDy members) have been holding discussions on various facets of implementations, how and what would be done for effective visualizations.&lt;br /&gt;&lt;br /&gt;An illustrative example has also been made, which utilizes different methods from the new API, to demonstrate the complete workflow.&lt;br /&gt;The illustrative example can be checked here:&lt;br /&gt;https://github.com/PythonDynamics/pydy_examples/pull/11&lt;br /&gt;&lt;br /&gt;And the API is in development form and can be checked here:&lt;br /&gt;http://pydy.org/visualization_temp_api&lt;br /&gt;&lt;br /&gt;Once the API is in a more finished form it can be ported to a more relevant location(link).&lt;br /&gt;In the coming week I hope to write some functions following the API, and related documentation and tests too.&lt;br /&gt;&lt;br /&gt;Cheers,&lt;br /&gt;&lt;h2&gt;&lt;b&gt; &lt;/b&gt;&lt;/h2&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</description>
	<pubDate>Mon, 24 Jun 2013 09:14:48 +0000</pubDate>
	<author>noreply@blogger.com (TARUN GABA)</author>
</item>
<item>
	<title>Saurabh Jha: Week 2</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-2736678015821545355.post-7871624797346734784</guid>
	<link>http://sympymatrix.blogspot.com/2013/06/week-2.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;It took me a long time to get the CSR to DOK conversion and vice-versa PR[1] to get merged, but it seems fine now. I am thankful to Christopher Smith for helpful discussions and his pushes. Here is my progress in previous two weeks--&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;ul style=&quot;text-align: left;&quot;&gt;&lt;li&gt;Reliable CSR to DOK and inverse conversion[1]&lt;/li&gt;&lt;li&gt;Efficient implementation of sparsematrix-vector product. The running time of the program is O(nnz), where nnz is number of non-zero elements of sparse matrix[2]&lt;/li&gt;&lt;li&gt;Trying to support domains here. I tried some methods and ultimately chose the one that is similar to one done in polys module.[2]&lt;/li&gt;&lt;li&gt;Realisation that CSR is not appropriate for CSR + CSR, CSR - CSR and CSR*CSR. This is slower than other dictionary based implementation so I dropped the ideas&lt;/li&gt;&lt;/ul&gt;&lt;br /&gt;I was poking around with the current sparse code since I want to try my ideas on sparse before getting to dense. I think I have a clear direction for at least the next week.&lt;br /&gt;&lt;br /&gt;&lt;ul style=&quot;text-align: left;&quot;&gt;&lt;li&gt;Improving sparse*sparse, I want to play with this idea tomorrow as I suspect I can improve the existing multiplication implementation. The implementation will use dictionaries, not CSR.&lt;/li&gt;&lt;li&gt;get sparse to support domains. My model would be to have procedural implementation in the new file sparsetools.py and then having these functions &quot;powering&quot; methods of sparse.py&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;The current matrix can vaguely be considered as having Level 1 only. My strategy is to get Level 0 up. I don't want to plan more ahead since I think I should just plan on the fly as time comes and not putting any detail plan. &lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;One problem I was having last two weeks is I  was not iterating fast enough. Ideally, I should push commits daily so that the code can be reviewed and discussed. It is a good boost for morale. It also makes sure that the project can be done piecemeal. &lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;[1] &lt;a href=&quot;https://github.com/sympy/sympy/pull/2169&quot;&gt;PR 2169&lt;/a&gt;&lt;br /&gt;[2] &lt;a href=&quot;https://github.com/sympy/sympy/pull/2190&quot;&gt;PR 2190&lt;/a&gt;&lt;/div&gt;</description>
	<pubDate>Sun, 23 Jun 2013 17:07:54 +0000</pubDate>
	<author>noreply@blogger.com (Saurabh Jha)</author>
</item>
<item>
	<title>Sachin Joglekar: Hello World!</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-5472769892551526876.post-8317629035648079156</guid>
	<link>http://codesachin.blogspot.com/2013/05/hello-world.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;Aha. My first ever blog post. The inspiration for this blog came from the Google Summer of Code program, which will be my primary focus till September.&lt;br /&gt;&lt;div&gt;I came to know that I was selected only yesterday night, and what a day that was! Phew... I was going round in circles thinking about my chances, what I had done right, what I had done wrong, blah blah. Never has been a wait of 24 hours been so torturous. I have to give credit to Gilbert Gede, Sean Vig, Jason Moore, DL Peterson, Angadh and all the other SymPy physics community mentors who helped me shape my proposal to a presentable, well-thought out condition. Earlier it was just one haphazard list of things that I intended to do over the summer(mainly monsoon, due to the late arrival of GSoC), and my chances wouldn't have been half as good without these people giving their input time and again.&lt;/div&gt;&lt;div&gt;Gilbert Gede, from UC-Davis, will be my mentor throughout the whole GSoC period, and I hope to learn a lot from him....not just physics, but also coding and coding styles in general. He is one of the authors of sympy.physics.mechanics (PyDy).&lt;/div&gt;&lt;div&gt;My co-mentor will be Stefan Krastanov, who has done awesome work for SymPy during his GSoC project last year. Considering both my mentors are former GSoCers, their experiences with the program will go a long way in making sure I don't stumble around too much.&lt;/div&gt;&lt;div&gt;I will be working alongside Prasoon Shukla, a student of IIT-R, as his project is closely related to mine in terms of dealing with vector fields.&lt;/div&gt;&lt;div&gt;Some others I need to thank are Christopher Smith, who helped me immensely during my first PRs for SymPy, Aaron, the SymPy head, who took the pains to comment on all my stupid coding mistakes in my initial work, Manoj Kumar, Priyans Murarka, Jay Rambhia and Divyansh Khanna who were great supports during my application period. Thanks to all of you, I am penning my first ever blog post :-)&lt;/div&gt;&lt;div&gt;I hope I have a great 3 months coding for GSoC. I do realise it's not gonna be very easy, and I am bound to get stuck at times, but I hope to live up to my proposal(&lt;a href=&quot;https://github.com/sympy/sympy/wiki/GSOC-2013-Application:-Sachin-Joglekar:-Electromagnetism-module&quot;&gt;https://github.com/sympy/sympy/wiki/GSOC-2013-Application:-Sachin-Joglekar:-Electromagnetism-module&lt;/a&gt;) and finish well what I intend to do, to begin with.&lt;br /&gt;The past few months have been very eventful and anxious at the same time, I hope I can work in peace now. &lt;/div&gt;&lt;div&gt;A lot more blog posts are going to come, mostly about my GSoC work, but some also about the other interesting coding things I do here and there. Hope I live up to the expectations of the SymPy community :-).&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;</description>
	<pubDate>Sun, 23 Jun 2013 10:58:36 +0000</pubDate>
	<author>noreply@blogger.com (Sachin Joglekar)</author>
</item>
<item>
	<title>Sachin Joglekar: GSoC: Week 1</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-5472769892551526876.post-2806702897904585570</guid>
	<link>http://codesachin.blogspot.com/2013/06/gsoc-week-1.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;Hmm. Week 1 of GSoC ends today. Its been a bit of a confused week, with most of my time spent thinking and  trying to determine how I am going to code the initialization of reference frames in the new mechanics core. Its going to be a little dense, with all the motion parameters being checked, analysed and stored, and the constraint of immutability making things a little difficult, implementation-wise. But I guess its better to make the classes immutable to gel well with the rest of SymPy, as the whole point of this part of my GSoC work would be to make sympy.physics.mechanics seem 'friendlier' to the rest of the codebase.&lt;br /&gt;&lt;br /&gt;What was gained? Well, I did finish (today) determining how exactly I am going to go the whole initialization procedure, after a &lt;i&gt;lot&lt;/i&gt; of brain-racking (its quite true when they say that programmers do most of their thinking not at their desk, but while doing things like eating and showering :-) ). A lot of math was involved, along with considerable thinking given to the exact implementation details. What did I learn? - &lt;i&gt;Always&lt;/i&gt; plan out what you are going to implement, on paper, before you start typing code(especially if math is involved). Taking time and understanding what you are going to do, and then doing it, is much better than constantly changing your code as you keep finding faults. Anyways, I did finish coding the rough API and some elementary functions like those of time derivatives, relative motion etc., but all this will be useful only once I finish the __init__ method.&lt;br /&gt;&lt;br /&gt;One good thing we decided to do was to code helper functions in the a separate file in the core to calculate motion parameters given differential equations and boundary conditions- using SymPy's &lt;a href=&quot;http://docs.sympy.org/0.7.1/modules/integrals.html&quot;&gt;integration&lt;/a&gt; and &lt;a href=&quot;http://docs.sympy.org/dev/modules/solvers/solvers.html&quot;&gt;equation-solving &lt;/a&gt;functions, ofcourse. I proposed this way of doing things since having this in the reference frame code would be confusing and chaotic, not to mention unnecessary. At the same time, a user would want to create a new frame instance based on a velocity vector and initial position boundary values-or something on those lines. So this we felt was a good middle ground to enable both. This is going to take time, but I guess having a good foundation is always good.&lt;br /&gt;&lt;br /&gt;In terms of code and API, I will have something concrete in my &lt;a href=&quot;https://github.com/sympy/sympy/pull/2187&quot;&gt;PR&lt;/a&gt; by the end of this week. Will try and show a mock SymPy session in my next post :-). Anyways, thats all for now. I wont be able to do much tomorrow, since I have to travel to a relative's place for lunch..though I guess I could work at night for an hour or two. A long week ahead, wish me luck :-D&lt;/div&gt;</description>
	<pubDate>Sat, 22 Jun 2013 20:19:30 +0000</pubDate>
	<author>noreply@blogger.com (Sachin Joglekar)</author>
</item>
<item>
	<title>Katja Sophie Hotz: First week</title>
	<guid isPermaLink="false">http://sophiessympyblog.wordpress.com/?p=57</guid>
	<link>http://sophiessympyblog.wordpress.com/2013/06/21/first-week/</link>
	<description>&lt;p style=&quot;text-align: justify;&quot;&gt;This week I started coding for my GSoC project. My aim for this week and the next is the implementation of a modular GCD algorithm for integer polynomials, both univariate and multivariate. Until now I implemented the univariate case and all tests already pass. I have not gotten to compare the runtime with the existing heuristic GCD algorithm, but I will do so in a future blog post.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;The algorithm in the paper of Monagan and Wittkopf is described for bivariate polynomials, so the first thing I had to do was adapting it to the univariate case. Since dropping a variable is a simplification and the paper is written nicely, this didn’t cause &lt;span style=&quot;color: #000000;&quot;&gt;much problems. What did cause some difficulties was the fact that t&lt;/span&gt;he polys module is currently under a rewrite, so it is very easy to get a little confused. Thankfully, Mateusz (my mentor) helped me sort out the confusions. I think this consumed the biggest amount of time this week, because the code went through a few rewrites, but getting there helped me understand both the old and the new module a lot better.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/sophiessympyblog.wordpress.com/57/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/sophiessympyblog.wordpress.com/57/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=sophiessympyblog.wordpress.com&amp;amp;blog=53034828&amp;amp;post=57&amp;amp;subd=sophiessympyblog&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Fri, 21 Jun 2013 14:13:04 +0000</pubDate>
</item>
<item>
	<title>Prasoon Shukla: GSoC Week 1: Getting started with SymPy</title>
	<guid isPermaLink="false">http://musingsofafriend.wordpress.com/?p=174</guid>
	<link>http://musingsofafriend.wordpress.com/2013/06/21/gsoc-week-1-getting-started-with-sympy/</link>
	<description>&lt;p&gt;This is the first blog post regarding my work on &lt;a href=&quot;http://sympy.org&quot; target=&quot;_blank&quot; title=&quot;SymPy&quot;&gt;SymPy&lt;/a&gt; under the Google Summer of Code 2013.&lt;/p&gt;
&lt;p&gt;So, to begin, I had proposed the addition of a new vector calculus module to the existing SymPy codebase. During the community bonding period (28th May – 16th June), the four people that are related with this project – &lt;a href=&quot;http://www.github.com/prasoon2211&quot; target=&quot;_blank&quot;&gt;I&lt;/a&gt;, &lt;a href=&quot;https://github.com/srjoglekar246&quot; target=&quot;_blank&quot;&gt;Sachin&lt;/a&gt;, &lt;a href=&quot;https://github.com/gilbertgede&quot; target=&quot;_blank&quot;&gt;Gilbert&lt;/a&gt; and &lt;a href=&quot;https://github.com/krastanov&quot; target=&quot;_blank&quot;&gt;Stefan&lt;/a&gt; (with the latter two being mentors) – discussed in detail the project structure, the API, the UI etc. After much discussion, we finalized the path we’re going to take.&lt;/p&gt;
&lt;p&gt;In the three days that I have worked (Monday, Wednesday and Thursday), the first thing that I did was write the skeleton of an API and got started with the code.&lt;/p&gt;
&lt;p&gt;So, first was the API. As I wrote before, the API was decided during the community bonding period. Obviously, writing the whole API before any of the code has been written is quite impossible. Therefore, the API only contains the stuff that we need &lt;em&gt;right now&lt;/em&gt;. That includes that elementary methods of the Vector, VectAdd, VectMul, CoordSys classes.&lt;/p&gt;
&lt;p&gt;After the API, I began with the code. The code started with the basic structure. The first was to make a CoordSys class. This class holds all the proper code to represent a coordinate system that can be oriented and position in space relative to a zero reference. While writing the __init__ function for the class, I faced some problems like where to put the code that actually initialized the direction cosine matrix (dcm, for short). Also, initially it was decided that we will store the dcm matrix whenever a frame was initialized that would be essentially the conversion matrix from the global frame to the frame that was created. But, this approach had problem – suppose we create a new frame (B) from a pre-existing frame (A) by rotating/positioning B wrt A. Then, the resulting DCM should ideally just contain the angle used for rotation wrt A. But, because we are storing only the DCM wrt to the global frame. Therefore, the DCM wrt global frame would go something like: DCM(B -&amp;gt; A) == DCM(global -&amp;gt; A) *  DCM(B -&amp;gt;global). The entries of this resultant matrix do not get simplified automatically. For example, sin(a) cos(a – b) + cos(a) sin(a -b) do not automatically simplify to -sin(b).&lt;/p&gt;
&lt;p&gt;Now, to tackle this problem, we can use trigsimp with the newly incorporated ‘fu’ algorithm. The other thing that can be done is finding out what terms shouldn’t be in the result and then setting those variables to zero ( ‘b’ in the example). For the second approach, we need no know which variables shouldn’t be there. For this, we need to keep tract of the angles by which we are rotating wrt to the a parent frame (in this case, A). So, for that, the solution I came up with was this: We will have two dcm matrices in the class definition. The first one is _dcm_global which stores the DCM that converts global coordinates into coordinates of the frame. This matrix will be there for every object. The other matrix is _dcm_parent. As the name suggests, this matrix stores the dcm, only wrt to the parent frame. This helps us in two ways – first, we get to know exactly which variables should be there in the DCM(B -&amp;gt; A) and second, we do not need to explicitly calculate dcm via multiplication of two DCM matrices whenever we process wrt to the parent frame.&lt;/p&gt;
&lt;p&gt;I have added the methods on the CoordSys class that would calculate the DCM for both the global as well as the local frame. Also, I have began working on the CoordSysRect class that would represent the Cartesian coordinate system. In this class, we need a list (which I’ll call h_list) that is used for expressing generalized formulas for vector calculus operations. For the rectangular system, all the h values are just unity. Then, we need to have a conversion formulas between different systems. That I want to store as a dictionary with the key as the name of the class and the values as a matrix that represents the coordinate transformation.&lt;/p&gt;
&lt;p&gt;That’s the summary of the work done in three days – excluding Friday. And the week isn’t over yet. I hope to finish the rectangular coordinate system by the before the next Monday.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/musingsofafriend.wordpress.com/174/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/musingsofafriend.wordpress.com/174/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=musingsofafriend.wordpress.com&amp;amp;blog=36409097&amp;amp;post=174&amp;amp;subd=musingsofafriend&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Fri, 21 Jun 2013 12:12:36 +0000</pubDate>
</item>
<item>
	<title>Thilina Rathnayake: Solving linear Diophantine equation</title>
	<guid isPermaLink="false">http://theperceptiveway.wordpress.com/?p=33</guid>
	<link>http://theperceptiveway.wordpress.com/2013/06/21/solving-linear-diophantine-equation/</link>
	<description>&lt;p&gt;When the first week of the GSoC comes to an end, I was able to finish implementing solver for the linear Diophantine equations. A linear Diophantine equation is an equation of the form,&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://theperceptiveway.files.wordpress.com/2013/06/linear.gif&quot;&gt;&lt;img src=&quot;http://theperceptiveway.files.wordpress.com/2013/06/linear.gif?w=585&quot; alt=&quot;linear&quot; class=&quot;alignnone size-full wp-image-41&quot; /&gt;&lt;/a&gt; where &lt;a href=&quot;http://theperceptiveway.files.wordpress.com/2013/06/codecogseqn.gif&quot;&gt;&lt;img src=&quot;http://theperceptiveway.files.wordpress.com/2013/06/codecogseqn.gif?w=585&quot; alt=&quot;CodeCogsEqn&quot; class=&quot;alignnone size-full wp-image-43&quot; /&gt;&lt;/a&gt; and  &lt;em&gt;c&lt;/em&gt; are all integers and&lt;a href=&quot;http://theperceptiveway.files.wordpress.com/2013/06/codecogseqn1.gif&quot;&gt;&lt;img src=&quot;http://theperceptiveway.files.wordpress.com/2013/06/codecogseqn1.gif?w=585&quot; alt=&quot;CodeCogsEqn(1)&quot; class=&quot;alignnone size-full wp-image-44&quot; /&gt;&lt;/a&gt; are integer variables.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;Case 1: &lt;em&gt;n = 2&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p dir=&quot;ltr&quot;&gt;If the linear Diophantine equations has only two variables (&lt;em&gt;n = 2&lt;/em&gt;), &lt;a href=&quot;http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm&quot;&gt;extended Euclid’s algorithm&lt;/a&gt; can be used to find the solutions. If solvable, we will have to introduce one parameter. The general form of the equation when&lt;em&gt; n = 2&lt;/em&gt; can be expressed as &lt;em&gt;ax + by = c. &lt;/em&gt;This is solvable if and only if gcd(a, b) divides c. i.e &lt;em&gt;gcd(c, gcd(a, b)) = gcd(a, b)&lt;/em&gt;. Here gcd stands for &lt;em&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Greatest_common_divisor&quot;&gt;greatest common divisor&lt;/a&gt;.&lt;/em&gt; Let&lt;em&gt; x0&lt;/em&gt; and&lt;em&gt; y0&lt;/em&gt; be a solution, then it can be easily noticed that,&lt;em&gt; x0 + bt&lt;/em&gt; and &lt;em&gt;y0 -at&lt;/em&gt; are also solutions. We can use this fact to find all the solutions when an initial solution has been found.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;&lt;em&gt;Solution of 10x + 14y = 10&lt;/em&gt;&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;We start by dividing both sides of the equation by&lt;em&gt; gcd(a, b)&lt;/em&gt;. If &lt;em&gt;gcd(a, b)&lt;/em&gt; does not divide &lt;em&gt;c&lt;/em&gt;, then there are no solutions.&lt;em&gt; gcd(4, 6) = 2&lt;/em&gt; and&lt;em&gt; 2&lt;/em&gt; divides &lt;em&gt;10&lt;/em&gt; so this is solvable and dividing by 2 yields,&lt;em&gt; 5x + 7y = 5.&lt;/em&gt; Now we should apply extended Euclid’s algorithm. What the algorithm does is finding three values &lt;em&gt;x0, y0&lt;/em&gt; and &lt;em&gt;d&lt;/em&gt; such that &lt;em&gt;ax0 + by0 = d&lt;/em&gt;. Here &lt;em&gt;d = gcd(a, b)&lt;/em&gt;. Since we divided the equation by &lt;em&gt;gcd(a, b)&lt;/em&gt; at the very beginning,&lt;em&gt; d&lt;/em&gt; will always be &lt;em&gt;1&lt;/em&gt; in our case. Below is a simplified version of the algorithm used in the solver.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;def extended_euclid(a, b):&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;if b == 0:&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;    return (1, 0, a)&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;else:&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;    x0, y0, d = extended_euclid(b, a%b)&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;    x, y = y0, x0 – (a//b) * y0&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;    return x, y, d&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;extended_euclid(5, 7) returns (3, -2 , 1), i.e &lt;em&gt;5*3 – 7*2 = 1&lt;/em&gt;. Following is the procedure if you were work this out manually.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;&lt;em&gt;7 = 5*1 + 2&lt;/em&gt;&lt;br /&gt;
&lt;em&gt;5 = 2*2 + 1&lt;/em&gt;&lt;br /&gt;
&lt;em&gt;2 = 1*2 + 0&lt;/em&gt;&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;Now starting from the line before the last one we can start going back, &lt;em&gt;1 = 5 – 2*2 = 5 – 2*(7 – 5*1) = 3*5 – 2*7&lt;/em&gt; which gives the desired result. Multiplying&lt;em&gt; 5*3 +7*(-2) = 1 &lt;/em&gt;by &lt;em&gt;5&lt;/em&gt; we get &lt;em&gt;5*15 +7*(-10) = 5&lt;/em&gt; which implies that&lt;em&gt; 15&lt;/em&gt; and&lt;em&gt; -10&lt;/em&gt; are solutions of the initial equation. So all the solutions can be expressed as&lt;em&gt;, x = 15+7t, y = -10-5t&lt;/em&gt; where &lt;em&gt;t&lt;/em&gt; is an integer.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;Case 2:&lt;em&gt; n &amp;gt; 2&lt;/em&gt;&lt;/strong&gt;&lt;/h4&gt;
&lt;p dir=&quot;ltr&quot;&gt;If &lt;em&gt;n &amp;gt; 2&lt;/em&gt;, we can express two of the variables using the rest of the variables and a parameter. Below is an example for this case.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;&lt;em&gt;Solution of 2x + 3y + 4z = 5&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Let’s set&lt;em&gt; x = x&lt;/em&gt; and assume&lt;em&gt; y = ax + bm + c&lt;/em&gt; and&lt;em&gt; z = dx + em + f&lt;/em&gt; where &lt;em&gt;a, b, c, d, e, f&lt;/em&gt; are constants to be found. &lt;em&gt;m&lt;/em&gt; is the introduced parameter. Plug in these in original equation,&lt;/p&gt;
&lt;p&gt;&lt;em&gt;2x + 3(ax + bm + c) + 4(dx + em + f) = 5&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;By comparing the two sides we get the set of equations&lt;em&gt;, 3c + 4f = 5&lt;/em&gt;, &lt;em&gt; 2 + 3a + 4d = 0&lt;/em&gt; and &lt;em&gt;3b + 4e = 0&lt;/em&gt; all of which are two variable linear DEs. If these can be solved, these will yield infinite number of solutions and any pair of values will be acceptable for&lt;em&gt; (a, d), (b, e)&lt;/em&gt; and &lt;em&gt;(c, f)&lt;/em&gt;. In this example all three equations are solvable and&lt;em&gt; (a, d) = (2, -2) , (b, e) = (4, -3)&lt;/em&gt; and &lt;em&gt;(e, f) = (3, -1)&lt;/em&gt; would do the trick. Then the general solution is,&lt;em&gt; x = x, y = 2x + 4m + 3&lt;/em&gt; and&lt;em&gt; z = -2x – 3m – 1&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;In the solver module when more than two variables are involved it is rearranged leaving two variable in one side and all the other variables and constant term in the other side. For example &lt;em&gt;2x + 3y + 4z = 5&lt;/em&gt; is assumed to be in the form&lt;em&gt; 2x + 3y = 5 – 4z&lt;/em&gt;. Then it finds a separate solution for each of the two equations &lt;em&gt;2x + 3y = 5  –&amp;gt;(1)&lt;/em&gt; and&lt;em&gt; 2x + 3y = -4z  –&amp;gt;(2)&lt;/em&gt;. First equation returns a parametric solution as discussed in case 1 and the solutions for second one can be found by finding a basic solution(not parametric) for&lt;em&gt; 2x + 3y = -4&lt;/em&gt; and multiplying it by&lt;em&gt; z. &lt;/em&gt;Adding the two solutions for&lt;em&gt; (1)&lt;/em&gt; and&lt;em&gt; (2)&lt;/em&gt; yields the solution of the original equation.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/theperceptiveway.wordpress.com/33/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/theperceptiveway.wordpress.com/33/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=theperceptiveway.wordpress.com&amp;amp;blog=52956410&amp;amp;post=33&amp;amp;subd=theperceptiveway&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Fri, 21 Jun 2013 12:01:54 +0000</pubDate>
</item>
<item>
	<title>Sachin Joglekar: Smart caching in Python</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-5472769892551526876.post-7592896544614799854</guid>
	<link>http://codesachin.blogspot.com/2013/06/smart-caching-in-python.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;Prasoon and I are currently looking for ways to reduce the computational load of calculating the DCM(Direction Cosine Matrice) of one frame with respect to another. This DCM is useful to mathematically understand how one reference frame is oriented with respect to another. The reason why we need to find a way is, if we are talking about something like a 100 frames each oriented in some random way with respect to one of its predecessors, it gets &lt;i&gt;pretty &lt;/i&gt;messy- for your computer AND you.&lt;br /&gt;&lt;div&gt;We thought of various ways, but apart from some &lt;i&gt;very &lt;/i&gt;inefficient methods like 'World' frames (to store these DCMs for a particular run of the program) and using a global frame as an intermediate, we really couldn't find anything much. Then Gilbert suggested looking at the way SymPy does caching of some of its methods.&lt;/div&gt;&lt;div&gt;We may or may not use this technique eventually, but I learnt a cool way to implement &lt;a href=&quot;https://en.wikipedia.org/wiki/Cache_(computing)&quot;&gt;caching&lt;/a&gt; in Python-using dictionaries and method decorators. If you don't know what method decorators are, have a look at &lt;a href=&quot;http://simeonfranklin.com/blog/2012/jul/1/python-decorators-in-12-steps/&quot;&gt;this&lt;/a&gt; - decorators are essentially ways to mutilate(or rather, add to) the functioning of a function/class.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;I am going to try and show a simplified version of what I found in the SymPy source, their original method is close but much more detailed- for purposes of immutability and debugging and stuff.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;The components involved in this technique are these - &lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;1) CACHE = {}&lt;/div&gt;&lt;div&gt;This is a Python dictionary (empty intially). This is what we will use as our cache.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;2) The caching decorator -&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;def globalcached(function):&lt;/div&gt;&lt;div&gt;    @wraps(function)&lt;/div&gt;&lt;div&gt;    def wrapper(*args):&lt;/div&gt;&lt;div&gt;        tup = tuple([function] + [args])&lt;/div&gt;&lt;div&gt;        if tup in CACHE:&lt;/div&gt;&lt;div&gt;            print('In cache')&lt;/div&gt;&lt;div&gt;            return CACHE[tup]&lt;/div&gt;&lt;div&gt;        else:&lt;/div&gt;&lt;div&gt;            print('Not in cache')&lt;/div&gt;&lt;div&gt;            temp = function(*args)&lt;/div&gt;&lt;div&gt;            CACHE[tup] = temp&lt;/div&gt;&lt;div&gt;            return temp&lt;/div&gt;&lt;div&gt;    return wrapper&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Understand what the above will do. &lt;i&gt;&lt;b&gt;wraps&lt;/b&gt;&lt;/i&gt; is a decorator from the functools Python library- its there by default. It enables the 'decorated' function to retain the docstring of the original function- we would probably want to retain the docs.&lt;/div&gt;&lt;div&gt;As you might have understood, 'wrapper' is the modified function that will get executed in place of the original one.&lt;/div&gt;&lt;div&gt;Now, &lt;i&gt;&lt;b&gt;tup&lt;/b&gt; &lt;/i&gt;is a tuple (tuple is immutable in python and hence hashable. You can only use hashable objects as dictionary keys) containing info about the following-&lt;/div&gt;&lt;div&gt;i. The function being called&lt;/div&gt;&lt;div&gt;ii. The arguments of the function&lt;/div&gt;&lt;div&gt;Thus, I know exactly what function it is, and what it is going to work on. Hence, the code will not directly let the original function go computing again- that may be a waste of resources. It first checks in CACHE, whether it has that particular &lt;i&gt;tup &lt;/i&gt;as one its keys. If its not there, then this is the first time that function is being called &lt;i&gt;with those arguments. &lt;/i&gt;So, I will calculate the needed quantity, but before returning it, I will store the calculated stuff &lt;i&gt;with tup as the key. &lt;/i&gt;Hence, the next time the same function gets called with the very same arguments, the decorator will have a 'deja vu' and return the value- from CACHE. Ingenious, isnt it?&lt;/div&gt;&lt;div&gt;I don't know how many other projects use this method, or something similar. But its quite cool, it you want speed and you know the computation is going to be intensive.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Anyways, here is a snippet using the above decorator-&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;&quot;&gt;&lt;code style=&quot;color: black;&quot;&gt; CACHE = {}  &lt;br /&gt; def globalcached(function):  &lt;br /&gt;   @wraps(function)  &lt;br /&gt;   def wrapper(*args):  &lt;br /&gt;     tup = tuple([function] + [args])  &lt;br /&gt;     if tup in CACHE:  &lt;br /&gt;       print('In cache')  &lt;br /&gt;       return CACHE[tup]  &lt;br /&gt;     else:  &lt;br /&gt;       print('Not in cache')  &lt;br /&gt;       temp = function(*args)  &lt;br /&gt;       CACHE[tup] = temp  &lt;br /&gt;       return temp  &lt;br /&gt;   return wrapper  &lt;br /&gt; def printcache():  &lt;br /&gt;   for x in CACHE:  &lt;br /&gt;     print 'Function: ' + str(x[0])  &lt;br /&gt;     print 'Arguments: ' + str(x[1:])  &lt;br /&gt;     print 'Value: ' + str(CACHE[x])  &lt;br /&gt;     print()  &lt;br /&gt; @globalcached  &lt;br /&gt; def myfunction(x, y):  &lt;br /&gt;   &quot;&quot;&quot; myfunction docs&quot;&quot;&quot;  &lt;br /&gt;   return x ** 2 - y ** 2  &lt;br /&gt; class SomeClass(object):  &lt;br /&gt;   def __init__(self, x):  &lt;br /&gt;     self.x = x  &lt;br /&gt;   @globalcached  &lt;br /&gt;   def function1(self, otherinstance):  &lt;br /&gt;     &quot;&quot;&quot;function1 docs&quot;&quot;&quot;  &lt;br /&gt;     return otherinstance.x ** 2 - self.x ** 2  &lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Using it in a Python IDLE session-&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;pre style=&quot;&quot;&gt;&lt;code style=&quot;color: black;&quot;&gt; &amp;gt;&amp;gt;&amp;gt; myfunction(8, 3)  &lt;br /&gt; Not in cache  &lt;br /&gt; 55  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; myfunction(8, 3)  &lt;br /&gt; In cache  &lt;br /&gt; 55  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; i1 = SomeClass(4)  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; i2 = SomeClass(7)  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; i1.function1(i2)  &lt;br /&gt; Not in cache  &lt;br /&gt; 33  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; i1.function1(i2)  &lt;br /&gt; In cache  &lt;br /&gt; 33  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; myfunction(6, 7)  &lt;br /&gt; Not in cache  &lt;br /&gt; -13  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt; printcache()  &lt;br /&gt; Function: &amp;lt;function myfunction at 0x026B38B0&amp;gt;  &lt;br /&gt; Arguments: ((8, 3),)  &lt;br /&gt; Value: 55  &lt;br /&gt; ()  &lt;br /&gt; Function: &amp;lt;function function1 at 0x026CD330&amp;gt;  &lt;br /&gt; Arguments: ((&amp;lt;__main__.SomeClass object at 0x026C9B10&amp;gt;, &amp;lt;__main__.SomeClass object at 0x026C9B50&amp;gt;),)  &lt;br /&gt; Value: 33  &lt;br /&gt; ()  &lt;br /&gt; Function: &amp;lt;function myfunction at 0x026B38B0&amp;gt;  &lt;br /&gt; Arguments: ((6, 7),)  &lt;br /&gt; Value: -13  &lt;br /&gt; ()  &lt;br /&gt; &amp;gt;&amp;gt;&amp;gt;   &lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;br /&gt;I hope its clear now. Its not rocket science, but its a clever way of doing things.&lt;br /&gt;&lt;br /&gt;Anyways, that's all for now. And btw, thanks to Google for giving us a free membership to ACM for one year. The GSoC welcome package will also be arriving soon, and I am excited :-D&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
	<pubDate>Thu, 20 Jun 2013 15:31:52 +0000</pubDate>
	<author>noreply@blogger.com (Sachin Joglekar)</author>
</item>
<item>
	<title>Mary Clark: On the A series of Lie algebras</title>
	<guid isPermaLink="false">http://meclark256.wordpress.com/?p=5</guid>
	<link>http://meclark256.wordpress.com/2013/06/19/on-the-a-series-of-lie-algebras/</link>
	<description>&lt;p&gt;So this week I’m working on the A series of Lie algebras.  The Lie algebra A_n corresponds to the special unitary algebra su(n+1).&lt;/p&gt;
&lt;p&gt;Much of this work is pretty basic, the A series is the simplest and easiest; the roots are easy to generate, which is something that can be quite tricky for C and D, and some of the exceptional Lie algebras, like F_4 or E_7.   I have written code to generate the roots and the Cartan matrix, as well as to define the dimension of the Lie algebra and the size of its basis.&lt;/p&gt;
&lt;p&gt;I have also been just been thinking, about how everything is going to actually work together.  I’ve been taking some inspiration from Sage’s Lie algebra module, but I think in the end my work will end up being implemented rather differently.&lt;/p&gt;
&lt;p&gt;What I am, however, running into difficulties about is generating the commutation relations for su(n) in general.  With the somewhat cursory look I did into this specific issue when I was writing my application, I rather thought that there was a well-defined relation or algorithm to generate the commutation relations which I would then just implement.   However, upon really researching this, I’ve realised that there is no such algorithm.  So, while I could have my code dispense the commutation relations for su(2) and su(3) (which are probably the only cases when you would /really/ want the actual, physical commuation relations between the basis elements) I don’t know if this would be worthwhile.&lt;/p&gt;
&lt;p&gt;Seeing as how I’ve more or less finished what I wanted to have accomplished with the A series at this point in GSOC, I think that I will start work on some of the exceptional cases this week (specifically F_4 and G_2).&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/meclark256.wordpress.com/5/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/meclark256.wordpress.com/5/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=meclark256.wordpress.com&amp;amp;blog=52875864&amp;amp;post=5&amp;amp;subd=meclark256&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Wed, 19 Jun 2013 19:27:29 +0000</pubDate>
</item>
<item>
	<title>Manoj Kumar: Algebraicity, dsolve and core SymPy</title>
	<guid isPermaLink="false">http://manojbits.wordpress.com/?p=513</guid>
	<link>http://manojbits.wordpress.com/2013/06/18/algebraicity-dsolve-and-core-sympy/</link>
	<description>&lt;p&gt;Hello, the previous week I had learnt a lot, especially the fact that contributing to an open source project is lot more than just coding. Also the fact that Summer of Code is full of ups and downs, just one week into the program and I’ve experienced both. As usual, a short(?) summary about what I’ve accomplished or at-least tried to over the past week.&lt;/p&gt;
&lt;p&gt;My work started with trying to implement the second heuristic as given in the Maple paper to solve this PDE &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B%5Cpartial+%5Ceta%7D%7B%5Cpartial+x%7D+%2B+%28%5Cfrac%7B%5Cpartial+%5Ceta%7D%7B%5Cpartial+y%7D+-+%5Cfrac%7B%5Cpartial+%5Cxi%7D%7B%5Cpartial+x%7D%29+%2A+h%28x%2C+y%29+-+%5Cfrac%7B%5Cpartial+%5Cxi%7D%7B%5Cpartial+y%7D%2Ah%28x%2Cy%29%5E%7B2%7D+-+%5Cxi%2A%5Cfrac%7B%5Cpartial+h%7D%7B%5Cpartial+x%7D+-+%5Ceta%2A%5Cfrac%7B%5Cpartial+h%7D%7B%5Cpartial+y%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{\partial \eta}{\partial x} + (\frac{\partial \eta}{\partial y} - \frac{\partial \xi}{\partial x}) * h(x, y) - \frac{\partial \xi}{\partial y}*h(x,y)^{2} - \xi*\frac{\partial h}{\partial x} - \eta*\frac{\partial h}{\partial y}&quot; class=&quot;latex&quot; title=&quot;\frac{\partial \eta}{\partial x} + (\frac{\partial \eta}{\partial y} - \frac{\partial \xi}{\partial x}) * h(x, y) - \frac{\partial \xi}{\partial y}*h(x,y)^{2} - \xi*\frac{\partial h}{\partial x} - \eta*\frac{\partial h}{\partial y}&quot; /&gt; . The heuristic is as follows, we make the following assumptions for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y)&quot; class=&quot;latex&quot; title=&quot;\xi(x,y)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y)&quot; class=&quot;latex&quot; title=&quot;\eta(x,y)&quot; /&gt;&lt;/p&gt;
&lt;p&gt;1. &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29+%3D+0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y) = 0&quot; class=&quot;latex&quot; title=&quot;\xi(x,y) = 0&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29+%3D+f%28x%29%2Ag%28y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y) = f(x)*g(y)&quot; class=&quot;latex&quot; title=&quot;\eta(x,y) = f(x)*g(y)&quot; /&gt;&lt;br /&gt;
2. &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29+%3D+0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y) = 0&quot; class=&quot;latex&quot; title=&quot;\xi(x,y) = 0&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29+%3D+f%28y%29%2Ag%28x%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y) = f(y)*g(x)&quot; class=&quot;latex&quot; title=&quot;\eta(x,y) = f(y)*g(x)&quot; /&gt;&lt;br /&gt;
3. &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29+%3D+0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y) = 0&quot; class=&quot;latex&quot; title=&quot;\eta(x,y) = 0&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29+%3D+f%28x%29%2Ag%28y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y) = f(x)*g(y)&quot; class=&quot;latex&quot; title=&quot;\xi(x,y) = f(x)*g(y)&quot; /&gt;&lt;br /&gt;
4. &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29+%3D+0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y) = 0&quot; class=&quot;latex&quot; title=&quot;\eta(x,y) = 0&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29+%3D+f%28x%29%2Ag%28y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y) = f(x)*g(y)&quot; class=&quot;latex&quot; title=&quot;\xi(x,y) = f(x)*g(y)&quot; /&gt;&lt;/p&gt;
&lt;p&gt;These were the problems that I had faced while trying to implement the heuristic.&lt;/p&gt;
&lt;p&gt;1.  &lt;strong&gt;Algebraicity: &lt;/strong&gt;In the above mentioned assumptions, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=g&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;g&quot; class=&quot;latex&quot; title=&quot;g&quot; /&gt; is a function, that is built by extracting algebraic factors from &lt;img src=&quot;http://s0.wp.com/latex.php?latex=h%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;h(x, y)&quot; class=&quot;latex&quot; title=&quot;h(x, y)&quot; /&gt;, where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Bdy%7D%7Bdx%7D%3Dh%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{dy}{dx}=h(x,y)&quot; class=&quot;latex&quot; title=&quot;\frac{dy}{dx}=h(x,y)&quot; /&gt;  . For some strange reason, I chose to ignore, the term algebraic and implemented it by extracting all factors. And then I realized my mistake and had to rewrite some part of the code again. I also found out that there are functions to find out if a function is rational, or a polynomial but not if an expression is algebraic. I had to implement it on my own. (By the way, this was my function in core SymPy or anything outside the differential equation area.) The difference between an algebraic and a rational function is that in a rational function, exponentiation is an integer, however in an algebraic expression, exponentiation can be rational. The source code can be found here. Sample this example SymPy session:&lt;/p&gt;
&lt;pre class=&quot;brush: python; title: ; notranslate&quot;&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.abc import x
&amp;gt;&amp;gt;&amp;gt; eq = ((1 - x**2)/(1 + x**2))**(S(1)/2)
&amp;gt;&amp;gt;&amp;gt; eq.is_rational_function()
False
&amp;gt;&amp;gt;&amp;gt; eq.is_algebraic_expr()
True
&lt;/pre&gt;
&lt;p&gt;It can be seen that eq, is algebraic but not a rational function, due to the fact that it is raised to a rational power&lt;br /&gt;
The source can be found here. &lt;a href=&quot;https://github.com/sympy/sympy/pull/2176&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sympy/sympy/pull/2176&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;2. &lt;strong&gt;To dsolve or not to dsolve: &lt;/strong&gt;The second ‘problem’ that I was facing was whether or not to use dsolve to simplify the&lt;br /&gt;
auxiliary ODE after making the substituting the function &lt;img src=&quot;http://s0.wp.com/latex.php?latex=g&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;g&quot; class=&quot;latex&quot; title=&quot;g&quot; /&gt; in the PDE. Sample the first assumption, after making&lt;br /&gt;
the substitution, it reduces to this ODE, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Bdf%7D%7Bdx%7D%2Ag+%2B+f%28x%29%2A%5Cfrac%7Bdg%7D%7Bdy%7D%2Ah+-+f%2Ag%2A%5Cfrac%7B%5Cpartial+h%7D++%7B%5Cpartial+y%7D%3D0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{df}{dx}*g + f(x)*\frac{dg}{dy}*h - f*g*\frac{\partial h}  {\partial y}=0&quot; class=&quot;latex&quot; title=&quot;\frac{df}{dx}*g + f(x)*\frac{dg}{dy}*h - f*g*\frac{\partial h}  {\partial y}=0&quot; /&gt; . The question was whether to use dsolve again or assume that the heuristic works only if the ODE is&lt;br /&gt;
variable separable in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;f&quot; class=&quot;latex&quot; title=&quot;f&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt;. After a lot of discussion, and the fact that this ODE might be more&lt;br /&gt;
complicated then the initial ODE and a test was hanging, it was agreed to do away with dsolve internally.&lt;br /&gt;
By the way, I had written this small script to scrape the ODE’s from this page &lt;a href=&quot;http://12000.org/my_notes/kamek/KERNEL/index.htm&quot; rel=&quot;nofollow&quot;&gt;http://12000.org/my_notes/kamek/KERNEL/index.htm&lt;/a&gt;&lt;br /&gt;
into a text file. For those interested, however I made a few changes manually even after using the script.&lt;br /&gt;
&lt;a href=&quot;https://gist.github.com/Manoj-Kumar-S/5804909&quot;&gt;https://gist.github.com/Manoj-Kumar-S/5804909&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The source for the second heuristic can be found here. At the time of writing, it hasn’t been merged yet.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/sympy/sympy/pull/2156&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sympy/sympy/pull/2156&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Well regarding, the downs that I mentioned in the beginning of the post, I tried starting work on the third heuristic. The research paper (Maple )is very vague, and I have no idea how I’m going to implement it as of now after thinking for a day (well almost). I have also asked on sites like math stack and math overflow, but there has no reply till now. However lets see what can be done. Hoping for the best!&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/manojbits.wordpress.com/513/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/manojbits.wordpress.com/513/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=manojbits.wordpress.com&amp;amp;blog=31971756&amp;amp;post=513&amp;amp;subd=manojbits&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Tue, 18 Jun 2013 12:31:57 +0000</pubDate>
</item>
<item>
	<title>Mary Clark: Lie Algebras</title>
	<guid isPermaLink="false">http://meclark256.wordpress.com/?p=3</guid>
	<link>http://meclark256.wordpress.com/2013/06/14/lie-algebras/</link>
	<description>&lt;p&gt;So I thought my first post could be, basically, a summary of my project proposal for GSOC.&lt;/p&gt;
&lt;p&gt;Lie algebras (and by extension) Lie groups are an integral part of mathematics. Lie groups allow for expressing continuous symmetries for geometric objects; Lie algebras are the linearisation of Lie groups, and are much easier objects with which to work. Furthermore, Lie algebras come up all over mathematics. My research currently makes use of Lie algebras and Weyl groups, and is to do with lattice paths. Another example is the correspondence between finite cluster algebras and Cartan-Killing classification of semisimple Lie algebras and finite root systems.&lt;/p&gt;
&lt;p&gt;Unfortunately, for higher dimensions, (i.e. &amp;gt; n = 3 or so) working with Lie algebras can be computationally difficult. Computation of the root system, the simple roots, reflections, and working with the Cartan matrix can all be computationally intensive when you get into the higher dimensions.&lt;/p&gt;
&lt;p&gt;Have a Lie algebra module in Sympy will make it attractive for mathematicians working in research, as well as attractive to students and others who need to do computations involving these objects. This module will also have applications to other areas of sympy, such as the quantum mechanics module, since working with symmetries will be easier using this module, because the most common symmetry groups are covered with the classical Lie algebras.&lt;/p&gt;
&lt;p&gt;My Lie Algebra module will allow SymPy users to work with the root systems, Cartan matrices, and Dynkin diagrams of the Classical and Exceptional Lie algebras.    The deliverables I’d like to have working by the end of the summer are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Output the root system of the Classical and Exception Lie algebras for a given dimension $n$&lt;/li&gt;
&lt;li&gt;Allow basic operations on the roots: addition, subtraction, etc&lt;/li&gt;
&lt;li&gt;Output the simple roots&lt;/li&gt;
&lt;li&gt;Return the Weyl group of the Lie algebra&lt;/li&gt;
&lt;li&gt;Output the Cartan matrix and the Dynkin diagram&lt;/li&gt;
&lt;li&gt;Return the rank of a given Lie algebra, and whether or not it is finite&lt;/li&gt;
&lt;li&gt;Return the Coxeter matrix&lt;/li&gt;
&lt;li&gt;Return the commutation relations of the basis of the algebra&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These functions are all intrinsic properties of the simple Lie algebras. The classical algebras I want to implement are the A, B, C, and D series. I will also implement the Exception Lie algebras, which are G2, F4, and E6, E7, and E8. The A (n &amp;gt;=1) series corresponds for a given n to the special unitary group SU(n+1). The B (n &amp;gt;= 2) series corresponds to the special orthogonal group, SO(2n+1). The C (n &amp;gt;= 2) series corresponds to the symplectic group, Sp(2n). The D (n &amp;gt;= 4) series corresponds to the special orthogonal group SO(2n).&lt;/p&gt;
&lt;p&gt;So, yeah.  Monday is the start of GSOC, and I’ll be working on the A series!  More about that later.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/meclark256.wordpress.com/3/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/meclark256.wordpress.com/3/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=meclark256.wordpress.com&amp;amp;blog=52875864&amp;amp;post=3&amp;amp;subd=meclark256&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Fri, 14 Jun 2013 23:07:36 +0000</pubDate>
</item>
<item>
	<title>Tarun Gaba</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-7526836182390500993.post-2578217944502238651</guid>
	<link>http://tarun-gaba.blogspot.com/2013/06/first-step-summer-is-coming-coding.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;&lt;b&gt;&lt;u&gt;First Step(&lt;/u&gt;&lt;/b&gt;&lt;u&gt;Summer is Coming!!&lt;/u&gt;&lt;b&gt;&lt;u&gt;)&lt;/u&gt;&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;Coding Season is starting from 17 June, and community bonding period has been a good time, to connect with the people from the organization, and some brainstorming sessions on IRC on when and how things should be done.&lt;br /&gt; Some things have been sort out, and  some remains to be, but hopefully those will be sorted soon too.&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;Meanwhile I have been able to write a example, in the form of an IPython notebook, which although loosely implemented, describes the workflow we intend to accomplish in this coding season.&lt;br /&gt;&lt;br /&gt;The example is based on the simulation of a simple mass spring system.&lt;br /&gt;&lt;br /&gt;The workflow comprises of following steps:&lt;br /&gt;&lt;br /&gt;1) Defining basic symbols (mass,gravity,stiffness etc.)&lt;br /&gt;&lt;br /&gt; 2) Generate a Particle object, using built in mechanics Particle class.(sympy.physics.mechanics.Particle)&lt;br /&gt;&lt;br /&gt;3)Define forces on particle.&lt;br /&gt;&lt;br /&gt;4)Generate a Kane object for the particle.&lt;br /&gt;&lt;br /&gt;5)Utilizing Kane object to generate symbolic equations of motion.&lt;br /&gt;&lt;br /&gt;6) Using partially implemented code generation methods to generate numerical solutions to the equation of motion of the particle.&lt;br /&gt;&lt;br /&gt;7) Passing the numerical values to the roughly implemented Javascript methods to simulate the motion in the output cell of IPython notebook.&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;Looks good so far. Feeling excited to start the coding session, writing some codes!! ..&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;</description>
	<pubDate>Fri, 14 Jun 2013 18:41:55 +0000</pubDate>
	<author>noreply@blogger.com (TARUN GABA)</author>
</item>
<item>
	<title>Thilina Rathnayake: Structure of the Diophantine equation module</title>
	<guid isPermaLink="false">http://theperceptiveway.wordpress.com/?p=22</guid>
	<link>http://theperceptiveway.wordpress.com/2013/06/13/structure-of-the-diophantine-equation-module/</link>
	<description>&lt;p&gt;The structure of the module is going to be essentially the same as SymPy’s &lt;a href=&quot;http://docs.sympy.org/0.7.2/modules/solvers/ode.html&quot;&gt;ODE&lt;/a&gt; module. ODE module and Diophantine equations (DE) module both need to pattern match a given equation to identify which category it falls and carry out solution procedure accordingly. Below is a pseudo-code representation of the rough structure I wish to follow in the DE module.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;diop_solve(eq):&lt;/p&gt;
&lt;p style=&quot;padding-left: 30px;&quot; dir=&quot;ltr&quot;&gt;type = classify_diop(eq)&lt;br /&gt;
# The required solution routine will be called based on the type&lt;br /&gt;
# returned by classify_diop(). The types returned will be linear,&lt;br /&gt;
# quadratic, pell, and so on.&lt;br /&gt;
diop_&amp;lt;type&amp;gt;(eq)&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;classify_diop(eq):&lt;/p&gt;
&lt;p style=&quot;padding-left: 30px;&quot; dir=&quot;ltr&quot;&gt;# Matching “eq” with currently solved equations takes place here.&lt;br /&gt;
# This will return the type of DE and information that was found during&lt;br /&gt;
# matching which will be helpful in solving equation.&lt;br /&gt;
# eg: linear, quadratic, pell … etc.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;diop_linear(eq):&lt;/p&gt;
&lt;p style=&quot;padding-left: 30px;&quot; dir=&quot;ltr&quot;&gt;# This will solve linear DEs.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;diop_pell(eq):&lt;/p&gt;
&lt;p style=&quot;padding-left: 30px;&quot; dir=&quot;ltr&quot;&gt;# This will solve Pell’s equations.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;:&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;:&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;A separate method will be implemented for each “type” returned by classify_diop(). This structure provide a convenient interface for adding solutions for new type of equations. We just need to implement a solver function for that method and add a line in diop_solve() to call that function if the type returned by classify_diop() is the same.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/theperceptiveway.wordpress.com/22/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/theperceptiveway.wordpress.com/22/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=theperceptiveway.wordpress.com&amp;amp;blog=52956410&amp;amp;post=22&amp;amp;subd=theperceptiveway&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Thu, 13 Jun 2013 10:02:28 +0000</pubDate>
</item>
<item>
	<title>Manoj Kumar: The first heuristic</title>
	<guid isPermaLink="false">http://manojbits.wordpress.com/?p=487</guid>
	<link>http://manojbits.wordpress.com/2013/06/11/the-first-heuristic-3/</link>
	<description>&lt;p&gt;My GSoC work had been on and off, and I’m nowhere near the required 40 hours for the past one week, due to various reasons. However this is a report of what I had accomplished during the past week.&lt;/p&gt;
&lt;p&gt;The lie group solver for solving Ordinary Differential Equations of the first order, requires as one of the steps, (the major actually, in fact the first six weeks of my project) to solve the following Partial Differential Equation &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B%5Cpartial+%5Ceta%7D%7B%5Cpartial+x%7D+%2B+%28%5Cfrac%7B%5Cpartial+%5Ceta%7D%7B%5Cpartial+y%7D+-+%5Cfrac%7B%5Cpartial+%5Cxi%7D%7B%5Cpartial+x%7D%29+%2A+h%28x%2C+y%29+-+%5Cfrac%7B%5Cpartial+%5Cxi%7D%7B%5Cpartial+y%7D%2Ah%28x%2Cy%29%5E%7B2%7D+-+%5Cxi%2A%5Cfrac%7B%5Cpartial+h%7D%7B%5Cpartial+x%7D+-+%5Ceta%2A%5Cfrac%7B%5Cpartial+h%7D%7B%5Cpartial+y%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{\partial \eta}{\partial x} + (\frac{\partial \eta}{\partial y} - \frac{\partial \xi}{\partial x}) * h(x, y) - \frac{\partial \xi}{\partial y}*h(x,y)^{2} - \xi*\frac{\partial h}{\partial x} - \eta*\frac{\partial h}{\partial y}&quot; class=&quot;latex&quot; title=&quot;\frac{\partial \eta}{\partial x} + (\frac{\partial \eta}{\partial y} - \frac{\partial \xi}{\partial x}) * h(x, y) - \frac{\partial \xi}{\partial y}*h(x,y)^{2} - \xi*\frac{\partial h}{\partial x} - \eta*\frac{\partial h}{\partial y}&quot; /&gt; for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x, y)&quot; class=&quot;latex&quot; title=&quot;\xi(x, y)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x, y)&quot; class=&quot;latex&quot; title=&quot;\eta(x, y)&quot; /&gt;where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Bdy%7D%7Bdx%7D+%3D+h%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{dy}{dx} = h(x, y)&quot; class=&quot;latex&quot; title=&quot;\frac{dy}{dx} = h(x, y)&quot; /&gt;. It is pretty strange (atleast I find it) that solving a first order ODE requires solving a much complicated Partial Differential Equation , having two functions in two variables. However that is how things are, and as for how this PDE helps in solving a first order ODE, my blog posts would slowly lead up to that, much like how seemingly unrelated events lead to an awesome climax in a Hollywood thriller flick.&lt;/p&gt;
&lt;p&gt;For now the focus remains on solving the huge PDE that I had mentioned. It looks almost impossible to do so at first sight. However an intelligent method to solve it, would be to guess solutions for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x, y)&quot; class=&quot;latex&quot; title=&quot;\xi(x, y)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2C+y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x, y)&quot; class=&quot;latex&quot; title=&quot;\eta(x, y)&quot; /&gt; and substitute it back in the PDE and check how much it simplifies (almost like how I used to ‘intelligently’ guess solutions to my Organic Chemistry objective examinations).&lt;/p&gt;
&lt;p&gt;The first heuristic and the easiest (according to Maple) involves assuming one of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y)&quot; class=&quot;latex&quot; title=&quot;\xi(x,y)&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y)&quot; class=&quot;latex&quot; title=&quot;\eta(x,y)&quot; /&gt; to be zero and the other to be a function of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; or &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt;. This gives us four possibilities&lt;/p&gt;
&lt;p&gt;1.  &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29%3D0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y)=0&quot; class=&quot;latex&quot; title=&quot;\xi(x,y)=0&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2C+y%29%3Df%28x%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x, y)=f(x)&quot; class=&quot;latex&quot; title=&quot;\eta(x, y)=f(x)&quot; /&gt;&lt;br /&gt;
2.  &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2Cy%29%3D0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x,y)=0&quot; class=&quot;latex&quot; title=&quot;\xi(x,y)=0&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2C+y%29%3Df%28y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x, y)=f(y)&quot; class=&quot;latex&quot; title=&quot;\eta(x, y)=f(y)&quot; /&gt;&lt;br /&gt;
3.  &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29%3D0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y)=0&quot; class=&quot;latex&quot; title=&quot;\eta(x,y)=0&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2C+y%29%3Df%28x%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x, y)=f(x)&quot; class=&quot;latex&quot; title=&quot;\xi(x, y)=f(x)&quot; /&gt;&lt;br /&gt;
4. &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%28x%2Cy%29%3D0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta(x,y)=0&quot; class=&quot;latex&quot; title=&quot;\eta(x,y)=0&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%28x%2C+y%29%3Df%28y%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi(x, y)=f(y)&quot; class=&quot;latex&quot; title=&quot;\xi(x, y)=f(y)&quot; /&gt;&lt;/p&gt;
&lt;p&gt;I would explain how the first case works and the remaining would be self-inferred. Putting &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi&quot; class=&quot;latex&quot; title=&quot;\xi&quot; /&gt; as 0 and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta&quot; class=&quot;latex&quot; title=&quot;\eta&quot; /&gt; as &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%28x%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;f(x)&quot; class=&quot;latex&quot; title=&quot;f(x)&quot; /&gt; , the PDE reduces to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Bdf%7D%7Bdx%7D+-+f%2A%5Cfrac%7B%5Cpartial+h%7D%7B%5Cpartial+y%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{df}{dx} - f*\frac{\partial h}{\partial y}&quot; class=&quot;latex&quot; title=&quot;\frac{df}{dx} - f*\frac{\partial h}{\partial y}&quot; /&gt; . Clearly to solve for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;f&quot; class=&quot;latex&quot; title=&quot;f&quot; /&gt; easily, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B%5Cpartial+h%7D%7B%5Cpartial+y%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{\partial h}{\partial y}&quot; class=&quot;latex&quot; title=&quot;\frac{\partial h}{\partial y}&quot; /&gt; should be a function of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; for the ODE to be solved easily , since &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt; is dependent on &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt;. The same logic applies to the other four assumptions. I also wrote a small function called &lt;strong&gt;checkinfosol &lt;/strong&gt;that checks if the infinitesimals actually satisfy the PDE. Works fine for now!. On a side note, I just began working on the second heuristic and it seems that they are getting more challenging and I cannot afford to slack any more.&lt;/p&gt;
&lt;p&gt;For those who are interested in the source-code, &lt;a href=&quot;https://github.com/sympy/sympy/pull/2143&quot; title=&quot;https://github.com/sympy/sympy/pull/2143&quot;&gt;https://github.com/sympy/sympy/pull/2143&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;P.S : Sorry, my posts are getting really TL;DR. Too much of this and I’ll consider renaming my blog TL;DR&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/manojbits.wordpress.com/487/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/manojbits.wordpress.com/487/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=manojbits.wordpress.com&amp;amp;blog=31971756&amp;amp;post=487&amp;amp;subd=manojbits&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Tue, 11 Jun 2013 15:19:23 +0000</pubDate>
</item>
<item>
	<title>Sachin Joglekar: Some basic math</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-5472769892551526876.post-1891387405387454939</guid>
	<link>http://codesachin.blogspot.com/2013/06/some-basic-math.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;As suggested by Gilbert, I am uploading some hand-written notes I made about the entry-level math involved in coding framework Prasoon and I are talking of building. This DID help to some extent as a form of revision and cleared up some basics in my own brain.&lt;br /&gt;I guess I should do this more often. I have practically lost the skill of writing things down since my tenth grade.&lt;br /&gt;(By the way, &lt;a href=&quot;http://en.wikipedia.org/wiki/Frame_of_reference#Different_aspects_of_.22frame_of_reference.22&quot;&gt;this&lt;/a&gt; is a good article to refer to, if you are interested in knowing the conceptual differences between Reference Frames and Coordinate Systems)&lt;br /&gt;&lt;br /&gt;&lt;div style=&quot;clear: both; text-align: center;&quot; class=&quot;separator&quot;&gt;&lt;a style=&quot;margin-left: 1em; margin-right: 1em;&quot; href=&quot;http://3.bp.blogspot.com/-UbyDmfew4gc/UbXd4k80nhI/AAAAAAAAABU/DYG6jcInnHA/s1600/page1.jpg&quot;&gt;&lt;img width=&quot;232&quot; src=&quot;http://3.bp.blogspot.com/-UbyDmfew4gc/UbXd4k80nhI/AAAAAAAAABU/DYG6jcInnHA/s320/page1.jpg&quot; border=&quot;0&quot; height=&quot;320&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;clear: both; text-align: center;&quot; class=&quot;separator&quot;&gt;&lt;a style=&quot;margin-left: 1em; margin-right: 1em;&quot; href=&quot;http://1.bp.blogspot.com/-ftX8-2PjV8c/UbXd2yqhQLI/AAAAAAAAABM/jAUYiVu1ckA/s1600/page2.jpg&quot;&gt;&lt;img width=&quot;232&quot; src=&quot;http://1.bp.blogspot.com/-ftX8-2PjV8c/UbXd2yqhQLI/AAAAAAAAABM/jAUYiVu1ckA/s320/page2.jpg&quot; border=&quot;0&quot; height=&quot;320&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;clear: both; text-align: center;&quot; class=&quot;separator&quot;&gt;&lt;a style=&quot;margin-left: 1em; margin-right: 1em;&quot; href=&quot;http://2.bp.blogspot.com/-mquqpPiUYkE/UbXd5Fw76sI/AAAAAAAAABc/ljiv3tyNyQE/s1600/page3.jpg&quot;&gt;&lt;img width=&quot;232&quot; src=&quot;http://2.bp.blogspot.com/-mquqpPiUYkE/UbXd5Fw76sI/AAAAAAAAABc/ljiv3tyNyQE/s320/page3.jpg&quot; border=&quot;0&quot; height=&quot;320&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;clear: both; text-align: center;&quot; class=&quot;separator&quot;&gt;&lt;a style=&quot;margin-left: 1em; margin-right: 1em;&quot; href=&quot;http://4.bp.blogspot.com/-qD-iOfp8qm4/UbXd9FQeGcI/AAAAAAAAABk/eCghnefSzw0/s1600/page4.jpg&quot;&gt;&lt;img width=&quot;232&quot; src=&quot;http://4.bp.blogspot.com/-qD-iOfp8qm4/UbXd9FQeGcI/AAAAAAAAABk/eCghnefSzw0/s320/page4.jpg&quot; border=&quot;0&quot; height=&quot;320&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;clear: both; text-align: center;&quot; class=&quot;separator&quot;&gt;&lt;a style=&quot;margin-left: 1em; margin-right: 1em;&quot; href=&quot;http://2.bp.blogspot.com/-Ya_PyvlPME0/UbXeAO8QPKI/AAAAAAAAAB0/O8dxsXKglcE/s1600/page5.jpg&quot;&gt;&lt;img width=&quot;232&quot; src=&quot;http://2.bp.blogspot.com/-Ya_PyvlPME0/UbXeAO8QPKI/AAAAAAAAAB0/O8dxsXKglcE/s320/page5.jpg&quot; border=&quot;0&quot; height=&quot;320&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;clear: both; text-align: center;&quot; class=&quot;separator&quot;&gt;&lt;a style=&quot;margin-left: 1em; margin-right: 1em;&quot; href=&quot;http://4.bp.blogspot.com/-e0h5mPrEln8/UbXd_cUxyCI/AAAAAAAAABs/wgpwHfZfQCw/s1600/page6.jpg&quot;&gt;&lt;img width=&quot;232&quot; src=&quot;http://4.bp.blogspot.com/-e0h5mPrEln8/UbXd_cUxyCI/AAAAAAAAABs/wgpwHfZfQCw/s320/page6.jpg&quot; border=&quot;0&quot; height=&quot;320&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;span style=&quot;background-color: white; color: #333333; font-family: Helvetica, arial, freesans, clean, sans-serif; font-size: 15px; line-height: 25px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;br /&gt;&lt;/div&gt;</description>
	<pubDate>Mon, 10 Jun 2013 14:11:47 +0000</pubDate>
	<author>noreply@blogger.com (Sachin Joglekar)</author>
</item>
<item>
	<title>Saurabh Jha: Introduction and Week 1 progress</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-2736678015821545355.post-7082268022627225306</guid>
	<link>http://sympymatrix.blogspot.com/2013/06/introduction-and-week-1-progress.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;&lt;b&gt;Introduction:&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;My name is Saurabh Jha. I am working on making Sympy matrix module fast. My plan is described in [1].  More broadly, the objectives of my work are--&lt;br /&gt;&lt;br /&gt;&lt;ul style=&quot;text-align: left;&quot;&gt;&lt;li&gt;To add support of domains to matrix module so that it achieves speed up in algorithm.&lt;/li&gt;&lt;li&gt;To make a better and more uniform interface of matrix module. &lt;/li&gt;&lt;/ul&gt;&lt;br /&gt;&lt;b&gt;Progress this week:&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;&lt;ul style=&quot;text-align: left;&quot;&gt;&lt;li&gt;Fixed row and column methods of SparseMatrix class. Earlier it was giving wrong answers.[2]&lt;/li&gt;&lt;li&gt;Made row_list and col_list more efficient. Earlier the running time of these operations for an m*n matrix with nnz non-zero elements was theta(m*n). I replaced that with the new code whose running time is theta(nnz). This way we can avoid redundant look ups of all rows and columns.[2]&lt;/li&gt;&lt;li&gt;Added a new method nnz in sparse matrix which returns the number of non-zero elements of sparse matrix[3]&lt;/li&gt;&lt;li&gt;Added a function for converting Dictionary Representation of sparse matrices to Compressed Sparse Row(CSR).[3]&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;br /&gt;I learned some key lessons from last week's work. I may be wrong here, but you can afford to be wrong when there are people around to correct you :) :&lt;br /&gt;&lt;br /&gt;&lt;ul style=&quot;text-align: left;&quot;&gt;&lt;li&gt;SparseMatrix methods should depend upon number of non-zero elements and not on number of rows and columns.  For a matrix of low sparsity, this will be way more efficient than alternative row/column based algorithms.&lt;/li&gt;&lt;li&gt;Coding in this phase should be done keeping in mind that from top level they are not supposed to be use. Work should be done keeping speed in mind and not usability.&lt;/li&gt;&lt;li&gt;Work should be done such that it is reusable in other parts of sympy, like I am using domains of Polys module.&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;Next week, I am going to bite the bullet and work on incorporating domains in the operations of matrices. The operations will be implemented as functions first and then these functions will be used in the methods of matrices.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[1] http://www.google-melange.com/gsoc/proposal/review/google/gsoc2013/saurabh_jha/11001&lt;/div&gt;&lt;div&gt;[2] https://github.com/sympy/sympy/pull/2157&lt;/div&gt;&lt;div&gt;[3] https://github.com/sympy/sympy/pull/2162&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;</description>
	<pubDate>Sun, 09 Jun 2013 17:11:42 +0000</pubDate>
	<author>noreply@blogger.com (Saurabh Jha)</author>
</item>
<item>
	<title>Sachin Joglekar: sympy.logic - Part 2</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-5472769892551526876.post-1456269826368465167</guid>
	<link>http://codesachin.blogspot.com/2013/06/sympylogic-part-2.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;(contd from last post)&lt;br /&gt;Ok. A little late on this one. As promised, the part-2 about the features of sympy.logic, one of the lesser-used modules of sympy.logic. Today's post contains information about some stuff that was there before I worked on the module, and some stuff that we worked in. Anyways, here goes-&lt;br /&gt;&lt;br /&gt;&lt;h4 style=&quot;text-align: left;&quot;&gt;IV) Equality of boolean expressions&lt;/h4&gt;This is a function that became quite a headache for us while were trying to implement it. We thought of many algorithms and kept refuting them, until we settled on a good one. I coded it, and Christopher improved it (based on the SymPy architecture) considerably. It may still have a few bugs (one is right &lt;a href=&quot;https://code.google.com/p/sympy/issues/detail?id=3499&amp;amp;q=bool_equal&amp;amp;colspec=ID%20Type%20Status%20Priority%20Milestone%20Reporter%20Summary%20Stars&quot;&gt;here&lt;/a&gt;), but it gets the job done nonetheless.&lt;br /&gt;&lt;br /&gt;Lets take an example to see how it works&lt;br /&gt;Take the function that I discussed in part I) of last post. Its SOP form was -&lt;br /&gt;&lt;span style=&quot;background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px;&quot;&gt;&lt;i&gt;Or(And(Not(a), d), And(c, d))&lt;/i&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: x-small;&quot;&gt;&lt;span style=&quot;line-height: 18px;&quot;&gt;and its POS form was-&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px;&quot;&gt;&lt;i&gt;And(Or(Not(a), c), d)&lt;/i&gt;&lt;/span&gt;&lt;br /&gt;Lets take the POS form to be &lt;i&gt;And(Or(Not(x), y), z), &lt;/i&gt;just to get a change of variables.&lt;br /&gt;&lt;br /&gt;So, function1 = &lt;i style=&quot;color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px;&quot;&gt;Or(And(Not(a), d), And(c, d)) &lt;/i&gt;&lt;span style=&quot;color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18px;&quot;&gt;and function2 = &lt;/span&gt;&lt;i&gt;And(Or(Not(x), y), z)&lt;/i&gt;&lt;br /&gt;According to the docstring of the bool_equal function, it &quot;Returns True if the two expressions represent the same logical behavior for some correspondence between the variables of each (which may be different)&quot;&lt;br /&gt;In the above functions, the mapping a : x, c : y, d : z will give the SAME outputs for every input for the variables (a,c,d) or (x,y,z). How do we check this equality?&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.logic import *&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; from sympy import symbols&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; a, c, d, x, y, z = symbols('a c d x y z')      &amp;lt;- Remember all SymPy variables are called Symbols?&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; function1 = Or(And(Not(a), d), And(c, d))&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; function2 = And(Or(Not(x), y), z)&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; bool_equal(function1, function2)&lt;br /&gt;&lt;br /&gt;Output - True&lt;br /&gt;&lt;br /&gt;Want to check the mapping?&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; bool_equal(function1, function2, info = True)&lt;br /&gt;(And(Or(Not(a), c), d), {c: y, a: x, d: z})&lt;br /&gt;&lt;br /&gt;If there is more than one mapping which may make the expressions equal, any ONE is returned. The function that is returned as the first return is the simplified version of the functions (in terms of one set of variables). As the function is already the simplest here, it gets returned as it is.&lt;br /&gt;&lt;br /&gt;&lt;h4 style=&quot;text-align: left;&quot;&gt;V) Inferences from knowledge bases&lt;/h4&gt;&lt;div&gt;This is a very handy feature of sympy.logic. It basically lets you 'tell it' a set of True boolean expressions, and then 'ask' it if a given input is True based on the 'knowledge' it has. First, let me introduce to two other logic classes in sympy.logic-&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Implies&lt;/div&gt;&lt;div&gt;&lt;i&gt;Implies(some expression, some expression)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Equivalent&lt;/div&gt;&lt;div&gt;&lt;i&gt;Equivalent(some expression, some expression)&lt;/i&gt;&lt;/div&gt;&lt;br /&gt;They behave exactly like the corresponding operators in logic theory. VERY useful when converting natural language statements to logic ones. They also let you convert them to And, Or and Not instances using &lt;i&gt;simplify_logic&lt;/i&gt; or &lt;i&gt;to_dnf&lt;/i&gt; or &lt;i&gt;to_cnf&lt;/i&gt; functions.Ok, now about KBs-&lt;br /&gt;The API is as follows-&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.logic.inference import PropKB&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.abc import x, y&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; l = PropKB()&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; l.tell(x &amp;amp; ~y)&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; l.ask(x)&lt;br /&gt; True&lt;br /&gt;&lt;br /&gt;Did you see what it did there? It returns True for any statement thats satisfiable given the statements it is 'told'.&lt;br /&gt;&lt;br /&gt;One more thing.&lt;br /&gt;&lt;br /&gt;One inefficient way to check if a statement y is &lt;i&gt;valid&lt;/i&gt; given a set of statements x1, x2, ... xn is using the Implies class and simplify_logic.&lt;br /&gt;Just use the following function -&lt;br /&gt;&lt;br /&gt;def check_validity(statements, check):&lt;br /&gt;      statements = simplify_logic(And(*statements))&lt;br /&gt;&lt;span style=&quot;white-space: pre;&quot; class=&quot;Apple-tab-span&quot;&gt;      &lt;/span&gt;output = simplify_logic(Implies(statements, check))&lt;br /&gt;&lt;span style=&quot;white-space: pre;&quot; class=&quot;Apple-tab-span&quot;&gt;      &lt;/span&gt;if output != True:&lt;br /&gt;&lt;span style=&quot;white-space: pre;&quot; class=&quot;Apple-tab-span&quot;&gt;            &lt;/span&gt;output = False&lt;br /&gt;&lt;span style=&quot;white-space: pre;&quot; class=&quot;Apple-tab-span&quot;&gt;      &lt;/span&gt;return statements, output&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; check_validity([x|y], x)&lt;br /&gt;(Or(x, y), False)&lt;br /&gt;&lt;br /&gt;It will return the simplified version of the ANDing of all the statements in the first input, and the validity of the 'check' statement.&lt;br /&gt;&lt;br /&gt;How did I use the above function in Database Systems? Put all the known functional dependencies in the 'statements' input and the dependency to be checked in the 'check' input (in the form of &lt;i&gt;Implies&lt;/i&gt; objects). If the second output was not True, that would mean the functional dependency does not hold. Ofcourse there are better ways of doing this, but well, I had little time and I wanted to check some stuff pronto.&lt;br /&gt;&lt;br /&gt;Anyways, thats all I have about sympy.logic. If you want to know more, the source is &lt;a href=&quot;https://github.com/sympy/sympy/tree/master/sympy/logic&quot;&gt;here&lt;/a&gt;. Do have a look.&lt;br /&gt;&lt;br /&gt;&lt;h4 style=&quot;text-align: left;&quot;&gt;GSoC update - &lt;/h4&gt;&lt;div&gt;The whole of last week was spent deciding the API of our work on frames, coordinate systems and vectors with Stefan, Prasoon and Gilbert. We have a consensus on some things now, and I am likely to start working this week on a new class to depict ScalarFields in n-dimensional space. I will post the progress by the end of next week, and I hope I will have substantial stuff to write about. Excited. Definitely. Cheers!&lt;/div&gt;&lt;/div&gt;</description>
	<pubDate>Sat, 08 Jun 2013 13:09:01 +0000</pubDate>
	<author>noreply@blogger.com (Sachin Joglekar)</author>
</item>
<item>
	<title>Sachin Joglekar: sympy.logic - Part 1</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-5472769892551526876.post-4236705420325481102</guid>
	<link>http://codesachin.blogspot.com/2013/06/sympylogic-part-1.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;As I have mentioned before, my first work for SymPy was for its logic module. Most of it took inspiration from the digital design and CS-Logic classes I took in my 3rd semester at college. In this post and the next I will try to explain some of the cool features of this module that I have used applied in useful ways.&lt;br /&gt;&lt;br /&gt;Note - Quite a bit of this work was done just a few months back by Christopher Smith(&lt;a href=&quot;https://github.com/smichr&quot;&gt;smichr&lt;/a&gt;) and me, and hence is NOT included in the lastest version of SymPy(0.7.2), but will find its way into SymPy 0.7.3. Therefore, there is no documentation on the official website also. However, interested people can fork the SymPy source from its &lt;a href=&quot;https://github.com/sympy/sympy&quot;&gt;github repo&lt;/a&gt; - There is enough of in-code docs to help you.&lt;br /&gt;&lt;br /&gt;&lt;h4 style=&quot;text-align: left;&quot;&gt;I) Using the truth table to find SOP/POS form &lt;/h4&gt;This is quite useful in digital design, and I myself used this quite a few number of times during my course.&lt;br /&gt;Suppose you have to find the SOP (sum of products) form of a boolean function that has the following specs-&lt;br /&gt;1. &lt;i&gt;The variables (literals) are a,b,c and d&lt;/i&gt;.&lt;br /&gt;2. &lt;i&gt;The function MUST return True for the following combinations (in order-a,b,c,d)&lt;/i&gt;-&lt;br /&gt;0,0,0,1&lt;br /&gt;0,0,1,1&lt;br /&gt;0,1,1,1&lt;br /&gt;1,0,1,1&lt;br /&gt;1,1,1,1&lt;br /&gt; where 0-false and 1-true&lt;br /&gt;3. &lt;i&gt;The function may give True or False (a dont-care) for the following combinations&lt;/i&gt;-&lt;br /&gt;0,0,0,0&lt;br /&gt;0,0,1,0&lt;br /&gt;0,1,0,1&lt;br /&gt;&lt;br /&gt;For those of you who may ask WHY we won't care. Simple- These combinations will never occur in our application if used rightly, OR we dont' care about the output even if they do. For example, a function that deals with binary representations of digits from 0-9 will not care about the inputs from 1001, as they will not occur in operation.&lt;br /&gt;4. &lt;i&gt;All the rest of the combinations must return False&lt;/i&gt;&lt;br /&gt;&lt;br /&gt;Python session for this? Here it is -&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.logic import SOPform&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; minterms = [[0, 0, 0, 1], [0, 0, 1, 1], [0, 1, 1, 1], [1, 0, 1, 1], [1, 1, 1, 1]]&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; dontcares = [[0, 0, 0, 0], [0, 0, 1, 0], [0, 1, 0, 1]]&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; SOPform(['a','b','c','d'], minterms, dontcares)&lt;br /&gt;&lt;br /&gt;Output - Or(And(Not(a), d), And(c, d))&lt;br /&gt;&lt;br /&gt;POS form?&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.logic import POSform&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; POSform(['a','b','c','d'], minterms, dontcares)&lt;br /&gt;&lt;br /&gt;Output - And(Or(Not(a), c), d)&lt;br /&gt;&lt;br /&gt;&lt;h4 style=&quot;text-align: left;&quot;&gt;II) Simplification of boolean expressions&lt;/h4&gt;&lt;div&gt;Suppose you want to simplify a cumbersome boolean expression to something simple. How?&lt;/div&gt;&lt;div&gt;Use simplify_logic.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;Example expression&lt;/i&gt; --&amp;gt; &quot;&lt;span style=&quot;background-color: #efefff; padding-left: 1pt; padding-right: 1pt; text-decoration: overline; white-space: nowrap;&quot; class=&quot;invert&quot;&gt;AB&lt;/span&gt;&lt;span style=&quot;background-color: #efefff; white-space: nowrap;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;background-color: #efefff; padding-left: 1pt; padding-right: 1pt; text-decoration: overline; white-space: nowrap;&quot; class=&quot;invert&quot;&gt;A&lt;/span&gt;&lt;span style=&quot;background-color: #efefff; white-space: nowrap;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;background-color: #efefff; white-space: nowrap;&quot;&gt;+ B)&lt;/span&gt;&quot; [Symbols take their usual meaning]&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;On paper, you will have to take the following steps-&lt;/div&gt;&lt;div&gt;&lt;table style=&quot;background-color: #efefff; margin: 10pt;&quot; class=&quot;simex&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;padding-right: 20pt; vertical-align: baseline; white-space: nowrap;&quot; class=&quot;step&quot;&gt;&lt;span style=&quot;padding-left: 1pt; padding-right: 1pt; text-decoration: overline;&quot; class=&quot;invert&quot;&gt;AB&lt;/span&gt;(&lt;span style=&quot;padding-left: 1pt; padding-right: 1pt; text-decoration: overline;&quot; class=&quot;invert&quot;&gt;A&lt;/span&gt; + B)&lt;/td&gt;&lt;td style=&quot;vertical-align: baseline;&quot; class=&quot;just&quot;&gt;&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;padding-right: 20pt; vertical-align: baseline; white-space: nowrap;&quot; class=&quot;step&quot;&gt;(&lt;span style=&quot;padding-left: 1pt; padding-right: 1pt; text-decoration: overline;&quot; class=&quot;invert&quot;&gt;A&lt;/span&gt; + &lt;span style=&quot;padding-left: 1pt; padding-right: 1pt; text-decoration: overline;&quot; class=&quot;invert&quot;&gt;B&lt;/span&gt;)(&lt;span style=&quot;padding-left: 1pt; padding-right: 1pt; text-decoration: overline;&quot; class=&quot;invert&quot;&gt;A&lt;/span&gt; + B)&lt;/td&gt;&lt;td style=&quot;vertical-align: baseline;&quot; class=&quot;just&quot;&gt;DeMorgan's Law&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;padding-right: 20pt; vertical-align: baseline; white-space: nowrap;&quot; class=&quot;step&quot;&gt;&lt;span style=&quot;padding-left: 1pt; padding-right: 1pt; text-decoration: overline;&quot; class=&quot;invert&quot;&gt;A&lt;/span&gt; + &lt;span style=&quot;padding-left: 1pt; padding-right: 1pt; text-decoration: overline;&quot; class=&quot;invert&quot;&gt;B&lt;/span&gt;B&lt;/td&gt;&lt;td style=&quot;vertical-align: baseline;&quot; class=&quot;just&quot;&gt;Distributive law. This step uses the fact that or distributes over and. It can look a bit strange since addition does not distribute over multiplication.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;padding-right: 20pt; vertical-align: baseline; white-space: nowrap;&quot; class=&quot;step&quot;&gt;&lt;span style=&quot;padding-left: 1pt; padding-right: 1pt; text-decoration: overline;&quot; class=&quot;invert&quot;&gt;A&lt;/span&gt;&lt;/td&gt;&lt;td style=&quot;vertical-align: baseline;&quot; class=&quot;just&quot;&gt;Complement, Identity.&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;SymPy console session?&lt;br /&gt;&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.logic import simplify_logic&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; to_be_simplified = '~(A &amp;amp; B) &amp;amp; (~A | B)'&lt;br /&gt;&amp;gt;&amp;gt;&amp;gt; simplify_logic(to_be_simplified)&lt;br /&gt;Output - Not(A)&lt;br /&gt;&lt;br /&gt;Period.&lt;br /&gt;&lt;h4 style=&quot;text-align: left;&quot;&gt;III) Conversion between cnf and dnf forms&lt;/h4&gt;&lt;div&gt;Conversion of boolean expressions to CNF or DNF forms is also possible.&lt;/div&gt;&lt;div&gt;The code to do this is quite simple -&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.logic.boolalg import to_dnf&lt;/div&gt;&lt;div&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.abc import A, B, C, D&lt;/div&gt;&lt;div&gt;&amp;gt;&amp;gt;&amp;gt; to_dnf(B &amp;amp; (A | C))&lt;/div&gt;&lt;div&gt;    &lt;/div&gt;&lt;div&gt;Output - Or(And(A, B), And(B, C))&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;sympy.abc generates 'symbols' - Variables that can be used to denote any value. The entire framework of SymPy is based on the concept of Symbols (hence, Symbolic-Py)&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Thats all for now. In the next post, I will continue with some other features like boolean equality mapping and checking for true-ness of a statement given a set of statements (and using it to find redundancies in databases).&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;</description>
	<pubDate>Fri, 07 Jun 2013 14:22:39 +0000</pubDate>
	<author>noreply@blogger.com (Sachin Joglekar)</author>
</item>
<item>
	<title>Manoj Kumar: Solving general PDE’s in SymPy</title>
	<guid isPermaLink="false">http://manojbits.wordpress.com/?p=438</guid>
	<link>http://manojbits.wordpress.com/2013/06/03/solving-general-pdes-in-sympy/</link>
	<description>&lt;p&gt;Hello, I have decided to start my official work for my GSoC project. This post would be slightly TL;DR , so please bear with me.&lt;/p&gt;
&lt;p&gt;1. The first step was to wrap up the work on my previous PR, I had added a hint such that SymPy can now solve general partial differential equations with constant coefficients.  The mentioned Partial Differential Equation is of the form &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+x%7D+%2B+b%2A%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+y%7D+%2B+c%2Af+%3DG%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{\partial f}{\partial x} + b*\frac{\partial f}{\partial y} + c*f =G(x,y)&quot; class=&quot;latex&quot; title=&quot;\frac{\partial f}{\partial x} + b*\frac{\partial f}{\partial y} + c*f =G(x,y)&quot; /&gt; where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;f&quot; class=&quot;latex&quot; title=&quot;f&quot; /&gt; is a function of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=G&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;G&quot; class=&quot;latex&quot; title=&quot;G&quot; /&gt; can be any arbitrary function in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt;.&lt;/p&gt;
&lt;p&gt;The implementation is discussed as follows, it can be separated into a general part and homogeneous part. The homogeneous part of course is  &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a%2A%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+x%7D+%2B+b%2A%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+y%7D+%2B+c%2Af+&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;a*\frac{\partial f}{\partial x} + b*\frac{\partial f}{\partial y} + c*f &quot; class=&quot;latex&quot; title=&quot;a*\frac{\partial f}{\partial x} + b*\frac{\partial f}{\partial y} + c*f &quot; /&gt;and the general part is when you add the function &lt;img src=&quot;http://s0.wp.com/latex.php?latex=G%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;G(x,y)&quot; class=&quot;latex&quot; title=&quot;G(x,y)&quot; /&gt; and the solution would be when you add the general part and homogeneous part.&lt;/p&gt;
&lt;p&gt;So how does one solve the homogeneous part. It beats me too. I had referred this book “Partial Differential Equations by Viktor Grigoryan” and this is what he says in the book.  Before I go into the details of the implementation, it is important to review a few concepts that I had studied in my Math-1 Course in college.&lt;/p&gt;
&lt;p&gt;a] &lt;strong&gt;Directional Derivatives&lt;/strong&gt; -  All of us know that a derivative is the rate of change of  a function. &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+x%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{\partial f}{\partial x}&quot; class=&quot;latex&quot; title=&quot;\frac{\partial f}{\partial x}&quot; /&gt; is the rate of change in the x direction, similarly &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+y%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{\partial f}{\partial y}&quot; class=&quot;latex&quot; title=&quot;\frac{\partial f}{\partial y}&quot; /&gt;  is the rate of change in the y direction. Suppose one wants to find the rate of change in an arbitrary direction say , this is the way to proceed. We find the dot product between the unit vector which gives the direction , and the gradient of the function, which would give the rate of change of function in the direction &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7Bv%7D%7B%7Cv%7C%7D.%28%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+x%7D%5Chat%7Bi%7D+%2B+%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+y%7D%5Chat%7Bj%7D%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{v}{|v|}.(\frac{\partial f}{\partial x}\hat{i} + \frac{\partial f}{\partial y}\hat{j})&quot; class=&quot;latex&quot; title=&quot;\frac{v}{|v|}.(\frac{\partial f}{\partial x}\hat{i} + \frac{\partial f}{\partial y}\hat{j})&quot; /&gt; . The reasoning behind it? Well I’ll leave it to someday else.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Solving the homogeneous part&lt;/strong&gt; : Now take the Partial Differential Equation &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a%2A%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+x%7D+%2B+b%2A%5Cfrac%7B%5Cpartial+f%7D%7B%5Cpartial+y%7D+%2B+c%2Af&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;a*\frac{\partial f}{\partial x} + b*\frac{\partial f}{\partial y} + c*f&quot; class=&quot;latex&quot; title=&quot;a*\frac{\partial f}{\partial x} + b*\frac{\partial f}{\partial y} + c*f&quot; /&gt; . Our goal is to convert it this PDE in two variables into an ordinary differential equation, the first additive part can be written as directional derivative of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;f&quot; class=&quot;latex&quot; title=&quot;f&quot; /&gt; in the direction of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a%5Chat%7Bi%7D+%2B+b%5Chat%7Bj%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;a\hat{i} + b\hat{j}&quot; class=&quot;latex&quot; title=&quot;a\hat{i} + b\hat{j}&quot; /&gt; . It can be also seen the third part &lt;img src=&quot;http://s0.wp.com/latex.php?latex=c%2Af%28x%2Cy%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;c*f(x,y)&quot; class=&quot;latex&quot; title=&quot;c*f(x,y)&quot; /&gt; is independent of the derivative term. Just ignoring the third term for a moment, the first part becomes zero, which tells us that it would be convenient to change the co-ordinates from the &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt; to a system parallel to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a%5Chat%7Bi%7D+%2B+b%5Chat%7Bj%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;a\hat{i} + b\hat{j}&quot; class=&quot;latex&quot; title=&quot;a\hat{i} + b\hat{j}&quot; /&gt; and perpendicular to it. So we make the following substitutions&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cxi%3Da%2Ax%2Bby&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\xi=a*x+by&quot; class=&quot;latex&quot; title=&quot;\xi=a*x+by&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ceta%3Db%2Ax-a%2Ay&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\eta=b*x-a*y&quot; class=&quot;latex&quot; title=&quot;\eta=b*x-a*y&quot; /&gt; and yay the homogeneous PDE reduces to, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28a%5E%7B2%7D+%2B+b%5E%7B2%7D%29%2A%5Cfrac%7B%5Cpartial+u%7D%7B%5Cpartial+%5Cxi%7D+%2B+u%3D0&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;(a^{2} + b^{2})*\frac{\partial u}{\partial \xi} + u=0&quot; class=&quot;latex&quot; title=&quot;(a^{2} + b^{2})*\frac{\partial u}{\partial \xi} + u=0&quot; /&gt; . Do the substitutions yourself. It isn’t that difficult, and the ODE is variable separable and the solution is given by &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e%5E%7B-c%2F%28a%5E%7B2%7D+%2B+b%5E%7B2%7D%29%2A%28a%2Ax+%2B+b%2Ay%29%7D%2Af%28b%2Ax+-+a%2Ay%29&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;e^{-c/(a^{2} + b^{2})*(a*x + b*y)}*f(b*x - a*y)&quot; class=&quot;latex&quot; title=&quot;e^{-c/(a^{2} + b^{2})*(a*x + b*y)}*f(b*x - a*y)&quot; /&gt; . This solves the homogeneous part of the Partial Differential Equation&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Solving the general part : &lt;/strong&gt;The general Partial Differential Equation reduces to the form &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cfrac%7B%5Cpartial+u%7D%7B%5Cpartial+%5Cxi%7D+%2B%5Cfrac%7Bc%2Au%7D%7Ba%5E%7B2%7D+%2B+b%5E%7B2%7D%7D%3D+%5Cfrac%7BG%28%5Cxi+%2C+%5Ceta%29%7D%7Ba%5E%7B2%7D+%2B+b%5E%7B2%7D%7D&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\frac{\partial u}{\partial \xi} +\frac{c*u}{a^{2} + b^{2}}= \frac{G(\xi , \eta)}{a^{2} + b^{2}}&quot; class=&quot;latex&quot; title=&quot;\frac{\partial u}{\partial \xi} +\frac{c*u}{a^{2} + b^{2}}= \frac{G(\xi , \eta)}{a^{2} + b^{2}}&quot; /&gt; , which is a linear differential equation. The solution is given by,  &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e%5E%7B-c%2F%28a%5E%7B2%7D+%2B+b%5E%7B2%7D%29%2A%28a%2Ax+%2B+b%2Ay%29%7D%2A%5Cint%5Cfrac%7Be%5E%5Cfrac%7Bc%2A%5Cxi%7D%7Ba%5E%7B2%7D+%2B+b%5E%7B2%7D%7D%2AG%28%5Cxi+%2C+%5Ceta%29%7D%7Ba%5E%7B2%7D+%2B+b%5E%7B2%7D%7D%5C%2Cd%5Cxi&amp;amp;bg=fff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;e^{-c/(a^{2} + b^{2})*(a*x + b*y)}*\int\frac{e^\frac{c*\xi}{a^{2} + b^{2}}*G(\xi , \eta)}{a^{2} + b^{2}}\,d\xi&quot; class=&quot;latex&quot; title=&quot;e^{-c/(a^{2} + b^{2})*(a*x + b*y)}*\int\frac{e^\frac{c*\xi}{a^{2} + b^{2}}*G(\xi , \eta)}{a^{2} + b^{2}}\,d\xi&quot; /&gt;.&lt;/p&gt;
&lt;p&gt;The corresponding source code can be found here, for those who are interested &lt;a href=&quot;https://github.com/sympy/sympy/pull/2109&quot;&gt;https://github.com/sympy/sympy/pull/2109&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I’ve also finished work on implementing the first heuristic, however I did not want to squeeze it here, as the post is already going too big, I have to admit that the code was completely straightforward and formatting this post was a tougher task. So till next time.&lt;/p&gt;
&lt;p&gt;P.S : Going through emotional lows now which I wouldn’t want to mention here , just hoping tomorrow is better than today.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/manojbits.wordpress.com/438/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/manojbits.wordpress.com/438/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=manojbits.wordpress.com&amp;amp;blog=31971756&amp;amp;post=438&amp;amp;subd=manojbits&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Mon, 03 Jun 2013 14:36:30 +0000</pubDate>
</item>
<item>
	<title>Chetna Gupta: Structure Theorem to Support Trignomentric Extensions</title>
	<guid isPermaLink="false">http://geekiology.wordpress.com/?p=49</guid>
	<link>http://geekiology.wordpress.com/2013/06/03/structure-theorem-to-support-trignomentric-extensions/</link>
	<description>&lt;p&gt;As I have already started working on my google summer of code project that is Risch Algorithm in sympy’s codebase. Here I am to quick-start my work by drafting a theory which I need to implement in risch.py so as to complete my work in the pull request&lt;a href=&quot;https://github.com/sympy/sympy/pull/2049&quot; title=&quot;2049&quot;&gt;2049&lt;/a&gt;. Mostly my blog posts would be an extension to &lt;a href=&quot;http://asmeurersympy.wordpress.com&quot;&gt;Aaron’s blog&lt;/a&gt;, who has not only nicely implemented the risch algorithm in sympy but has also drafted and posted all the required updates and features currently available in the same. Risch gave a theorem and an algorithm that can find explicitly all the algebraic relations among a set of logarithms and exponentials over K(x) where K &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Csubset&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\subset&quot; class=&quot;latex&quot; title=&quot;\subset&quot; /&gt; C is finitely generated extension of Q. Applying this algorithm to the exponential and logarithmic functions ease the process of calculating integrals, by indefinitely manifolds. But inorder to support trigonometric extensions, trigonometric functions need to be converted to complex exponentials and logarithms, which yields complex algebraic relations among real elementary functions and indeed buggy and complex outputs, this is what i have already added to the code-base.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;A suitable example to show the complexity of the above situation is: &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cint+%5Cfrac%7B%5Ctan%28%5Cfrac%7B%5Carctan%28x%7D%7B3%7D%29%5E2+%2B+1+%7D%7Bx%5E2%7D&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\int \frac{\tan(\frac{\arctan(x}{3})^2 + 1 }{x^2}&quot; class=&quot;latex&quot; title=&quot;\int \frac{\tan(\frac{\arctan(x}{3})^2 + 1 }{x^2}&quot; /&gt;&lt;br /&gt; if converted to an integrand using complex exponentials and logs the above integral would be &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cint+%5Cfrac%7B4a%7D%7B%28x%5E2+%2B+1%29%28a+%2B+1%29%7D&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\int \frac{4a}{(x^2 + 1)(a + 1)}&quot; class=&quot;latex&quot; title=&quot;\int \frac{4a}{(x^2 + 1)(a + 1)}&quot; /&gt; where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%3D+e%5E-log%28%5Cfrac%7B%5Csqrt%28-1%29+%2B+x%7D%7B%5Csqrt%28-1%29+-x%7D%29%2F3&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;a = e^-log(\frac{\sqrt(-1) + x}{\sqrt(-1) -x})/3&quot; class=&quot;latex&quot; title=&quot;a = e^-log(\frac{\sqrt(-1) + x}{\sqrt(-1) -x})/3&quot; /&gt; that is &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%3D+%5Cfrac%7B%28%5Csqrt%28-1%29+%2B+x%29%7D%7B%28%5Csqrt%28-1%29+-+x%29%7D%5E-1%2F3+&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;a = \frac{(\sqrt(-1) + x)}{(\sqrt(-1) - x)}^-1/3 &quot; class=&quot;latex&quot; title=&quot;a = \frac{(\sqrt(-1) + x)}{(\sqrt(-1) - x)}^-1/3 &quot; /&gt;, applying Risch algorithm, would indeed return complex algebraic function. While y = &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Ctan%28%5Cfrac%7Barctan%28x%29%7D%7B3%7D%29&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;\tan(\frac{arctan(x)}{3})&quot; class=&quot;latex&quot; title=&quot;\tan(\frac{arctan(x)}{3})&quot; /&gt; is a real algebraic function satisfying  y^3 – 3xy^2 – 3y + x = 0 and the integrals is &lt;img src=&quot;http://s0.wp.com/latex.php?latex=3%5Ctan%28%5Cfrac%7B%5Carctan%28x%29%7D%7B3%7D%29&amp;amp;bg=ffffff&amp;amp;fg=444444&amp;amp;s=0&quot; alt=&quot;3\tan(\frac{\arctan(x)}{3})&quot; class=&quot;latex&quot; title=&quot;3\tan(\frac{\arctan(x)}{3})&quot; /&gt; Inorder to prevent the above and to come up with successful outputs for trigonometric extensions, we have &lt;a href=&quot;http://dl.acm.org/citation.cfm?id=74566&quot; title=&quot;Simplification of Real Elementary function Manuel Bronstien&quot;&gt;Simplification of Real Elementary function Manuel Bronstien&lt;/a&gt; to our rescue. Note this algorithm may fail if the constants introduced at various stages cause the structure of the constant field over Q to become unknown. In addition if a non-real complex constant is introduced then the theorem stated by Risch becomes invalid and we may have to revert back to its complex version. Such considerations do not appear as a limitation in practice , so we may not bother for them for now.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;As I would be looking into the implementation of core algorithm for the first time it may take me sometime to get in handy with all the awesome features of poly module that ease the work therefore I plan to start prior to the timeline, I would probably like to spend a week on implementation of the above. If this gets merged in the codebase I would be much ahead of the proposed timeline as in &lt;a href=&quot;http://www.google-melange.com/gsoc/proposal/review/google/gsoc2013/chetna/1&quot; title=&quot;Risch Algorithm Proposal&quot;&gt;Risch Algorithm Proposal&lt;/a&gt; Also I would start looking into the recognizing derivative part of the implementation which hinders the progress of most of the subsequent work by th next week.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;This is just the beginning so let me keep this short and put more details about the same as I progress in the implementation. See you soon&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/geekiology.wordpress.com/49/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/geekiology.wordpress.com/49/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=geekiology.wordpress.com&amp;amp;blog=36553244&amp;amp;post=49&amp;amp;subd=geekiology&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Mon, 03 Jun 2013 14:09:20 +0000</pubDate>
</item>
<item>
	<title>Varun Joshi: The Falling Ladder Problem using Kanes Method</title>
	<guid isPermaLink="false">https://sites.google.com/feeds/content/site/v9joshi/4285074273330833971</guid>
	<link>https://sites.google.com/site/v9joshi/gsoc-blog/thefallingladderproblemusingkanesmethod</link>
	<description>&lt;table cellspacing=&quot;0&quot; class=&quot;sites-layout-name-one-column sites-layout-hbox&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;sites-layout-tile sites-tile-name-content-1&quot;&gt;&lt;div dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;The problem stateme&lt;font size=&quot;3&quot;&gt;nt:&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;A ladder is resting against a frictionless wall and a frictionless floor.&lt;font size=&quot;3&quot;&gt; It falls under the influence of gravity.&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;a href=&quot;https://sites.google.com/site/v9joshi/gsoc-blog/thefallingladderproblemusingkanesmethod/Ladder%20Drawing.png?attredirects=0&quot;&gt;&lt;img src=&quot;https://sites.google.com/site/v9joshi/_/rsrc/1370057527357/gsoc-blog/thefallingladderproblemusingkanesmethod/Ladder%20Drawing.png&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;The length of the ladder, it's moment of inertia and it's mass are given to us. We need to find it's angular acceleration. I solved this using sympy.physics.mechanics in Python&lt;font size=&quot;3&quot;&gt; using &lt;font size=&quot;3&quot;&gt;Kane&lt;font size=&quot;3&quot;&gt;'s Method.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt; First we need to import the relevant functions from sympy and sympy.physics.mechanics&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt; &lt;/font&gt;from sympy import cos, expand, Matrix, sin, symbols&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt; from sympy.physics.mechanics import dynamicsymbols, ReferenceFrame, Point, RigidBody, KanesMethod, inertia, Particle&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;Then we need to define the variables of interest. These are the angle of the ladder &lt;font size=&quot;3&quot;&gt;from the X-axis and the Angular velocity of th&lt;font size=&quot;3&quot;&gt;e ladder.&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;theta&lt;/font&gt;, &lt;font size=&quot;3&quot;&gt;omega&lt;/font&gt; = dynamicsymbols('&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt; &lt;font size=&quot;3&quot;&gt;omega&lt;/font&gt;')&lt;br /&gt;&lt;br /&gt;N&lt;font size=&quot;3&quot;&gt;ext &lt;font size=&quot;3&quot;&gt;we define variable for the derivatives of these quantities.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;theta&lt;/font&gt;dot, &lt;font size=&quot;3&quot;&gt;omega&lt;/font&gt;dot = dynamicsymbols('&lt;font size=&quot;3&quot;&gt;thetadot&lt;/font&gt; &lt;font size=&quot;3&quot;&gt;omegadot&lt;/font&gt;', 1)&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;and &lt;font size=&quot;3&quot;&gt;define &lt;/font&gt;symbols for the known quantities, mass&lt;font size=&quot;3&quot;&gt;, length, gravitational acceleration&lt;/font&gt;&lt;/font&gt; and moment of Inertia.&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;m, l, g, I = symbols('m l g I')&lt;br /&gt;&lt;br /&gt;We define the inertial frame and a lean frame for the ladder&lt;br /&gt; &amp;gt;&amp;gt;N = ReferenceFrame('N')&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;L = N.orientnew('L', 'Axis', [&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt;, N.z])&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;and set the angular velocity and acceleration of the lean frame&lt;font size=&quot;3&quot;&gt;.&lt;/font&gt;&lt;/font&gt;&lt;br /&gt; &amp;gt;&amp;gt;L.set_ang_vel(N, &lt;font size=&quot;3&quot;&gt;omega&lt;/font&gt;*N.z)&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;L.set_ang_acc(N, L.ang_vel_in(N).dt(N)) # This line isn't necessary. The default value of angular acceleration is ang_vel_in(N).dt(N)&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;After this, we need to define some points&lt;font size=&quot;3&quot;&gt;, namely the origin of the system and the center of mass of the ladder&lt;font size=&quot;3&quot;&gt;,&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt; &amp;gt;&amp;gt;O = Point('O')&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;A = Point('A')&lt;br /&gt;&lt;br /&gt;and set their position and velocity. All positions here are relative, so we&lt;font size=&quot;3&quot;&gt; use O as the reference point. The velo&lt;font size=&quot;3&quot;&gt;city needs a frame of re&lt;font size=&quot;3&quot;&gt;ference &lt;font size=&quot;3&quot;&gt;to be completely de&lt;font size=&quot;3&quot;&gt;fine&lt;font size=&quot;3&quot;&gt;d.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt; &amp;gt;&amp;gt;A.set_pos(O, -l/2*cos(&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt;)*N.x + l/2*sin(&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt;)*N.y)&lt;br /&gt;&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;O.set_vel(N, 0)&lt;br /&gt; &amp;gt;&amp;gt;A.set_vel(N, l/2*u*sin(&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt;)*N.x + l/2*u*cos(&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt;)*N.y)&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;No&lt;font size=&quot;3&quot;&gt;w that we have all the details of the system, we can define the ladder as a rigid body.&lt;/font&gt;&lt;/font&gt;&lt;br /&gt; &amp;gt;&amp;gt;ladder = RigidBody('ladder', A, L, m, (inertia(L, 0, 0, I), A))&lt;br /&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;The inputs here are the &lt;font size=&quot;3&quot;&gt;name of the &lt;font size=&quot;3&quot;&gt;body, it's center of mass, &lt;font size=&quot;3&quot;&gt;the frame of reference it's fixed in, the mass of the body and a in&lt;font size=&quot;3&quot;&gt;ertia didactic. The inertia didactic can be crea&lt;font size=&quot;3&quot;&gt;ted using the inertia function. This needs the &lt;font size=&quot;3&quot;&gt;frame of reference where the inertia is being defined and the &lt;font size=&quot;3&quot;&gt;diagonal terms of the in&lt;font size=&quot;3&quot;&gt;ertia tensor. The inertia itse&lt;font size=&quot;3&quot;&gt;lf needs to be placed in a tuple &lt;font size=&quot;3&quot;&gt;alon&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;g with the point about which the&lt;font size=&quot;3&quot;&gt; in&lt;font size=&quot;3&quot;&gt;ertia&lt;/font&gt;&lt;/font&gt; is &lt;font size=&quot;3&quot;&gt;defined (the center of mass here).&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;&lt;/font&gt;The only external for&lt;font size=&quot;3&quot;&gt;ce on the system is &lt;font size=&quot;3&quot;&gt;the weight of the ladder, and it acts at the center of &lt;font size=&quot;3&quot;&gt;mass.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt; &lt;span&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;&lt;/span&gt;forceList = [(A, -m*g*N.y)]&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;font size=&quot;3&quot;&gt;The &lt;font size=&quot;3&quot;&gt;rest of the problem is based on the inputs &lt;font size=&quot;3&quot;&gt;to Kanes meth&lt;font size=&quot;3&quot;&gt;o&lt;font size=&quot;3&quot;&gt;d&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;. We need the kinematic differential equations and a&lt;font size=&quot;3&quot;&gt; list of the bodies.&lt;/font&gt;&lt;br /&gt; &amp;gt;&amp;gt;kin&lt;font size=&quot;3&quot;&gt;Diffs&lt;/font&gt; = [&lt;font size=&quot;3&quot;&gt;omega&lt;/font&gt; - &lt;font size=&quot;3&quot;&gt;the&lt;font size=&quot;3&quot;&gt;tadot&lt;/font&gt;&lt;/font&gt;]&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;bodyList = [ladder]&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;Finally we solve the dynamics.&lt;/font&gt;&lt;br /&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;kane&lt;/font&gt; = KanesMethod(N, q_ind = [&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt;], u_ind = [&lt;font size=&quot;3&quot;&gt;omega&lt;/font&gt;], kd_eqs = kin&lt;font size=&quot;3&quot;&gt;Diffs&lt;/font&gt;)&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;kane.&lt;/font&gt;kanes_equations(forceList, bodyList)&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;KM now contains all the information needed to &lt;font size=&quot;3&quot;&gt;solve the syste&lt;font size=&quot;3&quot;&gt;m. These are the mass matri&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;x,&lt;/font&gt; the forcing function&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt; and a &lt;font size=&quot;3&quot;&gt;dictionary that &lt;font size=&quot;3&quot;&gt;translates terms like d(&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt;)/dt &lt;font size=&quot;3&quot;&gt;to&lt;/font&gt; omega&lt;/font&gt;&lt;/font&gt;&lt;/font&gt; and vice versa.&lt;br /&gt;&lt;br /&gt; &amp;gt;&amp;gt;MM = &lt;font size=&quot;3&quot;&gt;kane&lt;/font&gt;.mass_matrix&lt;br /&gt; &amp;gt;&amp;gt;forcing = &lt;font size=&quot;3&quot;&gt;kane.&lt;/font&gt;forcing&lt;br /&gt;&lt;/font&gt;&lt;span&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;&lt;/span&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;kdd = &lt;font size=&quot;3&quot;&gt;k&lt;font size=&quot;3&quot;&gt;ane&lt;/font&gt;&lt;/font&gt;.kindiffdict()&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;The &lt;font size=&quot;3&quot;&gt;ODE can be written as MM*d(omega)/dt) = forcingfunction. Thi&lt;font size=&quot;3&quot;&gt;s means we can find &lt;font size=&quot;3&quot;&gt;d(omega)/dt as -&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;rhs = MM.inv()*forcing&lt;br /&gt; &amp;gt;&amp;gt;rhs = rhs.subs(kdd)&lt;br /&gt;&lt;span&gt;    &lt;/span&gt;&lt;br /&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;Finally, we ex&lt;font size=&quot;3&quot;&gt;pand the equation&lt;/font&gt; &lt;font size=&quot;3&quot;&gt;to get &lt;/font&gt;the r&lt;font size=&quot;3&quot;&gt;esult&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;span&gt; &lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt;&lt;/span&gt;rhs.ex&lt;font size=&quot;3&quot;&gt;pand()&lt;/font&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;font size=&quot;3&quot;&gt;-&lt;/font&gt;g*l*m*cos(&lt;font size=&quot;3&quot;&gt;theta&lt;/font&gt;)/(2*(I - l**2*m/4))&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;This problem was one of the questions in my Advanced Dynamics cl&lt;font size=&quot;3&quot;&gt;ass, so I know th&lt;font size=&quot;3&quot;&gt;at this solution is correct. We can integra&lt;font size=&quot;3&quot;&gt;te this in Matlab using the ode suite. &lt;font size=&quot;3&quot;&gt;For e.g. we can use &lt;font size=&quot;3&quot;&gt;ode45. Fo&lt;font size=&quot;3&quot;&gt;r this, we need to define the numbers for the &lt;font size=&quot;3&quot;&gt;problem&lt;font size=&quot;3&quot;&gt; and pack them so that we can pass them to the ODE file.&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt; &lt;/font&gt;m = 1; L = 1; g = 10; I = m*L^2/12;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt; params.m = m; params.I = I; params.L = L; params.g = g;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;Then we need to define the initial conditions of the system&lt;font size=&quot;3&quot;&gt; and the timespa&lt;font size=&quot;3&quot;&gt;n for integration.&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt; StateVar0 = [3*pi/4; 0];&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt;&lt;/font&gt; tmax  = &lt;font size=&quot;3&quot;&gt;10&lt;/font&gt;;&lt;br /&gt;&amp;gt;&amp;gt; tlist = linspace(0,tmax,1000);&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;I'm &lt;font size=&quot;3&quot;&gt;solving the system from 0 to 10 seconds with 1000 points of output. The 1000 is just a number I picked&lt;font size=&quot;3&quot;&gt;. Smaller numbers work just as well&lt;font size=&quot;3&quot;&gt; and w&lt;font size=&quot;3&quot;&gt;on&lt;font size=&quot;3&quot;&gt;'t affect the outp&lt;font size=&quot;3&quot;&gt;ut plots&lt;font size=&quot;3&quot;&gt; sin&lt;font size=&quot;3&quot;&gt;g&lt;font size=&quot;3&quot;&gt;nificantly.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;Next, set up the options &lt;font size=&quot;3&quot;&gt;for &lt;font size=&quot;3&quot;&gt;ode45 to fix the tolerances&lt;font size=&quot;3&quot;&gt;.&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt; options = odeset('reltol',1e-9,'abstol',1e-9);&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;I &lt;font size=&quot;3&quot;&gt;prefer using the anonymous functions to pass extra pa&lt;font size=&quot;3&quot;&gt;rameters to th&lt;font size=&quot;3&quot;&gt;e system.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&amp;gt;&amp;gt;&lt;font size=&quot;3&quot;&gt; &lt;/font&gt;TargetODE = @(t,statevars) SlidingLadder_ODE(t,statevars,params);&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;Finally we execute the code to get output.&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt; &lt;/font&gt;[tlist,statevars] = ode45(TargetODE,tlist,StateVar0,options);&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;The ODE file i&lt;font size=&quot;3&quot;&gt;tself&lt;font size=&quot;3&quot;&gt; is pretty easy to write in Matlab. We need to make it a function.&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;div style=&quot;margin-left: 80px;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;function [dstatevar] =SlidingLadder_ODE(t,statevar,params)&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;% Unpack params and statevars&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;m = params.m; g = params.g; I = params.I; L = params.L;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;theta = statevar(1);&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;dtheta = statevar(2);&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;% Determine derivatives&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;thetadot = dtheta;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;thetadotdot = -(g*L*cos(theta)/2)/(I + (m*(L^2)/4)); &lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;% Pack derivatives&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;dstatevar = [thetadot; thetadotdot];&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;end&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;This can also be done using anonymous functions&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&amp;gt;&amp;gt; &lt;font size=&quot;3&quot;&gt;SlidingLadder_ODE = &lt;font size=&quot;3&quot;&gt;@(t,statevar,params) [statevar(2); -(params.g*params.L*cos(statevar(1))/(2*(params.I + params&lt;font size=&quot;3&quot;&gt;.m*params.L^2/4))];&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;I've plotted the&lt;font size=&quot;3&quot;&gt; angle vs time in Matlab. Th&lt;font size=&quot;3&quot;&gt;is &lt;font size=&quot;3&quot;&gt;is&lt;/font&gt;&lt;/font&gt;&lt;font size=&quot;3&quot;&gt; &lt;font size=&quot;3&quot;&gt;shown below.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt; I've limited the output here using event detection to find when th&lt;font size=&quot;3&quot;&gt;e ladder &lt;font size=&quot;3&quot;&gt;hits the floor&lt;font size=&quot;3&quot;&gt;, i.e. when theta equals 180 degre&lt;font size=&quot;3&quot;&gt;es.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;a href=&quot;https://sites.google.com/site/v9joshi/gsoc-blog/thefallingladderproblemusingkanesmethod/Theta_vs_Time.png?attredirects=0&quot;&gt;&lt;img src=&quot;https://sites.google.com/site/v9joshi/_/rsrc/1367488313189/gsoc-blog/thefallingladderproblemusingkanesmethod/Theta_vs_Time.png&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;display: block; text-align: left;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</description>
	<pubDate>Sat, 01 Jun 2013 03:32:24 +0000</pubDate>
	<author>v9joshi@gmail.com (Varun Joshi)</author>
</item>
<item>
	<title>Varun Joshi: GSoC Application</title>
	<guid isPermaLink="false">https://sites.google.com/feeds/content/site/v9joshi/7226438567555829334</guid>
	<link>https://sites.google.com/site/v9joshi/gsoc-blog/gsocapplication</link>
	<description>&lt;table cellspacing=&quot;0&quot; class=&quot;sites-layout-name-one-column sites-layout-hbox&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;sites-layout-tile sites-tile-name-content-1&quot;&gt;&lt;div dir=&quot;ltr&quot;&gt;This is my application for GSoC. I have it up on Melange as well: &lt;a href=&quot;http://www.google-melange.com/gsoc/proposal/review/google/gsoc2013/v9joshi/1&quot;&gt;http://www.google-melange.com/gsoc/proposal/review/google/gsoc2013/v9joshi/1&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;font size=&quot;3&quot;&gt;&lt;b&gt;&lt;br /&gt;Title:&lt;font size=&quot;3&quot;&gt; &lt;/font&gt;&lt;/b&gt;&lt;font size=&quot;3&quot;&gt;Code Generation for sympy.physics.mechanics
&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;font size=&quot;3&quot;&gt;&lt;b&gt;Short Project Description&lt;/b&gt;&lt;/font&gt;:&lt;br /&gt;&lt;br /&gt;This feature would allow users to use ODE equations derived in sympy.physics.mechanics to generate files that work with numerical integration functions in Matlab, Python and other languages.&lt;br /&gt;&lt;br /&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;span style=&quot;font-size: small;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;About Me&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;span style=&quot;font-size: small;&quot;&gt;&lt;b&gt;Short Bio&lt;/b&gt;&lt;/span&gt;:
 I'm Varun Joshi, a first year Masters student in the Department of 
Mechanical and Aerospace Engineering at the Ohio State Univerity. I work
 in the Movement Lab at OSU where we study human movement in general and
 Human locomotion in specific, trying to answer questions about how and 
why we move the way we do.&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Over
 the course of my 5 year combined Bachelor's and Masters degree at the 
Indian Institute of Technology Madras I studied and worked on the 
kinematics of mechanisms with some minor application to the design of 
orthotic devices (passive splint like devices which help correcting 
errors in limb function).&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;During
 the first year of my Masters degree at OSU I've taken courses on 
Robotics, Biomechanics, Compliant Mechanisms, Advanced Dynamics and the 
Dynamics and Control of Human and Animal movement. Most of these courses
 involved project work simulating the dynamics of systems in Matlab.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: small;&quot;&gt;&lt;b&gt;Communications&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt;Email&lt;/b&gt;: &lt;a href=&quot;mailto:v9joshi@gmail.vom&quot;&gt;v9joshi@gmail.com&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt;Github&lt;/b&gt;: v9joshi&lt;/p&gt;&lt;p&gt;&lt;b&gt;IRC:&lt;/b&gt; v9joshi on freenode (Though I don't use IRC much) &lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt;Google Code&lt;/b&gt;: v9joshi&lt;/p&gt;&lt;p&gt;&lt;b&gt;Personal Website and Future Documentation site for GSoC&lt;/b&gt;: &lt;a href=&quot;https://sites.google.com/site/v9joshi/&quot; rel=&quot;nofollow&quot;&gt;https://sites.google.com/site/v9joshi/&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;A
 blog for GSoC has already been set up, with an example of the work I 
did this week to show the level of detail I would like to put into my 
documentation.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;span style=&quot;font-size: small;&quot;&gt;&lt;b&gt;Coding Platform: &lt;/b&gt;&lt;/span&gt;I
 use Ubuntu and Windows, but I mostly work in the Windows Environment 
because commercial software packages for Mechanical Engineering are 
usually built for it. I have spent a lot of time programming in Matlab, 
though I am familiar with Python, Mathematica and C, with my proficiency
 in these languages decreasing in the same order.&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;For
 editor's, I use the inbuilt Matlab editor in most of my work. For 
Python, I started using IEP recently because of it's similarities with 
the Matlab editor.&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: small;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: small;&quot;&gt;Favorite Feature of SymPy: &lt;/span&gt;&lt;/b&gt;I
 really like the Reference Frame class in sympy.physics.mechanics. I've derived the equations for the dynamics of a lot of systems by hand and using the Matlab 
symbolic toolbox. Using symbolic variables to represent rotations makes 
writing code and even thinking about systems a lot easier.&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;Programming Experience&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: small;&quot;&gt;Matlab: &lt;/span&gt;&lt;/b&gt;I
 wrote a 4-bar mechanism synthesis and analysis program for my Masters 
project. The code isn't hosted online and is a bit dated since Mathworks
 changed the behavior of the atan2 function.&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;I
 have also written several programs that solve and animate things like 
n-link pendulums, spinning tops and most recently a Slinky in 1-D.&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: small;&quot;&gt;&lt;b&gt;Python: &lt;/b&gt;&lt;/span&gt;I
 took a couple of Udacity courses last year to pick up Python and learn 
so more about AI. I these courses I have written a program that makes a 
self-driving car move around a given path, and one that simulates the 
dynamics of a spacecraft moving around the Earth using Eulers method for
 integration amongst others. &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;I
 opened Pull request #2033 to fix a bug and add a test to the acos class
 in the SymPy trigonometric functions. This has been merged into sympy.&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;I also opened Pull request #2067 to add an example/test for the kanes method in sympy.physics.mechanics.&lt;br /&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;Project&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;I
 would like to build features that produces numerically solvable ODE 
files for systems that have been derived symbolically using the sympy mechanics codes. Currently sympy generates diffrential equations for the system, but actually using these to model a system requires the user to manually input the equations into a numerical solver. This task is extremely common and would be a good addition to the current code generation methods in sympy.  &lt;br /&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;span style=&quot;font-size: small;&quot;&gt;&lt;b&gt;Goals:&lt;/b&gt;&lt;/span&gt;&lt;b&gt; &lt;/b&gt;There
 are many numerical integrators written in Python, Matlab, C and 
Fortran. The primary goal is to be able to create code to work with 
these numerical integrators that can be executed by the user to analyze 
and animate the dynamical system they are solving.&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt; As an example, if we have equations generated using the Lagrange's method in sympy.physics.mechanics&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt; lagrange_ode = LagrangesMethod(Lag, q)&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt; lagrange_ode.form_lagranges_equations()&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Where
 lagrange_ode now holds the equations for the system, say a Double 
Pendulum. Now, we want to make a Matlab files named DoublePendulum_root 
and DoublePendulum_ode to numerically integrate these equations using 
ode45. We would execute this as-&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;# Generate files for the Double Pendulum equations&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;odeFile = CodeGenerate.Write(lagrange_ode, 'DoublePendulum', 'matlab','ode45')&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Where odeFile contains the name of the output files as well as the method being used.&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;The
 secondary goal for this project is to use features based on Autowrap to
 execute this code from within Python and output the results&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;## Enter initial conditions in the order of the state variables given to LagrangeMethod&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;initialconditions = [0, 0, 0, 0]&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;## Enter extra variables like mass, gravitational acceleration and link lengths.&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;othervariables = ['m', 1, 'g', 9.81, 'l1', 1, 'l2', 1]&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;## Define the time span of integration through some method&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;timespan = numpy.linspace(0,1,10) # No equivalent Python function I could find&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;## Generate outputs&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;time, stateslist = odeFile.Execute(timespan, initialconditions, othervariables)&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Where time contains a list of times and stateslist is a list that contains a list of states corresponding to each statevariable.&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: small;&quot;&gt;Why did I choose to do this project&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;b&gt; &lt;/b&gt;While
 solving dynamics equations symbolically is very useful, it serves no 
purpose unless these solutions are then put through numerical 
integration to generate a motion given a set of initial conditions. 
Having spent a lot of time working these problems in Matlab, I would 
really like to see an implementation of this in Python. Being able to do
 it myself is an added bonus.&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&lt;b&gt;Proposed Schedule of work&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Before
 Summer: Use different ODE solvers and learn the basic structure for 
codes. Implement some of the examples from PyDy in these solvers and 
upload their results to the PyDy documentation.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt; &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Week 1 - Week 2: Write code generation methods for Matlab (since it is the language I am most familiar with) and test them.&lt;br /&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt; &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Week 3 - Week 4: Write Code generation functions for the Python ODE solvers.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt; &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Week 5 - Week 6: Write Code generation for C/Fortran ODE solvers&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt; &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Week 7 – Week 8: Polish up code, add test cases and integrate into SymPy.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt; &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;Week 9 – Week 11: Work on adding Autowrap based features with some basic plotting tools to generate output.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt; &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Week 12: Write examples for the Code Generation programs.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;I am completely open to changing the order of these segments especially since Python might be a better target for the first output class as it is easy to test in.&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: small;&quot;&gt;&lt;b&gt;Times I cannot work:&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-bottom: 0cm;&quot;&gt;I
 will be unable to work on this for 4-5 days while I attend the Dynamic 
Walking Conference at CMU from the 10 -13 of June. I should be able to 
stick to this schedule during the summer. If I am running behind, the 
Primary goal of Code Generation will take precedence over the Autowrap 
based features.&lt;/p&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</description>
	<pubDate>Fri, 31 May 2013 21:36:56 +0000</pubDate>
	<author>v9joshi@gmail.com (Varun Joshi)</author>
</item>
<item>
	<title>Katja Sophie Hotz: Hello everybody!</title>
	<guid isPermaLink="false">http://sophiessympyblog.wordpress.com/?p=33</guid>
	<link>http://sophiessympyblog.wordpress.com/2013/05/30/hello-everybody/</link>
	<description>&lt;p style=&quot;text-align: justify;&quot;&gt;My name is Katja Sophie Hotz and I am studying Technical Mathematics at the Vienna University of Technology in Austria. I am in the final year of my master’s and have specialized in Mathematics in Computer Science.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;In this blog I will document the progress on my Google summer of Code 2013 project with the title “Faster Algorithms for Polynomials over Algebraic Number Fields”.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;The goal of this project is the implementation of faster greatest common divisor and factorization algorithms for univariate and multivariate polynomials over algebraic number fields. This is important for symbolic integration of rational functions and simplification of expressions among other things.&lt;/p&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;For more information you can take a look at &lt;a href=&quot;https://github.com/sympy/sympy/wiki/GSoC-2013-Application-Katja-Sophie-Hotz:-Faster-Algorithms-for-Polynomials-over-Algebraic-Number-Fields&quot;&gt;my proposal&lt;/a&gt; on the SymPy Wiki.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/sophiessympyblog.wordpress.com/33/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/sophiessympyblog.wordpress.com/33/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=sophiessympyblog.wordpress.com&amp;amp;blog=53034828&amp;amp;post=33&amp;amp;subd=sophiessympyblog&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Thu, 30 May 2013 16:42:18 +0000</pubDate>
</item>
<item>
	<title>Thilina Rathnayake: Diophantine equations module for SymPy</title>
	<guid isPermaLink="false">http://theperceptiveway.wordpress.com/?p=2</guid>
	<link>http://theperceptiveway.wordpress.com/2013/05/29/diophantine-equations-module-for-sympy/</link>
	<description>&lt;p&gt;Hi Everyone !!! I am going to spend this summer doing my first open source project with &lt;a href=&quot;http://sympy.org/en/index.html&quot; target=&quot;_blank&quot; title=&quot;SymPy&quot;&gt;SymPy&lt;/a&gt;. I will work on creating a &lt;a href=&quot;http://en.wikipedia.org/wiki/Diophantine_equation&quot; target=&quot;_blank&quot;&gt;Diophantine Equation&lt;/a&gt; module. I hope this will be a nice and a very useful enhancement.&lt;/p&gt;
&lt;p&gt;The word “Diophantine” comes with the name Diophantus, a mathematician lived in the great city of Alexandria sometime around 250 AD. Often referred to as the “father of Algebra”, Diophantus in his famous work “Arithmetica” presented 150 problems that marked the early beginnings of number theory, the field of study about integers and their properties.&lt;/p&gt;
&lt;p&gt;We call a “Diophantine equation” to an equation of the form,&lt;br /&gt;
f(x1, x2, …. xn) = 0 where n &amp;gt;= 2 and x1, x2, … xn are integer variables. If we can find “n” integers a1, a2, … an which satisfy the above equation, we say that the equation is solvable. Three basic problems arise concerning Diophantine equations.&lt;/p&gt;
&lt;p&gt;1. Is the equation solvable?&lt;br /&gt;
2. In case of solvability, is the number of solutions finite or infinite?&lt;br /&gt;
3. If solvable can we find all of it’s solutions?&lt;/p&gt;
&lt;p&gt;I plan to implement following classical Diophantine equations which are found most often in number theory.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;1. a1x1 + a2x2 + a3x3  + …+ anxn = b (Linear Diophantine equation)&lt;br /&gt;
Here a1, a2, … an and b are constants. This solvable if gcd(a1, a2, …, an) divides b. Here gcd stands for greatest common divisor.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;2.  x1**2 +  x2**2 +  x3**2 + … xn**2 = k&lt;br /&gt;
Here k is an non negative integer. There will be a number of solutions depending on n and k.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;3. x1**2 + x2**2 + x3**2 + … xn**2 = xn+1**2 (Extension of Pythogorean equation)&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;4. x**2 + axy + y**2 = z**2&lt;br /&gt;
Here a is an integer constant.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;5. x**2 – Dy**2 = 1  (Simplified Pell’s equation)&lt;br /&gt;
Here D is a non square positive integer.&lt;/p&gt;
&lt;p dir=&quot;ltr&quot;&gt;If time permits, I hope to start on exponential Diophantine equations too.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/theperceptiveway.wordpress.com/2/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/theperceptiveway.wordpress.com/2/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=theperceptiveway.wordpress.com&amp;amp;blog=52956410&amp;amp;post=2&amp;amp;subd=theperceptiveway&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Wed, 29 May 2013 06:59:22 +0000</pubDate>
</item>
<item>
	<title>Manoj Kumar: GSoC 2013 with SymPy</title>
	<guid isPermaLink="false">http://manojbits.wordpress.com/?p=429</guid>
	<link>http://manojbits.wordpress.com/2013/05/28/gsoc-2013-with-sympy/</link>
	<description>&lt;p&gt;Hello. I’ve been lucky enough to be selected to do a project this summer for Sympy. This would be the project proposal that I would be working on, &lt;a href=&quot;https://google-melange.appspot.com/gsoc/proposal/review/google/gsoc2013/manojkumar/1&quot;&gt;Improved ODE Solver in SymPy&lt;/a&gt; and my mentor would be Sean Vig. The application process itself was a good learning experience for me, fixing bugs and adding enhancements and was probably one of the reasons I got selected. I hope to increase my programming abilities and contribute in a much bigger way this summer and work toward the development of SymPy. This would be my SymPy blog too, and I would posting atleast one update every week.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/manojbits.wordpress.com/429/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/manojbits.wordpress.com/429/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=manojbits.wordpress.com&amp;amp;blog=31971756&amp;amp;post=429&amp;amp;subd=manojbits&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Tue, 28 May 2013 15:22:30 +0000</pubDate>
</item>
<item>
	<title>Tarun Gaba</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-7526836182390500993.post-8278928756892309073</guid>
	<link>http://tarun-gaba.blogspot.com/2013/05/hello-world-this-is-my-first-attempt-to.html</link>
	<description>&lt;div style=&quot;text-align: left;&quot; dir=&quot;ltr&quot;&gt;&lt;h2 style=&quot;text-align: left;&quot;&gt;Hello World&lt;/h2&gt;&lt;div style=&quot;text-align: left;&quot;&gt;This is my first attempt to blogging. My blogging career(so as to say) marks with the selection in the Google Summer Of Code 2013, where I would be working in Python Software Foundation.&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;This blog will serve to provide an insight, and updates related to progress of my project, which would commence on 17th June.&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;Till then, waiting from my Google T-Shirt ...&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;Cheers. &lt;/div&gt;&lt;/div&gt;</description>
	<pubDate>Tue, 28 May 2013 08:45:34 +0000</pubDate>
	<author>noreply@blogger.com (TARUN GABA)</author>
</item>
<item>
	<title>Brian Granger: Will we ever get past classical physics?</title>
	<guid isPermaLink="false">http://www.brianegranger.com/?p=65</guid>
	<link>http://brianegranger.com/?p=65</link>
	<description>&lt;p&gt;As a university physics professor, I regularly teach introductory physics courses (both calculus and algebra based).  Most introductory physics textbooks cover the same set of topics:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Newtonian mechanics&lt;/li&gt;
&lt;li&gt;Waves and sound&lt;/li&gt;
&lt;li&gt;Thermodynamics&lt;/li&gt;
&lt;li&gt;Electromagnetism&lt;/li&gt;
&lt;li&gt;Optics&lt;/li&gt;
&lt;li&gt;Modern physics (relativity, atomic, nuclear, particle)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There is something puzzling but profound about this list of topics.  Why do I say this?  &lt;strong&gt;Most of this material is hundreds of years old. &lt;/strong&gt; Let’s think about this.&lt;/p&gt;
&lt;p&gt;Newton’s &lt;strong&gt;Principia&lt;/strong&gt; was published in 1687.  Maxwell’s &lt;strong&gt;On Physical Lines of Force&lt;/strong&gt; was published in 1861.  While there have been many advances in mechanics and electromagnetism since the 17th and 19th centuries, the material covered in introductory physics has been essentially unchanged for hundreds of years.  The same is largely true of thermodynamics and optics.&lt;/p&gt;
&lt;p&gt;What about the small number of topics listed under the heading “modern physics?”  As covered in the introductory physics textbooks and courses, most of this material is still about one hundred years old.  Thus, even though many of he most exciting discoveries in physics have taken place more recently (I am using “recently” very loosely here = the last 100 years) we don’t cover any of these things in our introductory physics classes.&lt;/p&gt;
&lt;p&gt;This has bothered me for a long time and I even feel like a bit of a heretic in bringing this up.  But I think this is a real problem.  Imagine introductory Astronomy without any images from the Hubble Space Telescope.  Imagine introductory Biology without a thorough treatment of DNA and genetics?  These things are laughable. You are probably thinking something like “that would be crazy, it would be so boring and students would be left with a horribly inaccurate impression of the subject.” What is so special about physics that we completely omit all of the spectacular discoveries of the last 100 years? Are students not suffering under this arrangement.&lt;/p&gt;
&lt;p&gt;Here are some of the reasons I have heard for not covering “more recent physics”:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span style=&quot;line-height: 14px;&quot;&gt;All of those engineering, chemistry, biology majors really, really need to know all of this classical physics.  The faculty in these other departments would protest loudly if we made any change.&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;These same majors don’t need to know anything about more recent physics.&lt;/li&gt;
&lt;li&gt;All of the more recent physics is horribly difficult and mathematical, beyond what is realistic to cover in an introductory class.&lt;/li&gt;
&lt;li&gt;To understand more recent physics, you first have to completely understand classical physics.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Do we really believe all of these reasons? Does this bother anyone else? What would it look like to begin to change our introductory physics courses to address this problem?&lt;/p&gt;</description>
	<pubDate>Thu, 23 May 2013 22:04:19 +0000</pubDate>
</item>
<item>
	<title>Fabian Pedregosa: Numerical optimizers for Logistic Regression</title>
	<guid isPermaLink="false">tag:fabianp.net/blog,2013-05-20:2013/numerical-optimizers-for-logistic-regression/</guid>
	<link>http://fabianp.net/blog/2013/numerical-optimizers-for-logistic-regression/</link>
	<description>&lt;p&gt;Following a challenge proposed by &lt;a href=&quot;http://gael-varoquaux.info&quot;&gt;Gael&lt;/a&gt; to &lt;a href=&quot;https://team.inria.fr/parietal/&quot;&gt;my
group&lt;/a&gt; I compared several implementations of
Logistic Regression. The task was to implement a Logistic Regression model
using standard optimization tools from &lt;code&gt;scipy.optimize&lt;/code&gt; and compare
them against state of the art implementations such as
&lt;a href=&quot;http://www.csie.ntu.edu.tw/~cjlin/liblinear/&quot;&gt;LIBLINEAR&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In this blog post I'll write down all the implementation details of this
model, in the hope that not only the conclusions but also the process would be
useful for future comparisons and benchmarks.&lt;/p&gt;
&lt;h2&gt;Function evaluation&lt;/h2&gt;
&lt;p&gt;The loss function for the $\ell_2$-regularized logistic regression, i.e. the
function to be minimized is&lt;/p&gt;
&lt;p&gt;$$
\mathcal{L}(w, \lambda, X, y) = - \sum_{i=1}^n \log(\phi(y_i w^T X_i)) + \lambda w^T w
$$&lt;/p&gt;
&lt;p&gt;where $\phi(t) = 1. / (1 + \exp(-t))$ is the &lt;a href=&quot;http://en.wikipedia.org/wiki/Logistic_function&quot;&gt;logistic
function&lt;/a&gt;, $\lambda w^T w$ is
the regularization term and $X, y$ is the input data, with $X \in
\mathbb{R}^{n \times p}$ and $y \in \{-1, 1\}^n$. However, this formulation is
not great from a practical standpoint. Even for not unlikely values of $t$
such as $t = -100$, $\exp(100)$ will overflow, assigning the loss an
(erroneous) value of $+\infty$. For this reason &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, we evaluate
$\log(\phi(t))$ as&lt;/p&gt;
&lt;p&gt;$$
\log(\phi(t)) = 
\begin{cases}
- \log(1 + \exp(-t)) \text{ if } t &amp;gt; 0 \\
t - \log(1 + \exp(t)) \text{ if } t \leq 0\\
\end{cases}
$$&lt;/p&gt;
&lt;p&gt;The gradient of the loss function is given by&lt;/p&gt;
&lt;p&gt;$$
\nabla_w \mathcal{L} = \sum_{i=1}^n y_i X_i (\phi(y_i w^T X_i) - 1) + \lambda w
$$&lt;/p&gt;
&lt;p&gt;Similarly, the logistic function $\phi$ used here can be computed in a more
stable way using the formula&lt;/p&gt;
&lt;p&gt;$$
\phi(t) = \begin{cases}
1 / (1 + \exp(-t)) \text{ if } t &amp;gt; 0 \\
\exp(t) / (1 + \exp(t)) \text{ if } t \leq 0\\
\end{cases}
$$&lt;/p&gt;
&lt;p&gt;Finally, we will also need the Hessian for some second-order methods, which is given by&lt;/p&gt;
&lt;p&gt;$$
\nabla_w ^2 \mathcal{L} = X^T D X + \lambda I
$$&lt;/p&gt;
&lt;p&gt;where $I$ is the identity matrix and $D$ is a diagonal matrix given by $D_{ii} = \phi(y_i w^T X_i)(1 - \phi(y_i w^T X_i))$.&lt;/p&gt;
&lt;p&gt;In Python, these function can be written as&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;phi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# logistic function, returns 1 / (1 + exp(-t))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dtype&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;exp_t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp_t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# logistic loss function, returns Sum{-log(phi(t))}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;yz&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yz&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros_like&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;gradient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# gradient of the logistic loss&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;z0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;grad&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grad&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hessian&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# hessian of the logistic loss&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;wa&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Hs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Hs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Benchmarks&lt;/h2&gt;
&lt;p&gt;I tried several methods to estimate this $\ell_2$-regularized logistic regression. There is
one first-order method (that is, it only makes use of the gradient and not of
the Hessian), &lt;a href=&quot;http://en.wikipedia.org/wiki/Nonlinear_conjugate_gradient_method&quot;&gt;Conjugate
Gradient&lt;/a&gt;
whereas all the others are &lt;a href=&quot;http://en.wikipedia.org/wiki /Quasi-Newton_methods&quot;&gt;Quasi-Newton methods&lt;/a&gt;. The method I tested are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CG&lt;/strong&gt; = Conjugate Gradient as implemented in &lt;code&gt;scipy.optimize.fmin_cg&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TNC&lt;/strong&gt; = Truncated Newton as implemented in &lt;code&gt;scipy.optimize.fmin_tnc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BFGS&lt;/strong&gt; = Broyden–Fletcher–Goldfarb–Shanno method, as implemented in &lt;code&gt;scipy.optimize.fmin_bfgs&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;L-BFGS&lt;/strong&gt; = Limited-memory &lt;a href=&quot;http://en.wikipedia.org/wiki/BFGS_method&quot;&gt;BFGS&lt;/a&gt; as implemented in &lt;code&gt;scipy.optimize.fmin_l_bfgs_b&lt;/code&gt;. Contrary to the BFGS algorithm, which is written in Python, this one wraps a C implementation.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Trust Region&lt;/strong&gt; = Trust Region Newton method &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. This is the solver used by &lt;a href=&quot;http://www.csie.ntu.edu.tw/~cjlin/liblinear/&quot;&gt;LIBLINEAR&lt;/a&gt; that I've wrapped to accept any Python function in the package &lt;a href=&quot;http://github.com/fabianp/pytron/&quot;&gt;pytron&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To assure the most accurate results across implementations, all timings were
collected by callback functions that were called from the algorithm on each
iteration. Finally, I plot the maximum absolute value of the gradient (=the
infinity norm of the gradient) with respect to time.&lt;/p&gt;
&lt;p&gt;The synthetic data used in the benchmarks was generated as described in &lt;sup id=&quot;fnref:2&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:2&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; and consists
primarily of the design matrix $X$ being Gaussian noise, the vector of
coefficients is drawn also from a Gaussian distribution and the explained
variable $y$ is generated as $y = \text{sign}(X w)$. We then perturb matrix
$X$ by adding Gaussian noise with covariance 0.8. The number of samples and features
was fixed to $10^4$ and $10^3$ respectively. The penalization parameter $\lambda$ was
fixed to 1.&lt;/p&gt;
&lt;p&gt;In this setting variables are typically uncorrelated and most solvers perform
decently:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/comparison_logistic_corr_0.png&quot; alt=&quot;Benchmark Logistic&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Here, the Trust Region and L-BFGS solver perform almost equally good, with
Conjugate Gradient and Truncated Newton falling shortly behind. I was surprised
by the difference between BFGS and L-BFGS, I would have thought that when memory was not an issue both algorithms should perform similarly.&lt;/p&gt;
&lt;p&gt;To make things more interesting, we now make the design to be slightly more
correlated. We do so by adding a constant term of 1 to the matrix $X$ and
adding also a column vector of ones this matrix to account for the intercept. These are the results:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/comparison_logistic_corr_1.png&quot; alt=&quot;Benchmark Logistic&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Here, we already see that second-order methods dominate over first-order
methods (well, except for BFGS), with Trust Region clearly dominating the
picture but with TNC not far behind.&lt;/p&gt;
&lt;p&gt;Finally, if we force the matrix to be even more correlated (we add 10. to the
design matrix $X$), then we have:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/comparison_logistic_corr_10.png&quot; alt=&quot;Benchmark Logistic&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Here, the Trust-Region method has the same timing as before, but all other
methods have got substantially worse.The Trust Region
method, unlike the other methods is surprisingly robust to correlated designs.&lt;/p&gt;
&lt;p&gt;To sum up, the Trust Region method performs extremely well for optimizing the
Logistic Regression model under different conditionings of the design matrix.
The &lt;a href=&quot;http://www.csie.ntu.edu.tw/~cjlin/liblinear/&quot;&gt;LIBLINEAR&lt;/a&gt; software uses
this solver and thus has similar performance, with the sole exception that the
evaluation of the logistic function and its derivatives is done in C++ instead
of Python. In practice, however, due to the small number of iterations of this
solver I haven't seen any significant difference.&lt;/p&gt;
&lt;div class=&quot;footnote&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn:1&quot;&gt;
&lt;p&gt;A similar development can be found in the source code of &lt;a href=&quot;http://www.csie.ntu.edu.tw/~cjlin/liblinear/&quot;&gt;LIBLINEAR&lt;/a&gt;, and is probably also used elsewhere. &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:1&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 1 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:2&quot;&gt;
&lt;p&gt;&quot;A comparison of numerical optimizers for logistic regression&quot;, P. Minka, &lt;a href=&quot;http://research.microsoft.com/en-us/um/people/minka/papers/logreg/&quot;&gt;URL&lt;/a&gt; &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:2&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 2 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:3&quot;&gt;
&lt;p&gt;&quot;Newton's Method for Large Bound-Constrained Optimization Problems&quot;, Chih-Jen Lin, Jorge J. More &lt;a href=&quot;http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.45.7340&quot;&gt;URL&lt;/a&gt; &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:3&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 3 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:4&quot;&gt;
&lt;p&gt;&lt;a href=&quot;http://nbviewer.ipython.org/urls/raw.github.com/fabianp/pytron/master/doc/benchmark_logistic.ipynb&quot;&gt;IPython Notebook to reproduce the benchmarks&lt;/a&gt; &lt;a href=&quot;https://github.com/fabianp/pytron/blob/master/doc/benchmark_logistic.ipynb&quot;&gt;source&lt;/a&gt; &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:4&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 4 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
	<pubDate>Sun, 19 May 2013 22:00:00 +0000</pubDate>
</item>
<item>
	<title>Chetna Gupta: Risch Algorithm for symbolic integration</title>
	<guid isPermaLink="false">http://geekiology.wordpress.com/?p=21</guid>
	<link>http://geekiology.wordpress.com/2013/05/16/parametric-problems-in-risch-differential-equations/</link>
	<description>&lt;p&gt;hey bloggie howz you !&lt;/p&gt;
&lt;p&gt;I guess you would be a very nice friend to me for the next few months as i plan to work on improvisation and improvement of risch differential equations in sympy’s codebase&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Hope i don’t bore you much &lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/geekiology.wordpress.com/21/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/geekiology.wordpress.com/21/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=geekiology.wordpress.com&amp;amp;blog=36553244&amp;amp;post=21&amp;amp;subd=geekiology&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Thu, 16 May 2013 10:54:39 +0000</pubDate>
</item>
<item>
	<title>Varun Joshi: Work before the official GSoC period</title>
	<guid isPermaLink="false">https://sites.google.com/feeds/content/site/v9joshi/7599203297249873306</guid>
	<link>https://sites.google.com/site/v9joshi/gsoc-blog/workbeforetheofficialgsocperiod</link>
	<description>&lt;table cellspacing=&quot;0&quot; class=&quot;sites-layout-name-one-column sites-layout-hbox&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;sites-layout-tile sites-tile-name-content-1&quot;&gt;&lt;div dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;So far I have submitted a Pull request to SymPy&lt;font size=&quot;3&quot;&gt; (&lt;/font&gt;&lt;a href=&quot;https://github.com/sympy/sympy/pull/2033&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;Pull request #2033&lt;/a&gt;&lt;font size=&quot;3&quot;&gt;) and started getting used to the &lt;font size=&quot;3&quot;&gt;coding st&lt;font size=&quot;3&quot;&gt;yle. I've done some examples in Sym&lt;font size=&quot;3&quot;&gt;Py and in &lt;font size=&quot;3&quot;&gt;Sympy.physics.mechanics as well. It seems to be going well. G&lt;font size=&quot;3&quot;&gt;SoC will be completely different though. A lot harder for one.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;I've
 spent a large chunk of the past week working on course projects for my 
Advanced Dynamics and Human Movement courses. These projects are 
summarized below.&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;b&gt;1&lt;/b&gt;. &lt;b&gt;Advanced Methods in the Dynamics and Control of Human and Animal Movement&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;The
 goal of the project was to recreate stair climbing like behavior of 
human beings using a double pendulum. The fixed pivot of the pendulum 
acts like a foot, the first joint like an ankle and the second joint 
like a knee. The dynamics of this system were solved using the symbolic 
toolbox in Matlab. Using these equations I set up an ODE file to actuate
 the pendulum joints.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;After
 creating this basic simulation, the next step was to integrate this 
into a full fledged simulation involving piecewise linear torque 
actuation over a period of time. This simulation was animated to observe
 the effects of the input and the behavior of the system. We need to 
make the end-point of this system move a fixed distance along the X and Y
 axes to simulate something like walking. To do so we need to find the 
correct piecewise linear torques. We can use the fsolve function in 
Matlab to determine these piecewise linear torques, but the solutions 
will be non-unique since we haven't picked two specific points we just 
want the displacement vector to be correct.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;In
 order to get a unique solution we need to minimize some property of the
 system. One possible quantity to minimize is Energy. This is a quantity
 that many people in the Biomechanics field believe to be what human 
movement tries to minimize. A good estimate of energy is the integral of
 the summation of torques squared over time. We could of course 
integrate the absolute value of torque times omega over time as well, 
but this quantity would take longer to calculate. &lt;br /&gt;&lt;br /&gt;Apart from 
this cost we also need to select constraints to make the motion look 
realistic. These constraints include things like 'The lower leg cannot 
rotate 360 degrees', 'The knee has limited movement range', 'We need to 
stand stably', 'The foot cannot pull the body nto the floor'. Each of 
these must be translated into a quantifiable constraint. For e.g. we can
 use angular acceleration, angular velocity and angular position to 
determine the reaction force at our ankle pivot using the ODE file. Our 
constraint for 'The foot cannot pull the body into the floor' now 
translates to 'The Y-component of the reaction force at the ankle must 
always be greater than zero'.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;Now
 that we have a cost function and a set of constraints, we can use some 
sort of optimization to solve for the correct set of piecewise linear 
torques. This was done using the fmincon function in Matlab. The step 
length, step height and time to step are the major parameters of this 
system. We can vary them to get different solutions to the problem. 
Fixed system parameters include masses, lengths and moments of inertia. 
These are used to model specific human anatomies. Data for these were 
taken from a Biomechanics text book (reference in included in the 
attached presentation). All values in code were non-dimensionalized to 
allow for easy scaling. &lt;br /&gt;&lt;br /&gt;Now that our system has been 
parametrized and optimized, we can run the optimization for different 
values and see how the cost and output motion scale with them. For e.g. 
we might expect the costs to be higher for larger distances (this is 
shown in the results). We can also use this to answer questions like &quot;Do
 we push off with the back leg while climbing steps or is the entire 
motion driven by ankle and knee torques from the leading leg&quot;. The 
second question was my motivation for doing this topic because I've 
always felt I climbed stairs inefficiently.&lt;br /&gt;&lt;br /&gt;I presented some 
results for this project to the class on Monday. The presentation is 
attached. All solutions were not globally optimal (convergence is a 
problem in systems like these). I picked what looked like Globally 
optimal solutions (and what I found were the globally optimal solutions 
in repeated runs of the code). &lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;Seems
 like pushing off with the back leg is useful, but the speeds are way 
too high. This might be because I made the system climb the steps in a 
very very short period of time. convergence for larger time is pretty 
horrible.&lt;br /&gt;&lt;br /&gt;&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;b&gt;2. Advanced Dynamics&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;I
 chose to work on a project for this on my own. In hindsight that might 
have been a bad idea. I could have saved myself a lot of trouble by 
working in a group. In the end though, things worked out. I managed half
 of my goals at least, and made reasonable progress towards the second 
half.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;The
 goal with this project was to simulate 1-D and 2-D behavior of a 
Slinky. Not as easy as I thought it would be. I'll begin with the 1-D 
behavior.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;In
 1 dimension, the slinky is essentially a series of masses connected 
with springs and dampers (everything is damped in real life, which is 
why energy is not conserved). This is easy to simulate, especially in 
1-D. The problem with the Slinky however is that there are collisions 
between masses as well. The behavior of the Slinky is very reliant on 
these collisions. A good example is the Slinky drop experiment : &lt;a href=&quot;https://www.youtube.com/watch?v=8UimHnsWSBc&quot;&gt;https://www.youtube.com/watch?v=8UimHnsWSBc&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;Explaining
 the Slink Drop: The coils of the Slinky don't fall down simultaneously.
 This is a result of the spring force acting on them. If you consider a 
Slinky suspended from a point. Any coil selected amongst the many is in 
Static Equilibrium. This means the sum of all forces on it is 0 
(Newton's Second Law). If you release the topmost coil, then it is not 
longer in equilibrium and it starts to fall. The second link however 
still has a force balance. This is because while the top link has 
started descending, it hasn't descended. This means the spring 
connecting coils 1 and 2 is still at the same length it was at. This 
length being the amount sufficient to keep the rest of the Slinky at 
rest (i.e. the weight of the rest of the Slinky). When this length 
reduces (that takes a finite time) the second coil is no longer 
statically balanced and starts accelerating. The same phenomenon extends
 to the rest of the coils. The longer the slinky the more these finite 
time events add up, and this leads to the large scale effects in the 
Slinky Drop.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;So,
 since the lower links on the Slinky take a little more time to begin 
speeding up, this means they are falling slower than the links above 
them. This means they will collide. I decided to model the collision as 
inelastic, i.e. the two coils stick together and move at the same 
velocity after the collision while conserving linear momentum (no 
external forces over an infinitesimal time). This was a bad move because
 it didn't damp out oscillations in the Slinky and I wound up breaking 
the dynamic model because ODE45 didn't detect events well. &lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;This
 lead me to another idea, using stiff springs and dampers to model 
collisions. As long as the springs are made stiffer while they do not 
hold energy (length is 0) this makes sense. It doesn't make sense in 
other cases because we would effectively be adding energy to the system.
 So now we have a good collision model as well. This one works very well
 in Matlab. Animations showed the same result as the Slinky drop and 
that was good.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;Here's the plot&lt;font size=&quot;3&quot;&gt; of integrated da&lt;font size=&quot;3&quot;&gt;ta for an &lt;font size=&quot;3&quot;&gt;5&lt;/font&gt;0 &lt;font size=&quot;3&quot;&gt;point mass example&lt;font size=&quot;3&quot;&gt;. An explanation follows.&lt;br /&gt;&lt;br /&gt;&lt;div style=&quot;display: inline; float: left; margin: 5px 10px 0px 0px;&quot;&gt;&lt;a href=&quot;https://sites.google.com/site/v9joshi/gsoc-blog/workbeforetheofficialgsocperiod/50points.tif?attredirects=0&quot;&gt;          &lt;/a&gt;&lt;br /&gt;&lt;a href=&quot;https://sites.google.com/site/v9joshi/gsoc-blog/workbeforetheofficialgsocperiod/50points.tif?attredirects=0&quot;&gt;     &lt;img width=&quot;400&quot; src=&quot;https://sites.google.com/site/v9joshi/_/rsrc/1367465828426/gsoc-blog/workbeforetheofficialgsocperiod/50points.tif&quot; border=&quot;0&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;div style=&quot;display: inline; float: left; margin: 5px 10px 0px 0px;&quot;&gt;&lt;a href=&quot;https://sites.google.com/site/v9joshi/gsoc-blog/workbeforetheofficialgsocperiod/50points.tif?attredirects=0&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://sites.google.com/site/v9joshi/gsoc-blog/workbeforetheofficialgsocperiod/50points%20Top%20vs%20Bottom.tif?attredirects=0&quot;&gt;&lt;img width=&quot;400&quot; src=&quot;https://sites.google.com/site/v9joshi/_/rsrc/1367465849052/gsoc-blog/workbeforetheofficialgsocperiod/50points%20Top%20vs%20Bottom.tif&quot; border=&quot;0&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;The &lt;font size=&quot;3&quot;&gt;image on the left &lt;/font&gt;shows the velocities and po&lt;font size=&quot;3&quot;&gt;sitions of the top and bottom coil. When the top coil is releas&lt;font size=&quot;3&quot;&gt;ed&lt;font size=&quot;3&quot;&gt;, it start&lt;font size=&quot;3&quot;&gt;s falling.&lt;font size=&quot;3&quot;&gt; The bo&lt;font size=&quot;3&quot;&gt;tt&lt;font size=&quot;3&quot;&gt;om point however waits for the top point to slam into it before it falls. T&lt;font size=&quot;3&quot;&gt;h&lt;font size=&quot;3&quot;&gt;is particular simulation also included a collision with the groun&lt;font size=&quot;3&quot;&gt;d at t = 12 seconds.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt; After this collision th&lt;font size=&quot;3&quot;&gt;e &lt;font size=&quot;3&quot;&gt;bottom point stays stuc&lt;font size=&quot;3&quot;&gt;k to the ground, but the top point lifts &lt;font size=&quot;3&quot;&gt;up and then settles down again.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;font size=&quot;3&quot;&gt;The image &lt;font size=&quot;3&quot;&gt;on the right&lt;/font&gt;&lt;/font&gt; shows the same data for all the points. It's hard to unders&lt;font size=&quot;3&quot;&gt;tand, bu&lt;font size=&quot;3&quot;&gt;t you can trust me and accept that it is correct.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt; &lt;font size=&quot;3&quot;&gt;It essentially shows that &lt;font size=&quot;3&quot;&gt;a lower point doe&lt;font size=&quot;3&quot;&gt;sn't cross one a&lt;font size=&quot;3&quot;&gt;bove it&lt;font size=&quot;3&quot;&gt; except &lt;font size=&quot;3&quot;&gt;for that little re&lt;font size=&quot;3&quot;&gt;gion after the ground collision, but that can be fixed by tuning the collision parameters a bit more.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;Modelling
 a Slinky in 2-D is worse if that were possible. Collisions in 2-D are 
annoying unless you choose your systems well. Out of several options, I 
decided that an n-link pendulum with a torsional spring and a torsional 
damper at each joint was the best choice because collisions would occur 
when the relative angles became 0 (this is a lot like the 1-D model).&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;Unfortunately
 I did not have enough time to do this part of the project well. I did 
however produce walking like behavior in a 2-D Slinky by using the model
 and initial conditions from this paper - &lt;a href=&quot;http://ajp.aapt.org/resource/1/ajpias/v78/i1/p35_s1?&quot; rel=&quot;nofollow&quot;&gt;http://ajp.aapt.org/resource/1/ajpias/v78/i1/p35_s1?&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;The presentation for this is also attached.&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;I'm
 still figuring out Matlab's frames to movie functions. When I manage to
 convert my animations to movies, I'll update this entry with them.&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: verdana,sans-serif;&quot;&gt;&lt;font size=&quot;3&quot;&gt;&lt;br /&gt;&lt;br /&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</description>
	<pubDate>Mon, 06 May 2013 06:27:55 +0000</pubDate>
	<author>v9joshi@gmail.com (Varun Joshi)</author>
</item>
<item>
	<title>Fabian Pedregosa: Logistic Ordinal Regression</title>
	<guid isPermaLink="false">tag:fabianp.net/blog,2013-05-02:2013/logistic-ordinal-regression/</guid>
	<link>http://fabianp.net/blog/2013/logistic-ordinal-regression/</link>
	<description>&lt;p&gt;&lt;strong&gt;TL;DR: I've implemented a logistic ordinal regression or
  proportional odds model. &lt;a href=&quot;http://github.com/fabianp/minirank/blob/master/minirank/logistic.py&quot;&gt;Here is the Python code&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;logistic ordinal regression&lt;/em&gt; model, also known as the
proportional odds was introduced in the early 80s by McCullagh [&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, &lt;sup id=&quot;fnref:2&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:2&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;]
and is a generalized linear model specially tailored for the case of
predicting ordinal variables, that is, variables that are discrete (as
in classification) but which can be ordered (as in regression). It can
be seen as an extension of the logistic regression model to the
ordinal setting. &lt;/p&gt;
&lt;p&gt;Given $X \in \mathbb{R}^{n \times p}$ input data and $y \in
\mathbb{N}^n$ target values. For simplicity we assume $y$ is a
non-decreasing vector, that is, $y_1 \leq y_2 \leq ...$. Just as the
logistic regression models posterior probability $P(y=j|X_i)$ as the
logistic function, in the logistic ordinal regression we model the
&lt;em&gt;cummulative&lt;/em&gt; probability as the logistic function. That is,&lt;/p&gt;
&lt;p&gt;$$
P(y \leq j|X_i) = \phi(\theta_j - w^T X_i) = \frac{1}{1 + \exp(w^T X_i - \theta_j)}
$$&lt;/p&gt;
&lt;p&gt;where $w, \theta$ are vectors to be estimated from the data and $\phi$
is the logistic function defined as $\phi(t) = 1 / (1 + \exp(-t))$.&lt;/p&gt;
&amp;lt;figure style=&quot;float: left; width: 380px; margin: 0px 15px 15px 0px&quot;&amp;gt;
&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/ordinal_1.png&quot; /&gt;
&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/ordinal_logistic.png&quot; /&gt;

&amp;lt;figcaption style=&quot;margin-left: 10px; margin-right: 5px&quot;&amp;gt;Toy example with three classes denoted in different colors. Also shown the vector of coefficients $w$ and the thresholds $\theta_0$ and $\theta_1$&amp;lt;/figcaption&amp;gt;

&amp;lt;/figure&amp;gt;

&lt;p&gt;Compared to multiclass logistic regression, we have added the
constrain that the hyperplanes that separate the different classes are
&lt;em&gt;parallel&lt;/em&gt; for all classes, that is, the vector $w$ is common across
classes. To decide to which class will $X_i$ be predicted we make use
of the vector of thresholds $\theta$. If there are $K$ different
classes, $\theta$ is a non-decreasing vector (that is, $\theta_1 \leq
\theta_2 \leq ... \leq \theta_{K-1}$) of size $K-1$. We will then
assign the class $j$ if the prediction $w^T X$ (recall that it's a
linear model) lies in the interval $[\theta_{j-1}, \theta_{j}[$. In
order to keep the same definition for extremal classes, we define
$\theta_{0} = - \infty$ and $\theta_K = + \infty$.&lt;/p&gt;
&lt;p&gt;The intuition is that we are seeking a vector $w$ such that $X w$
produces a set of values that are well separated into the different
classes by the different thresholds $\theta$. We choose a logistic
function to model the probability $P(y \leq j|X_i)$ but other choices
are possible. In the proportional hazards model &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; the probability
is modeled as $-\log(1 - P(y \leq j | X_i)) = \exp(\theta_j - w^T
X_i)$. Other link functions are possible, where the link function
satisfies $\text{link}(P(y \leq j | X_i)) = \theta_j - w^T X_i$. Under
this framework, the logistic ordinal regression model has a logistic
link function and the proportional hazards model has a log-log link
function.&lt;/p&gt;
&lt;p&gt;The logistic ordinal regression model is also known as the
proportional odds model, because the
&lt;a href=&quot;http://en.wikipedia.org/wiki/Odds_ratio&quot;&gt;ratio of corresponding odds&lt;/a&gt;
for two different samples $X_1$ and $X_2$ is $\exp(w^T(X_1 - X_2))$ and
so does not depend on the class $j$ but only on the difference between
the samples $X_1$ and $X_2$.&lt;/p&gt;
&lt;h3&gt;Optimization&lt;/h3&gt;

&lt;p&gt;Model estimation can be posed as an optimization problem. Here, we
minimize the loss function for the model, defined as minus the
log-likelihood:&lt;/p&gt;
&lt;p&gt;$\begin{align}
\mathcal{L}(w, \theta) &amp;amp;= - \sum_{i=1}^n \log(\phi(\theta_{y_i} - w^T X_i) -  \phi(\theta_{y_i -1} - w^T X_i)) \\
&amp;amp;= \sum_{i=1}^n w^T X_i  - \log(\exp(\theta_{y_i}) - \exp(\theta_{y_i-1}))  + \log(\phi(\theta_{y_i -1} - w^T X_i)) + \log(\phi(\theta_{y_i} - w^T X_i)) \\
\end{align}$&lt;/p&gt;
&lt;p&gt;In this sum all terms are convex on $w$, thus the loss function is
convex over $w$. It might be also jointly convex over $w$ and
$\theta$, although I haven't checked. I use the function
&lt;code&gt;fmin_slsqp&lt;/code&gt; in &lt;code&gt;scipy.optimize&lt;/code&gt; to optimize
$\mathcal{L}$ under the constraint that $\theta$ is a non-decreasing
vector. There might be better options, I don't know. If you do know,
please leave a comment!.&lt;/p&gt;
&lt;p&gt;Using the formula $\log(\phi(t))^\prime = (1 - \phi(t))$, we can compute the gradient of the loss function as &lt;/p&gt;
&lt;p&gt;$\begin{align}
\nabla_w \mathcal{L}(w, \theta) &amp;amp;= \sum_{i=1}^n X_i (1 - \phi(\theta_{y_i} - w^T X_i)) - \phi(\theta_{y_i-1} - w^T X_i)) \\
% \nabla_\theta \mathcal{L}(w, \theta) &amp;amp;= \sum_{i=1}^n - \frac{e_{y_i} \exp(\theta_{y_i}) - e_{y_i -1} \exp(\theta_{y_i -1})}{\exp(\theta_{y_i}) - \exp(\theta_{y_i-1})} \\
\nabla_\theta \mathcal{L}(w, \theta) &amp;amp;= \sum_{i=1}^n e_{y_i} \left(1 - \phi(\theta_{y_i} - w^T X_i) - \frac{1}{1 - \exp(\theta_{y_i -1} - \theta_{y_i})}\right)  \\
 &amp;amp; \qquad  + e_{y_i -1}\left(1 - \phi(\theta_{y_i -1} - w^T X_i) - \frac{1}{1 - \exp(- (\theta_{y_i-1} - \theta_{y_i}))}\right)
\end{align}$&lt;/p&gt;
&lt;p&gt;where $e_i$ is the $i$th canonical vector.&lt;/p&gt;
&lt;h3&gt;Code&lt;/h3&gt;

&lt;p&gt;I've implemented a Python version of this algorithm using Scipy's
&lt;code&gt;optimize.fmin_slsqp&lt;/code&gt; function. This takes as arguments the
loss function, the gradient denoted before and a function that is
&amp;gt; 0 when the inequalities on $\theta$ are satisfied.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/fabianp/minirank/blob/master/minirank/logistic.py&quot;&gt;Code
can be found here&lt;/a&gt; as part of the &lt;a href=&quot;https://github.com/fabianp/minirank&quot;&gt;minirank&lt;/a&gt; package, which
is my sandbox for code related to ranking and ordinal regression. At
some point I would like to submit it to scikit-learn but right now the
I don't know how the code will scale to medium-scale problems, but I
suspect not great. On top of that I'm not sure if there is a real demand
of these models for scikit-learn and I don't want to bloat the package
with unused features.&lt;/p&gt;
&lt;h3&gt;Performance&lt;/h3&gt;

&lt;p&gt;I compared the prediction accuracy of this model in the sense of mean absolute
error &lt;a href=&quot;http://nbviewer.ipython.org/urls/raw.github.com/fabianp/minirank/master/notebooks/comparison_ordinal_logistic.ipynb&quot;&gt;(IPython
notebook)&lt;/a&gt; on the &lt;a href=&quot;http://scikit-learn.org/dev/modules/generated/sklearn.datasets.load_boston.html&quot;&gt;boston
house-prices dataset&lt;/a&gt;. To have an ordinal variable, I
rounded the values to the closest integer, which gave me a problem of
size 506 $\times$ 13 with 46 different target values. Although not a
huge increase in accuracy, this model did give me better results on
this particular dataset:&lt;/p&gt;
&amp;lt;figure&amp;gt;
&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/bars_ordinal.png&quot; /&gt;
&amp;lt;/figure&amp;gt;

&lt;p&gt;Here, ordinal logistic regression is the best-performing model,
followed by a Linear Regression model and a One-versus-All Logistic
regression model as implemented in scikit-learn.&lt;/p&gt;
&lt;div class=&quot;footnote&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn:1&quot;&gt;
&lt;p&gt;&quot;Regression models for ordinal data&quot;, P. McCullagh, Journal of
the royal statistical society. Series B (Methodological), 1980 &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:1&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 1 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:2&quot;&gt;
&lt;p&gt;&quot;Generalized Linear Models&quot;, P. McCullagh and J. A. Nelder (Book) &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:2&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 2 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:3&quot;&gt;
&lt;p&gt;&quot;Loss Functions for Preference Levels : Regression with Discrete
Ordered Labels&quot;, Jason D. M. Rennie, Nathan Srebro &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:3&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 3 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
	<pubDate>Wed, 01 May 2013 22:00:00 +0000</pubDate>
</item>
<item>
	<title>Fabian Pedregosa: Isotonic Regression</title>
	<guid isPermaLink="false">tag:fabianp.net/blog,2013-04-16:2013/isotonic-regression/</guid>
	<link>http://fabianp.net/blog/2013/isotonic-regression/</link>
	<description>&lt;p&gt;My latest contribution for &lt;a href=&quot;http://scikit-learn.org&quot;&gt;scikit-learn&lt;/a&gt; is
 an implementation of the isotonic regression model that I coded with
 &lt;a href=&quot;https://twitter.com/nvaroqua&quot;&gt;Nelle Varoquaux&lt;/a&gt; and
 &lt;a href=&quot;http://alexandre.gramfort.net/&quot;&gt;Alexandre Gramfort&lt;/a&gt;. This model
 finds the best least squares fit to a set of points, given the
 constraint that the fit must be a non-decreasing
 function. &lt;a href=&quot;http://scikit-learn.sourceforge.net/dev/auto_examples/plot_isotonic_regression.html&quot;&gt;The example&lt;/a&gt;
 on the scikit-learn website gives an intuition on this model.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/plot_isotonic_regression_1.png&quot; alt=&quot;isotonic regression&quot; /&gt;&lt;/p&gt;
&lt;p&gt;The original points are in red, and the estimated ones are in
green. As you can see, there is one estimation (green point) for each
data sample (red point). Calling $y \in \mathbb{R}^n$ the input data,
the model can be written concisely as an optimization problem over $x$&lt;/p&gt;
&lt;p&gt;$$ 
\text{argmin}_x \|y - x \|^2 \\
\text{subject to } x_0 \leq x_1 \leq \cdots \leq x_n
$$&lt;/p&gt;
&lt;p&gt;The algorithm implemented in scikit-learn &lt;sup id=&quot;fnref:3&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:3&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; is the pool adjacent
violators algorithm &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, which is an efficient linear time
$\mathcal{O}(n)$ algorithm. The algorithm sweeps through the data
looking for violations of the monotonicity constraint. When it finds
one, it adjusts the estimate to the best possible fit with
constraints. Sometimes it also needs to modify previous points to make
sure the new estimate does not violate the constraints. The following
picture shows how it proceeds at each iteration&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/isotonic.gif&quot; alt=&quot;isotonic regression&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;footnote&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn:1&quot;&gt;
&lt;p&gt;&quot;Active set algorithms for isotonic regression; A unifying
framework&quot;, Michael J. Best, Nilotpal Chakravarti &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:1&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 1 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:2&quot;&gt;
&lt;p&gt;Python notebook to generate the figures: &lt;a href=&quot;http://fa.bianp.net/blog/static/uploads/2013/isotonic_regression_sklearn.ipynb&quot;&gt;ipynb&lt;/a&gt; and &lt;a href=&quot;http://nbviewer.ipython.org/url/fseoane.net/blog/static/uploads/2013/isotonic_regression_sklearn.ipynb&quot;&gt;web version&lt;/a&gt; &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:2&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 2 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:3&quot;&gt;
&lt;p&gt;The algorithm is used through the sklearn.isotonic.IsotonicRegression object (&lt;a href=&quot;http://scikit-learn.org/dev/modules/generated/sklearn.isotonic.IsotonicRegression.html&quot;&gt;doc&lt;/a&gt;) or the function sklearn.isotonic.isotonic_regression (&lt;a href=&quot;http://scikit-learn.org/dev/modules/generated/sklearn.isotonic.isotonic_regression.html&quot;&gt;doc&lt;/a&gt;) &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:3&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 3 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
	<pubDate>Mon, 15 Apr 2013 22:00:00 +0000</pubDate>
</item>
<item>
	<title>Official SymPy blog: Google Summer of Code 2013</title>
	<guid isPermaLink="false">tag:blogger.com,1999:blog-2520472460430880330.post-2941331733095011125</guid>
	<link>http://sympy.blogspot.com/2013/04/google-summer-of-code-2013.html</link>
	<description>SymPy was accepted by Google once again to participate in Google Summer of Code for 2013. Please go to &lt;a href=&quot;http://www.google-melange.com/gsoc/org/google/gsoc2013/sympy&quot;&gt;http://www.google-melange.com/gsoc/org/google/gsoc2013/sympy&lt;/a&gt; for more information about how to apply and get started.</description>
	<pubDate>Mon, 08 Apr 2013 23:04:34 +0000</pubDate>
	<author>noreply@blogger.com (Aaron Meurer)</author>
</item>
<item>
	<title>Aaron Meurer: How to make attributes un-inheritable in Python using descriptors</title>
	<guid isPermaLink="false">http://asmeurersympy.wordpress.com/?p=1282</guid>
	<link>http://asmeurersympy.wordpress.com/2013/04/06/how-to-make-attributes-un-inheritable-in-python-using-descriptors/</link>
	<description>&lt;p&gt;For &lt;a href=&quot;https://github.com/sympy/sympy/pull/1969&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sympy/sympy/pull/1969&lt;/a&gt;, and previous work at &lt;a href=&quot;https://github.com/sympy/sympy/pull/1901&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sympy/sympy/pull/1901&lt;/a&gt;, we added the ability for the SymPy doctester to run or not run doctests conditionally depending on whether or not required external dependencies are installed. This means that for example we can doctest all the plotting examples without them failing when matplotlib is not installed. &lt;/p&gt;
&lt;p&gt;For functions, this is as easy as decorating the function with &lt;code&gt;@doctest_depends&lt;/code&gt;, which adds the attribute &lt;code&gt;_doctest_depends_on&lt;/code&gt; to the function with a list of what dependencies the doctest depends on. The doctest will then not run the doctest unless those dependencies are installed.&lt;/p&gt;
&lt;p&gt;For classes, this is not so easy. Ideally, one could just define &lt;code&gt;_doctest_depends_on&lt;/code&gt; as an attribute of the class. However, the issue is that with classes, we have inheritance. But if class &lt;code&gt;A&lt;/code&gt; has a docstring with a doctest that depends on some modules, it doesn’t mean that a subclass &lt;code&gt;B&lt;/code&gt; of &lt;code&gt;A&lt;/code&gt; will have a doctest that does.  &lt;/p&gt;
&lt;p&gt;Really, what we need to do is to decorate the docstring itself, not the class. Unfortunately, Python does not allow adding attributes to strings&lt;/p&gt;
&lt;pre class=&quot;brush: python; title: ; notranslate&quot;&gt;&amp;gt;&amp;gt;&amp;gt; a = &quot;&quot;
&amp;gt;&amp;gt;&amp;gt; a.x = 1
Traceback (most recent call last):
  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1, in &amp;lt;module&amp;gt;
AttributeError: 'str' object has no attribute 'x'
&lt;/pre&gt;
&lt;p&gt;So what we have to do is to create a attribute that doesn’t inherit.  &lt;/p&gt;
&lt;p&gt;I had for some time wanted to give &lt;a href=&quot;http://docs.python.org/2/howto/descriptor.html&quot;&gt;descriptors&lt;/a&gt; in Python a try, since they are a cool feature, but also the second most complicated feature in Python (the first is metaclasses). If you don’t know what a descriptor is, I recommend reading &lt;a href=&quot;http://python-history.blogspot.com/2010/06/inside-story-on-new-style-classes.html?m=1&quot;&gt;this blog post&lt;/a&gt; by Guido van Rossum, the creator of Python. It’s the best explanation of the feature there is.  &lt;/p&gt;
&lt;p&gt;Basically, Python lets attributes define what happens when they are accessed (like &lt;code&gt;a.x&lt;/code&gt;).  You may already know that objects can define how their attributes are accessed via &lt;code&gt;__getattr__&lt;/code&gt;. This is different. With descriptors, the &lt;em&gt;attributes themselves&lt;/em&gt; define what happens.  This may sound less useful, but in fact, it’s a very core feature of the language. &lt;/p&gt;
&lt;p&gt;If you’ve ever wondered how &lt;code&gt;property&lt;/code&gt;, &lt;code&gt;classmethod&lt;/code&gt;, or &lt;code&gt;staticmethod&lt;/code&gt; work in Python, the answer is descriptors. Basically, if you have something like&lt;/p&gt;
&lt;pre class=&quot;brush: python; title: ; notranslate&quot;&gt;class A(object):
    def f(self):
        return 1
    f = property(f)
&lt;/pre&gt;
&lt;p&gt;Then &lt;code&gt;A().f&lt;/code&gt; magically calls what would normally be &lt;code&gt;A().f()&lt;/code&gt;. The way it works is that &lt;code&gt;property&lt;/code&gt; defines the &lt;code&gt;__get__&lt;/code&gt; method, which returns &lt;code&gt;f(obj)&lt;/code&gt;, where &lt;code&gt;obj&lt;/code&gt; is the calling object, here &lt;code&gt;A()&lt;/code&gt; (remember in Python that the first argument of a method, usually called &lt;code&gt;self&lt;/code&gt; is the object that calls the method).  &lt;/p&gt;
&lt;p&gt;Descriptors can allow method to define arbitrary behavior when called, set, or deleted.  To make an attribute inaccessible to subclasses, then, you just need to define a descriptor that prevents the attribute from being accessed if the class of the calling object is not the original class.  Here is some code:&lt;/p&gt;
&lt;pre class=&quot;brush: python; title: ; notranslate&quot;&gt;class nosubclasses(object):
    def __init__(self, f, cls):
        self.f = f
        self.cls = cls
    def __get__(self, obj, type=None):
        if type == self.cls:
            if hasattr(self.f, '__get__'):
                return self.f.__get__(obj, type)
            return self.f
        raise AttributeError
&lt;/pre&gt;
&lt;p&gt;it works like this&lt;/p&gt;
&lt;pre class=&quot;brush: python; title: ; notranslate&quot;&gt;In [2]: class MyClass(object):
   ...:     x = 1
   ...:

In [3]: MyClass.x = nosubclasses(MyClass.x, MyClass)

In [4]: class MySubclass(MyClass):
   ...:     pass
   ...:

In [5]: MyClass.x
Out[5]: 1

In [6]: MyClass().x
Out[6]: 1

In [80]: MySubclass.x
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
&amp;lt;ipython-input-80-2b2f456dd101&amp;gt; in &amp;lt;module&amp;gt;()
----&amp;gt; 1 MySubclass.x

&amp;lt;ipython-input-51-7fe1b5063367&amp;gt; in __get__(self, obj, type)
      8                 return self.f.__get__(obj, type)
      9             return self.f
---&amp;gt; 10         raise AttributeError

AttributeError:

In [81]: MySubclass().x
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
&amp;lt;ipython-input-81-93764eeb9948&amp;gt; in &amp;lt;module&amp;gt;()
----&amp;gt; 1 MySubclass().x

&amp;lt;ipython-input-51-7fe1b5063367&amp;gt; in __get__(self, obj, type)
      8                 return self.f.__get__(obj, type)
      9             return self.f
---&amp;gt; 10         raise AttributeError

AttributeError:
&lt;/pre&gt;
&lt;p&gt;Note that by using the third argument to &lt;code&gt;__get__&lt;/code&gt;, this works regardless if the attribute is accessed from the class or the object. I have to call &lt;code&gt;__get__&lt;/code&gt; on &lt;code&gt;self.f&lt;/code&gt; again if it has it to ensure that the right thing happens if the attribute has other descriptor logic defined (and note that regular methods have descriptor logic defined—that’s how they convert the first argument &lt;code&gt;self&lt;/code&gt; to implicitly be the calling object).&lt;/p&gt;
&lt;p&gt;One could easily make class decorator that automatically adds the attribute to the class in a non-inheritable way:&lt;/p&gt;
&lt;pre class=&quot;brush: python; title: ; notranslate&quot;&gt;def nosubclass_x(args):
    def _wrapper(cls):
        cls.x = nosubclasses(args, cls)
        return cls
    return _wrapper
&lt;/pre&gt;
&lt;p&gt;This automatically adds the property &lt;code&gt;x&lt;/code&gt; to the decorated class with the value given in the decorator, and it won’t be accessible to subclasses:&lt;/p&gt;
&lt;pre class=&quot;brush: python; title: ; notranslate&quot;&gt;In [87]: @nosubclass_x(1)
   ....: class MyClass(object):
   ....:     pass
   ....:

In [88]: MyClass().x
Out[88]: 1

In [89]: MySubclass().x
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
&amp;lt;ipython-input-89-93764eeb9948&amp;gt; in &amp;lt;module&amp;gt;()
----&amp;gt; 1 MySubclass().x

&amp;lt;ipython-input-51-7fe1b5063367&amp;gt; in __get__(self, obj, type)
      8                 return self.f.__get__(obj, type)
      9             return self.f
---&amp;gt; 10         raise AttributeError

AttributeError:
&lt;/pre&gt;
&lt;p&gt;For SymPy, we can’t use class decorators because we still support Python 2.5, and they were introduced in Python 2.6. The best work around is to just call &lt;code&gt;Class.attribute = nosubclasses(Class.attribute, Class)&lt;/code&gt; after the class definition. Unfortunately, you can’t access a class inside its definition like you can with functions, so this has to go at the end. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Name Mangling&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;After coming up with all this, I remembered that Python already has a pretty standard way to define attributes in such a way that subclasses won’t have access to them. All you have to do is use two underscores before the name, like &lt;code&gt;__x&lt;/code&gt;, and it will be &lt;a href=&quot;http://docs.python.org/2/reference/expressions.html#atom-identifiers&quot;&gt;name mangled&lt;/a&gt;. This means that the name will be renamed to &lt;code&gt;_classname__x&lt;/code&gt; outside the class definition. The name will not be inherited by subclasses.  There are some subtleties with this, particularly for strange class names (names that are too long, or names that begin with an underscore). I &lt;a href=&quot;http://stackoverflow.com/q/15845931/161801&quot;&gt;asked about this on StackOverflow&lt;/a&gt;. The best answer is that there was a function in the standard library, but it was removed in Python 3. My tests reveal that the behavior is different in CPYthon than in PyPy, so getting it right for every possible class is nontrivial. The descriptor thing should work everywhere, though.  On the other hand, &lt;code&gt;getattr(obj, '_' + obj.__class__.__name__ + attributename)&lt;/code&gt; will work 99% of the time, and is much easier both to write and to understand than the descriptor. &lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1282/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1282/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1282&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Sat, 06 Apr 2013 02:49:13 +0000</pubDate>
</item>
<item>
	<title>MRocklin: SymPy and Theano -- Matrix Expressions</title>
	<guid isPermaLink="true">http://matthewrocklin.com/blog//work/2013/04/05/SymPy-Theano-part-3</guid>
	<link>http://matthewrocklin.com/blog//work/2013/04/05/SymPy-Theano-part-3</link>
	<description>&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;This post uses some LaTeX. You may want to read it on the &lt;a href=&quot;http://matthewrocklin.com/blog/work/2013/04/05/SymPy-Theano-part-3/&quot;&gt;original site&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;This is the last of a three part series connecting SymPy and Theano to transform mathematical expressions into efficient numeric code (see &lt;a href=&quot;http://matthewrocklin.com/blog/work/2013/03/19/SymPy-Theano-part-1/&quot;&gt;part 1&lt;/a&gt; and &lt;a href=&quot;http://matthewrocklin.com/blog/work/2013/03/28/SymPy-Theano-part-2/&quot;&gt;part 2&lt;/a&gt;). We have seen that it is simple and computationally profitable to combine the best parts of both projects.&lt;/p&gt;

&lt;p&gt;In this post we’ll switch from computing scalar expressionss to computing matrix expressions. We’ll define the Kalman filter in SymPy and send it to Theano for code generation. We’ll then use SymPy to define a more performant blocked version of the same algorithm.&lt;/p&gt;

&lt;h2 id=&quot;kalman_filter&quot;&gt;Kalman Filter&lt;/h2&gt;

&lt;p&gt;The &lt;a href=&quot;http://en.wikipedia.org/wiki/Kalman_filter&quot;&gt;Kalman filter&lt;/a&gt; is an algorithm to compute the Bayesian update of a normal random variable given a linear observation with normal noise. It is commonly used when an uncertain quantity is updated with the results of noisy observations. For example it is used in weather forecasting after weather stations report in with new measurements, in aircraft/car control to automatically adjust for external conditions real-time, or even on your smartphone’s GPS navigation as you update your position based on fuzzy GPS signals. It’s everywhere, it’s important, and it needs to be computed quickly and continuously. It suits our needs today because it can be completely defined with a pair of matrix expressions.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;                          &lt;span class=&quot;c&quot;&gt;# Number of variables in our system/current state&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;                           &lt;span class=&quot;c&quot;&gt;# Number of variables in the observation&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'mu'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;      &lt;span class=&quot;c&quot;&gt;# Mean of current state&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Sigma'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;# Covariance of current state&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'H'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;       &lt;span class=&quot;c&quot;&gt;# A measurement operator on current state&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'R'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;       &lt;span class=&quot;c&quot;&gt;# Covariance of measurement noise&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# Observed measurement data&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;newmu&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;      &lt;span class=&quot;c&quot;&gt;# Updated mean&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;newSigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;       &lt;span class=&quot;c&quot;&gt;# Updated covariance&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newmu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newSigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;$$ \Sigma H^T \left(H \Sigma H^T + R\right)^{-1} \left(-data + H \mu\right) + \mu $$ $$ - \Sigma H^T \left(H \Sigma H^T + R\right)^{-1} H \Sigma + \Sigma $$&lt;/p&gt;

&lt;h2 id=&quot;theano_execution&quot;&gt;Theano Execution&lt;/h2&gt;

&lt;p&gt;The objects above are for symbolic mathematics, not for numeric computation. If we want to compute this expression we pass our expressions to Theano.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;outputs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newmu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newSigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dtypes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'float64'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inp&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy.printing.theanocode&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano_function&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano_function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dtypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dtypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Theano builds a Python function that calls down to a combination of low-level &lt;code&gt;C&lt;/code&gt; code, &lt;code&gt;scipy&lt;/code&gt; functions, and calls to the highly optimized &lt;code&gt;DGEMM&lt;/code&gt; routine for matrix multiplication. As input this function takes five numpy arrays corresponding to our five symbolic &lt;code&gt;inputs&lt;/code&gt; and produces two numpy arrays corresponding to our two symbolic &lt;code&gt;outputs&lt;/code&gt;. &lt;a href=&quot;https://github.com/sympy/sympy/pull/1965&quot;&gt;Recent work&lt;/a&gt; allows &lt;em&gt;any&lt;/em&gt; SymPy matrix expression to be translated to and run by Theano.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ninputs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'float64'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;nmu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nSigma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ninputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;blocked_execution&quot;&gt;Blocked Execution&lt;/h2&gt;

&lt;p&gt;These arrays are too large to fit comfortably in the fastest parts of the memory hierarchy. As a result each sequential &lt;code&gt;C&lt;/code&gt;, &lt;code&gt;scipy&lt;/code&gt;, or &lt;code&gt;DGEMM&lt;/code&gt; call needs to move big chunks of memory around while it computes. After one operation completes the next operation moves around the same memory while it performs its task. This repeated memory shuffling hurts performance.&lt;/p&gt;

&lt;p&gt;A common approach to reduce memory shuffling is to cut the computation into smaller blocks. We then perform as many computations as possible on a single block before moving on. This is a standard technique in matrix multiplication.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BlockMatrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block_collapse&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MatrixSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'ABCDEFGK'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BlockMatrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                 &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BlockMatrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                 &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;G&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;$$ \begin{bmatrix} A &amp;amp; B \\ C &amp;amp; D \end{bmatrix} \begin{bmatrix} E &amp;amp; F \\ G &amp;amp; K \end{bmatrix}$$&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block_collapse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;$$ \begin{bmatrix} A E + B G &amp;amp; A F + B K \\ C E + D G &amp;amp; C F + D K\end{bmatrix} $$&lt;/p&gt;

&lt;p&gt;We are now able to focus on substantially smaller chunks of the array. For example we can choose to keep &lt;code&gt;A&lt;/code&gt; in local memory and perform all computations that involve &lt;code&gt;A&lt;/code&gt;. We will still need to shuffle some memory around (this is inevitable) but by organizing with blocks we’re able to shuffle less.&lt;/p&gt;

&lt;p&gt;This idea extends beyond matrix multiplication. For example, SymPy knows how to block a matrix inverse&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block_collapse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;$$ \begin{bmatrix} \left(- B D^{-1} C + A\right)^{-1} &amp;amp; - A^{-1} B \left(- C A^{-1} B + D\right)^{-1} \\ - \left(- C A^{-1} B + D\right)^{-1} C A^{-1} &amp;amp; \left(- C A^{-1} B + D\right)^{-1} \end{bmatrix} $$&lt;/p&gt;

&lt;p&gt;High performance dense linear algebra libraries hard-code all of these tricks into each individual routine. The call to the general matrix multiply routine &lt;code&gt;DGEMM&lt;/code&gt; performs blocked matrix multiply within the call. The call to the general matrix solve routine &lt;code&gt;DGESV&lt;/code&gt; can perform blocked matrix solve. Unfortunately these routines are unable to coordinate blocked computation &lt;em&gt;between&lt;/em&gt; calls.&lt;/p&gt;

&lt;p&gt;Fortunately, SymPy and Theano can.&lt;/p&gt;

&lt;p&gt;SymPy can define and reduce the blocked matrix expressions using relations like what are shown above.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sympy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blockcut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block_collapse&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;blocksizes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Sigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)],&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;H&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)],&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)],&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)],&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;blockinputs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blockcut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blocksizes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;blockoutputs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blockinputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;collapsed_outputs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block_collapse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blockoutputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;fblocked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano_function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;collapsed_outputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dtypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dtypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Theano is then able to coordinate this computation and compile it to low-level code. At this stage the expresssions/computations are fairly complex and difficult to present. Here is an image of the computation (click for zoomable PDF) as a directed acyclic graph.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/images/fblocked.pdf&quot;&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/fblocked-small.png&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;results&quot;&gt;Results&lt;/h2&gt;

&lt;p&gt;Lets time each function on the same inputs and see which is faster&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ninputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.69&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fblocked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ninputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loops&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.12&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;per&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That’s a 20% performance increase from just a few lines of high-level code.&lt;/p&gt;

&lt;p&gt;Blocked matrix multiply and blocked solve routines have long been established as &lt;em&gt;a good idea&lt;/em&gt;. High level mathematical and array programming libraries like SymPy and Theano allow us to extend this good idea to &lt;em&gt;arbitrary&lt;/em&gt; array computations.&lt;/p&gt;

&lt;h2 id=&quot;analysis&quot;&gt;Analysis&lt;/h2&gt;

&lt;h3 id=&quot;good_things&quot;&gt;Good Things&lt;/h3&gt;

&lt;p&gt;First, lets note that we’re not introducing a new library for dense linear algebra. Instead we’re noting that pre-existing general purpose high-level tools can be composed to that effect.&lt;/p&gt;

&lt;p&gt;Second, lets acknoledge that we could take this further. For example Theano seemlessly handles GPU interactions. We could take this same code to a GPU accelerated machine and it would just run faster without any action on our part.&lt;/p&gt;

&lt;h3 id=&quot;bad_things&quot;&gt;Bad Things&lt;/h3&gt;

&lt;p&gt;However, there are some drawbacks.&lt;/p&gt;

&lt;p&gt;Frequent readers of my blog might recall a &lt;a href=&quot;http://matthewrocklin.com/blog/work/2012/11/24/Kalman-Filter/&quot;&gt;previous post about the Kalman filter&lt;/a&gt;. In it I showed how we could use SymPy’s inference engine to select appropriate BLAS/LAPACK calls. For example we could infer that because $ H \Sigma H^T + R $ was symmetric positive definite we could use the substantially more efficient &lt;code&gt;POSV&lt;/code&gt; routine for matrix solve rather than &lt;code&gt;GESV&lt;/code&gt; (&lt;code&gt;POSV&lt;/code&gt; uses the Cholesky algorithm for decomposition rather than straight LU). Theano doesn’t support the specialized BLAS/LAPACK routines though, so we are unable to take advantage of this benefit. The lower-level interface (Theano) is not sufficiently rich to use all information captured in the higher-level (SymPy) representation.&lt;/p&gt;

&lt;p&gt;Also, I’ve noticed that the blocked version of this computation experiences some significant roundoff errors (on the order of &lt;code&gt;1e-3&lt;/code&gt;). I’m in the process of tracking this down. The problem must occur somewhere in the following tool-chain&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SymPy -&amp;gt; Blocking -&amp;gt; Theano -&amp;gt; SciPy -&amp;gt; C routines -&amp;gt; BLAS&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Debugging in this context can be wonderful if all elements are well unit-tested. If they’re not (they’re not) then tracking down errors like this requires an unfortunate breadth of expertise.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;p&gt;Scripts&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/scripts/kalman.py&quot;&gt;Kalman example&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/scripts/blocks.py&quot;&gt;Block Matrix example&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/scripts/kalman_blocked.py&quot;&gt;Block Kalman&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
	<pubDate>Fri, 05 Apr 2013 07:00:00 +0000</pubDate>
</item>
<item>
	<title>Fabian Pedregosa: Householder matrices</title>
	<guid isPermaLink="false">tag:fabianp.net/blog,2013-03-30:2013/householder-matrices/</guid>
	<link>http://fabianp.net/blog/2013/householder-matrices/</link>
	<description>&lt;p&gt;Householder matrices are square matrices of the form&lt;/p&gt;
&lt;p&gt;$$ P = I - \beta v v^T$$&lt;/p&gt;
&lt;p&gt;where $\beta$ is a scalar and $v$ is a vector. It has the useful
property that for suitable chosen $v$ and $\beta$ it makes the product
$P x$ to zero out all of the coordinates but one, that is, $P x =
\|x\| e_1$. The following code, given $x$, finds the values of $\beta,
v$ that verify that property. The algorithm can be found in several
textbooks &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;house&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    Given a vetor x, computes vectors v with v[0] = 1&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    and scalar beta such that P = I - beta v v^T&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    is orthogonal and P x = ||x|| e_1&lt;/span&gt;

&lt;span class=&quot;sd&quot;&gt;    Parameters&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    ----------&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    x : array, shape (n,) or (n, 1)&lt;/span&gt;

&lt;span class=&quot;sd&quot;&gt;    Returns&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    -------&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    beta : scalar&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    v : array, shape (n, 1)&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asarray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ndim&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newaxis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sigma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;norm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vstack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:]))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sigma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;beta&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sigma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sigma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;beta&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sigma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As promised, this computes the parameters of $P$ such that $P x = \|x\| e_1$,
exact to 15 decimals:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;house&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eye&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beta&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;norm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decimals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.&lt;/span&gt;  &lt;span class=&quot;mf&quot;&gt;0.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This property is what it makes Householder matrices useful in
the context of numerical analysis. It can be used for example to
compute the QR decomposition of a given matrix. The idea is to
succesively zero out the sub-diagonal elements, thus leaving a
triangular matrix at the end. In the first iteration we compute a
Householder matrix $P_0$ such that $P_0 X$ has only zero below the
diagonal of the first column, then compute a Householder matrix $P_1$
such that $P_1 X$ zeroes out the subdiagonal elements of the second
column and so on. At the end we will have that $P_0 P_1 ... P_n X$ is
an upper triangular matrix. Since all $P_i$ are orthogonal, the
product $P_0 P_1 ... P_n$ is again an orthogonal matrix, namely the
$Q$ matrix in the QR decomposition.&lt;/p&gt;
&lt;p&gt;If we choose X as 20-by-20 random matrix, with colors representing
different values&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/house_random.png&quot; alt=&quot;QR decomposition&quot; /&gt;&lt;/p&gt;
&lt;p&gt;we can see the process of the Householder matrices being applied one
by one to obtain an upper triangular matrix&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/house.gif&quot; alt=&quot;QR decomposition&quot; /&gt;&lt;/p&gt;
&lt;p&gt;A similar application of Householder matrices is to reduce a given
symmetric matrix to tridiagonal form, which proceeds in a similar way
as in the QR algorithm, only that now we multiply by the matrix $X$ by
the left &lt;em&gt;and right&lt;/em&gt; with the Householder matrices. Also, in this case
we seek for Householder matrices that zero out the elements of the
subdiagonal plus one, instead of just subdiagonal elements. This
algorithm is used for example as a preprocessing step for &lt;a href=&quot;http://www.netlib.org/lapack/lug/node70.html&quot;&gt;most dense
eigensolvers&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/house_tridiag.gif&quot; alt=&quot;Tridiagonalization&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;footnote&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn:1&quot;&gt;
&lt;p&gt;&quot;Matrix Computations&quot; third edition, Golub &amp;amp; VanLoan (Algorithm 5.1.1). &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:1&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 1 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn:2&quot;&gt;
&lt;p&gt;Code to reproduce the figures &lt;a href=&quot;http://nbviewer.ipython.org/url/fseoane.net/blog/static/uploads/2013/householder.ipynb&quot;&gt;can be found here&lt;/a&gt;, source for the IPython notebook &lt;a href=&quot;http://fseoane.net/blog/static/uploads/2013/householder.ipynb&quot;&gt;can be found here&lt;/a&gt; &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:2&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 2 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
	<pubDate>Fri, 29 Mar 2013 23:00:00 +0000</pubDate>
</item>
<item>
	<title>MRocklin: SymPy and Theano -- Scalar Simplification</title>
	<guid isPermaLink="true">http://matthewrocklin.com/blog//work/2013/03/28/SymPy-Theano-part-2</guid>
	<link>http://matthewrocklin.com/blog//work/2013/03/28/SymPy-Theano-part-2</link>
	<description>&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;This post uses some LaTeX. You may want to read it on the original site.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;In my &lt;a href=&quot;http://matthewrocklin.com/blog/work/2013/03/19/SymPy-Theano-part-1/&quot;&gt;last post&lt;/a&gt; I showed how SymPy can benefit from Theano. In particular Theano provided a mature platform for code generation that outperformed SymPy’s attempt at the same problem. I argued that projects should stick to one specialty and depend on others for secondary concerns. Interfaces are better than add-ons.&lt;/p&gt;

&lt;p&gt;In this post I’ll show how Theano can benefit from SymPy. In particular I’ll demonstrate the practicality of SymPy’s impressive scalar simplification routines for generating efficient programs.&lt;/p&gt;

&lt;p&gt;After re-reading over this post I realize that it’s somewhat long. I’ve decided to put the results first in hopes that it’ll motivate you to keep reading.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Project&lt;/th&gt;&lt;th&gt;operation count&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;text-align: left;&quot;&gt;SymPy&lt;/td&gt;&lt;td style=&quot;text-align: center;&quot;&gt;27&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;text-align: left;&quot;&gt;Theano&lt;/td&gt;&lt;td style=&quot;text-align: center;&quot;&gt;24&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;text-align: left;&quot;&gt;SymPy+Theano&lt;/td&gt;&lt;td style=&quot;text-align: center;&quot;&gt;17&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;Now, lets find out what those numbers mean.&lt;/p&gt;

&lt;h2 id=&quot;example_problem&quot;&gt;Example problem&lt;/h2&gt;

&lt;p&gt;We use a larger version of our problem from last time; a radial wavefunction corresponding to &lt;code&gt;n = 6&lt;/code&gt; and &lt;code&gt;l = 2&lt;/code&gt; for Carbon (&lt;code&gt;Z = 6&lt;/code&gt;)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;from sympy.physics.hydrogen import R_nl
from sympy.abc import x
n, l, Z = 6, 2, 6
expr = R_nl(n, l, x, Z)
print latex(expr)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$\frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x}$$&lt;/p&gt;

&lt;p&gt;We want to generate code to compute both this expression and its derivative. Both SymPy and Theano can compute and simplify derivatives. In this post we’ll measure the complexity of a computation that simultaneously computes both the above expression and its derivative. We’ll arrive at this computation through a couple of different routes that use overlapping parts of SymPy and Theano. This will supply a couple of direct comparisons.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Disclaimer: I’ve chosen a larger expression here to exaggerate results. Simpler expressions yield less impressive results.&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;simplification&quot;&gt;Simplification&lt;/h2&gt;

&lt;p&gt;We show the expression, it’s derivative, and SymPy’s simplification of that derivative. In each case we quantify the complexity of the expression by the number of algebraic operations&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The target expression:&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print latex(expr)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$\frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x}$$&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print &quot;Operations: &quot;, count_ops(expr)
Operations:  17&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;It’s derivative&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print latex(expr.diff(x))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$ \frac{1}{210} \sqrt{70} x^{2} \left(- 4 x^{2} + 32 x - 56\right) e^{- x} - \frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x} + \frac{1}{105} \sqrt{70} x \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x} $$&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print &quot;Operations: &quot;, count_ops(expr.diff(x))
Operations:  48&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;The result of &lt;code&gt;simplify&lt;/code&gt;&lt;/strong&gt; on the derivative. Note the significant cancellation of the above expression.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print latex(simplify(expr.diff(x)))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$ \frac{2}{315} \sqrt{70} x \left(x^{4} - 17 x^{3} + 90 x^{2} - 168 x + 84\right) e^{- x} $$&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print &quot;Operations: &quot;, count_ops(simplify(expr.diff(x)))
Operations:  18&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;An unevaluated derivative object&lt;/strong&gt;. We’ll end up passing this to Theano so that it computes the derivative on its own.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print latex(Derivative(expr, x))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$ \frac{\partial}{\partial x}\left(\frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x}\right) $$&lt;/p&gt;

&lt;h2 id=&quot;bounds_on_the_cost_of_differentiation&quot;&gt;Bounds on the cost of Differentiation&lt;/h2&gt;

&lt;p&gt;Scalar differentiation is actually a very simple transformation.&lt;/p&gt;

&lt;p&gt;You need to know how to transform all of the elementary functions (&lt;code&gt;exp, log, sin, cos, polynomials, etc...&lt;/code&gt;), the chain rule, and that’s it. Theorems behind automatic differentiation state that the cost of a derivative will be at most five times the cost of the original. In this case we’re guaranteed to have at most &lt;code&gt;17*5 == 85&lt;/code&gt; operations in the derivative computation; this holds in our case because &lt;code&gt;48 &amp;lt; 85&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;However derivatives are often far simpler than this upper bound. We see that after simplification the operation count of the derivative is &lt;code&gt;18&lt;/code&gt;, only one more than the original. This is common in practice.&lt;/p&gt;

&lt;h2 id=&quot;theano_simplification&quot;&gt;Theano Simplification&lt;/h2&gt;

&lt;p&gt;Like SymPy, Theano transforms graphs to mathematically equivalent but computationally more efficient representations. It provides standard compiler optimizations like constant folding, and common sub-expressions as well as array specific optimizations like the element-wise operation fusion.&lt;/p&gt;

&lt;p&gt;Because users regularly handle mathematical terms Theano also provides a set of optimizations to simplify some common scalar expressions. For example Theano will convert expressions like &lt;code&gt;x*y/x&lt;/code&gt; to &lt;code&gt;y&lt;/code&gt;. In this sense it overlaps with SymPy’s &lt;code&gt;simplify&lt;/code&gt; functions. This post is largely a demonstration that SymPy’s scalar simplifications are far more powerful than Theano’s and that their use can result in significant improvements. This shouldn’t be surprising. Sympians are devoted to scalar simplification to a degree that far exceeds the Theano community’s devotion to this topic.&lt;/p&gt;

&lt;h2 id=&quot;experiment&quot;&gt;Experiment&lt;/h2&gt;

&lt;p&gt;We’ll compute the derivative of our radial wavefunction and then simplify the result. We’ll do this using both SymPy’s derivative and simplify routines and using Theano’s derivative and simplify routines. We’ll then compare the two results by counting the number of required operations.&lt;/p&gt;

&lt;p&gt;Here is some setup code that you can safely ignore:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fgraph_of&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exprs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Transform SymPy expressions into Theano Computation &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;outs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theano_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exprs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ins&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gof&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gof&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gof&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FunctionGraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;theano_simplify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Simplify a Theano Computation &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_default_mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;excluding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fusion&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optimizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optimize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;theano_count_ops&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&quot;&quot;&quot; Count the number of Scalar operations in a Theano Computation &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tensor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Elemwise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                      &lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;apply_nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In SymPy we create both an unevaluated derivative and a fully evaluated and sympy-simplified version. We translate each to Theano, simplify within Theano, and then count the number of operations both before and after simplification. In this way we can see the value added by both SymPy’s and Theano’s optimizations.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;exprs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Derivative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# derivative computed in Theano&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;simplify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))]&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# derivative computed in SymPy, also sympy-simplified&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exprs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fgraph_of&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;simp_fgraph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano_simplify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Operations:                             &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano_count_ops&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Operations after Theano Simplification: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano_count_ops&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;simp_fgraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Theano Only&lt;/p&gt;

&lt;p&gt;$$ \frac{\partial}{\partial x}\left(\frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x}\right) $$&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Operations:                              40
Operations after Theano Simplification:  21&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;SymPy + Theano&lt;/p&gt;

&lt;p&gt;$$ \frac{2}{315} \sqrt{70} x \left(x^{4} - 17 x^{3} + 90 x^{2} - 168 x + 84\right) e^{- x} $$&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Operations:                              13
Operations after Theano Simplification:  10&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;analysis&quot;&gt;Analysis&lt;/h2&gt;

&lt;p&gt;On its own Theano produces a derivative expression that is about as complex as the unsimplified SymPy version. Theano simplification then does a surprisingly good job, roughly halving the amount of work needed (&lt;code&gt;40 -&amp;gt; 21&lt;/code&gt;) to compute the result. If you dig deeper however you find that this isn’t because it was able to algebraically simplify the computation (it wasn’t) but rather because the computation contained several common sub-expressions. The Theano version looks a lot like the unsimplified SymPy version. Note the common sub-expressions like &lt;code&gt;56*x&lt;/code&gt; below.&lt;/p&gt;

&lt;p&gt;$$ \frac{1}{210} \sqrt{70} x^{2} \left(- 4 x^{2} + 32 x - 56\right) e^{- x} - \frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x} + \frac{1}{105} \sqrt{70} x \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x} $$&lt;/p&gt;

&lt;p&gt;The pure-SymPy simplified result is again substantially more efficient (&lt;code&gt;13&lt;/code&gt; operations). Interestingly Theano is still able to improve on this, again not because of additional algebraic simplification but rather due to constant folding. The two projects simplify in orthogonal ways.&lt;/p&gt;

&lt;h2 id=&quot;simultaneous_computation&quot;&gt;Simultaneous Computation&lt;/h2&gt;

&lt;p&gt;When we compute both the expression and its derivative simultaneously we find substantial benefits from using the two projects together.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;orig_expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R_nl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exprs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fgraph_of&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orig_expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;simp_fgraph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theano_simplify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orig_expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Operations:                             &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fgraph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;apply_nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Operations after Theano Simplification: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;simp_fgraph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;apply_nodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;$$ \begin{pmatrix}\frac{\partial}{\partial x}\left(\frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x}\right), &amp;amp; \frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x}\end{pmatrix} $$&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Operations:                              57
Operations after Theano Simplification:  24&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$ \begin{pmatrix}\frac{2}{315} \sqrt{70} x \left(x^{4} - 17 x^{3} + 90 x^{2} - 168 x + 84\right) e^{- x}, &amp;amp; \frac{1}{210} \sqrt{70} x^{2} \left(- \frac{4}{3} x^{3} + 16 x^{2} - 56 x + 56\right) e^{- x}\end{pmatrix} $$&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Operations:                              27
Operations after Theano Simplification:  17&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The combination of SymPy’s scalar simplification and Theano’s common sub-expression optimization yields a significantly simpler computation than either project could do independently.&lt;/p&gt;

&lt;p&gt;To summarize&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Project&lt;/th&gt;&lt;th&gt;operation count&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;text-align: left;&quot;&gt;SymPy&lt;/td&gt;&lt;td style=&quot;text-align: center;&quot;&gt;27&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;text-align: left;&quot;&gt;Theano&lt;/td&gt;&lt;td style=&quot;text-align: center;&quot;&gt;24&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;text-align: left;&quot;&gt;SymPy+Theano&lt;/td&gt;&lt;td style=&quot;text-align: center;&quot;&gt;17&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/scripts/sympy_theano_simplification.py&quot;&gt;A script of this session&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
	<pubDate>Thu, 28 Mar 2013 07:00:00 +0000</pubDate>
</item>
<item>
	<title>MRocklin: SymPy and Theano -- Code Generation</title>
	<guid isPermaLink="true">http://matthewrocklin.com/blog//work/2013/03/19/SymPy-Theano-part-1</guid>
	<link>http://matthewrocklin.com/blog//work/2013/03/19/SymPy-Theano-part-1</link>
	<description>&lt;p&gt;No one is good at everything, that’s why we have society.&lt;/p&gt;

&lt;p&gt;No project is good at everything, that’s why we have interfaces.&lt;/p&gt;

&lt;p&gt;This is the first of three posts that join &lt;code&gt;SymPy&lt;/code&gt;, a library for symbolic mathematics, and &lt;code&gt;Theano&lt;/code&gt;, a library for mathematical compilation to numeric code. Each library does a few things really well. Each library also over-reaches bit and does a few things not-as-well. Fortunately the two libraries have clear and simple data structures and so can be used together effectively.&lt;/p&gt;

&lt;p&gt;In this post I’ll focus on how SymPy can use Theano to generate efficient code.&lt;/p&gt;

&lt;h2 id=&quot;physics&quot;&gt;Physics&lt;/h2&gt;

&lt;p&gt;SymPy knows Physics. For example, here is the radial wavefunction corresponding to &lt;code&gt;n = 3&lt;/code&gt; and &lt;code&gt;l = 1&lt;/code&gt; for Carbon (&lt;code&gt;Z = 6&lt;/code&gt;)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;from sympy.physics.hydrogen import R_nl
from sympy.abc import x
expr = R_nl(3, 1, x, 6)
print latex(expr)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$\frac{8}{3} x \left(- 4 x + 4\right) e^{- 2 x}$$&lt;/p&gt;

&lt;p&gt;SymPy is great at this. It can manipulate high level mathematical expressions very naturally. When it comes to numeric computation it is less effective.&lt;/p&gt;

&lt;h2 id=&quot;numerics&quot;&gt;Numerics&lt;/h2&gt;

&lt;p&gt;Fortunately there are methods to offload the work to numerical projects like &lt;code&gt;numpy&lt;/code&gt; or to generate and compile straight &lt;code&gt;Fortran&lt;/code&gt; code. Here we use two existing methods to create two identical vectorized functions to compute the above expression.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;from sympy.utilities.autowrap import ufuncify
from sympy.utilities.lambdify import lambdify
fn_numpy   = lambdify(x, expr, 'numpy')
fn_fortran = ufuncify([x], expr)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;fn_numpy&lt;/code&gt; replaces each of the SymPy operations with the equivalent function from the popular NumPy package. &lt;code&gt;fn_fortran&lt;/code&gt; generates and compiles low-level Fortran code and uses &lt;code&gt;f2py&lt;/code&gt; to bind it to a Python function. They each use &lt;code&gt;numpy&lt;/code&gt; arrays as common data structures, supporting broad interoperability with the rest of the Scientific Python ecosystem. They both work well and produce identical results.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; from numpy import linspace
&amp;gt;&amp;gt;&amp;gt; xx = linspace(0, 1, 5)
&amp;gt;&amp;gt;&amp;gt; fn_numpy(xx)
[ 0.          1.21306132  0.98101184  0.44626032  0.        ]
&amp;gt;&amp;gt;&amp;gt; fn_fortran(xx)
[ 0.          1.21306132  0.98101184  0.44626032  0.        ]&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We use these functions and &lt;code&gt;matplotlib&lt;/code&gt; to plot the original equation&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;from pylab import plot, show, legend
xx = linspace(0, 5, 50000)
plot(xx, fn_numpy(xx))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/R_31.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;performance&quot;&gt;Performance&lt;/h2&gt;

&lt;p&gt;When we profile these functions we find that the &lt;code&gt;Fortran&lt;/code&gt; solution runs a bit faster. This is because it is able to fuse all of the scalar operations into one loop while the &lt;code&gt;numpy&lt;/code&gt; solution walks over memory several times, performing each operation individually. Jensen wrote a more thorough &lt;a href=&quot;http://ojensen.wordpress.com/2010/08/10/fast-ufunc-ish-hydrogen-solutions/&quot;&gt;blogpost about this&lt;/a&gt; when he worked on code generation. He shows substantial performance increases as the complexity of the mathematical expression increases.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; timeit fn_numpy(xx)
1000 loops, best of 3: 1.4 ms per loop
&amp;gt;&amp;gt;&amp;gt; timeit fn_fortran(xx)
1000 loops, best of 3: 884 us per loop&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This weekend I built up a translation from SymPy expressions to Theano computations. This builds off of &lt;a href=&quot;http://github.com/nouiz/theano_sympy/&quot;&gt;old work&lt;/a&gt; done with &lt;a href=&quot;http://github.com/nouiz&quot;&gt;Frederic Bastien&lt;/a&gt; at SciPy2012.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; from sympy.printing.theanocode import theano_function
&amp;gt;&amp;gt;&amp;gt; fn_theano  = theano_function([x], [expr], dims={x: 1}, dtypes={x: 'float64'})
&amp;gt;&amp;gt;&amp;gt; timeit fn_theano(xx)
1000 loops, best of 3: 1.04 ms per loop&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Theano generates &lt;code&gt;C&lt;/code&gt; code that performs the same loop fusion done in &lt;code&gt;Fortran&lt;/code&gt; but it incurs a bit more startup time. It performs somewhere between the &lt;code&gt;numpy&lt;/code&gt; and &lt;code&gt;Fortran&lt;/code&gt; solutions.&lt;/p&gt;

&lt;p&gt;However, the &lt;code&gt;SymPy to Theano&lt;/code&gt; translation interface only takes up about a page of code while the &lt;code&gt;lambdify&lt;/code&gt; and &lt;code&gt;autowrap&lt;/code&gt; modules are substantially more complex. Additionally, Theano is actively developed and is sure to improve and track changes in hardware well into the future. &lt;code&gt;lambdify&lt;/code&gt; and &lt;code&gt;autowrap&lt;/code&gt; have been relatively untouched over the past year. For example Theano is able to seemlessly compile these computations to the GPU.&lt;/p&gt;

&lt;h2 id=&quot;leveraging_theano&quot;&gt;Leveraging Theano&lt;/h2&gt;

&lt;p&gt;In the above example we used Theano to copy the behavior of SymPy’s existing &lt;code&gt;numpy&lt;/code&gt; and &lt;code&gt;Fortran&lt;/code&gt; numeric solutions. Theano is capable of substantially more than this. To show a simple example we’ll compute both our original output and the derivative simultaneously.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;outputs = expr, simplify(expr.diff(x))
print latex(outputs)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$$ \begin{pmatrix}\frac{8}{3} x \left(- 4 x + 4\right) e^{- 2 x}, &amp;amp; \frac{32}{3} \left(2 x^{2} - 4 x + 1\right) e^{- 2 x}\end{pmatrix} $$&lt;/p&gt;

&lt;p&gt;We redefine our functions to produce both outputs, instead of just &lt;code&gt;expr&lt;/code&gt; alone&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;fn_numpy  = lambdify([x], outputs, 'numpy')
fn_theano = theano_function([x], outputs, dims={x: 1}, dtypes={x: 'float64'})

fns_fortran = [ufuncify([x], output) for output in outputs]
fn_fortran  = lambda xx: [fn_fortran(xx) for fn_fortran in fns_fortran]&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The expression and its derivative look like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;for y in fn_theano(xx):
    plot(xx, y)
legend(['$R_{31}$', &quot;$R'_{31}$&quot;])&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/R_31_prime.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Because Theano handles common subexpressions well it is able to perform the extra computation with only a very slight increase in runtime, easily eclipsing either of the other two options.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; timeit fn_numpy(xx)
100 loops, best of 3: 2.85 ms per loop
&amp;gt;&amp;gt;&amp;gt; timeit fn_fortran(xx)
1000 loops, best of 3: 1.8 ms per loop
&amp;gt;&amp;gt;&amp;gt; timeit fn_theano(xx)
1000 loops, best of 3: 1.16 ms per loop&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;When we extend this experiment and vary the number of simultaneous derivatives we observe the following runtimes&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/profile-theano-fortran-numpy.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In the case of highly structured computation Theano is able to scale very favorably.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;The Theano project is devoted to code generation at a level that exceeds the devotion of SymPy to this same topic. This is natural and prevalent. When we combine the good parts of both projects we often achieve a better result than with an in-house solution&lt;/p&gt;

&lt;p&gt;In-house solutions to foreign problems lack persistence. As programmers within an ecosystem we should make projects that do one thing well and provide clean interfaces and simple data structures to encourage inter-project communication.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://sympy.org/&quot;&gt;SymPy&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://deeplearning.net/software/theano&quot;&gt;Theano&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://ojensen.wordpress.com/2010/08/10/fast-ufunc-ish-hydrogen-solutions/&quot;&gt;Jensen’s Blogpost&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;https://github.com/mrocklin/sympy/tree/theano-print&quot;&gt;Development git repository&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://mrocklin.github.com/blog/scripts/sympy_theano_printing.ipynb&quot;&gt;IPython notebook of this work&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
	<pubDate>Tue, 19 Mar 2013 07:00:00 +0000</pubDate>
</item>
<item>
	<title>Aaron Meurer: When does x^log(y) = y^log(x)?</title>
	<guid isPermaLink="false">http://asmeurersympy.wordpress.com/?p=1218</guid>
	<link>http://asmeurersympy.wordpress.com/2013/03/03/when-does-xlogy-ylogx/</link>
	<description>&lt;p&gt;&lt;em&gt;In this blog post, when I write &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%28x%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log(x)&quot; class=&quot;latex&quot; title=&quot;\log(x)&quot; /&gt;, I mean the natural logarithm, or log base &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;e&quot; class=&quot;latex&quot; title=&quot;e&quot; /&gt;, i.e., &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cln%28x%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\ln(x)&quot; class=&quot;latex&quot; title=&quot;\ln(x)&quot; /&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;A discussion on a &lt;a href=&quot;https://github.com/sympy/sympy/pull/1845&quot;&gt;pull request&lt;/a&gt; got me thinking about this question: what are the solutions to the complex equation &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x%5E%7B%5Clog%7B%28y%29%7D%7D+%3D+y%5E%7B%5Clog%28x%29%7D&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x^{\log{(y)}} = y^{\log(x)}&quot; class=&quot;latex&quot; title=&quot;x^{\log{(y)}} = y^{\log(x)}&quot; /&gt;?  At the outset, they look like different expressions.  But clearly there some solutions. For example, if &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = y&quot; class=&quot;latex&quot; title=&quot;x = y&quot; /&gt;, then obviously the two expressions will be the same.  We probably should exclude &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+y+%3D+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = y = 0&quot; class=&quot;latex&quot; title=&quot;x = y = 0&quot; /&gt;, though note that even if &lt;img src=&quot;http://s0.wp.com/latex.php?latex=0%5E%7B%5Clog%280%29%7D&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;0^{\log(0)}&quot; class=&quot;latex&quot; title=&quot;0^{\log(0)}&quot; /&gt; is well-defined (probably if it is it is either 0 or complex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Cinfty&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\infty&quot; class=&quot;latex&quot; title=&quot;\infty&quot; /&gt;), it will be the same well-defined value. But for the remainder of this blog post, I’ll assume that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt; are nonzero.&lt;/p&gt;
&lt;p&gt;Now, observe that if we apply &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log&quot; class=&quot;latex&quot; title=&quot;\log&quot; /&gt; to both sides of the equation, we get &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft%28x%5E%7B%5Clog%28y%29%7D%5Cright+%29%7D+%3D+%5Clog+%7B%5Cleft+%28y%5E%7B%5Clog%28x%29%7D%5Cright+%29%7D&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left(x^{\log(y)}\right )} = \log {\left (y^{\log(x)}\right )}&quot; class=&quot;latex&quot; title=&quot;\log{\left(x^{\log(y)}\right )} = \log {\left (y^{\log(x)}\right )}&quot; /&gt;.  Now, supposing that we can apply the famous logarithm exponent rule, we would get &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%28x%29%5Clog%28y%29+%3D+%5Clog%28y%29%5Clog%28x%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log(x)\log(y) = \log(y)\log(x)&quot; class=&quot;latex&quot; title=&quot;\log(x)\log(y) = \log(y)\log(x)&quot; /&gt;, which means that if additionally &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log&quot; class=&quot;latex&quot; title=&quot;\log&quot; /&gt; is one-to-one, we would have that the original expressions must be equal.&lt;/p&gt;
&lt;p&gt;The second question, that of &lt;a href=&quot;http://en.wikipedia.org/wiki/Injective_function&quot;&gt;injectivity&lt;/a&gt;, is easier to answer than the first, so I’ll address it first.  Note that the complex exponential is not one-to-one, because for example &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e%5E0+%3D+e%5E%7B2%5Cpi+i%7D+%3D+1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;e^0 = e^{2\pi i} = 1&quot; class=&quot;latex&quot; title=&quot;e^0 = e^{2\pi i} = 1&quot; /&gt;.  But we still define the complex logarithm as the “inverse” of the complex exponential.  What this really means is that the complex logarithm is strictly speaking not a function, because it is not well-defined. Recall that the definition of one-to-one means that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%28x%29+%3D+f%28y%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f(x) = f(y)&quot; class=&quot;latex&quot; title=&quot;f(x) = f(y)&quot; /&gt; implies &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = y&quot; class=&quot;latex&quot; title=&quot;x = y&quot; /&gt;, and that the definition of well-defined is that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = y&quot; class=&quot;latex&quot; title=&quot;x = y&quot; /&gt; implies &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%28x%29+%3D+f%28y%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f(x) = f(y)&quot; class=&quot;latex&quot; title=&quot;f(x) = f(y)&quot; /&gt;.  It is clear to see here that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f&quot; class=&quot;latex&quot; title=&quot;f&quot; /&gt; being one-to-one is the same as &lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%5E%7B-1%7D&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f^{-1}&quot; class=&quot;latex&quot; title=&quot;f^{-1}&quot; /&gt; being well-defined and visa-versa (&lt;img src=&quot;http://s0.wp.com/latex.php?latex=f%5E%7B-1%7D&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;f^{-1}&quot; class=&quot;latex&quot; title=&quot;f^{-1}&quot; /&gt; here is the same loose definition of an inverse as saying that the complex logarithm is the inverse of the complex exponential).&lt;/p&gt;
&lt;p&gt;So note that the complex logarithm is not well-defined exactly because the complex exponential is not one-to-one.  We of course fix this problem by making it well-defined, i.e., it normally is multivalued, but we pick a single value consistently (i.e., we pick a &lt;a href=&quot;http://en.wikipedia.org/wiki/Branch_point#Complex_logarithm&quot;&gt;branch&lt;/a&gt;), so that it is well-defined.  For the remainder of this blog post, I will assume the standard choice of branch cut for the complex logarithm, i.e., the branch cut is along the negative axis, and we choose the branch where, for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3E+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x &amp;gt; 0&quot; class=&quot;latex&quot; title=&quot;x &amp;gt; 0&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%28x%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log(x)&quot; class=&quot;latex&quot; title=&quot;\log(x)&quot; /&gt; is real and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%28-x%29+%3D+%5Clog%28x%29+%2B+i%5Cpi&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log(-x) = \log(x) + i\pi&quot; class=&quot;latex&quot; title=&quot;\log(-x) = \log(x) + i\pi&quot; /&gt;.&lt;/p&gt;
&lt;p&gt;My point here is that we automatically know that the complex logarithm is one-to-one because we know that the complex exponential is well-defined.&lt;/p&gt;
&lt;p&gt;So our question boils down to, when does the identity &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft+%28z%5Ea%5Cright%29%7D+%3D+a+%5Clog%28z%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left (z^a\right)} = a \log(z)&quot; class=&quot;latex&quot; title=&quot;\log{\left (z^a\right)} = a \log(z)&quot; /&gt; hold?  In SymPy, this identity is only applied by &lt;code&gt;expand_log()&lt;/code&gt; or &lt;code&gt;logcombine()&lt;/code&gt; when &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a&quot; class=&quot;latex&quot; title=&quot;a&quot; /&gt; is real and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z&quot; class=&quot;latex&quot; title=&quot;z&quot; /&gt; is positive, so let us assume that we know that it holds under those conditions. Note that it also holds for some other values too.  For example, by our definition &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft+%28e%5E%7Bi%5Cpi%7D%5Cright%29%7D+%3D+%5Clog%28-1%29+%3D+%5Clog%281%29+%2B+i%5Cpi+%3D+i%5Cpi+%3D+i%5Cpi%5Clog%28e%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left (e^{i\pi}\right)} = \log(-1) = \log(1) + i\pi = i\pi = i\pi\log(e)&quot; class=&quot;latex&quot; title=&quot;\log{\left (e^{i\pi}\right)} = \log(-1) = \log(1) + i\pi = i\pi = i\pi\log(e)&quot; /&gt;.  For our example, this means that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+e&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = e&quot; class=&quot;latex&quot; title=&quot;x = e&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y+%3D+-1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y = -1&quot; class=&quot;latex&quot; title=&quot;y = -1&quot; /&gt; is a non-trivial solution (non-trivial meaning &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%5Cneq+y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x \neq y&quot; class=&quot;latex&quot; title=&quot;x \neq y&quot; /&gt;).   Actually, the way that the complex logarithm being the “inverse” of the complex exponential works is that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=e%5E%7B%5Clog%28x%29%7D+%3D+x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;e^{\log(x)} = x&quot; class=&quot;latex&quot; title=&quot;e^{\log(x)} = x&quot; /&gt; for all &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; (on the other hand &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft%28e%5Ex%5Cright%29%7D+%5Cneq+x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left(e^x\right)} \neq x&quot; class=&quot;latex&quot; title=&quot;\log{\left(e^x\right)} \neq x&quot; /&gt; in general), so that if &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+e&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = e&quot; class=&quot;latex&quot; title=&quot;x = e&quot; /&gt;, then &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x%5E%7B%5Clog%28y%29%7D+%3D+e%5E%7B%5Clog%28y%29%7D+%3D+y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x^{\log(y)} = e^{\log(y)} = y&quot; class=&quot;latex&quot; title=&quot;x^{\log(y)} = e^{\log(y)} = y&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y%5E%7B%5Clog%28x%29%7D+%3D+y%5E%7B%5Clog%28e%29%7D+%3D+y%5E1+%3D+y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y^{\log(x)} = y^{\log(e)} = y^1 = y&quot; class=&quot;latex&quot; title=&quot;y^{\log(x)} = y^{\log(e)} = y^1 = y&quot; /&gt;.  In other words, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+e&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = e&quot; class=&quot;latex&quot; title=&quot;x = e&quot; /&gt; is always a solution, for any &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y%5C%2C+%28%5Cneq+0%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y\, (\neq 0)&quot; class=&quot;latex&quot; title=&quot;y\, (\neq 0)&quot; /&gt; (and similarly &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y+%3D+e&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y = e&quot; class=&quot;latex&quot; title=&quot;y = e&quot; /&gt; for all &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt;).  In terms of our question of when &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft%28z%5Ea%5Cright%29%7D+%3D+a%5Clog%28z%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left(z^a\right)} = a\log(z)&quot; class=&quot;latex&quot; title=&quot;\log{\left(z^a\right)} = a\log(z)&quot; /&gt;, this just says that this always true for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%3D+%5Clog%28e%29+%3D+1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a = \log(e) = 1&quot; class=&quot;latex&quot; title=&quot;a = \log(e) = 1&quot; /&gt;, regardless of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z&quot; class=&quot;latex&quot; title=&quot;z&quot; /&gt;, which is obvious.  We can also notice that this identity always holds for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%3D+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a = 0&quot; class=&quot;latex&quot; title=&quot;a = 0&quot; /&gt;, regardless of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z&quot; class=&quot;latex&quot; title=&quot;z&quot; /&gt;. In terms of our original equation, this means that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+e%5E0+%3D+1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = e^0 = 1&quot; class=&quot;latex&quot; title=&quot;x = e^0 = 1&quot; /&gt; is a solution for all &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt; (and as before, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y+%3D+1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y = 1&quot; class=&quot;latex&quot; title=&quot;y = 1&quot; /&gt; for all &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt;).&lt;/p&gt;
&lt;p&gt;Note that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z+%3E+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z &amp;gt; 0&quot; class=&quot;latex&quot; title=&quot;z &amp;gt; 0&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a&quot; class=&quot;latex&quot; title=&quot;a&quot; /&gt; real corresponds to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x%2C+y+%3E+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x, y &amp;gt; 0&quot; class=&quot;latex&quot; title=&quot;x, y &amp;gt; 0&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%28x%29%2C+%5Clog%28y%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log(x), \log(y)&quot; class=&quot;latex&quot; title=&quot;\log(x), \log(y)&quot; /&gt; real, respectively, (which are the same condition).  So we have so far that the following are solutions to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x%5E%7B%5Clog%28y%29%7D+%3D+y%5E%7B%5Clog%28x%29%7D&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x^{\log(y)} = y^{\log(x)}&quot; class=&quot;latex&quot; title=&quot;x^{\log(y)} = y^{\log(x)}&quot; /&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span style=&quot;line-height: 13px;&quot;&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=x%2C+y+%3E+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x, y &amp;gt; 0&quot; class=&quot;latex&quot; title=&quot;x, y &amp;gt; 0&quot; /&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = y&quot; class=&quot;latex&quot; title=&quot;x = y&quot; /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+e&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = e&quot; class=&quot;latex&quot; title=&quot;x = e&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt; arbitrary&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=y+%3D+e&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y = e&quot; class=&quot;latex&quot; title=&quot;y = e&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; arbitrary&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = 1&quot; class=&quot;latex&quot; title=&quot;x = 1&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt; arbitrary&lt;/li&gt;
&lt;li&gt;&lt;img src=&quot;http://s0.wp.com/latex.php?latex=y+%3D+1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y = 1&quot; class=&quot;latex&quot; title=&quot;y = 1&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; arbitrary&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now let’s look at some cases where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft+%28z%5Ea%5Cright%29%7D+%5Cneq+a%5Clog%28z%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left (z^a\right)} \neq a\log(z)&quot; class=&quot;latex&quot; title=&quot;\log{\left (z^a\right)} \neq a\log(z)&quot; /&gt;.  If &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z+%3C+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z &amp;lt; 0&quot; class=&quot;latex&quot; title=&quot;z &amp;lt; 0&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a&quot; class=&quot;latex&quot; title=&quot;a&quot; /&gt; is a nonzero even integer, then &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z%5Ea+%3E+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z^a &amp;gt; 0&quot; class=&quot;latex&quot; title=&quot;z^a &amp;gt; 0&quot; /&gt; so &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft+%28z%5Ea+%5Cright%29%7D%29+%3D+%5Clog%7B%5Cleft+%28%5Cleft+%28-z%5Cright+%29%5Ea+%5Cright+%29%7D+%3D+a%5Clog%28-z%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left (z^a \right)}) = \log{\left (\left (-z\right )^a \right )} = a\log(-z)&quot; class=&quot;latex&quot; title=&quot;\log{\left (z^a \right)}) = \log{\left (\left (-z\right )^a \right )} = a\log(-z)&quot; /&gt;, whereas &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a%5Clog%28z%29+%3D+a%28%5Clog%28-z%29+%2B+i%5Cpi%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a\log(z) = a(\log(-z) + i\pi)&quot; class=&quot;latex&quot; title=&quot;a\log(z) = a(\log(-z) + i\pi)&quot; /&gt;, which are different by our assumption that &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%5Cneq+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a \neq 0&quot; class=&quot;latex&quot; title=&quot;a \neq 0&quot; /&gt;.  If &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a&quot; class=&quot;latex&quot; title=&quot;a&quot; /&gt; is an odd integer not equal to 1, then &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z%5Ea+%3C+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z^a &amp;lt; 0&quot; class=&quot;latex&quot; title=&quot;z^a &amp;lt; 0&quot; /&gt;, so &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft+%28z%5Ea+%5Cright%29%7D+%3D+%5Clog%7B%5Cleft+%28-z%5Ea+%5Cright+%29%7D+%2B+i%5Cpi&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left (z^a \right)} = \log{\left (-z^a \right )} + i\pi&quot; class=&quot;latex&quot; title=&quot;\log{\left (z^a \right)} = \log{\left (-z^a \right )} + i\pi&quot; /&gt; = $latex \log{\left (\left(- z\right)^{a} \right )} + i\pi$ &lt;em&gt;WordPress is refusing to render this. It should be&lt;/em&gt; log((-z)^a) + iπ = &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a%5Clog%28-z%29+%2B+i%5Cpi&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a\log(-z) + i\pi&quot; class=&quot;latex&quot; title=&quot;a\log(-z) + i\pi&quot; /&gt;, whereas &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a%5Clog%28z%29+%3D+a%28%5Clog%28-z%29+%2B+i%5Cpi%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a\log(z) = a(\log(-z) + i\pi)&quot; class=&quot;latex&quot; title=&quot;a\log(z) = a(\log(-z) + i\pi)&quot; /&gt; again, which is not the same because &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%5Cneq+1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a \neq 1&quot; class=&quot;latex&quot; title=&quot;a \neq 1&quot; /&gt;. This means that if we let &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3C+0&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x &amp;lt; 0&quot; class=&quot;latex&quot; title=&quot;x &amp;lt; 0&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y+%3D+e%5Ea&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y = e^a&quot; class=&quot;latex&quot; title=&quot;y = e^a&quot; /&gt;, where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a+%5Cneq+0%2C+1&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a \neq 0, 1&quot; class=&quot;latex&quot; title=&quot;a \neq 0, 1&quot; /&gt;, we get a non-solution (and the same if we swap &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x&quot; class=&quot;latex&quot; title=&quot;x&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y&quot; class=&quot;latex&quot; title=&quot;y&quot; /&gt;).  &lt;/p&gt;
&lt;p&gt;This is as far as I got tonight. WordPress is arbitrarily not rendering that LaTeX for no good reason.  That and the very ugly LaTeX images is pissing me off (why wordpress.com hasn't switched to MathJaX yet is beyond me).  The next time I get some free time, I am going to seriously consider switching my blog to something hosted on GitHub, probably using the IPython notebook.  I welcome any hints people can give me on that, especially concerning migrating pages from this blog.&lt;/p&gt;
&lt;p&gt;Here is some work on finding the rest of the solutions: the general definition of &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%28x%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log(x)&quot; class=&quot;latex&quot; title=&quot;\log(x)&quot; /&gt; is &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%28%7Cx%7C%29+%2B+i%5Carg%28x%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log(|x|) + i\arg(x)&quot; class=&quot;latex&quot; title=&quot;\log(|x|) + i\arg(x)&quot; /&gt;, where &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Carg%28x%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\arg(x)&quot; class=&quot;latex&quot; title=&quot;\arg(x)&quot; /&gt; is chosen in &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%28-%5Cpi%2C+%5Cpi%5D&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;(-\pi, \pi]&quot; class=&quot;latex&quot; title=&quot;(-\pi, \pi]&quot; /&gt;.  Therefore, if &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%7B%5Cleft%28z%5Ea%5Cright+%29%7D+%3D+a%5Clog%28z%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log{\left(z^a\right )} = a\log(z)&quot; class=&quot;latex&quot; title=&quot;\log{\left(z^a\right )} = a\log(z)&quot; /&gt;, we must have &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Carg%28z%5Ea%29+%3D+a%5Carg%28z%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\arg(z^a) = a\arg(z)&quot; class=&quot;latex&quot; title=&quot;\arg(z^a) = a\arg(z)&quot; /&gt;.  I believe a description of all such complex &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z&quot; class=&quot;latex&quot; title=&quot;z&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a&quot; class=&quot;latex&quot; title=&quot;a&quot; /&gt; will give all solutions &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+z&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = z&quot; class=&quot;latex&quot; title=&quot;x = z&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y+%3D+e%5Ea&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y = e^a&quot; class=&quot;latex&quot; title=&quot;y = e^a&quot; /&gt; (and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=y+%3D+z&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;y = z&quot; class=&quot;latex&quot; title=&quot;y = z&quot; /&gt;, &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x+%3D+e%5Ea&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x = e^a&quot; class=&quot;latex&quot; title=&quot;x = e^a&quot; /&gt;) to &lt;img src=&quot;http://s0.wp.com/latex.php?latex=x%5E%7B%5Clog%28y%29%7D+%3D+y%5E%7B%5Clog%28x%29%7D&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;x^{\log(y)} = y^{\log(x)}&quot; class=&quot;latex&quot; title=&quot;x^{\log(y)} = y^{\log(x)}&quot; /&gt;.  I need to verify that, though, and I also need to think about how to describe such &lt;img src=&quot;http://s0.wp.com/latex.php?latex=z&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;z&quot; class=&quot;latex&quot; title=&quot;z&quot; /&gt; and &lt;img src=&quot;http://s0.wp.com/latex.php?latex=a&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;a&quot; class=&quot;latex&quot; title=&quot;a&quot; /&gt;. I will (hopefully) continue this post later, either by editing this one or writing a new one (depending on how much more I come up with).  &lt;/p&gt;
&lt;p&gt;Any comments to this post are welcome.  I know you can't preview comments, but if you want to use math, just write it as &lt;code&gt;$latex math$&lt;/code&gt; (like &lt;code&gt;$latex \log(x)$&lt;/code&gt; for &lt;img src=&quot;http://s0.wp.com/latex.php?latex=%5Clog%28x%29&amp;amp;bg=ffffff&amp;amp;fg=333333&amp;amp;s=0&quot; alt=&quot;\log(x)&quot; class=&quot;latex&quot; title=&quot;\log(x)&quot; /&gt;). If you mess something up, I’ll edit your comment and fix it.&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1218/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1218/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1218&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Sun, 03 Mar 2013 06:49:35 +0000</pubDate>
</item>
<item>
	<title>Fabian Pedregosa: Loss Functions for Ordinal regression</title>
	<guid isPermaLink="false">tag:fabianp.net/blog,2013-02-27:2013/loss-functions-for-ordinal-regression/</guid>
	<link>http://fabianp.net/blog/2013/loss-functions-for-ordinal-regression/</link>
	<description>&lt;p&gt;&lt;strong&gt; Note: this post contains a fair amount of LaTeX, if you don't
visualize the math correctly come to its &lt;a href=&quot;http://fseoane.net/blog/2013/loss-functions-for-ordinal-regression/&quot;&gt;original location&lt;/a&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In machine learning it is common to formulate the classification task
as a minimization problem over a given loss function. Given data input
data $(x_1, ..., x_n)$ and associated labels $(y_1, ..., y_n), y_i \in
\lbrace-1, 1\rbrace$, the problem becomes to find a function $f(x)$
that minimizes&lt;/p&gt;
&lt;p&gt;$$L(x, y) = \sum_i ^n \text{loss}(f(x_i), y_i)$$&lt;/p&gt;
&lt;p&gt;where loss is any loss function. These are usually functions that
become close to zero when $f(x_i)$ agrees in sign with $y_i$ and have
a non-negative value when $f(x_i)$ have opposite signs. Common choices
of loss functions are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Zero-one loss, $I(f(x_i) = y_i)$, where $I$ is the indicator function.&lt;/li&gt;
&lt;li&gt;Hinge loss, $\text{max}(0, 1 - f(x_i) y_i)$&lt;/li&gt;
&lt;li&gt;Logistic loss, $\log(1 + \exp{f(x_i) y_i})$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/loss_functions.png&quot; alt=&quot;Loss functions&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;http://fa.bianp.net/blog/feed/#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;In the paper &lt;a href=&quot;http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.124.9242&quot;&gt;Loss functions for preference levels: Regression with
discrete ordered
labels&lt;/a&gt;,
the above setting that is commonly used in the classification and
regression setting is extended for the ordinal regression problem. In
ordinal regression, classes can take one of several discrete, but
ordered, labels. Think for example on movie ratings that go from zero
to ten stars. Here there's an inherent order in the sense that
(unlike the multiclass classification setting) not all errors are
equally bad. For instance, it is worse to mistake a 1-star with a
10-star than a 4-star movie with a 5-star one.&lt;/p&gt;
&lt;p&gt;To extend the binary loss to the case of ordinal regression, the
author introduces K-1 thresholds $-\infty = \theta_0 \lt \theta_1 \lt
... \lt \theta_{K-1}=\infty$. Each of the K segments corresponds to one of
K labels and a predicted value between $\theta_{d}$ and $\theta_{d+1}$
corresponds to the prediction of class $d$ (supposing that classes to
from zero to $d$). This generalizes the binary case by considering
zero the unique threshold. &lt;/p&gt;
&lt;p&gt;Suppose K=7 and a that the correct outcome of $y_i$ is 2, that is,
$f(x_i)$ must lie between $\theta_1$ and $\theta_2$. In that case, it
must be verified that $f(x_i) &amp;gt; \theta_0$ and $f(x_i) &amp;gt; \theta_1$ as
well as $f(x_i) &amp;lt; \theta_3 &amp;lt; \theta_4 &amp;lt; \theta_5$. Treating this as
K-1=6 independent classification problems produces the following
family of loss functions (for a hinge loss):&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/loss_functions_ordinal.png&quot; alt=&quot;Ordinal loss functions&quot; /&gt;&lt;/p&gt;
&lt;p&gt;The idea behind Rennie's paper is to sum all these loss function to
produce a single optimization problem that is then the sum of all
threshold violations. Here, not only the function increases when
thresholds are violated, but the slope of the loss function increases
each time a threshold is crossed.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/loss_functions_ordinal2.png&quot; alt=&quot;Ordinal loss functions&quot; /&gt;&lt;/p&gt;


&lt;div class=&quot;footnote&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn:1&quot;&gt;
&lt;p&gt;Code for generating all figures can be found &lt;a href=&quot;http://nbviewer.ipython.org/url/fseoane.net/blog/static/uploads/2013/ordinal%2520regression%2520loss%2520functions.ipynb&quot;&gt;here&lt;/a&gt; &lt;a href=&quot;http://fa.bianp.net/blog/feed/#fnref:1&quot; rev=&quot;footnote&quot; title=&quot;Jump back to footnote 1 in the text&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
	<pubDate>Tue, 26 Feb 2013 23:00:00 +0000</pubDate>
</item>
<item>
	<title>MRocklin: Maximum a Posteriori Estimation</title>
	<guid isPermaLink="true">http://matthewrocklin.com/blog//work/2013/02/25/MaximumAposteriori</guid>
	<link>http://matthewrocklin.com/blog//work/2013/02/25/MaximumAposteriori</link>
	<description>&lt;p&gt;&lt;em&gt;Disclaimer: I know relatively little about this application. Corrections welcome.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;In this post we see how SymPy can simplify common numeric calculations, particularly in Bayesian inference problems.&lt;/p&gt;

&lt;p&gt;Imagine you are a scientist studying some &lt;a href=&quot;http://en.wikipedia.org/wiki/Poisson_process&quot;&gt;counting process&lt;/a&gt; (like radioactive decay or the number of page requests on a web server). You describe this process with a &lt;a href=&quot;http://en.wikipedia.org/wiki/Poisson_distribution&quot;&gt;Poisson random variable&lt;/a&gt; and try to learn the rate parameter of this distribution by observing some random samples.&lt;/p&gt;

&lt;p&gt;If you have no preconceptions about the rate then this problem is easy. You just divide total counts by total time and you’re done.&lt;/p&gt;

&lt;p&gt;A more complex problem arises when external theory provides prior information about your rate parameter (for example physics might impose rules on the rate of radioactive decay). Lets model this problem in SymPy. For the sake of concreteness lets arbitrarily assume that $\lambda$, the rate parameter, follows a Beta distribution with parameters &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'a,b'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lam&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'lambda'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Beta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Poisson&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the lab we observe many samples $x_i$ taken from &lt;code&gt;count&lt;/code&gt;. From these we wish to find the most likely value of &lt;code&gt;rate&lt;/code&gt;. The probability of any single value of &lt;code&gt;rate&lt;/code&gt; given our data can be rewritten with Bayes’ rule.&lt;/p&gt;

&lt;p&gt;$$ p(\lambda \vert x_i) \propto \prod_i p(x_i \vert \lambda) \cdot p(\lambda) $$&lt;/p&gt;

&lt;p&gt;In this case the distributions are given by&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;pdf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;density&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pdf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# density of count, given rate&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pdf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;density&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;         &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;latex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pdf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;$$ p(x_i \vert \lambda) = \frac{\lambda^{x}}{e^{\lambda} x!} \;\;\;\; p(\lambda) = \frac{\lambda^{a - 1} \left(- \lambda + 1\right)^{b - 1} \Gamma\left(a + b\right)}{\Gamma\left(a\right) \Gamma\left(b\right)}$$&lt;/p&gt;

&lt;p&gt;To find the maximizer of $p(\lambda \vert x_i)$ we set the derivative equal to zero. We simplify the computation by taking the &lt;code&gt;log&lt;/code&gt;. Because &lt;code&gt;log&lt;/code&gt; is monotonic this does not change the solution.&lt;/p&gt;

&lt;p&gt;$$ 0 = \frac{d}{d\lambda} \log\left( \prod_i p(x_i \vert \lambda) \cdot p(\lambda)\right) = \frac{d}{d\lambda} \sum_i \log(p(x_i \vert \lambda) \cdot p(\lambda)) $$&lt;/p&gt;

&lt;p&gt;We can accomplish this in SymPy with the following code&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# Model `n` observations with a function `data` indexed by integer `i`&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'i,n'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# Compute log likelihood&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;loglikelihood&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Product&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;density&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;density&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;simplify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loglikeihood&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;$$ \sum_{i=1}^{n} \frac{a \left(\lambda - 1\right) + b \lambda - \lambda \left(\lambda - 1\right) - 2 \lambda + \left(\lambda - 1\right) \operatorname{data}{\left[i \right]} + 1}{\lambda \left(\lambda - 1\right)} = 0 $$&lt;/p&gt;

&lt;h2 id=&quot;discussion&quot;&gt;Discussion&lt;/h2&gt;

&lt;p&gt;SymPy reduces this Bayesian inference problem to finding roots of the above equation. I suspect that many prevalent numeric problems could be similarly accelerated through a symbolic preprocessing step.&lt;/p&gt;

&lt;p&gt;Looking at the equation above it’s clear that this problem can be simplified further. However I like the existing solution because it does not depend on the user possessing any mathematical expertise beyond the ability to describe their mathematical model (the derivatives, log, etc… are generally applicable to this problem). In what other automated ways can SymPy further process computations like this? What are other ways that aren’t in SymPy but could be developed in the future?&lt;/p&gt;

&lt;p&gt;I suspect that the problem given here is analytically solvable. To the extent possible SymPy should try to solve these problems. However for the vast number of problems without analytic solutions I suspect there is still a great deal we can do, either by reducing the problem as above or through the mathematically informed selection of numeric algorithms.&lt;/p&gt;

&lt;p&gt;Various root finding algorithms are appropriate in different cases. Wikipedia suggests &lt;a href=&quot;http://en.wikipedia.org/wiki/Householder%27s_method&quot;&gt;Householder’s Method&lt;/a&gt;, a generalization on Newton’s method for scalar systems with known derivatives. Perhaps in cases where SymPy is unable to solve the problem analytically it could select the correct numeric algorithm. Is this a reasonable use case for SymPy?&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Maximum_a_posteriori_estimation&quot;&gt;Maximum A Posteriori Estimation&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Poisson_process&quot;&gt;Poisson process&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Householder%27s_method&quot;&gt;Householder’s Method&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
	<pubDate>Mon, 25 Feb 2013 08:00:00 +0000</pubDate>
</item>
<item>
	<title>MRocklin: Assuming assumptions</title>
	<guid isPermaLink="true">http://matthewrocklin.com/blog//work/2013/02/05/Assuming</guid>
	<link>http://matthewrocklin.com/blog//work/2013/02/05/Assuming</link>
	<description>&lt;p&gt;SymPy has two assumptions systems called (unimaginatively) “old assumptions” and “new assumptions.” They differ in how they manage mathematical attributes.&lt;/p&gt;

&lt;h3 id=&quot;old_assumptions&quot;&gt;Old Assumptions&lt;/h3&gt;

&lt;p&gt;In old assumptions attributes are bound to variables&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'x'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'y'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;These are then composed into expressions.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And we query these expressions directly&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is_positive&lt;/span&gt;
&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The expression and the attributes are woven into the same object.&lt;/p&gt;

&lt;h3 id=&quot;new_assumptions&quot;&gt;New Assumptions&lt;/h3&gt;

&lt;p&gt;In new assumptions variables and attributes are maintained separately.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'x'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'y'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The construction of mathematical expressions remains unchanged&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But querying now requires two inputs, both the expression and the facts.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The separation of facts from expressions enables rich logical inference but it requires the management of two separate variables, &lt;code&gt;expr&lt;/code&gt; and &lt;code&gt;facts&lt;/code&gt;, rather than just one, &lt;code&gt;expr&lt;/code&gt;. It is difficult to consistently pass the extra variable through all relevant function calls.&lt;/p&gt;

&lt;h3 id=&quot;global_assumptions&quot;&gt;Global assumptions&lt;/h3&gt;

&lt;p&gt;One solution to the management problem is to keep all facts in a globally accessible collection. This removes the need to pass an extra argument between function calls.&lt;/p&gt;

&lt;p&gt;This little known feature is already accessible in SymPy&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Setup&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_assumptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_assumptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Compute in this context&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Unfortunately global variables often cause confusion. We will invariably add an experimental fact to the global collection and then forget to clean up, polluting future computations. In this case we need to always remember to clean up after we’re done.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Cleanup&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_assumptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;global_assumptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This cleanup step is both crucial and forgettable. We can not trust ourselves to remember it.&lt;/p&gt;

&lt;h2 id=&quot;introducing_&quot;&gt;Introducing &lt;code&gt;assuming&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Context managers provide the convenience of global variables with side-effect free security. This is accomplished through consistent cleanup.&lt;/p&gt;

&lt;p&gt;SymPy now includes, &lt;code&gt;assuming&lt;/code&gt;, a context manager for mathematical assumptions. Here is an example&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assuming&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;ask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;positive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;All &lt;code&gt;ask&lt;/code&gt; calls within this block have global-like access to the knowledge &lt;code&gt;Q.positive(x)&lt;/code&gt; and &lt;code&gt;Q.positive(y)&lt;/code&gt;. These calls may be at top level as in the example above or buried deeply within function calls. This arrangement is convenient because we do not need to pass down &lt;code&gt;facts&lt;/code&gt; through all function calls. This knowledge is pervasive like a global variable but contained within the &lt;code&gt;with assuming&lt;/code&gt; clause.&lt;/p&gt;</description>
	<pubDate>Tue, 05 Feb 2013 08:00:00 +0000</pubDate>
</item>
<item>
	<title>Aaron Meurer: Tip for debugging SymPy with PuDB</title>
	<guid isPermaLink="false">http://asmeurersympy.wordpress.com/?p=1204</guid>
	<link>http://asmeurersympy.wordpress.com/2013/01/28/tip-for-debugging-sympy-with-pudb/</link>
	<description>&lt;p&gt;Usually, when I debug SymPy code with &lt;a href=&quot;http://asmeurersympy.wordpress.com/2010/06/04/pudb-a-better-python-debugger/&quot;&gt;PuDB&lt;/a&gt;, I create a script that calls the code, then I put a &lt;/p&gt;
&lt;pre class=&quot;brush: python; title: ; notranslate&quot;&gt;import pudb; pudb.set_trace()
&lt;/pre&gt;
&lt;p&gt;in the SymPy library code where I want to start debugging. But this is annoying, first because I have to create the script, and second, because I have to modify the library code, and there’s always the risk of accidentally commiting that.  Also, if I want to start debugging somewhere else, I have to edit the files and change it.&lt;/p&gt;
&lt;p&gt;Well, I just figured out a better way.  &lt;del datetime=&quot;2013-01-30T02:32:19+00:00&quot;&gt;First, if you haven’t already, add an alias like this in your bash config file (&lt;code&gt;~/.profile&lt;/code&gt; or &lt;code&gt;~/.bashrc&lt;/code&gt;):&lt;code&gt;alias pudb='python -m pudb.run&lt;/code&gt;.&lt;/del&gt; &lt;i&gt;As of &lt;a href=&quot;https://github.com/inducer/pudb/pull/54&quot;&gt;this pull request&lt;/a&gt;, this is no longer necessary.  A &lt;code&gt;pudb&lt;/code&gt; script is installed automatically with PuDB.&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;This will let you run &lt;code&gt;pudb script.py&lt;/code&gt; to debug &lt;code&gt;script.py&lt;/code&gt;.  &lt;del datetime=&quot;2013-02-05T04:22:39+00:00&quot;&gt;Next, start PuDB. It doesn’t matter with what. You can just run &lt;code&gt;touch test.py&lt;/code&gt;, and then &lt;code&gt;pudb test.py&lt;/code&gt;.&lt;/del&gt;  &lt;i&gt;It occured to me that you can just set the breakpoint when starting isympy with PuDB.&lt;/i&gt;&lt;/p&gt;
&lt;p&gt;Now, press &lt;code&gt;m&lt;/code&gt;, and navigate to where in the library code you want to start debugging.  It also helps to use &lt;code&gt;/&lt;/code&gt; to search the current file and &lt;code&gt;L&lt;/code&gt; to jump to a specific line.  When you get to the line where you want to start debugging, press &lt;code&gt;b&lt;/code&gt; to set a breakpoint. You can do this in multiple places if you want.&lt;/p&gt;
&lt;p&gt;Now, you just have to start &lt;code&gt;isympy&lt;/code&gt; from within PuDB.  Just run &lt;code&gt;pudb bin/isympy&lt;/code&gt;, and immediately press &lt;code&gt;c&lt;/code&gt; to jump to the interactive prompt.  Now, run whatever code you want to debug.  When it gets to the breakpoint, PuDB will open, and you can start debugging.  If you type &lt;code&gt;c&lt;/code&gt; to continue, it will go back to isympy. But the next time you run something that hits the breakpoint, it will open PuDB again. &lt;/p&gt;
&lt;p&gt;This trick works because breakpoints are saved to file (at &lt;code&gt;~/.config/pudb/saved-breakpoints&lt;/code&gt;). In fact, if you want, you can just modify that file in the first step.  You can edit your saved breakpoints in the bottom right pane of PuDB. &lt;/p&gt;
&lt;p&gt;When you are done and you type &lt;code&gt;Ctrl-D&lt;/code&gt; PuDB will pop-up again, asking if you want to quit.  That’s because it was running the whole time, underneath isympy.  Just press &lt;code&gt;q&lt;/code&gt;.  Note that you should avoid pressing &lt;code&gt;q&lt;/code&gt; while debugging, or else PuDB will quit, and you will be left with just normal isympy (it won’t break at your breakpoints any more).  Actually, if you do this, but doing &lt;code&gt;Ctrl-D&lt;/code&gt; still opens the PuDB prompt, you can just press “Restart”, and it should start working again.  Note that “Restart” will not actually reset isympy:  all your saved variables will still be the same, and any changes to the library code will not be reloaded.  To do that, you have to completely exit and start over again.&lt;/p&gt;
&lt;p&gt;Of course, there is nothing SymPy specific about this trick. As long as you have a script that acts as an entry point to an interactive console for your application, you can use it.  If you just use IPython, you can use something like &lt;code&gt;pudb /bin/ipython&lt;/code&gt; (replace &lt;code&gt;/bin/ipython&lt;/code&gt; with the output of &lt;code&gt;which ipython&lt;/code&gt;).  &lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1204/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1204/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1204&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Mon, 28 Jan 2013 00:43:49 +0000</pubDate>
</item>
<item>
	<title>MRocklin: Commutative Unification</title>
	<guid isPermaLink="true">http://matthewrocklin.com/blog//work/2013/01/25/Commutative-Unification</guid>
	<link>http://matthewrocklin.com/blog//work/2013/01/25/Commutative-Unification</link>
	<description>&lt;p&gt;LogPy now supports commutative and associative pattern matching on expression trees. This is a standard requirement for computer algebra systems like SymPy but not a traditional feature of logic programming systems.&lt;/p&gt;

&lt;p&gt;Pattern-matching in LogPy is expressed by the &lt;code&gt;eq&lt;/code&gt; goal. This goal relies on unification to match trees of tuples. Unification is a computational cornerstone of LogPy. Traditionally &lt;code&gt;eq&lt;/code&gt; performs exact structural pattern matching. For example&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;(1, x, (5, y, 7))  matches  (1, (2, 3, 4), (5, 6, 7))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;with the following substitution&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{x: (2, 3, 4), y: 6}&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;expression_trees&quot;&gt;Expression Trees&lt;/h2&gt;

&lt;p&gt;We traditionally represent both mathematical expressions and computer programs with expression trees. For example \(y * (1 + x)\) can be visualized as follows&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://mrocklin.github.com/blog/images/arith-expr.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We represent this expression in LogPy with tuples. The head/first element of each tuple is an operation like &lt;code&gt;add&lt;/code&gt; or &lt;code&gt;mul&lt;/code&gt;. All subsequent elements (the tail) are the arguments/children of that expression.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;y * (x + 1) -&amp;gt; (mul, y, (add, x, 1))&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;matching_expression_trees&quot;&gt;Matching Expression Trees&lt;/h2&gt;

&lt;p&gt;This form is exactly what we use for unification. We could match this pattern against the following expression, treating &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; as wildcard logic variables&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;(mul, y, (add, x, 1))  matches  (mul, (pow, 2, 10), (add, 3, 1))&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;with the following substitution&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{x: 3, y: (pow, 2, 10)}&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;But what about the following?&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;(add, x, 1)  matches?  (add, 1, 3)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This doesn’t unify. While the first (&lt;code&gt;add&lt;/code&gt;, &lt;code&gt;add&lt;/code&gt;) and second (&lt;code&gt;x&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;) elements can match (if &lt;code&gt;{x: 1}&lt;/code&gt;) the third elements (&lt;code&gt;1&lt;/code&gt;, &lt;code&gt;3&lt;/code&gt;) will not.&lt;/p&gt;

&lt;p&gt;As mathematicians however we know that because &lt;code&gt;add&lt;/code&gt; is commutative these expressions should match if we are allowed to rearrange the terms in the tail and match &lt;code&gt;1&lt;/code&gt; to &lt;code&gt;1&lt;/code&gt; and &lt;code&gt;x&lt;/code&gt; to &lt;code&gt;3&lt;/code&gt;. LogPy doesn’t know this by default. LogPy is not a math library.&lt;/p&gt;

&lt;h2 id=&quot;building_commutative_equality&quot;&gt;Building Commutative Equality&lt;/h2&gt;

&lt;p&gt;Given the goal &lt;code&gt;seteq&lt;/code&gt; for set unification and a goal &lt;code&gt;conso&lt;/code&gt; for head-tail pattern matching we build &lt;code&gt;eq_commutative&lt;/code&gt; for commutative matching.&lt;/p&gt;

&lt;p&gt;Example of &lt;code&gt;seteq&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;run(0, x, seteq((1, 2, x), (3, 1, 2)))  # seteq matches within sets
(3,)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Example of &lt;code&gt;conso&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;run(0, head,  conso(head, tail, (1, 2, 3, 4)))
(1,)
run(0, tail,  conso(head, tail, (1, 2, 3, 4)))
((2, 3, 4),)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Given these two it is easy to build &lt;code&gt;eq_commutative&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eq_commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vtail&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;conso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vtail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;seteq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vtail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That is we require all of the following (&lt;code&gt;lall&lt;/code&gt; is logical all).&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;u&lt;/code&gt; must be of the form &lt;code&gt;(operation, utail....)&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;&lt;code&gt;v&lt;/code&gt; must be of the form &lt;code&gt;(operation, vtail....)&lt;/code&gt;. Note that the same variable &lt;code&gt;operation&lt;/code&gt; must be the same in both expressions.&lt;/li&gt;

&lt;li&gt;The operation must be commutative (operations register themselves beforehand, see example below)&lt;/li&gt;

&lt;li&gt;&lt;code&gt;utail&lt;/code&gt; and &lt;code&gt;vtail&lt;/code&gt; must unify under set equality.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I am glossing over some details here, like “what about associative matching” and “how does &lt;code&gt;seteq&lt;/code&gt; work?” but this should give a high-level view of how logic programs are made. Lets see an example of associative/commutative matching&lt;/p&gt;

&lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt;

&lt;p&gt;This is the &lt;a href=&quot;https://github.com/logpy/logpy/blob/master/examples/commutative.py&quot;&gt;standard example&lt;/a&gt; for commutative matching found in the &lt;a href=&quot;https://github.com/logpy/logpy&quot;&gt;repository&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy.assoccomm&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq_assoccomm&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy.assoccomm&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;associative&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Define some dummy Operationss&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'add'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'mul'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Register that these ops are commutative using the facts system&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commutative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;associative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;associative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Define some wild variables&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'x'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'y'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Two expressions to match&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# (1 + x) * y&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# 2 * (3 + 1)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;         
&lt;span class=&quot;c&quot;&gt;# ((3, 2),) #  meaning one result with x matches to 3 and y matches to 2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;With this LogPy contains all of the functionality of SymPy’s old &lt;code&gt;unify&lt;/code&gt; module but in a cleaner and much more extensible form.&lt;/p&gt;</description>
	<pubDate>Fri, 25 Jan 2013 08:00:00 +0000</pubDate>
</item>
<item>
	<title>MRocklin: LogPy - Facts and Relations</title>
	<guid isPermaLink="true">http://matthewrocklin.com/blog//work/2013/01/17/LogPy-Facts-Relations</guid>
	<link>http://matthewrocklin.com/blog//work/2013/01/17/LogPy-Facts-Relations</link>
	<description>&lt;p&gt;In &lt;a href=&quot;http://mrocklin.github.com/blog/work/2013/01/14/LogPy-Introduction/&quot;&gt;my last post&lt;/a&gt; I introduced &lt;a href=&quot;http://github.com/logpy/logpy&quot;&gt;LogPy&lt;/a&gt;, a library for logic and relational programming in Python. In this post I show how LogPy can be used as a quick and dirty in-memory database.&lt;/p&gt;

&lt;h2 id=&quot;data&quot;&gt;Data&lt;/h2&gt;

&lt;p&gt;As an example we’ll look at the 50 states in the US. We know two things about each state.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Is it coastal? For example California (CA) is coastal because it is next to the Pacific Ocean, Arizona (AZ) is not.&lt;/li&gt;

&lt;li&gt;To which other states is it adjacent? For example California (CA) is adjacent to Oregon (OR), Arizona (AZ) and Nevada (NV).&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;We express data in LogPy using relations and facts&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;here we have asserted the fact that &lt;code&gt;'CA'&lt;/code&gt; is coastal. Lets quickly do this for all of the coastal states&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coastal_states&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'WA,OR,CA,TX,LA,MS,AL,GA,FL,SC,NC,VA,MD,DE,NJ,NY,CT,RI,MA,ME,NH,AK,HI'&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coastal_states&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Adjacency is only slightly more complex to express. The following code asserts that California (CA) is adjacent to Arizona (AZ) and that California (CA) is adjacent to Oregon (OR).&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'AZ'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'OR'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we need a list of all adjacent pairs of states. Fortunately &lt;a href=&quot;http://writeonly.wordpress.com/2009/03/20/adjacency-list-of-states-of-the-united-states-us/&quot;&gt;someone else&lt;/a&gt; has already compiled such a list. His data looks like this&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;AK
AL,MS,TN,GA,FL
AR,MO,TN,MS,LA,TX,OK
AZ,CA,NV,UT,CO,NM
CA,OR,NV,AZ
CO,WY,NE,KS,OK,NM,AZ,UT
...&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Each line says that the first element is adjacent to the following ones. So for example Alaska (AK) is adjacent to no states and California (CA) is adjacent to Oregon (OR), Nevada (NV) and Arizona (AZ). We can parse this file and assert the relevant facts with fairly standard Python code&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'examples/data/adjacent-states.txt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# lines like 'CA,OR,NV,AZ'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;adjlist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjlist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;                   &lt;span class=&quot;c&quot;&gt;# ['CA', 'OR', 'NV', 'AZ']&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:]&lt;/span&gt;        &lt;span class=&quot;c&quot;&gt;# 'CA', ['OR', 'NV', 'AZ']&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# e.g. 'CA' is adjacent to 'OR',&lt;/span&gt;
                                    &lt;span class=&quot;c&quot;&gt;#      'CA' is adjacent to 'NV', etc...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;queries&quot;&gt;Queries&lt;/h2&gt;

&lt;p&gt;Once have asserted the relevant facts we can run queries with the logical expressions of LogPy. Recall from the &lt;a href=&quot;http://mrocklin.github.com/blog/work/2013/01/14/LogPy-Introduction/&quot;&gt;last post&lt;/a&gt; that we can use relations to express logical goals and use &lt;code&gt;run&lt;/code&gt; to search for cases that satisfy those goals. Here are two simple queries&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'NY'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# is California adjacent to New York?&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'CA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# all states next to California&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'OR'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'NV'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'AZ'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can construct more complex queries with multiple goals. In SQL the following queries would require a &lt;code&gt;JOIN&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# create second variable for complex queries&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'TX'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# all coastal states next to Texas&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;                 &lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'LA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coastal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;           &lt;span class=&quot;c&quot;&gt;# five states that border a coastal state&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;                 &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'VT'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'AL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'WV'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'DE'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'MA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'TN'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# all states adjacent to Tennessee&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;                 &lt;span class=&quot;n&quot;&gt;adjacent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'FL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#        and adjacent to Florida&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'GA'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'AL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Facts and relations are currently indexed by default, yielding relatively fast query times.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;LogPy provides a declarative interface to query complex data. Data is stored as facts/tuples and queries are expressed as logical goals. This system is expressive and can match SQL in many respects. The use of Logic programming languages for database queries has roots in &lt;a href=&quot;http://en.wikipedia.org/wiki/Datalog&quot;&gt;Datalog&lt;/a&gt; a subset of Prolog designed for databases.&lt;/p&gt;</description>
	<pubDate>Thu, 17 Jan 2013 08:00:00 +0000</pubDate>
</item>
<item>
	<title>MRocklin: Introducing LogPy</title>
	<guid isPermaLink="true">http://matthewrocklin.com/blog//work/2013/01/14/LogPy-Introduction</guid>
	<link>http://matthewrocklin.com/blog//work/2013/01/14/LogPy-Introduction</link>
	<description>&lt;p&gt;&lt;a href=&quot;http://github.com/logpy/logpy&quot;&gt;LogPy&lt;/a&gt; is a library for logic and relational programming in Python. This post contains some introductory examples.&lt;/p&gt;

&lt;h2 id=&quot;informative_examples&quot;&gt;Informative Examples&lt;/h2&gt;

&lt;p&gt;LogPy enables the expression of relations and the search for values which satisfy them. The following code is the “Hello, world!” of logic programming. It asks for &lt;code&gt;1&lt;/code&gt; number, &lt;code&gt;x&lt;/code&gt;, such that &lt;code&gt;x == 5&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;membero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conde&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Multiple variables and multiple goals can be used simultaneously. The following code asks for a number x such that &lt;code&gt;x == z&lt;/code&gt; and &lt;code&gt;z == 3&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;LogPy uses &lt;a href=&quot;http://en.wikipedia.org/wiki/Unification_%28computer_science%29&quot;&gt;unification&lt;/a&gt;, an advanced form of pattern matching, to match within expression trees. The following code asks for a number, x, such that &lt;code&gt;(1, 2) == (1, x)&lt;/code&gt; holds.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The above examples use &lt;code&gt;eq&lt;/code&gt;, a &lt;em&gt;goal&lt;/em&gt; to state that two expressions are equal. Other goals exist. &lt;code&gt;membero(item, coll)&lt;/code&gt;, a goal, states that &lt;code&gt;item&lt;/code&gt; is a member of &lt;code&gt;coll&lt;/code&gt;, a collection.&lt;/p&gt;

&lt;p&gt;The following example uses &lt;code&gt;membero&lt;/code&gt; twice to ask for 2 values of x, such that x is a member of &lt;code&gt;(1, 2, 3)&lt;/code&gt; &lt;em&gt;and&lt;/em&gt; that x is a member of &lt;code&gt;(2, 3, 4)&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;membero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# x is a member of (1, 2, 3)&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;membero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# x is a member of (2, 3, 4)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can write other fancier goals too. Here is a list of all prime numbers within &lt;code&gt;1..10&lt;/code&gt;. &lt;code&gt;primo&lt;/code&gt; depends on the traditional &lt;code&gt;prime&lt;/code&gt; and &lt;code&gt;isprime&lt;/code&gt; functions found in &lt;code&gt;sympy&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy.math&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;primo&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;membero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;primo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Want just a few primes? Here are five numbers that satisfy the &lt;code&gt;primo&lt;/code&gt; goal&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;primo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;relations&quot;&gt;Relations&lt;/h2&gt;

&lt;p&gt;We often want to state and then query data. Logic programming represents data a set of facts and represents queries with logical goals. In the following examples we assert some facts about the Simpsons family, construct queries through logical goals and then run the queries to obtain results.&lt;/p&gt;

&lt;p&gt;The following code defines a &lt;code&gt;parent&lt;/code&gt; relation and uses it to state who fathered whom.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Relation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;facts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Lisa'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;               &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Abe'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We ask some questions using the &lt;code&gt;parent&lt;/code&gt; relation as a goal constructor. Who is Bart’s father?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# one x such that x is a parent of Bart&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Homer'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# two xs such that Homer is a parent of x&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Lisa'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can use intermediate variables for more complex queries. Who is Bart’s grandfather?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
              &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Abe'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can express the grandfather relationship separately. In this example we use &lt;code&gt;conde&lt;/code&gt;, a goal constructor for logical &lt;em&gt;and&lt;/em&gt; and &lt;em&gt;or&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;grandparent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conde&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grandparent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Bart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Abe,'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;grandparent&lt;/code&gt; demonstrates that we can construct complex relations programmatically. How would you define sibling? How about uncle or aunt? How about descendant?&lt;/p&gt;

&lt;p&gt;If you’d like to play with LogPy you can install it with pip or easy_install using&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;pip install logic&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or clone it directly from github&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;git clone git@github.com:logpy/logpy.git&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Source is available at &lt;a href=&quot;http://github.com/logpy/logpy/&quot;&gt;http://github.com/logpy/logpy/&lt;/a&gt;, design input and contributions are much appreciated.&lt;/p&gt;

&lt;h2 id=&quot;logic_programming_in_general&quot;&gt;Logic Programming in General&lt;/h2&gt;

&lt;p&gt;Logic and relational programming are making a comeback. They were popular in the 80s, died during the AI dark ages, and have recently begun a resurgence in the functional programming community. Logic programs write music, search databases, write numeric algorithms, and build testing frameworks. It is expressive for a wide class of problems.&lt;/p&gt;

&lt;p&gt;The design of LogPy is based off of &lt;code&gt;miniKanren&lt;/code&gt;, a simple and powerful implementation in Scheme popularized through the &lt;code&gt;core.logic&lt;/code&gt; Clojure library.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://kanren.sourceforge.net/&quot;&gt;miniKanren&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;https://github.com/clojure/core.logic&quot;&gt;core.logic&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Logic_programming&quot;&gt;Wikipedia article on Logic Programming&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;https://github.com/clojure/core.logic/wiki/A-Core.logic-Primer&quot;&gt;core.logic primer&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
	<pubDate>Mon, 14 Jan 2013 08:00:00 +0000</pubDate>
</item>
<item>
	<title>Brian Granger: Personal Reflections on Features and Scope</title>
	<guid isPermaLink="true">http://brianegranger.com/?p=261</guid>
	<link>http://brianegranger.com/?p=261</link>
	<description>&lt;p&gt;In a previous &lt;a href=&quot;http://brianegranger.com/?p=249&quot; target=&quot;_blank&quot; title=&quot;previous blog post&quot;&gt;blog post&lt;/a&gt;, I talked about the problem of ever expanding feature sets in open source software projects.  I discussed the hidden  costs and liabilities of adding new features and proposed practical ways of tackling these problems.  However, I think that story is incomplete.  Of course open source projects will want to add features, even some with massive costs and liabilities, but how should that happen?  How should projects decide which features to add?  What criteria should be used?  To answer these questions, I want to describe a few of my own experiences in dealing with features and scope in IPython and PyZMQ.&lt;/p&gt;
&lt;p&gt;First, &lt;a href=&quot;http://ipython.org/&quot; target=&quot;_blank&quot; title=&quot;IPython&quot;&gt;IPython&lt;/a&gt;.  Anyone who is familiar with IPython will probably read my previous blog post and say, “wait, hasn’t IPython experienced a massive amount of feature creep over the last few years.  It started out as a simple terminal based interactive shell, but has grown to include parallel computing, a web application and a GUI application.  The IPython developers, including yourself, have shown little, if any restraint in adding features.”&lt;/p&gt;
&lt;p&gt;Back in 2004, IPython was the 3 year old child of Fernando Perez.  At that point, it was already a popular, enhanced interactive Python shell.  I had started to work on parallel computing libraries for Python, when Fernando visited me at Santa Clara University (we had been classmates in graduate school starting in 1996).  We stayed up until 3 am talking about Python’s rapidly evolving ecosystem of scientific computing libraries, interactive computing environments and the future of IPython and my parallel computing libraries.  IPython was a fantastic tool, but both of us wanted more.  We wanted a web based IPython Notebook.  We wanted integrated parallel computing tools.  We began to see that all of these things required the same architecture: a stateful computational engine, the IPython Kernel, that could run user code and send back results over a network.  Once that existed, everything else could be layered on top, even the terminal based IPython.  The vision that emerged that night was specific and, while ambitious, was ultimately finite.  As Fernando describes, in this &lt;a href=&quot;http://blog.fperez.org/2012/01/ipython-notebook-historical.html&quot; target=&quot;_blank&quot; title=&quot;History of the IPython Notebook&quot;&gt;blog post&lt;/a&gt;, it took us ~6 years and multiple attempts to build this architecture.  Now, we have a terminal, QtConsole, web-based notebook and parallel computing library all built on top of a common IPython Kernel and message specification.  While these things may look like feature creep from the outside, they have been part of a deliberate and calculated plan.&lt;/p&gt;
&lt;p&gt;What I have learned from this experience is that it is absolutely critical for the core developers of an open source project to consciously and deliberately set the scope and vision for the project.  This vision can even be ambitious.  Once that scope is set, choosing which features to add becomes easy: to first order, you add features within that scope.  That doesn’t mean you don’t count the cost of those features or that you add all possible features within the scope.  The scope provides an upper bound on the feature set.  So why does IPython have parallel computing tools?  Because we set the scope early on to include that.&lt;/p&gt;
&lt;p&gt;Second, &lt;a href=&quot;https://github.com/zeromq/pyzmq&quot; target=&quot;_blank&quot; title=&quot;PyZMQ&quot;&gt;PyZMQ&lt;/a&gt;.  As we developed IPython’s architecture, we realized that we needed better networking/messaging libraries.  This led to the creation of PyZMQ in 2010, which is a set of Python bindings for &lt;a href=&quot;http://www.zeromq.org/&quot; target=&quot;_blank&quot; title=&quot;ZeroMQ&quot;&gt;ZeroMQ&lt;/a&gt;.  Notice the scope of PyZMQ: Python bindings for ZeroMQ.  Fast forward to Spring of 2012.  In the course of working on the IPython Notebook, I had written some additional code for building PyZMQ based web applications: a module for simple, PyZMQ-based RPC and a module for running Tornado event handlers in a scalable and distributed manner using PyZMQ.  I submitted two &lt;a href=&quot;https://github.com/zeromq/pyzmq/pull/177&quot; target=&quot;_blank&quot; title=&quot;pull request 1&quot;&gt;pull&lt;/a&gt; &lt;a href=&quot;https://github.com/zeromq/pyzmq/pull/174&quot; target=&quot;_blank&quot; title=&quot;pull request 2&quot;&gt;requests&lt;/a&gt; to include these modules in PyZMQ.  One of them was quickly merged and the other languished in code review for almost a year.  Min began to sense that these modules, while useful, were not a good match for inclusion in PyZMQ.  Their API was very unstable and they hadn’t been well tested.  They would require a much faster release cycle compared to the rest of PyZMQ, which was very stable and well tested.  This Christmas break, I finally woke up to the real problem.  These modules were outside the scope of PyZMQ.  They involved an implicit and undiscussed increase in scope from “Python bindings for ZeroMQ” to “A general place for ZeroMQ based tools in Python.”  Once I realized this, Min and I pulled them out of PyZMQ and created separate projects for them.  Again, the important thing is to set the scope of a project.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt; &lt;/p&gt;</description>
	<pubDate>Wed, 09 Jan 2013 18:44:01 +0000</pubDate>
</item>
<item>
	<title>Brian Granger: Features and Scope in Open Source Software</title>
	<guid isPermaLink="true">http://brianegranger.com/?p=249</guid>
	<link>http://brianegranger.com/?p=249</link>
	<description>&lt;p&gt;Follow up: I have created another blog post to clarify some of these issues &lt;a href=&quot;http://brianegranger.com/?p=261&quot; target=&quot;_blank&quot; title=&quot;Follow up post.&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The IPython project, through UC Berkeley and Cal Poly San Luis Obispo, just received a $1.15 million dollar grant from the Alfred P. Sloan Foundation to develop the IPython Notebook over a two year period.  More details about this grant can be found on the &lt;a href=&quot;http://ipython.org/sloan-grant.html&quot; target=&quot;_blank&quot; title=&quot;IPython website&quot;&gt;IPython website&lt;/a&gt;.  This is really exciting for us because, so far, we have mostly developed IPython in our spare time.  But I think there is also a potential danger here.  &lt;strong&gt;The danger is that we will add lots of new features.&lt;/strong&gt;  What, you say, lots of features will endanger IPython?  What else are you going to do with a million dollars if you are not going to add lots of new features?  The answer is simple: we are going to add as few features as possible and knock each of them out of the park.  The future of the project depends on this.&lt;/p&gt;
&lt;p&gt;This is a topic that I have been thinking about a lot lately: how do open source projects decide which features to implement.  Most active open source projects I am involved in see a continual stream of new features.  Just hop onto the GitHub pages for &lt;a href=&quot;https://github.com/sympy/sympy/pulls&quot; target=&quot;_blank&quot; title=&quot;SymPy GitHub&quot;&gt;SymPy&lt;/a&gt; or &lt;a href=&quot;https://github.com/ipython/ipython/pulls&quot; target=&quot;_blank&quot; title=&quot;IPython GitHub&quot;&gt;IPython&lt;/a&gt; and watch the activity.  Anyone with the right skill set can fork a project on GitHub and submit a pull request within a few hours.  Amazingly, this is happening all the time; apparently people love to code.  While each new feature is an asset for the project, it also brings a cost, or liability, with it.  If a project ignores those costs, it can have long term, detrimental effects on the project.  What are these liabilities and costs associated with new features?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Each new feature adds complexity to the code base.  Complexity makes a code base less hackable, maintainable, extensible.&lt;/li&gt;
&lt;li&gt;Each new feature increases the “bug surface” of the project.  When a feature also adds complexity, those bugs become harder to find and fix.&lt;/li&gt;
&lt;li&gt;Each new feature requires documentation to be written and maintained.&lt;/li&gt;
&lt;li&gt;Each new feature requires support over email or IRC.&lt;/li&gt;
&lt;li&gt;Endless feature expansion, or feature creep, requires developers to specialize.  They can’t follow the entire project, so they have to focus on a subset that can fit into their brain and schedule.&lt;/li&gt;
&lt;li&gt;Each new feature has to be tested on a wide variety on platforms (Linux, Mac, Windows) and environments (PyPy, Python 2, Python 3).&lt;/li&gt;
&lt;li&gt;Each new feature adds complexity to the user experience.  Sometimes it’s the documentation, other times the UI or configuration options.&lt;/li&gt;
&lt;li&gt;When you spend on one feature, another feature or bug fix didn’t get worked on.  If you didn’t prioritize things beforehand, you just spent time on something less important to your users.  Either that or you did shoddy work while trying to do it all.&lt;/li&gt;
&lt;li&gt;Features multiply like bunnies.  How many times have you heard, “wow, that new feature is really cool, could you make it do X as well?”&lt;/li&gt;
&lt;li&gt;Features are easy to add, difficult to remove.  Once you add a feature, you are stuck with the costs and liabilities.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For a typical open source project, what percentage of features get used regularly by most users?  15%? 40%?.  Let’s be really optimistic and say that number is 60%.  That means that developers are spending 40% of their time and effort on features that don’t really get used.  Ouch.  Then why do open source projects keep adding features without counting the cost?  I think there are a number of factors that lead to this, but one in particular comes to my mind.  &lt;strong&gt;It is hard to say no.&lt;/strong&gt;  When an end user submits a feature request over email or on GitHub issues, it is hard to tell them, “great idea, but we are not doing that.”  It is even more difficult to say no after someone submits a pull request that implements a new feature.  It is difficult to build a vibrant project community if you are always saying no in these contexts.&lt;/p&gt;
&lt;p&gt;Clearly, we need a better way of limiting feature expansion in open source projects.  What can we do to better evaluate the hidden costs of adding new features so we can make informed, strategic decisions about which features to add?  Here are some ideas that have emerged out of my recent reading and conversations.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create a wiki page for your project, where you list all of the features you are &lt;strong&gt;not&lt;/strong&gt; going to implement.  Publicize this list, discuss it and make it an important part of the development workflow.  Another way of phrasing this is to decide on a finite scope for the project.  When you are going through this exercise, come up with an initial scope and then force yourself to reduce it.&lt;/li&gt;
&lt;li&gt;Make features fight hard to be accepted and implemented.  Communicate to the community and developers that the default answer to feature requests is no (it’s not personal!) and don’t even consider implementation until the much of the community is crying “we absolutely must have this.” Even then, you don’t have to say yes.&lt;/li&gt;
&lt;li&gt;Create a workflow that separates feature requests from other tickets/issues.  When people submit new feature requests, encourage discussion, but don’t automatically promote the feature to the project’s todo list.  Then you can promote them, as needed, to the project’s todo list in an informed and prioritized manner.&lt;/li&gt;
&lt;li&gt;When new feature requests appear, discuss the specific costs and liabilities associated with the feature.  Build this thinking into your development DNA.&lt;/li&gt;
&lt;li&gt;Communicate to the community and its developers why it is important to fight against feature expansion.  Focus on the benefits of waging this war: smaller, simpler code base, fewer bugs, more time to focus on important features, easier to support, etc.&lt;/li&gt;
&lt;li&gt;Remove features that have too great a cost or that few users actually use.  Maybe even create a special exception you can raise (FeatureReductionWarning?) to help people transition away from them.&lt;/li&gt;
&lt;li&gt;Refactor the codebase to reduce complexity.  While this doesn’t directly reduce the number of features, it can mitigate the cost of existing and future features.  Extra bonus points if you can implement a new feature while dramatically reducing the complexity of the code base.&lt;/li&gt;
&lt;li&gt;Improve testing.  Again, this is mitigation.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you discuss and evaluate features, here are some questions you can ask yourself and the community:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What fraction of your user base will use the feature?  How often will they use it?  If it won’t be used by most of your users, just say no.&lt;/li&gt;
&lt;li&gt;Can the feature be added as a third party plugin or library?  This is especially useful if the new feature would increase the overall scope of the project, but make a great standalone project.&lt;/li&gt;
&lt;li&gt;How difficult will it be to test, debug, document, and maintain the feature?  What fraction of your development team is capable or interested in doing this work?  If the maintanence is huge and only one person is willing to do it, it is time to rethink it.&lt;/li&gt;
&lt;li&gt;Can you implement the functionality in a more limited, but much simpler manner?  Developers absolutely love to implement features in the most general way possible.  It requires developer discipline and focus to resist this temptation.&lt;/li&gt;
&lt;li&gt;One way that developers over engineer things is by making every conceivable thing configurable.  Can you simplify the feature by removing configurability and just choosing great defaults?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One thoughtful discussion of these issues is in the book &lt;a href=&quot;http://gettingreal.37signals.com/&quot; target=&quot;_blank&quot; title=&quot;Getting Real&quot;&gt;Getting Real&lt;/a&gt;, by some of the folks at &lt;a href=&quot;http://37signals.com/&quot; target=&quot;_blank&quot; title=&quot;37signals&quot;&gt;37signals&lt;/a&gt;.  They propose something quite radical for handling feature requests in commercial web applications.  Here is what they say: “How do you manage them?  You don’t.  Just read them and then throw them away.”  Their experience is that the important features will keep coming up.  When this happens, you know they are important and you don’t have to write them down to keep track of them.  This is definitely my experience in developing the IPython Notebook.  The most important features, the ones that I am going to spend time on this year, are probably not written down anywhere, but everyone in the community is discussing them and couldn’t possibly forget them.  So why on earth do we currently have &lt;a href=&quot;https://github.com/ipython/ipython/issues?direction=desc&amp;amp;labels=type-enhancement&amp;amp;page=1&amp;amp;sort=updated&amp;amp;state=open&quot; target=&quot;_blank&quot; title=&quot;177 open enhancement issues for IPython&quot;&gt;177 open new feature issues&lt;/a&gt; (we call them “enhancements”) on IPython’s GitHub site?&lt;/p&gt;
&lt;p&gt;In an open source project, I don’t think it makes sense to literally throw away feature requests; sometimes the ensuing discussion is valuable and worth preserving.  But what about allowing the discussion to occur, for example in the context of a GitHub issue, but then closing the issue.  If someone wants to re-open the feature request at a later time to voice their support, they should be encouraged to do that.  But again, once discussion stops, the issue should be re-closed.  As this process repeats itself, the community is essentially voting for the features they want.  This would also dramatically reduce the number of open issues, which helps developers to better manage the active work on the project.&lt;/p&gt;
&lt;p&gt;I don’t think this is the only way to manage feature requests intelligently in an open source project.  I would love to hear other ideas.  How are you managing these things in your own projects?  I realize that I am far from the first person to write about these things.  What other resources do you know of that address these problems?&lt;/p&gt;</description>
	<pubDate>Wed, 09 Jan 2013 03:49:20 +0000</pubDate>
</item>
<item>
	<title>Fabian Pedregosa: Memory plots with memory_profiler</title>
	<guid isPermaLink="false">tag:fabianp.net/blog,2013-01-04:2013/memory-plots-with-memory_profiler/</guid>
	<link>http://fabianp.net/blog/2013/memory-plots-with-memory_profiler/</link>
	<description>&lt;p&gt;Besides performing a line-by-line analysis of memory consumption,
&lt;a href=&quot;http://pypi.python.org/pypi/memory_profiler&quot;&gt;&lt;code&gt;memory_profiler&lt;/code&gt;&lt;/a&gt;
exposes some functions that allow to retrieve the memory consumption
of a function in real-time, allowing e.g. to visualize the memory
consumption of a given function over time.&lt;/p&gt;
&lt;p&gt;The function to be used is &lt;code&gt;memory_usage&lt;/code&gt;. The first argument
specifies what code is to be monitored. This can represent either an
external process or a Python function. In the case of an external
process the first argument is an integer representing its process
identifier (PID). In the case of a Python function, we need pass the
function and its arguments to memory_usage. We do this by passing the
tuple &lt;code&gt;(f, args, kw)&lt;/code&gt; that specifies the function, its position
arguments as a tuple and its keyword arguments as a dictionary,
respectively. This will be then executed by &lt;code&gt;memory_usage&lt;/code&gt; as
&lt;code&gt;f(*args, **kw)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let's see this with an example. Take as function NumPy's
&lt;a href=&quot;http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.pinv.html&quot;&gt;pseudo-inverse function&lt;/a&gt;. Thus
&lt;code&gt;f = numpy.linalg.pinv&lt;/code&gt; and &lt;code&gt;f&lt;/code&gt; takes one positional argument (the
matrix to be inverted) so &lt;code&gt;args = (a,)&lt;/code&gt; where &lt;code&gt;a&lt;/code&gt; is the matrix to be
inverted. Note that args must be a tuple consisting of the different
arguments, thus the parenthesis around &lt;code&gt;a&lt;/code&gt;. The third item is a
dictionary &lt;code&gt;kw&lt;/code&gt; specifying the keyword arguments. Here kw is optional
and is omitted.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;memory_profiler&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# create a random matrix&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pinv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;57.02734375&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;55.0234375&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;57.078125&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This has given me a list specifying at different time intervals &lt;code&gt;(t0,
t0 + .01, t0 + .02, ...)&lt;/code&gt; at which the measurements where taken. Now I can
use that to for example plot the memory consumption as a function of
time:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pylab&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pl&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'linalg.pinv'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Time (in seconds)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Memory consumption (in MB)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/plot_memory_pinv.png&quot; alt=&quot;Memory plot&quot; /&gt;&lt;/p&gt;
&lt;p&gt;This will give the memory usage of a single function across time, which 
might be interesting for example to detect temporaries that would be
created during the execution. &lt;/p&gt;
&lt;p&gt;Another use case for &lt;code&gt;memory_usage&lt;/code&gt; would be to see how memory behaves
as input data gets bigger. In this case we are interested in memory as
a function of the input data. One obvious way we can do this is by
calling the same function each time with a different input and take as
memory consumption the maximum consumption over time. This way we will
have a memory usage for each input.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pinv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)))&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mem_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;mf&quot;&gt;29.22&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;30.10&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;40.66&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;53.96&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is now possible to plot these results as a function of the
dimensions.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pylab&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pl&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;memory_profiler&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dims&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linspace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pinv_mem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dims&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i_dim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linalg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pinv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,)),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pinv_mem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i_dim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pinv_mem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'np.linalg.pinv'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Memory (in MB)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Dimension of the square matrix'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'upper left'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'tight'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;http://fa.bianp.net/blog/static/images/2013/plot_memory_pinv_2.png&quot; alt=&quot;Memory plot&quot; /&gt;&lt;/p&gt;</description>
	<pubDate>Thu, 03 Jan 2013 23:00:00 +0000</pubDate>
</item>
<item>
	<title>Aaron Meurer: Emacs: One year later</title>
	<guid isPermaLink="false">http://asmeurersympy.wordpress.com/?p=1168</guid>
	<link>http://asmeurersympy.wordpress.com/2013/01/01/emacs-one-year-later/</link>
	<description>&lt;p&gt;As readers of this blog may remember, back in 2011, I decided to move to a command-line based editor. For roughly two weeks in December, 2011, I exclusively used Vim, and for the same amount of time in January, 2012, I used exclusively Emacs. I had used a little of each editor in the past, but this was my first time using them to do true editing work. My experiences are chronicled in my blog posts (parts &lt;a href=&quot;http://asmeurersympy.wordpress.com/2011/12/20/vim-vs-emacs-part-1/&quot; title=&quot;1&quot;&gt;1&lt;/a&gt;, &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/01/03/vim-vs-emacs-part-2/&quot; title=&quot;2&quot;&gt;2&lt;/a&gt;, &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/01/13/vim-vs-emacs-part-3/&quot; title=&quot;3&quot;&gt;3&lt;/a&gt;, and &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/07/09/emacs-7-months-later/&quot; title=&quot;7 months later follow up&quot;&gt;7 months later follow up&lt;/a&gt;).  &lt;/p&gt;
&lt;p&gt;To summarize, I decided to use Emacs, as I found it to be much more intuitive, and much more user-friendly.  Today, January 1, marks the one-year point of my using Emacs as my sole text editor, with some exceptions (notably, I’m currently writing this blog post in the browser).  So I’d like to make some observations:&lt;/p&gt;
&lt;li&gt;Either one of these editors (Vim or Emacs) is going to really suck unless you are willing to make a serious investment in customizing them and installing nice addons. For the second point, Emacs has an advantage, because the philosophy of Vim is to be barebones whereas the philosophy of Emacs is to be featureful, so that in particular many things that were once addons of Emacs are now included in the standard installation.  For customization, on the one hand, Emacs is easier, because it has a nice interface (&lt;code&gt;M-x customize&lt;/code&gt;), but on the other hand, Vim’s scripting language is much easier to hack on than Emacs lisp (I still can’t code in Lisp to save my life; it’s a very challenging programming language).
&lt;p&gt;But my point here is that neither has really great defaults. For example, in Emacs, &lt;code&gt;M-space&lt;/code&gt; is bound to &lt;code&gt;just-one-space&lt;/code&gt;, which is great for programming.  What it does is remove all spaces around the cursor, except for one.  But to be really useful, it also should include newlines.  It doesn’t do this by default.  Rather, you have to call it with a negative argument.  So to be really useful, you have to add&lt;/p&gt;
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot;&gt;(defun just-one-space-with-newline ()
  &quot;Call just-one-space with a negative argument&quot;
  (interactive)
  (just-one-space -1))

(global-set-key (kbd &quot;M-SPC&quot;) 'just-one-space-with-newline)
&lt;/pre&gt;
&lt;p&gt;to your &lt;code&gt;.emacs&lt;/code&gt; file.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Emacs has great features, but I always have to look them up.  Or rather, I have to look up the keyboard shortcuts for them.  I only have the keyboard shortcuts memorized for the things I do every day.  I even ended up forgetting really important ones, like &lt;code&gt;M-w&lt;/code&gt; (Emacs version of copy).  And if a feature involves several keystrokes to access, forget about it (for example, rectangular selection, or any features of special modes).  If I use a new mode, e.g., for some file type that I rarely edit (like HTML), I might as well not have any of the features, other than the syntax highlighting, because I either don’t know what they are, or even if I know that they should exist (like automatic tag completion for html), I have no idea how to access them.
&lt;p&gt;There’s really something to be said about GUI editors, which give these things to users in a way that they don’t have to memorize anything.  Perhaps I should try to use the menu more.  Or maybe authors of addons should aim to make features require as little cognitive user interaction as possible (such as the excellent &lt;a href=&quot;http://cx4a.org/software/auto-complete/manual.html&quot;&gt;&lt;code&gt;auto-complete-mode&lt;/code&gt;&lt;/a&gt; I mentioned in &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/01/13/vim-vs-emacs-part-3/&quot;&gt;part 3&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt; I mention this because it is one of the things I complained about with Vim, that the keybindings were too hard to memorize.  Of course, the difference with Vim is that one has to memorize keybindings to do even the most basic of editing tasks, whereas with Emacs one can always fall back to more natural things like &lt;code&gt;Shift-Arrow Key&lt;/code&gt; to select text or &lt;code&gt;Delete&lt;/code&gt; to delete the character under the cursor (and yes, I know you can rebind this stuff in Vim; I refer you to the previous bullet point). &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;I mentioned at the end of part 3 that Vim might still be useful to learn, as vi is available literally anywhere that you have POSIX.  I honestly don’t think I would be able to use vi or vim if I had to, customization or no, unless I had my keyboard cheat sheet and a decent amount of time.  If I’m stuck on a barebones system and I can’t do anything about it, I’ll use nano/pico before I use vi.  It’s not that I hate vi. I just can’t do anything with it. It is the same to me now as it was before I used it in-depth.  I have forgotten all the keyboard shortcuts, except for &lt;code&gt;ESC&lt;/code&gt; and &lt;code&gt;i&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;I don’t use &lt;code&gt;emacsclient&lt;/code&gt; any more.  Ever since I got my new retina MacBook Pro, I don’t need it any more, because with the solid state drive starting Emacs from scratch is instantaneous.  I’m glad to get rid of it, because it had some seriously annoying glitches.&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;alias e=emacs&lt;/code&gt; to your Bash config file (&lt;code&gt;.profile&lt;/code&gt; or &lt;code&gt;.bashrc&lt;/code&gt;). It makes life much easier. “emacs” is not an easy word to type, at least on QWERTY keyboards.&lt;/li&gt;
&lt;li&gt;I still feel like I am not nearly as efficient in Emacs as I could be. On the one hand, I know there are built-in features (like rectangular selection) that I do not take advantage of enough.  I have been a bit lazy with customization: there are a handful of things that I do often that require several keystrokes, but I still haven’t created custom keyboard shortcuts for (off the top of my head: copying and pasting to/from the Mac OS X clipboard and rigidly indenting/dedenting a block of text (&lt;code&gt;C-u 4 C-x TAB&lt;/code&gt;, actually &lt;code&gt;C-c u 4 C-x TAB&lt;/code&gt;, since I did the sensible thing and rebound &lt;code&gt;C-u&lt;/code&gt; to clear to the previous newline, and bound &lt;code&gt;universal-argument&lt;/code&gt; to &lt;code&gt;C-c u&lt;/code&gt;) come to mind).
&lt;p&gt;I feel as if I were to watch someone who has used Emacs for a long time that I would learn a lot of tricks.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;I really should learn Emacs lisp. There are a lot of little customizations that I would like to make, but they are really niche, and can only be done programmatically.  But who has the time to learn a completely new programming language (plus a whole library, as just knowing Lisp is useless if you don’t know the proper Emacs funtions and variables and coding styles)?&lt;/li&gt;
&lt;li&gt;I’ve still not found a good visual browser for jumping to function definitions in a file (mostly Python function definitions, but also other kinds of headers for other kinds of files).  The best I’ve found is &lt;code&gt;imenu&lt;/code&gt;. If you know of anything, please let me know.  One thing I really liked about Vim was the &lt;a href=&quot;http://www.vim.org/scripts/script.php?script_id=273&quot;&gt;tag list&lt;/a&gt; extension, which did this perfectly (thanks to commenter &lt;a href=&quot;http://asmeurersympy.wordpress.com/2011/12/20/vim-vs-emacs-part-1/#comment-424&quot;&gt;Scott&lt;/a&gt; for pointing it out to me).  I’ve been told that Cedet has something like this, but every time I try to install it, I run into some issues that just seem like way too much work (I don’t remember what they are, it won’t compile or something, or maybe it just wants to do just way too much and I can’t figure out how to disable everything except for the parts I want).  &lt;/li&gt;
&lt;li&gt;If you ever code in C, add the following to your Makefile
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot;&gt;check-syntax:
	$(CC) -o nul $(FLAGS) -S $(CHK_SOURCES)
&lt;/pre&gt;
&lt;p&gt;(and if you don’t use a Makefile, start using one now).  This is assuming you have &lt;code&gt;CC&lt;/code&gt; and &lt;code&gt;FLAGS&lt;/code&gt; defined at the top (generally to something like &lt;code&gt;cc&lt;/code&gt; and &lt;code&gt;-Wall&lt;/code&gt;, respectively). Also, add the following to your &lt;code&gt;.emacs&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot;&gt;;; ===== Turn on flymake-mode ====

(add-hook 'c-mode-common-hook 'turn-on-flymake)
(defun turn-on-flymake ()
  &quot;Force flymake-mode on. For use in hooks.&quot;
  (interactive)
  (flymake-mode 1))

(add-hook 'c-mode-common-hook 'flymake-keyboard-shortcuts)
(defun flymake-keyboard-shortcuts ()
  &quot;Add keyboard shortcuts for flymake goto next/prev error.&quot;
  (interactive)
  (local-set-key &quot;\M-n&quot; 'flymake-goto-next-error)
  (local-set-key &quot;\M-p&quot; 'flymake-goto-prev-error))
&lt;/pre&gt;
&lt;p&gt;The last part adds the useful keyboard shortcuts &lt;code&gt;M-n&lt;/code&gt; and &lt;code&gt;M-p&lt;/code&gt; to move between errors.  Now, errors in your C code will show up automatically as you type.  If you use the command line version of emacs like I do, and not the GUI version, you’ll also need to install the &lt;a href=&quot;http://www.emacswiki.org/emacs/flymake-cursor.el&quot;&gt;flymake-cursor&lt;/a&gt; module, which makes the errors show up in the mode line, since otherwise it tries to use mouse popups.  You can change the colors using &lt;code&gt;M-x customize-face&lt;/code&gt; (search for “flymake”). &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;I never got flymake to work with LaTeX.  Does anyone know how to do it? It seems it is hardcoded to use MikTeX, the Windows version of LaTeX. I found some stuff, but none of it worked.
&lt;p&gt;Actually, what I really would like is not syntax checking (I rarely make syntax mistakes in LaTeX any more), but rather something that automatically builds the PDF constantly as I type.  That way, I can just look over at the PDF as I am writing (I use an external monitor for this. I highly recommend it if you use LaTeX, especially one of those monitors that swivels to portrait mode).  &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;If you use Mac OS X, you can use the very excellent &lt;a href=&quot;http://pqrs.org/macosx/keyremap4macbook/&quot;&gt;KeyRemap4MacBook&lt;/a&gt; program to make regular Mac OS X programs act more like Emacs.  Mac OS X already has many Emacs shortcuts built in (like &lt;code&gt;C-a&lt;/code&gt;, &lt;code&gt;C-e&lt;/code&gt;, etc.), but that only works in Cocoa apps, and it doesn’t include any meta key shortcuts.  This lets you use additional shortcuts literally everywhere (don’t worry, it automatically doesn’t use them in the Terminal), including an emulator for &lt;code&gt;C-space&lt;/code&gt; and some &lt;code&gt;C-x&lt;/code&gt; commands (like &lt;code&gt;C-x C-s&lt;/code&gt; to &lt;code&gt;Command-s&lt;/code&gt;).  It doesn’t work on context sensitive shortcuts, unfortunately, unless the operating system already supports it with another keyboard shortcut (e.g., it can map &lt;code&gt;M-f&lt;/code&gt; to &lt;code&gt;Option-right arrow&lt;/code&gt;).  For example, it can’t enable moving between paragraphs with &lt;code&gt;C-S-{&lt;/code&gt; and &lt;code&gt;C-S-}&lt;/code&gt;.  If anyone knows how to do that, let me know. &lt;/li&gt;
&lt;li&gt;For about a month this summer, I had to use a Linux laptop, because my Mac broke and my new Mac took a month to arrive (the downside to ordering a new computer immediately after it is announced by Apple).  At this point, my saving of all my customizations to &lt;a href=&quot;http://pqrs.org/macosx/keyremap4macbook/&quot;&gt;GitHub&lt;/a&gt; really helped a lot.  I created a new branch for the Linux computer (because several things in my customizations were Mac specific), and just symlinked the files I wanted.  A hint I can give to people using Linux is to use Konsole.  The Gnome terminal sucks.  One thing I never figured out is how to make Konsole (or any other Terminal for that matter) to send Control-Shift shortcuts to Emacs (see &lt;a href=&quot;http://superuser.com/q/439961/39697&quot; rel=&quot;nofollow&quot;&gt;http://superuser.com/q/439961/39697&lt;/a&gt;).   I don’t use Linux any more at the moment, but if anyone knows what was going on there, add an answer to that question. &lt;/li&gt;
&lt;li&gt;In &lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/01/13/vim-vs-emacs-part-3/&quot;&gt;part 3&lt;/a&gt; mentioned that &lt;a href=&quot;http://www.dr-qubit.org/predictive/predictive-user-manual/html/index.php&quot;&gt;predictive mode&lt;/a&gt; was cool, but not very useful.  What it does is basically add tab completion for every word in the English language.  Actually, I’ve found using auto-complete-mode even when editing text (or LaTeX) to be very useful.  Unlike predictive mode, it only guesses words that you’ve already typed  (it turns out that you tend to type the same words over and over, and doubly so if those words are LaTeX math commands).  Also, predictive mode has a set order of words, which supposedly helps to use it with muscle memory, whereas auto-complete-mode tries to learn what words you are more likely to use based on some basic statistical machine-learning.  Also, auto-complete-mode has a much better visual UI and smarter defaults than predictive mode. The result is that it’s actually quite useful and makes typing plain text, as well as LaTeX (actually, pretty much anything, as long as you tend to use the same words repeatedly) much faster.  I recommend enabling auto-complete-mode almost everywhere using hooks, like
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot;&gt;(add-hook 'latex-mode-hook 'auto-complete-mode)
(add-hook 'LaTeX-mode-hook 'auto-complete-mode)
(add-hook 'prog-mode-hook 'auto-complete-mode)
;; etc.
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;At the end of the day, I’m pretty happy with Emacs.  I’ve managed to fix most of the things that make it annoying, and it is orders of magnitude more powerful than any GUI editor or IDE I’ve ever seen, especially at just basic text editing, which is the most important thing (I can always use another program for other things, like debugging or whatever).  The editor uses the basic shortcuts that I am used to, and is quite efficient to write in.  Extensions like auto-complete-mode make using it much faster, though I could use some more extensions to make it even better (namely, a better isearch and a better imenu). Regarding Vim vs. Emacs, I’d like to quote something I said back in my &lt;a href=&quot;http://asmeurersympy.wordpress.com/2011/12/20/vim-vs-emacs-part-1&quot;&gt;first blog post&lt;/a&gt; about Vim over a year ago:&lt;br /&gt;
&lt;blockquote&gt;&lt;p&gt;Vim is great for text &lt;em&gt;editing&lt;/em&gt;, but not so hot for text &lt;em&gt;writing&lt;/em&gt; (unless you always write text perfectly, so that you never need to leave insert mode until you are done typing). Just the simple act of deleting a mistyped word (yes, word, that happens a lot when you are decently fast touch typist) takes several keystrokes, when it should in my opinion only take one (two if you count the meta-key).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Needless to say, I find Emacs to be great for both text editing and text writing. &lt;/p&gt;&lt;/li&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1168/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1168/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1168&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Tue, 01 Jan 2013 09:51:21 +0000</pubDate>
</item>
<item>
	<title>Aaron Meurer: 2012 in review</title>
	<guid isPermaLink="false">http://asmeurersympy.wordpress.com/?p=1165</guid>
	<link>http://asmeurersympy.wordpress.com/2012/12/30/2012-in-review/</link>
	<description>&lt;p&gt;The WordPress.com stats helper monkeys prepared a 2012 annual report for this blog.&lt;/p&gt;
&lt;p&gt;	&lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/annual-report/&quot;&gt;&lt;img src=&quot;http://www.wordpress.com/wp-content/mu-plugins/annual-reports/img/2012-emailteaser.png&quot; alt=&quot;&quot; width=&quot;100%&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Here’s an excerpt:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;4,329 films were submitted to the 2012 Cannes Film Festival. This blog had &lt;strong&gt;20,000&lt;/strong&gt; views in 2012. If each view were a film, this blog would power 5 Film Festivals&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://asmeurersympy.wordpress.com/2012/annual-report/&quot;&gt;Click here to see the complete report.&lt;/a&gt;&lt;/p&gt;
&lt;br /&gt;  &lt;a href=&quot;http://feeds.wordpress.com/1.0/gocomments/asmeurersympy.wordpress.com/1165/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;http://feeds.wordpress.com/1.0/comments/asmeurersympy.wordpress.com/1165/&quot; alt=&quot;&quot; border=&quot;0&quot; /&gt;&lt;/a&gt; &lt;img src=&quot;http://stats.wordpress.com/b.gif?host=asmeurersympy.wordpress.com&amp;amp;blog=7467151&amp;amp;post=1165&amp;amp;subd=asmeurersympy&amp;amp;ref=&amp;amp;feed=1&quot; alt=&quot;&quot; border=&quot;0&quot; width=&quot;1&quot; height=&quot;1&quot; /&gt;</description>
	<pubDate>Sun, 30 Dec 2012 23:07:19 +0000</pubDate>
</item>

</channel>
</rss>
